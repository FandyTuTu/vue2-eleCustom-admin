{"version":3,"sources":["webpack:///./node_modules/tinymce/themes/silver/theme.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/plugins/textcolor/plugin.js","webpack:///./src/views/article/index.vue?96a9","webpack:///./src/components/TinymceText.vue?fe80","webpack:///src/components/TinymceText.vue","webpack:///./src/components/TinymceText.vue?5c22","webpack:///./src/components/TinymceText.vue","webpack:///src/views/article/index.vue","webpack:///./src/views/article/index.vue?e98f","webpack:///./src/views/article/index.vue","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/colorpicker/index.js","webpack:///./node_modules/tinymce/plugins/colorpicker/plugin.js","webpack:///./public/tinymce/langs/zh_CN.js","webpack:///./node_modules/tinymce/plugins/textcolor/index.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/tinymce/plugins/contextmenu/plugin.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/wordcount/index.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/tinymce/plugins/wordcount/plugin.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/contextmenu/index.js","webpack:///./src/views/article/index.vue?2f08"],"names":["noop","noarg","f","compose","fa","fb","args","_i","arguments","length","apply","compose1","fbc","fab","a","constant","value","identity","x","curry","fn","initialArgs","restArgs","all","concat","not","t","die","msg","Error","never","always","global$1","tinymce","util","Tools","resolve","__assign","Object","assign","s","i","n","p","prototype","hasOwnProperty","call","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","r","Array","k","j","jl","SimpleResultType","none","NONE","eq","o","isNone","thunk","id","me","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","v","elementEq","b","from","Optional","typeOf","isPrototypeOf","constructor","name","String","isType","type","isSimpleType","isString","isObject","isArray","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","len","nativeSlice","slice","nativeIndexOf","nativePush","push","rawIndexOf","ts","xs","contains","range","num","chunk","array","size","eachr","partition","pass","fail","arr","foldr","acc","foldl","findUntil","until","find","findIndex","flatten","reverse","difference","a1","a2","mapToObject","sort","comparator","copy","get","head","last","from$1","findMap","_opt","_f","mapError","_","onValue","toOptional","isValue","isError","error","message","opt","onError","fromOption","err","Result","res","stype","serror","svalue","partition$1","results","values","errors","obj","val","map$1","Value","bind$1","bindError","toResult","fromResult","SimpleResult","keys","each$1","props","map$2","tupleMap","tuple","objAcc","internalFilter","onTrue","onFalse","filter$1","mapToArray","find$1","get$1","key","has","hasNonNullableKey","generate","cases","constructors","adt","acase","count","keys$1","argLength","match","branches","branchKeys","join","allReqd","reqKey","foldArgs","target","log","label","console","params","Adt","hasOwnProperty$1","shallow","old","nu","deep","bothObjects","deepMerge","baseMerge","merger","objects","ret","curObject","merge","cached","called","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","mergeWith","base","partition$2","bothErrors","firstError","secondError","bothValues","result","exclude","fields","wrap","_a","wrapAll","keyvalues","kv","exclude$1","wrap$1","wrapAll$1","mergeValues","mergeErrors","consolidate","objs","partitions","mergeValues$1","mergeErrors$1","consolidateObj","consolidateArr","ResultCombine","formatObj","input","JSON","stringify","formatErrors","es","path","getErrorInfo","missingStrict","missingKey","missingBranch","branch","unsupportedFields","unsupported","custom","adt$1","field","state","strictAccess","fallbackAccess","fallbackThunk","optionAccess","optionDefaultedAccess","cExtractOne","strength","okey","presence","prop","bundle","av","extract","bundleAsOption","optValue","outcome","ov","baseThunk","instantiator","cExtract","valueThunk","getDelegate","value$1","validator","getSetKeys","objOfOnly","delegate","objOf","fieldNames","extra","fieldStrings","_instantiator","arrOf","oneOf","props_1","setOf","validateKeys","validatedKeys","validKeys","schema","vk","desc","processor","getP","anyValue","arrOfObj","chooseFrom","ch","vp","choose","choice","chosen","_anyValue","arrOfObj$1","objFields","arrOfVal","valueThunkOf","valueOf","setOf$1","errs","asRaw","extraction","errInfo","formatError","asRawOrDie","chooseProcessor","choose$1","thunkOf","anyValue$1","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","next","done","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictBoolean","strictFunction","forbid","_v","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","optionObjOfOnly","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedPostMsg","defaultedArrayOf","defaultedObjOf","state$1","Cell","initial","set","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","fromDom","fromTag","tag","node","fromText","text","createTextNode","dom","fromPoint","docElm","y","elementFromPoint","SugarElement","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find$2","agent","major","minor","group","Number","replace","nu$1","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","detect$1","candidates","candidate","search","detectBrowser","browsers","version","current","detectOs","oses","UaString","checkRange","str","substr","start","contains$1","endsWith","suffix","blank","trim","normalVersionRegex","checkContains","uastring","PlatformInfo","edge","chrome","ie","opera","firefox","safari","unknown$1","nu$2","info","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","Browser","windows","ios","android","linux","osx","solaris","freebsd","chromeos","unknown$2","nu$3","isOS","isWindows","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$2","deviceType","PlatformDetection","query","window","matchMedia","matches","platform","navigator","detect$3","compareDocumentPosition","documentPositionContainedBy","Node","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","querySelectorAll","one","querySelector","eq$1","e1","e2","regularContains","d1","d2","ieContains","contains$2","ensureIsRoot","isRoot","ancestor","transform","stop","parentNode","el","transformed","closest","isSource","component","simulatedEvent","event","nu$4","parts","all$1","handlers","handler","any","read","can","abort","run","fuse","constant$1","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitionend","selectstart","prefixName","alloy","tap","focus","postBlur","postPaste","receive","execute","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","emit","dispatchWith","emitWith","properties","emitExecute","dispatch","data","getSystem","triggerEvent","dispatchEvent","derive","configs","predicate","preventDefault","prevent","runActionExtra","action","runOnName","runOnSourceName","redirectToUid","uid","getByUid","redirectee","redirectToPart","detail","partName","partUids","runWithTarget","ev","getByDom","closest$1","c","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","Function","nodeName","isType$1","isElement","isText","isDocument","isDocumentFragment","owner","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","nextSibling","children","child","index","cs","firstChild","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","body","isInShadowRoot","getShadowRoot","getShadowHost","getOriginalEventTarget","isOpenShadowHost","composed","composedPath","shadowRoot","before","marker","parent$1","insertBefore","after","sibling","append","prepend","firstChild$1","appendChild","appendAt","before$1","elements","append$1","empty","textContent","rogue","remove","removeChild","unwrap","wrapper","children$1","fromHtml$1","get$2","content","owner$1","docDom","fragment","createDocumentFragment","contentElements","getOuter","container","clone","cloneNode","rawSet","setAttribute","set$1","setAll","attrs","get$3","getAttribute","getOpt","has$1","hasAttribute","remove$1","removeAttribute","original","isDeep","shallow$1","getHtml","isRecursive","originator","events","warn","DefaultEvents","freeze","__proto__","unique","generate$1","prefix","date","Date","time","getTime","random","Math","floor","idAttr","prefix$1","idAttr$1","write","writeOnly","defineProperty","writable","read$1","generate$2","make","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","markAsBehaviourApi","apiName","apiFunction","endIndex","openBracketIndex","parameters","substring","split","toFunctionAnnotation","cleanParameters","markAsExtraApi","extraName","markAsSketchApi","premadeTag","premade","comp","getPremade","spec","makeApi","rest","getApis","NoState","init","nu$5","readState","generateFrom","validated","behaviours","list","optBlobThunk","output","blob","config","getBehaviours","bData","getData","byInnerKey","indexKey","chain","nu$6","classes","attributes","styles","merge$1","defnA","mod","combine","baseMod","modsByBehaviour","behaviour","exhibit","byAspect","modification","combineObjects","combinedClasses","combinedAttributes","combinedStyles","sortKeys","keyName","order","sorted","aKey","bKey","aIndex","bIndex","uncurried","purpose","curried","cHandler","curryArgs","descHandler","extraArgs","getCurried","behaviourTuple","nameToHandlers","groupByEvents","behaviourEvents","combine$1","eventOrder","byEventName","combineGroups","assemble","rawHandler","missingOrderError","eventName","tuples","fuse$1","sortedTuples","combined","assembled","baseBehaviour","toInfo","toDefinition","domChildren","components","toModification","domModification","toEvents","read$2","attr","add","remove$2","supports","classList","get$4","add$1","clazz","remove$3","add$2","cleanClass","remove$4","has$2","add$3","remove$5","isSupported$1","style","getPropertyValue","inBody","getBody","internalSet","property","setProperty","internalRemove","removeProperty","set$2","setAll$1","css","setOptions","get$5","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","item","isValidValue","remove$6","reflow","offsetWidth","get$6","set$3","renderToDom","definition","subject","innerHtml","getBehaviours$1","generateFrom$1","generate$3","getDomDefinition","bList","infoModification","baseModification","getEvents","baseEvents","getMe","systemApi","bBlob","modDefinition","subcomponents","connect","newApi","disconnect","syncComponents","subs","hasConfigured","apis","behaviourName","buildSubcomponents","build$1","buildFromSpec","userSpec","specEvents","completeSpec","external","extSpec","uids","userSpecWithUid","prebuilt","premade$1","Dimension","getOffset","h","parseFloat","aggregate","parseInt","isNaN","max","cumulativeInclusions","absoluteMax","api","getBoundingClientRect","height","offsetHeight","get$7","getOuter$1","setMax","inclusions","absMax","left","top","translate","SugarPosition","boxPosition","box","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","api$1","set$4","get$8","getOuter$2","setMax$1","mkEvent","kill","fromRawEvent","rawEvent","stopPropagation","clientX","clientY","handle","binder","useCapture","wrapped","addEventListener","unbind","bind$2","capture","removeEventListener","get$9","_DOC","to","scrollTo","get$a","_win","bounds","width","right","bottom","getBounds","scroll","clientWidth","clientHeight","visualViewport","pageLeft","pageTop","walkUp","navigation","frame","view","pathTo","d","paths","frameElement","Navigation","find$3","frames","offset","loc","pointed","point","rect","bounds$1","xy","w","absolute$1","position","ClosestOrAncestor","EventConfiguration","ancestor$1","descendant","descend","child_1","closest$2","ancestor$2","descendant$1","closest$3","is$1","find$4","queryElem","dependent","dep","manager","ariaId","link","unlink","isAriaPartOf","isPartOf","unknown$3","AttributeValue","eventConfig","makeEventLogger","initialTarget","sequence","startTime","logEventCut","_name","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","finishTime","processEvent","status","patterns","NORMAL","noLogger","LOGGING","logger","STOP","getTrace","stack","lines","line","ignoreEvent","monitorEvent","menuFields","itemFields","itemSchema","_initSize","itemMarkers","tieredMenuMarkers","markers","required","onPresenceHandler","fieldName","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","nu$7","bubble","direction","boundsRestriction","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","cata","cataVertical","middle","cataHorizontal","getRestriction","anchor","restriction","restrictions","dir","adjustBounds","boundsRestrictions","bubbleOffsets","applyRestriction","bubbleOffset","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","eastX","middleX","westX","northY","southY","centreY","eastEdgeX","westEdgeX","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","west$1","all$2","allRtl","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","chooseChannels","channels","universal","events$1","receiveConfig","channelMap","receivingData","targetChannels","channelInfo","channelSchema","onReceive","ActiveReceiving","ReceivingSchema","executeEvent","bConfig","bState","executor","loadEvent","_simulatedEvent","create","active","configSchema","schemaSchema","doCreate","createModes","modes","wrapApi","bName","revokeBehaviour","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","modeSchema","createModes$1","branchKey","Receiving","posConfig","useFixed","ActivePosition","getDocument","focus$1","blur","hasFocus","root","activeElement","preserve","refocus","focused","oldFocus","newFocus","NuPositionCss","applyPositionCss","addPx","adt$3","relative","fixed","positionWithDirection","posName","decision","decisionX","decisionY","decisionWidth","decisionHeight","decisionRight","decisionBottom","reposition","origin","toBox","rel","viewport$1","pos","removeScroll","outerScroll","cata$1","onNone","onRelative","onFixed","anchorBox","box$1","cycleBy","delta","min","clamp","adt$4","fit","nofit","calcReposition","newX","newY","boundsX","boundsY","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","xFit","yFit","sizeInBounds","deltaW","abs","deltaH","maxX","maxY","limitX","limitY","attempt","candidateX","candidateY","bubbleLeft","bubbleTop","adjustedBounds","boundsBottom","boundsRight","upAvailable","downAvailable","maxHeight","westAvailable","eastAvailable","maxWidth","on","classesOn","off","classesOff","candidateYforTest","attempts","elementBox","panelWidth","panelHeight","attemptBestFit","layout","attemptLayout","newReposition","newDeltaW","newDeltaH","improved","abc","bestNext","elementSize","options","preference","setClasses","classInfo","setHeight","maxHeightFunction","setWidth","maxWidthFunction","setMaxHeight","anchored","available","expandable","defaultOr","dephault","simple","layouts","overrideOptions","go","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","nu$9","onDirection","isLtr","isRtl","getDirection","FocusInsideModes","Attribute","isBottomToTopDir","BottomToTop","schema$1","get$b","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","placement","anchorInfo","hotspot","overrides","placer","HotspotAnchor","placement$1","MakeshiftAnchor","adt$5","screen","toFixed","toAbsolute","sum","points","sumAsFixed","positions","sumAsAbsolute","absolute$2","hasSameOwner","frameOwner","compOwner","getRootPoint","capRect","newLeft","newTop","newWidth","newHeight","calcNewAnchor","optBox","rootPoint","topLeft","layoutsLtr","showAbove","layoutsRtl","placement$2","nodeBox","NodeAnchor","zeroWidth","nbsp","create$2","soffset","finish","foffset","SimRange","adt$6","cata$2","onBefore","onOn","onAfter","getStart","situ","before$2","after$1","Situ","adt$7","domRange","exact","exactFromRange","simRange","getStart$1","selection","rng","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","relative$1","getWin","range$1","SimSelection","setStart","setStartBefore","setStartAfter","setFinish","setEndBefore","setEnd","setEndAfter","relativeToNative","finishSitu","createRange","exactToNative","toRect","getFirstRect","rects","getClientRects","adt$8","fromRange","startOffset","endContainer","endOffset","getRanges","doDiagnose","ranges","collapsed","reversed","rev","diagnose","asLtrRange","diagnosis","NodeValue","getOption","nodeValue","api$2","get$c","getEnd","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","last$1","descendantRtl","descendants","makeRange","after$2","same","getNativeSelection","getSelection","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","focus_1","anchorOffset","focusOffset","getExact","sel","getFirstRect$1","descendOnce","descendOnce$1","getAnchorSelection","modStart","modFinish","placement$3","selectionBox","optRect","rawRect","targetElement","SelectionAnchor","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","placement$4","submenuInfo","SubmenuAnchor","AnchorSchema","submenu","makeshift","getFixedOrigin","getRelativeOrigin","place","anchoring","placee","position$1","posState","positionWithin","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","doPlace","vis","getMode","pConfig","_pState","PositionApis","PositionSchema","Positioning","fireDetaching","fireAttaching","attach","detachChildren","childComp","replaceChildren","newChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","detachChildren$1","attachSystem","guiSystem","attachSystemWith","attachSystemAfter","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","open","newState","onOpen","setContent","openWhileCloaked","transaction","cloak","decloak","close","onClose","clear","isOpen","_sandbox","_sConfig","isPartOf$1","getState","store","cssKey","newValue","restore","oldValue","_sState","sink","cloakVisibilityAttr","hasPosition","SandboxApis","events$2","sandboxConfig","sandboxState","ActiveSandbox","SandboxSchema","contents","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isPart","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","setValue","getValue","getState$1","RepresentApis","events$3","resetOnDom","_se","ActiveRepresenting","memory","mode","isNotSet","manual","dataset","dataByValue","dataByText","lookup","itemString","update","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","init$1","RepresentState","setValue$1","onSetValue","getValue$1","getDataKey","getFallbackEntry","onLoad$1","initialValue","onUnload$1","DatasetStore","getValue$2","_repState","setValue$2","onLoad$2","ManualStore","setValue$3","getValue$3","onLoad$3","initVal","onUnload$2","MemoryStore","RepresentSchema","Representing","setValueFrom","source","field$1","forbidden","get$d","dump","augment","SketchBehaviours","_placeholder","adt$9","single","multiple","isSubstituted","subPlaceholder","compSpec","placeholders","newSpec","scan","uiType","substitute","req","childSpecs","substituted","valuesThunk","preprocessor","preprocess","substituteAll","oneReplace","replacements","used","substitutePlaces","ps","ph","placeholder","adt$a","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","asCommon","convert","adtConstructor","partSchema","external$1","PartType","combine$2","partSpec","partValidated","defaults","internals","externals","pname","factory","_partSpec","_partValidated","units","u","generate$4","np","g","doGenerateOne","generateOne","schemas","names","substitutes","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","partSchemas","partUidsSchemas","asRawOrDie$1","baseS","single$1","specWithUid","supplyUid","composite","partUidsSchema","components$1","hasUid","isSketchSpec","singleSchema","compositeSchema","single$2","rawConfig","configFields","extraApis","composite$1","partFields","cat","lift2","oa","ob","lift3","oc","mapFrom","someIf","inside","getCurrent","composeConfig","_composeState","ComposeApis","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","dehighlightAll","dehighlight$1","isHighlighted","highlight$1","onHighlight","highlightFirst","getFirst","firstComp","highlightLast","getLast","lastComp","highlightAt","getByIndex","highlightBy","getCandidates","targetComp","queryTarget","getHighlighted","_hState","itemClass","getDelta","selected","dest","getPrevious","getNext","HighlightApis","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","shiftKey","isControl","ctrlKey","isNotShift","rule","classification","choose$2","transitions","transition","reportFocusShifting","prevFocus","noChange","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","rules","onFocusHandler","focusInside","OnFocusMode","focusIn","tryGoInsideComponent","isEnterOrSpace","OnEnterOrSpaceMode","keyboardEvents","create$3","cyclicField","isVisible","tabbingConfig","visibilitySelector","findInitial","tabstops","visibles","firstTabstop","findCurrent","focusManager","isTabstop","useTabstopAt","_tabbingState","goFromTabstop","stopIndex","cycle","cyclic","tabstop","optStopIndex","goBackwards","navigate","goForwards","onEnter","exit","onEscape","AcyclicType","CyclicType","doDefaultExecute","defaultExecute","isComplex","stopEventForFirefox","_component","schema$4","execute$1","executeConfig","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","ExecutionType","flatgrid","dimensions","setGridSize","numRows","numColumns","getNumRows","getNumColumns","init$2","KeyingState","useH","movement","move","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","isHidden","locate","locateVisible","visible","findIndex$1","withGrid","numCols","oldRow","oldColumn","address","newIndex","row","column","cycleHorizontal","onLastRow","colsInRow","newColumn","cycleVertical","newRow","newCol","cycleRight","cycleLeft","cycleUp","cycleDown","schema$5","gridConfig","_gridState","first","execute$2","doMove","gridState","identified","handleTab","captureTab","doEscape","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","isDisabledButton","tryCycle","schema$6","findCurrent$1","flowConfig","execute$3","focusIn$1","_state","getInitial","moveLeft$1","moveRight$1","doMove$1","flowState","executeOnMove","doEscape$1","getKeydownRules$2","_flowState","westMovers","allowVertical","eastMovers","getKeyupRules$2","FlowType","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","cycleRight$1","cycleLeft$1","cycleUp$1","cycleDown$1","moveLeft$2","moveRight$2","moveUp","moveDown","schema$7","focusIn$2","matrixConfig","previousSelector","selectors","execute$4","toMatrix","rows","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","fireShiftTab","menuState","moveOnTab","fireTab","getKeydownRules$4","getKeyupRules$4","MenuType","schema$9","getKeydownRules$5","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","getKeyupRules$5","stopSpaceKeyup","SpecialType","acyclic","flow","flatgrid$1","execution","menu","special","KeyboardBranches","isFlatgridState","keyState","Keying","keyConfig","sendFocusIn","set$5","replaceConfig","replaceState","insert","childSpec","append$2","appendee","prepend$1","prependee","remove$7","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","replaceBy","replaceePred","ReplaceApis","Replacing","events$4","eventHandlers","focus$2","focusConfig","ignore","onFocus","blur$1","isFocused","FocusApis","exhibit$1","tabindex","events$5","stopMousedown","ActiveFocus","FocusSchema","Focusing","SetupBehaviourCellState","initialState","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","toggleClass","toggle","set$6","on$1","isOn","onLoad$4","ToggleApis","exhibit$2","events$6","load","toggleOnExecute","ActiveToggle","updatePressed","syncWithExpanded","updateExpanded","updateSelected","updateChecked","ToggleSchema","pressed","checked","expanded","Toggling","pointerEvents","onClick","events$7","optAction","executeHandler","hoverEvent","focusEvent","onHover","hover","focus$3","builder","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$a","builder$1","schema$b","owner$2","builder$2","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","schema$c","itemSchema$1","separator","configureGrid","movementInfo","configureMatrix","rowSelector","configureMenu","parts$1","itemInfo","unit","fakeFocus","schema$d","grid","focus$4","make$1","_spec","_externals","menuBehaviours","selectedItem","role","Menu","transpose","trace","byItem","byMenu","triggerItem","triggerMenu","generate$5","menus","expansions","menuItems","menuPaths","_triggerItem","init$3","primary","directory","isClear","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","getTriggeringItem","menuValue","getTriggerData","getItemByValue","getPreparedMenu","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggeringPath","itemValue","extraPath","lookupItem","revPath","triggers","menuIndex","expand","collapse","refresh","lookupMenu","extractPreparedMenu","otherMenus","menuValues","getPrimary","getMenus","prep","LayeredState","make$2","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","buildMenus","primaryName","makeSketch","nbMenu","layeredState","setup","componentMap","toDirectory","getItemValue","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","getSubmenuParents","parentItems","itemComp","updateAriaExpansions","updateMenuPath","latestMenuName","menuPrep","activeMenu","buildIfRequired","expandRight","HighlightSubmenu","activeMenuPrep","onOpenSubmenu","collapseLeft","onCollapseMenu","updateView","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","HighlightParent","getActiveItem","collapseMenuApi","currentItem","highlightPrimary","extractMenuFromContainer","repositionMenus","maybeActivePrimary","allMenus","preparedMenus","primaryMenu","onRepositionMenu","collapseMenu","tmenuBehaviours","_keyInfo","selectedMenu","collapseItem","tieredData","singleData","collapseItem$1","tieredMenu","tmenu","makeMenu","menuSandbox","menuSpec","lazySink","isFirstTierSubmenu","triggeringPaths","getSubmenuLayouts","submenuTriggers","st","submenuLayouts","isPartOfRelated","related","getRelated","thing","showAt","showWithin","showWithinBounds","showMenuAt","showMenuWithinBounds","hide","getContent","inlineBehaviours","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","InlineView","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","global$2","factory$1","lookupAttr","getModAttributes","roleAttrs","buttonBehaviours","Button","record","anyInSystem","asSpec","defaultIcon","icons","get$e","getFirst$1","notificationIconMap","success","warning","factory$2","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","icon","level","memButton","iconProvider","onAction","closeButton","Notification","NotificationManagerImpl","editor","extras","uiMothership","backstage","getLayoutDirection","prePositionNotifications","notifications","notification","moveTo","positionNotifications","firstItem","moveRel","getEl","settings","closeCallback","hideCloseButton","timeout","notificationWrapper","progressBar","shared","providers","getSink","header","isPositionedAtTop","setTimeout","layoutDirection_1","nodeAnchor","anchors","nuText","getArgs","ItemResponse","rate","timer","cancel","clearTimeout","throttle","last$2","global$3","isBoundary","isBlock","getContentEditable","repeatLeft","process","rootNode","backwards","autocompleteSelector","create$4","detect$4","getNode","getDoc","extractContents","insertNode","elm","normalize","setCursorLocation","isValidTextRange","getText","isWhitespace","chr","stripTriggerChar","triggerCh","findChar","char","charAt","findStart","initRange","minChars","findTriggerChIndex","getParent","getRoot","spot","cloneRange","triggerCharIndex","lastIndexOf","triggerChar","getContext","createRng","selectNode","onKeypress","redirectKeyToItem","getItem","getView","isActive","cancelIfNecessary","isMenuOpen","stopImmediatePropagation","isProcessingAction","AutocompleterEditorEvents","global$4","point$1","isText$1","isElement$1","toLast","toLeaf","isPreviousCharContent","leaf","isStartOfWord","getTriggerContext","database","triggerChars","getDatabase","getRng","context","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetchResult","fetch","maxResults","then","matchText","columns","highlightOn","separatorMenuItemSchema","createSeparatorMenuItem","autocompleterItemSchema","autocompleterSchema","createSeparatorItem","createAutocompleterItem","createAutocompleter","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","createContextForm","contextToolbarSchema","createContextToolbar","stringArray","register","popups","ui","registry","getAll","popup","datasetValues","dv","ToolbarMode","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","groupHeadingClass","iconClass","textClass","accessoryClass","caretClass","checkmarkClass","activeClass","iconClassRtl","containerClass","containerColumnClass","containerRowClass","containerAlignRightClass","containerAlignLeftClass","containerValignTopClass","containerValignMiddleClass","containerValignBottomClass","classForPreset","presets","forMenu","hasIcons","markers$1","menuClasses","dom$1","chunk$1","rowDom","chunks","forSwatch","forToolbar","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","forHorizontalCollection","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$2","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","createCardMenuItem","choiceMenuItemSchema","createChoiceMenuItem","fancyTypes","fancyMenuItemSchema","createFancyMenuItem","menuItemSchema","createMenuItem","nestedMenuItemSchema","createNestedMenuItem","toggleMenuItemSchema","createToggleMenuItem","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","ceil","namedEvents","unnamedEvents","SimpleBehaviours","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","setComponents","tState","specs","getTooltip","tooltip","TooltippingApis","events$8","tooltipConfig","clearTooltip","clearTimer","show","isShowing","tooltipDom","tooltipComponents","setTooltip","resetTimer","delay","ActiveTooltipping","TooltippingSchema","init$4","TooltippingState","Tooltipping","escape","global$5","global$6","nativeDisabled","onLoad$5","disableConfig","disableState","disabled","disable","enable","hasNative","useNative","nativeIsDisabled","nativeDisable","nativeEnable","ariaIsDisabled","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","set$7","DisableApis","exhibit$3","events$9","ActiveDisable","DisableSchema","Disabling","global$7","getSkinUrl","skin","getParam","skinUrl","skinName","documentBaseURI","baseURL","isReadOnly","isSkinDisabled","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","getUserStyleFormats","isMergeStyleFormats","getLineHeightFormats","getRemovedMenuItems","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","getToolbarGroups","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerSelector","isToolbarPersist","fixedContainerElement","inline","useFixedContainer","getUiContainer","fixedContainer","isDistractionFree","isStickyToolbar","isDraggableModal","getMenubar","getToolbar","getFilePickerCallback","getFilePickerTypes","getFileBrowserCallbackTypes","noTypeaheadUrls","getAnchorTop","getAnchorBottom","getFilePickerValidatorHandler","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","setupReadonlyModeSwitch","setMode","receivingConfig","button","splitButton","toolbarButton","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$8","convertText","mac","alt","ctrl","shift","access","other","shortcut","updated","segment","renderIcon","iconHtml","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderSubmenuCaret","renderDownwardsCaret","renderContainer","directionClass","alignClass","align","getValignClass","valign","renderImage","src","renderColorStructure","itemText","iconSvg","providerBackstage","colorPickerCommand","removeColorCommand","getDom","common","title","baseDom","renderItemDomStructure","rtlClass","ariaLabel","domTitle","renderNormalItemStructure","renderIcons","textRender","leftIcon","checkmark","checkMark","htmlContent","menuItem","shortcutContent","caret","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","fallbackIcon","getIconName","iconName","needRtlClass","iconContent","tooltipBehaviour","sharedBackstage","tooltipWorker","_tooltip","encodeText","encode","replaceText","translated","encoded","escapedMatchRegex","RegExp","renderAutocompleteItem","useText","onItemValueHandler","_api","render","shouldHighlight","cardText","renderCardMenuItem","setDisabled","renderChoiceItem","isSelected","setActive","parts$2","hexColour","shorthandRegex","longformRegex","isHexString","hex","getLongForm","hexString","m","extractValues","longForm","splitForm","exec","toHex","fromRgba","rgbaColour","red","green","blue","round","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireSkinLoaded","fire","fireSkinLoadError","fireResizeEditor","fireResizeContent","fireScrollContent","fireTextColorChange","global$9","storageName","ColorCache","storageString","localstorage","parse","prune","diff","cache","unshift","pop","setItem","idx","splice","FocusMode","choiceItem","defaultColors","colorCache","mapColors","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","bg","colorByteWithWhiteBg","toUpperCase","asHexColor","clearRect","fillStyle","fillRect","getImageData","getColorCols","defaultCols","hasCustomColors","getColorMap","getColors","unmapped","getCurrentColors","addColor","getCurrentColor","format","getParents","applyFormat","undoManager","transact","formatter","nodeChanged","removeFormat","registerCommands","addCommand","calcCols","sqrt","getColorCols$1","getAdditionalColors","hasCustom","applyColor","onChoice","dialog","colorPickerDialog","colorOpt","execCommand","getColors$1","getFetch","callback","setIconColor","splitButtonApi","newColor","setIconFillAndStroke","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","addSplitButton","select","optCurrentRgb","currentRgb","currentHex","_splitButtonApi","onItemAction","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","getOnSubmit","colorpicker","details","initialData","submit","windowManager","buttons","onSubmit","onCancel","register$1","lastForeColor","lastBackColor","createPartialChoiceMenu","presetItemTypes","alloyItems","createChoiceItems","itemPresets","deriveMenuMovement","menuMarkers","rowClass","deriveCollectionMovement","renderColorSwatchItem","colorinput","widgetSpec","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","emitCellOver","se","makeCells","cells","selectCells","selectedRow","selectedColumn","makeComponents","cellRow","makeLabelText","renderInsertTableMenuItem","sizeLabelId","memLabel","fancyMenuItems","inserttable","colorswatch","valueOpt","renderFancyMenuItem","renderNestedItem","downwardsCaret","renderNormalItem","renderSeparatorItem","renderToggleMenuItem","autocomplete","nested","toggle$1","fancy","card","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createAutocompleteItems","createPartialMenu","itemHasIcon","createItem","createPartial","createTieredDataFrom","partialMenu","createMenuFrom","focusMode","ContentFocus","register$2","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","getCombinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","commenceIfNecessary","matchLength","display","ld","doLookup","newContext","lookupInfo","combinedItems","autocompleterUiApi","hasPlugin","Autocompleter","filter$2","bind$3","capture$1","fromRawEvent$1","closest$4","DelayedFunction","fun","ref","schedule","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","touches","isFarEnough","touch","distX","distY","monitor","startData","longpressFired","longpress$1","handleTouchstart","handleTouchmove","handleTouchend","isSame","fireIfReady","isDangerous","keyEv","settingsSchema","bindFocus","bindBlur","setup$1","rawSettings","tapEvent","simpleEvents","tapStopped","stopped","pasteTimeout","onPaste","onKeydown","stopBackspace","onFocusIn","focusoutTimeout","onFocusOut","derive$2","rawTarget","fromSource","isStopped","isCut","fromExternal","adt$b","resume","complete","doTriggerHandler","eventType","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerHandler","listeners","_logger","listener","triggerUntilStopped","triggerOnUntilStopped","broadcastHandler","EventRegistry","registerId","findHandler","filterByType","isAboveRoot","unregisterId","handlersById","_eventName","Registry","readOrTag","failOnDuplicate","tagId","conflict","unregister","getById","factory$3","domWithoutAttributes","containerBehaviours","Container","takeover","domEvents","_alloyId","broadcast$1","destroy","broadcastData","receivers","receiver","renderBar","interpreter","schema$e","parts$3","excludeFactory","factory$4","fieldBehaviours","descriptor","descriptorId","getField","getLabel","FormField","exhibit$4","tabConfig","tabAttr","ActiveTabstopping","TabstopSchema","Tabstopping","global$a","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormField","renderFormFieldDomWith","renderFormFieldDom","renderLabel","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","htmlLines","mapItemName","disabledClass","encodeAllRaw","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","factory$5","Input","exports$1","module","exports","define","require","amd","global","EphoxContactWrapper","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","runClearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","thisArg","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","_unhandledRejectionFn","Handler","reason","ex","prom","remaining","race","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","HighlightOnOpen","nu$a","baseFn","callbacks","nCallback","isReady","cbs","pure","LazyValue","errorReporter","make$3","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","nu$b","pure$1","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","run$1","onValidate","valid","isInvalid","InvalidateApis","events$a","onEvent","validateOnLoad","ActiveInvalidate","InvalidateSchema","Invalidating","validation","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingApis","CouplingSchema","init$5","coupled","CouplingState","Coupling","partType","_a$1","getAnchor","getHotspot","getAnchorOverrides","mapFetch","fetcher","openF","highlightOnOpen","futureData","getLazySink","tdata","HighlightFirst","open$1","onOpenSync","processed","close$1","_onOpenSync","_highlightOnOpen","togglePopup","showing","matchWidth","useMinWidth","buttonWidth","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$g","parts$4","factory$6","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","Dropdown","exhibit$5","unselectable","events$b","ActiveUnselecting","Unselecting","renderPanelButton","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","colorPicker","colorButton","_field","hsvColour","fromRgb","minRGB","maxRGB","calcHex","rgb","fieldsUpdate","sliderUpdate","paletteUpdate","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","modelDetail","getValueFromEvent","spectrum","SliderParts","_sliderChangeEvent","sliderChangeEvent","isTouchEvent","evt","getEventSource","touchEvent","mouseEvent","r$1","l","minX","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange","setToTLEdgeXY","setToTEdge","setToTEdgeXY","setToTREdgeXY","setToREdge","setToREdgeXY","setToBREdgeXY","setToBEdge","setToBEdgeXY","setToBLEdgeXY","setToLEdge","setToLEdgeXY","reduceBy","increaseBy","capValue","snapValueOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","numSteps","findOffsetOf","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","sliderVal","setToMin","setToMax","moveBy","handleMovement","findOffsetOfValue$1","minEdge","maxEdge","minOffset","findPositionOfValue","slider","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","HorizontalModel","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","setValueFrom$1","setToMin$1","setToMax$1","moveBy$1","handleMovement$1","getValueFromEvent$1","findOffsetOfValue$2","findPositionOfValue$1","setPositionFromValue$1","getTopEdge","getBottomEdge","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","fireSliderChange$3","sliderValue$2","setValueFrom$2","moveBy$2","isVerticalMovement","handleMovement$2","setToMin$2","mX","mY","setToMax$2","getValueFromEvent$2","setPositionFromValue$2","xPos","yPos","thumbXRadius","thumbYRadius","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","SliderSchema","getThumb","changeValue","onChange","resetToMin","resetToMax","fireOnChoose","onChoose","wasDown","onDragStart","onDragEnd","sliderBehaviours","getInitialValue","onInit","Slider","sliderFactory","getClass","_thumb","owner$3","schema$h","getPartName","sketch$1","fSpec","fieldParts","make$4","toResult$1","formBehaviours","form","resPs","resPThunk","pName","Form","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","isValid","renderTextField","description","helptext","comps","concats","copyRgbToHex","hexField","copyRgbToForm","memPreview","updatePreview","preview","copyHexToRgb","setValueRgb","getValueRgb","onInvalidInput","onValidHex","onValidRgb","isHexInputEvent","onValidInput","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","rgbFormSketcher","paletteFactory","_translate","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","setSliderColour","_detail","_slider","saturationBrightnessPaletteSketcher","setRgba","_apis","makeFactory","rgbForm","onInvalidHex","sbPalette","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","updates","paletteUpdates","oldRgb","hsvColour$1","newHsvColour","nuHex","sliderUpdates","colourPickerSketcher","self$1","memento","mem","childAt","ComposingConfigs","english","getEnglishText","translate$1","renderColorPicker","colourPickerFactory","memPicker","picker","optRgbForm","optHex","formValues","pattern","global$b","isOldCustomEditor","renderCustomEditor","editorApi","memReplaced","ta","scriptId","scriptUrl","ea","cvalue","ed","global$c","processors","memento$1","rawProcessors","rawValue","postprocess","withComp","optInitialValue","getter","setter","withElement","domValue","domHtml","memory$1","RepresentingConfigs","defaultImageFileTypes","filterByExtension","files","allowedImageFileTypes","explode","getSetting","isFileInAllowedTypes","file","renderDropZone","actions","onDrop","transferEvent","handleFiles","dataTransfer","onSelect","memInput","accept","renderField","inputComp","renderGrid","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","isPseudoStop","platformNeedsSandboxing","getDynamicSource","isSandbox","cachedValue","_frameComponent","frameComponent","contentWindow","renderIFrame","sandboxed","sourcing","create$5","resize","clone$1","tCanvas","get2dContext","drawImage","getWidth","image","naturalWidth","getHeight","naturalHeight","anyWindow","asap","immediateFn","catch","values_1","Promise$1","blobToImage","blobUrl","URL","createObjectURL","Image","removeListeners","loaded","dataUriToBlobSync","uri","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlob","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","canvasToDataURL","blobToCanvas","revokeImageUrl","blobToDataUri","reader","FileReader","onloadend","readAsDataURL","revokeObjectURL","create$6","getCanvas","initialType","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","blobToImageResult","clamp$1","parsedValue","identity$1","DELTA_INDEX","multiply","matrix1","matrix2","out","adjustContrast","adjustBrightness","adjustColors","adjustR","adjustG","adjustB","colorFilter","ir","applyColorFilter","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","putImageData","convoluteFilter","applyConvoluteFilter","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","scy","innerOffset","wt","pixelsIn","pixelsOut","functionColorFilter","colorFn","filterImpl","applyLookup","complexAdjustableColorFilter","matrixAdjustFn","adjust","basicColorFilter","basicConvolutionFilter","kernel","invert","contrast","colorize","sharpen","gamma","pow","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","angle","applyRotate","translateX","translateY","PI","flip","axis","applyFlip","crop","applyCrop","resize$1","newCanvas","invert$1","sharpen$1","gamma$1","colorize$1","brightness$1","contrast$1","flip$1","crop$1","resize$2","rotate$1","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","onToolbarButtonExecute","itemApi","buttonApi","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","memDropdown","displayText","displayIcon","isMenuItemReference","isExpandingMenuItem","separator$1","unwrapReferences","realItems","getFromExpandingItem","submenuItems","newMenus","newExpansions","getFromItem","generateValueIfRequired","itemWithValue","newData","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch$1","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","isMenuFooterButtonSpec","isNormalFooterButtonSpec","renderFooterButton","memButton_1","menuButtonSpec","fixedSpec","renderDialogButton","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","factory$7","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","FormCoupledInputs","formatSize","unitDec","maxDecimal","numText","parseSize","sizeText","numPattern","convertUnit","inInch","noSizeConversion","_input","ratioSizeConversion","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","optCurrent","optOther","value1","value2","undo","redo","zoom","back","swap","tempTransform","transformApply","internal","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","emitTempTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","createSpacer","createApplyButton","makeCropTransform","getRect","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","makeResizeTransform","resizePanelComponents","sizeInput","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","variableFilterPanelComponents","createVariableFilterPanel","filterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","cropPanelUpdate","_anyInSystem","showCrop","resizePanelUpdate","measurements","getMeasurements","sharpenTransform","invertTransform","buttonPanelComponents","getApplyButton","global$d","global$e","global$f","global$g","getDocumentSize","scrollWidth","scrollHeight","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","startX","startY","handleElement","getElementById","cursor","docSize","handleElm","screenX","screenY","runtimeStyle","zIndex","opacity","appendTo","drag","deltaX","deltaY","create$7","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","blockers","getAbsoluteRect","outerRect","relativeRect","getRelativeRect","innerRect","getInnerRect","moveRect","startRect","instance","setInnerRect","createDragHelper","blocker","repaint","activeHandle","moveAndBlock","keyCode","SPACEBAR","toggleVisibility","updateElementRect","setRect","setViewPortRect","setClampRect","helper","extend","CropRect","loadImage","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","img","panelW","panelH","cRect","zoomFit","updateSrc","url","aImg","lastViewRect","viewRect","inflate","currentZoom","newZoom","newRect","setButtonEnabled","enabled","renderSideBar","updateButtonUndoStates","undoEnabled","redoEnabled","memUndo","memRedo","UndoStack","removed","canUndo","canRedo","Delimiter","makeState","blobState","tempState","undoStack","getBlobState","setBlobState","getTempState","temp","updateTempState","newTempState","createState","destroyTempState","destroyState","destroyStates","states","addBlobState","addTempState","applyTempState","postApply","currentState","getHistoryStates","renderImageTools","historyStates","sideBar","disableUndoRedo","_oImg","unblock","imageResultToBlob","block","editPanel","applyButton","blobManipulate","oImg","manipulate","tempManipulate","manipulateApply","currentUrl","renderLabel$2","backstageShared","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","renderListBox","initialItem","sketchSpec","listBoxWrap","renderPanel","factory$8","initialValues","selectClasses","selectAttributes","selectBehaviours","found","HtmlSelect","renderSelectBox","translatedOptions","chevron","selectWrap","renderTable","renderTh","renderHeader","renderTd","renderTr","renderRows","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","flex","extraClasses2","maximized","renderInput","renderTextarea","events$c","streamConfig","streamState","streams","stream","cancelEvent","ActiveStreaming","_config","setTimer","init$6","StreamingState","setup$2","streamInfo","sInfo","throttler","onStream","stopEvent","StreamingSchema","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","setSelectionToEnd","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","itemDisplay","itemExecute","make$5","navigateList","highlighter","previewing","focusBehaviours$1","responseTime","focusInInput","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeahead","typeaheadBehaviours","schema$j","parts$6","populateFromBrowse","Typeahead","wrap$2","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$c","worker","value$2","error$1","fromResult$1","fromFuture","future","fromPromise","completer","FutureResult","separator$2","toMenuItem","staticMenuItem","toMenuItems","targets","filterLinkTargets","filteredTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","historyTargets","history","joinMenuLists","bothEmpty","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","getHistory","errorId","renderUrlInput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","_menu","_entry","makeIcon","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","controlHWrapper","openUrlPicker","componentData","urlData","fieldname","chosenData","renderAlertBanner","iconTooltip","renderCheckbox","repBehaviour","toggleCheckboxHandler","className","memIcons","renderHtmlPanel","make$6","makeIframe","iframeSpec","factories","bar","collection","alertbanner","textarea","iframe","checkbox","dropzone","listbox","selectbox","sizeinput","urlinput","customeditor","htmlpanel","imagetools","table","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","interpretWithoutForm","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","editableAreaAnchor","standardAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","hasCustomColors$1","getColors$2","getColorCols$2","ColorInputBackstage","isDraggableModal$1","DialogBackstage","HeaderBackstage","getDockingMode","setDockingMode","defaultStyleFormats","isNestedFormat","isBlockFormat","isInlineFormat","isSelectorFormat","mapFormats","userFormats","fmt","customFormats","formats","formatName","formatNameWithPrefix","registerCustomFormats","registerFormats","getStyleFormats","registeredUserFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$3","enrichSupported","enrichMenu","submenuSpec","enrichCustom","customSpec","newItem","doEnrich","newItems_1","getStyleItems","init$7","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","isElement$2","trim$1","hasContentEditableState","contentEditable","isContentEditableTrue","isContentEditableFalse","create$8","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isAnchor","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","elms","getAnchorTargets","getTargetElements","hasTitle","find$5","LinkTargets","STORAGE_KEY","HISTORY_LENGTH","isHttpUrl","isArrayOfUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","setAllHistory","itemsWithoutUrl","isTruthy","makeMap","getPicker","getPickerTypes","optFileTypes","optLegacyTypes","optTypes","_picker","types","getPickerSetting","pickerTypes","entry","getTextSetting","UrlInputBackstage","init$8","contextMenuState","styleselect","isContextMenuOpen","setContextMenuState","expandable$1","showContextToolbarEvent","hideContextToolbarEvent","schema$k","enhanceGroups","parts$7","factory$9","setGroups","groups","getGroupContainer","shell","toolbarBehaviours","Toolbar","generate$6","output$1","within","withinWidth","apportion","total","parray","toUnit","fitLast","fits","overflow","overflower","fitAll","tryFit","divide","partition$3","storedGroups","bGroups","findFocusedComp","focusedElm","setOverflow","overflowGroup","builtGroups","focusedComp","availableWidth","overflows","schema$l","schema$m","parts$8","schema$n","parts$9","toggledClass","toggle$2","toolbarSandbox","position$2","bounder","setGroups$1","makeSandbox$1","factory$a","FloatingToolbarButton","schema$o","parts$a","factory$b","tgroupBehaviours","itemSelector","ToolbarGroup","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","factory$c","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","SplitFloatingToolbar","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","shrinker","doStartGrow","wasShrinking","beforeSize","fullSize","startPartialGrow","startCompleteGrow","setStartSize","setExpanded","onStartGrow","refresh$2","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isGrowing","_slideState","isShrinking","isTransitioning","toggleGrow","SlidingApis","exhibit$6","events$d","propertyName","onGrown","ActiveSliding","SlidingSchema","init$9","SlidingState","Sliding","schema$p","parts$b","onClosed","onOpened","isOpen$1","toggleToolbar","overf","refresh$3","factory$d","toolbarToggleEvent","doSetGroups","_button","SplitSlidingToolbar","toolbarHeightChange","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","overflowXOffset","headerElem","moreDrawerData","lazyHeader","headerBounds","docElem","docBounds","renderSlidingMoreToolbar","renderToolbar","scrolling","groupToolbarButtonSchema","createGroupToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","createSplitButton","events$e","reflectingConfig","reflectingState","updateState","renderComponents","newComponents","channel","rawData","ActiveReflecting","getState$2","reflectState","ReflectingApis","ReflectingSchema","init$a","optS","ReflectingState","Reflecting","schema$q","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$c","factory$e","openMenu","executeOnButton","buttonEvents","ariaDescriptor","splitDropdownBehaviours","SplitDropdown","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","_d","needsRtlClass","renderFloatingToolbarButton","identifyButtons","renderCommonToolbarButton","specialisation","toolbarButtonBehaviours","renderToolbarButton","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButton","renderToolbarToggleButtonWith","fetchChoices","renderSplitButton","displayChannel","underlinePath","buttonComp","_b","_c","getFormApi","runOnExecute$1","formApi","renderContextButton","bridged","renderContextToggleButton","generateOne$1","generate$7","mementos","asSpecs","findPrimary","compInSystem","buildInitGroups","commands","renderContextForm","toolbarType","ContextForm","getHorizontalBounds","contentAreaBox","viewportBounds","contentBoxWidth","maxViewportWidth","getVerticalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getContextToolbarBounds","toolbarOrMenubarEnabled","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","filterByPositionForStartNode","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForAncestorNode","findPosition_1","basePosition","matchStartNode","nodeCandidates","editorCandidates","nodeMatches","editorMatches","matchAncestor","startNode","scopes","ancestorElem","inNodeScope","lookup$1","rootElem","isOutsideRoot","inEditorScope","categorise","forms","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","renderContextToolbar","currentWidth","newContents","oldContents","forwardContents","generateSelectItems","_editor","generateItem","rawItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","setInitialValue","nodeChangeHandler","rawFormats","buildBasicStaticDataset","ResizeTypes","delimiter","SemiColon","buildBasicSettingsDataset","settingName","alignMenuItems","command","getSpec","getMatchingValue","_format","updateSelectMenuIcon","alignment","canApply","createAlignSelect","alignSelectMenu","defaultFontsFormats","systemStackFonts","splitFonts","fontFamily","fonts","font","isSystemFontStack","matchesSystemStack","getSpec$1","getFirstFont","queryCommandValue","matchOpt","updateSelectMenuText","createFontSelect","fontSelectMenu","defaultFontsizeFormats","legacyFontSizes","keywordFontSizes","round$1","precision","factor","toPt","fontSize","toLegacy","getSpec$2","_loop_1","pt","legacy","Space","createFontsizeSelect","fontsizeSelectMenu","findNearest","getStyles","revocable","doRevoke","isSet","destroyable","unbindable","value$3","onSetupFormatToggle","boundCallback","formatChanged","initialized","onActionToggleFormat","defaultBlocks","getSpec$3","detectedFormat","createFormatSelect","formatSelectMenu","getSpec$4","getFormatItems","flattenedItems","createStyleSelect","styleSelectMenu","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","grouptoolbarbutton","identify","allowToolbarGroups","TopToBottom","floating","styleSelectButton","fontsizeSelectButton","fontSelectButton","formatButton","alignMenuButton","extractFrom","bespokeButtons","fontsizeselect","fontselect","formatselect","removeUnusedDefaults","filteredItemGroups","subItem","convertStringToolbar","strToolbar","groupsStrings","isToolbarGroupSettingArray","createToolbar","toolbarConfig","lookupButton","toolbarItem","prefixes","toolbarGroups","bubbleSize","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","getAnchorLayout","register$4","registryContextToolbars","contextbar","isRangeOverlapping","aTop","aBottom","bTop","bBottom","getLastElementVerticalBound","nodeBounds","ele","diffTop","shouldContextToolbarHide","lastElementBounds","contextToolbarBounds","lastAnchor","forceHide","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","buildContextToolbarGroups","allButtons","buildContextMenuGroups","default","toolbarKey","launchContext","sElem","launchContextToolbar","asyncOpen","setEditorTimeout","setup$3","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","parts$d","partType$1","schema$r","customListDetail","itemsPart","parts$e","name$2","factory$f","_external","setItems","getListContainer","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","listBehaviours","CustomList","setup$4","isDocked","getBehaviours$2","StaticHeader","getOffsetParent","isFixed","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isPartiallyVisible","isTopCompletelyVisible","isBottomCompletelyVisible","isVisibleForModes","getPrior","getInitialPosition","storePrior","setInitialPosition","revertToOriginal","offsetBox_1","_left","_top","_right","_bottom","morphToOriginal","getModes","morphToFixed","winBox","top_1","isTop","getMorph","getMorphToOriginal","morphToStatic","onUndocked","morphToCoord","method","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","setVisible","refreshInternal","lazyViewport","morph","setDocked","resetInternal","refresh$4","reset","isDocked$1","setModes","DockingApis","events$f","dockInfo","dockState","onShown","onHidden","ActiveDocking","DockingSchema","init$b","docked","initialBounds","DockingState","Docking","visibility","editorStickyOnClass","editorStickyOffClass","scrollFromBehindHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","isDockedMode","updateIframeContentFlow","getOccupiedHeight","parentElem","padding","parentWidth","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","restoreFocus","focusedElem","ownerDoc","activeElm","findFocusedElem","rootElm","setup$5","isDocked$2","getIframeBehaviours","getBehaviours$3","runOnSinkElement","onDockingSwitch","additionalBehaviours","headerHeight","boxHeight","topBound","StickyHeader","sticky","factory$g","setMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","SilverMenubar","owner$4","schema$s","getPartName$1","sketch$2","sSpec","slot","make$7","getSlotNames","getSlot","onSlot","def","onSlots","doShowing","_key","doShow","doHide","hideSlot","hideSlots","hideAllSlots","showSlot","slotBehaviours","slotApis","SlotContainer","sidebarSchema","createSidebar","setup$6","sidebars","addToggleButton","handleToggle","makePanels","panelConfigs","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","setSidebar","sidebar","optSlider","toggleSidebar","optSlotContainer","whichSidebar","sidebarOpen","fixSize","autoSize","renderSidebar","getAttrs","fromHtml$2","renderSpinner","toggleThrobber","renderThrobber","setup$7","lazyThrobber","throbberState","timerId","factory$h","getSocket","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","optToolbar","setMenubar","menubar","focusMenubar","partMenubar","toolbarFactory","sliding","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","lazyToolbar","lazyMoreButton","partHeader","partSocket","partSidebar","partThrobber","OuterContainer","grps","grp","renderedToolbars","defaultMenubar","defaultMenus","edit","tools","help","make$8","removedMenuItems","itemName","removedMenuItem","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","isNotSeparator","fireSkinLoaded$1","_skinLoaded","fireSkinLoadError$1","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUiCss","loadShadowDomUiSkins","isInShadowRoot$1","shadowDomSkinCss","loadSkin","isInline","contentCSS","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","setupEvents","initialDocEle","lastWindowDimensions","innerWidth","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","elementLoad","render$1","lastToolbarWidth","eTargetNode","targetNode","uiRoot","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","refreshDrawer","iframeContainer","Iframe","parseToInt","re","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeight$1","baseHeight","minHeight","getHeightWithFallback","getWidth$1","baseWidth","minWidth","getWidthWithFallback","InlineHeader","targetElm","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","calcMode","toolbar_1","toolbarHeight","targetBounds","roomAtTop","docHeight","roomAtBottom","winBounds","isRoomAtBottomViewport","setupMode","verticalDir","updateChromeWidth","bodyMargin","updateChromePosition","repositionPopups$1","updateChromeUi","resetDocking","floatContainerComp","updateMode","updateUi","currentMode","newMode","addClass","removeClass","getTargetPosAndBounds","setupEvents$1","toolbarPersist","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","requestAnimationFrame","render$2","uiContainer","Inline","register$5","alignToolbarButtons","cmd","alignNoneToolbarButton","addButton","register$6","toggleOutdentState","queryCommandState","onNodeChange","registerButtons","register$7","unsupportedLength","decimalDigits","signedInteger","exponentPart","dot","unsignedDecimalLiteral","float","isUnit","accepted","check","unitRaw","normalise","normaliseLineHeight","getLineHeights","Map","lastApi","registerMenuItems","registerButtons$1","addMenuButton","register$8","toggleFormat","registerFormatButtons","_idx","name_1","registerCommandButtons","registerCommandToggleButtons","registerButtons$2","registerMenuItems$1","addMenuItem","register$9","toggleUndoRedoState","checkState","onUndoStateChange","registerMenuItems$2","registerButtons$3","register$a","toggleVisualAidState","hasVisual","onVisualAid","registerMenuItems$3","addToggleMenuItem","registerToolbarButton","register$b","setup$8","nu$d","transpose$1","dx","dy","isTouchEvent$1","fromPageXY","pageX","pageY","fromClientXY","transposeContentAreaContainer","containerPos","getPos","getPointAnchor","getSelectionAnchor","getNodeAnchor$1","initAndShow","buildMenu","contextmenu","useNodeAnchor","anchorSpec","bubbleSize$1","bubbleAlignments$2","isTouchWithinSelection","touch_1","rngRectOpt","rngRect","getPointAnchorSpec","setupiOSOverrides","originalSelection","selectionReset","setRng","unbindEventListeners","preventMousedown","clearSelectionReset","initAndShow$1","shouldHighlightImmediately","openiOS_1","patchPipeConfig","shouldNeverUseNative","getMenuItems","defaultItems","contextMenus","isContextMenuDisabled","getContextMenu","getAvoidOverlapSelector","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","lastMenuItem","generateContextMenu","selectedElement","sections","allItems","isNativeOverrideKeyEvent","isTriggeredByKeyboard","pointerType","getSelectedElement","shouldUseNodeAnchor","setup$9","hideContextMenu","showContextMenu","initAndShow$2","hideEvents","adt$c","subtract","add$4","transform$1","changes","asFixed","coord","asAbsolute","asOffset","withinRange","coord1","coord2","getDeltas","toStyles","stylesOpt","translate$2","absolute$3","fixed$1","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","get$f","snapsInfo","leftAttr","topAttr","set$8","getCoords","snapInfo","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","stopDrag","findMatchingSnap","snaps","sensor","inRange","getSnapPoints","matchSnap","bestSnap","deltas","bestDeltas","currAvg","bestAvg","snapTo","snapTo$1","dragConfig","getTarget","repositionTarget","scroll_1","origin_1","snapPin","DraggingApis","initialAttribute","resetZIndex","changeZIndex","zindex","instigate","anyComponent","discard","createComponent","blockerClass","blockerEvents","SnapSchema","schema$t","getCurrentCoord","location","clampCoords","coords","absoluteCoord","newCoords","offset$1","calcNewCoord","optSnaps","currentCoord","snapping","onSensor","dragBy","onDrag","calcStartData","move$1","dragState","dragMode","dragStartData","getStartData","dlt","updateStartState","setStartData","init$c","dragApi","forceDrop","drop","delayDrop","getData$1","getDelta$1","MouseData","events$g","stop$1","schema$u","init$d","getDataFrom","getData$2","getDelta$2","TouchData","events$h","blockerCell","schema$v","events$i","schema$w","mouse","mouseOrTouch","DraggingBranches","init$e","previous","calculateDelta","dragEvent","nuData","DragState","Dragging","dragger","snapWidth","snapOffset","calcSnap","selectorOpt","td","selectorHandle","sensorLeft","sensorTop","sensorWidth","sensorHeight","getSnapsConfig","isSameCell","cellOpt","currentTd","createSelector","setup$a","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getTopLeftSnaps","getBottomRightSnap","memBottomRight","getBottomRightSnaps","topLeftSnaps","bottomRightSnaps","bottomRight","showOrHideHandle","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","getSnapConfig","snapTopLeft","snapLastTopLeft","snapBottomRight","snapLastBottomRight","otherCells","upOrLeftCells","downOrRightCells","getDimensions","resizeType","originalHeight","originalWidth","Both","resize$3","dim","isHidden$1","renderElementPath","getDataPath","newPathElements","_btn","divider","newAcc","updatePath","parents","newPath","parent_1","isDefaultPrevented","isPropagationStopped","renderWordCount","replaceCountText","words","characters","currentVal","wordCount","renderStatusbar","renderResizeHandlerIcon","renderBranding","linkHtml","getResizeType","None","Vertical","getTextComponents","getComponents","setup$b","lazyOuterContainer","platformClasses","touchPlatformClass","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","isHeaderDocked","resizeUiMothership","makeSinkDefinition","isGridUiContainer","sinkSpec","reactiveWidthSpec","memAnchorBar","lazyAnchorBar","throbber","sb","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","getPartToolbar","editorComponents","containerComponents","border","addQueryStateHandler","getUi","broadcastAll","setEditorSize","parsedHeight","parsedWidth","renderUI","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","describedBy","describedElement","describeElement","describeId","labelledBy","labelledElement","labelElement","schema$x","basic","parts$f","dragBlockClass","getDragBounds","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingApis","BlockingSchema","init$f","BlockingState","Blocking","factory$i","dialogComp","showDialog","externalBlocker","hideDialog","blockerDom","getDialogBody","getDialogFooter","setBusy","setIdle","modalEventsId","getFooter","modalBehaviours","ModalDialog","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","alertBannerFields","alertBannerSchema","createBarFields","itemsField","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputFields","colorInputSchema","colorInputDataProcessor","colorPickerFields","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneFields","dropZoneSchema","dropZoneDataProcessor","createGridFields","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema$3","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","createDialog","urlDialogButtonSchema","urlDialogSchema","createUrlDialog","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","getDataProcessor","getNamedItems","createDataValidator","namedItems","extract$1","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","factory$j","tabButtonBehaviours","TabButton","schema$y","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$g","factory$k","tabbarBehaviours","selectedClass","tab","Tabbar","factory$l","tabviewBehaviours","Tabview","schema$z","barPart","tabs","viewPart","parts$h","factory$m","tabValue","tabview","tabWithValue","tabData","onChangeTab","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","onDismissTab","getViewItems","showTab","tabKey","getTabIfNotActive","optTab","TabSection","measureHeights","allTabs","tabviewComp","_tab","getMaxHeight","heights","getMaxTabviewHeight","tablist","documentElement$1","tabviewHeight","isTabListBeside","currentTabHeight","dialogTopMargin","dialogBottomMargin","dialogHeight","chromeHeight","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","getTabview","smartTabHeight","extraEvents","maxTabHeightOpt","oldHeight","naiveTabHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","ariaAttributes","renderInlineBody","contentId","renderModalBody","bodySpec","renderIframeBody","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","renderInlineHeader","titleId","renderModalHeader","pTitle","pHandle","draghandle","draggable","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","menuButton","innerAcc","initCommonEvents","fireApiEvent","_event","initUrlDialog","getInstanceApi","withSpec","currentDialog","initDialog","currentDialogInit","cur","onTabChange","newTabName","oldTabName","SilverDialogEvents","makeButton","lookup$2","footerButtons","buttonName","buttonGroups","makeGroup","renderFooter","initSpec","lookupByName","renderInlineFooter","renderModalFooter","getCompByName","form_1","getFormWrapper","footerState","validateData","dialogState","getDialogApi","doRedial","menuItemStates","withRoot","valueComp","representedValues","menuItemCurrentState","setData","prevData","instanceApi","mergedData","newInternalData","bodyState","tabSection","dialogInit","getDialogSizeClasses","renderDialog$1","storagedMenuButtons","objOfCells","dialogSize","modalAccess","getForm","outerForm","renderInlineDialog","dialogLabelId","dialogContentId","memHeader","memBody","memFooter","global$h","getUrlDialogApi","sendMessage","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","isCustomMessage","handleMessage","insertContent","renderUrlDialog","iframeUri","base_uri","href","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","onMessage","iframeEle","iframeWin","postMessage","setup$c","closeDialog","alertDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$d","confirmDialog","memFooterYes","footerNo","footerYesButton","validateData$1","isAlertOrConfirmDialog","inlineAdditionalBehaviours","setup$e","isStickyToolbar$1","openInlineDialog","openModalDialog","openModalUrlDialog","internalInitialData","config$1","refreshDocking","dialogUi","inlineDialogComp","confirm","alert","Theme","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","Plugin","_vm","_h","$createElement","_self","$$v","describe","expression","staticClass","release","staticRenderFns","directives","rawName","domProps","$event","composing","flag","hasInit","hasChange","watch","methods","$emit","destroyTinymce","fullscreen","mounted","language","body_class","object_resizing","end_container_on_empty_block","powerpaste_word_import","code_dialog_height","code_dialog_width","media_live_embeds","advlist_bullet_styles","advlist_number_styles","imagetools_cors_hosts","default_link_target","link_title","relative_urls","remove_script_host","table_default_styles","borderCollapse","image_title","automatic_uploads","nonbreaking_force_tab","plugins","file_picker_types","file_picker_callback","onchange","xhr","XMLHttpRequest","withCredentials","credentials","upload","onprogress","onerror","onload","json","responseText","returnCode","mediaLocation","FormData","send","init_instance_callback","images_upload_handler","blobInfo","failure","beforeDestroy","TinymceText","groupBy","wasType","lastChild","shallowAs","mutate","matchNodeName","matchNodeNames","regex","isTextNode","isListNode","isOlUlNode","isOlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isTextBlock","getTextBlockElements","blockElements","isBogusBr","previousSibling","isEmpty","keepBookmarks","isChildOfBody","isChildOf","shouldIndentOnTab","getForcedRootBlock","getForcedRootBlockAttrs","createTextBlock","contentNode","textBlock","hasContentNode","getBlockElements","createFragment","blockName","tagName","setAttribs","splitList","ul","li","removeAndKeepBookmarks","bookmarks","newBlock","tmpRng","insertAfter","outdentDlItem","dl","indentDlItem","dlIndentation","indentation","dlItems","getNormalizedPoint","normalizeRange","outRng","rangeStart","rangeEnd","getParentList","selectionStart","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","grep","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","listItemsElms","parentLi","getSelectedListItems","getSelectedDlItems","parentTableCell","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","fromElements","fireListEvent","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","createSegments","populateSegments","listAttributes","itemAttributes","normalizeSegment","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList","hasFirstChildList","hasLastChildList","isIndented","cloneItemContent","createEntry","dirty","indentEntry","cloneListProperties","cleanListProperties","closestSiblingEntry","normalizeEntries","matchingEntry","parseItem","itemSelection","selectionState","currentItemEntry","childListEntries","parseList","parser","newDepth","parseLists","initialDepth","sourceList","outdentedComposer","normalizedEntries","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listIndentation","entrySets","entrySet","composedLists","composedList","selectionIndentation","isHandled","bookmark","getBookmark","moveToBookmark","indentListSelection","outdentListSelection","flattenListSelection","DOM$1","createBookmark","setupEndPoint","offsetNode","resolveBookmark","restoreEndPoint","nodeIndex","listToggleActionFromListName","listName","isCustomList","listState","activate","inList","updateListStyle","setStyle","updateListAttrs","updateListWithDetails","removeStyles","getEndPointNode","getSelectedTextBlocks","textBlocks","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","detailStyle","applyList","listItemName","selectedTextBlocks","listBlock","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList","newList","toggleMultipleLists","parentIsList","hasListStyleDetail","allLists","toggleSingleList","toggleList","selectedSubLists","DOM$2","normalizeList","normalizeLists","findNextCaretContainer","isForward","nonEmptyBlocks","getNonEmptyElements","walker","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","mergeLiElements","listNode","$","nestedLists","mergeIntoEmptyLi","fromLi","toLi","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_2","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","DELETE","currentList","getAttrib","setAttrib","queryListCommandState","setupTabKey","metaKeyPressed","listProperties","addContextMenu","addI18n","startsWith","isNotEmpty","COMMENT","validSectionList","isValidSection","parentName","rowspan","colspan","detailnew","isNew","extended","isLocked","rowdata","elementnew","rowdatanew","rowcells","rowdetails","finishRow","finishCol","columnext","isComment","isTag","rawParent","prevSibling","ancestors","ancestors$1","children$2","child$1","child$2","sourceDom","targetDom","cssText","getAttrValue","getSpan","hasColspan","hasRowspan","getCssValue","firstLayer","filterFirstLayer","tags","isRootOrUpperTable","columnGroups","columnGroup","fromRowsOrColGroups","elems","getSection","cells$1","getParentSection","fromTable","rows$1","columnGroups$1","fromPastedRows","addCells","gridRow","existingCells","newCells","setCells","addCell","mutateCell","mapCells","getCell","getCellElement","cellLength","extractGridDetails","cols","LOCKED_COL_ATTR","getLockedColumnsFromTable","lockedColStr","lockedCols","getLockedColumnsFromGrid","lockedArr","_val","getAt","warehouse","findItem","filtered","filterItems","generateColumns","rowData","columnsGroup","tableOpt","lockedColumns","maxRows","maxColumns","rowCount","currentRow_1","rowCell","occupiedColumnPosition","occupiedRowPosition","rowPosition","columnPosition","newpos","grid$1","fromTable$1","justCells","justColumns","hasColumns","getColumnAt","Warehouse","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","isWithin","isRectangular","isRect","detailIsWithin","detailA","detailB","getAnyBox","startCoords","finishCoords","sc","fc","getBox","intercepts","parentCell","innerCell","isContainedBy","c1","c2","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","getBox$1","TagBoundaries","DomUniverse","isEmptyTag","isNonEditable","comparePosition","copyAttributesTo","destination","as","isSpecial","up","down","copyTo","afterAll","appendAll","setText","universe","look","oneAll","unsafeOne","commonElement","eq$2","ancestors$2","ps1","ps2","ind","pruned1","pruned2","firstpath","secondpath","sharedOne","ancestors$3","sharedOne$1","_universe","ancestors$4","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","lastSelectedSelector","getEdges","firstSelectedSelector","expandTo","shiftSelection","retrieve$1","retrieveBox","sectionSelector","firstAncestor","lastAncestor","fA","lA","type$1","onMultiple","onSingle","none$1","Selections","lazyRoot","selectedSelector","copy$1","cloneChildren","bindFrom","columns$1","isValidCell","rowsArr","getBlock","getFallback","decide","inBlock","validInBlock","detailOption","isSingle","deduce","aa","rowInfo","colInfo","rtlEdge","ltrEdge","getTop","findPositions","getInnerEdge","getOuterEdge","cellOption","lastLine","negate","optElements","amount","needManualCalc","toNumber","px","getProp","getCalculatedHeight","boxSizing","paddingTop","paddingBottom","borderTop","borderBottom","borders","getCalculatedWidth","paddingLeft","paddingRight","borderLeft","borderRight","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","getPercentSize","relativeParent","setPixelWidth","setPercentageWidth","getHeightValue","normalizePixelSize","getTotalHeight","getRawWidth","cssWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getGenericWidth","setGenericWidth","getPixelTableWidth","getPercentTableWidth","isPercentSizing","isPixelSizing","isNoneSizing","percentageBasedSizeRegex","pixelBasedSizeRegex","isCol","getRaw$1","getRawW","getRawH","justCols","hasRawStyle","isValidColumn","backups","getWidthFrom","columnCells","colFilter","getDeduced","deduced","getRawWidths","getPercentageWidths","minCellWidth","getPixelWidths","getHeightFrom","getPixelHeights","getRawHeights","noneSize","zero","getWidths","getCellDelta","singleColumnWidth","setElementWidth","adjustTableWidth","isRelative","percentageSize","initialWidth","_delta","pixelSize","newNext","chooseSize","fallbackWidth","getTableSize","TableSize","statsStruct","minRow","minCol","maxRow","maxCol","allCells","selectedCells","findSelectedStats","house","totalColumns","totalRows","endRow","endCol","seenSelected","fillInGaps","stats","needCell","clean","replica","widthDelta","emptyRows","getTableWidthDelta","colWidths","allColsWidth","selectedColsWidth","replicaHouse","replicaStats","unselectedCells","transferableAttributes","createCell","createCol","createColgroup","pasteReplace","cloneFormats","oldCell","newCell","first$1","firstText","formatSelector","clonedFormat","cloneAppropriateAttributes","validAttributes","attributeName","attribute","cellOperations","formatsToClone","cloneCss","docu","lastNode","colgroup","gap","paste","fromDom$1","nodes","getNodeName","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addPxSuffix","removeDataStyle","removeStyleAttribute","getRawWidth$1","isPercentage","isPixel","getSelectionStart","selections","unmergable","hasSpan","hasRowOrColSpan","mergable","ephemera","strSelected","strSelectedSelector","strAttributeSelector","strFirstSelected","strFirstSelectedSelector","strLastSelected","strLastSelectedSelector","attributeSelector","firstSelected","lastSelected","noMenu","paste$1","clipboard","generators","pasteRows","extractSelected","serializeElements","serializer","serialize","getTextContent","registerEvents","cellSelection","multiCellContext","domCell","isTable","pasteCells","only","ColumnContext","neighbours","determine","onOnly","calcLeftEdgeDeltas","onMiddle","calcMiddleDeltas","calcRightEdgeDeltas","measures","recalculateWidthForCells","widths","recalculateWidthForColumns","recalculateHeightForCells","matchRowHeight","sumUp","recalculate","recalculateAndApply","newSizes","adjustWidth","resizing","isLastColumn","clampedStep","clampTableDelta","newWidths","resizeTable","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustAndRedistributeWidths","_table","resizeBehaviour","sizes","tablePixelWidth","calcRedestributedWidths","pixelDelta","adjustWidthTo","_info","surround","startIndex","clampDeltaHelper","minCellSize","clampNegativeDelta","clampDelta","calcFixedDeltas","clampedDelta","calcRelativeDeltas","ratio","newThis","_prev","resizer","totalWidth","tableWidth","ratio_1","preserveTable","_minCellSize","maxDelta","_totalWidth","_pixelDelta","_isRelative","isResizable","detached","editable","body$1","ResizeWire","validateFor","rawAmount","Size","redistributeToPercent","colType","pc","redistributeToPx","newTotalWidth","redistributeEmpty","newWidthType","redistributeValues","_pc","redistribute","newType","floats","roundDown","floored","redistributeToW","redistributeToColumns","redistributeToH","getUnit","redistribute$1","optWidth","optHeight","widthUnit","oldWidths","nuWidths","hUnit","totalHeight","oldHeights","nuHeights","isPercentSizing$1","isPixelSizing$1","isNoneSizing$1","getPercentTableWidth$1","getGridSize","Event","trigger","typeDefs","sort$1","reqMessage","unsuppMessage","validateStrArr","invalidTypeMessage","incorrect","checkDupes","everything","dupe","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","DragMode","DragSink","DragApi","InDrag","compare","dataOption","NoDrag","Movement","noDragState","inDragState","mutation","throttledDrop","runIfActive","namespace","dashNamespace","Blocker","layerClass","mdown","mup","mmove","mout","MouseDrag","findClosestContentEditable","styles$1","resolve$1","Mutation","BarMutation","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","resizableRows","resizableColumns","resizableCols","colElmOpt","wire","drawBar","cpOption","cp","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","rowBar","refreshGrid","warhouse","resizableRowBars","resizableRowPositions","_pos","barIndex","resizableColBars","resizableColPositions","each$2","bars","isRowBar","isColBar","resizeBarDragging","BarManager","hoverTable","getResizer","_dataRow","currentRow","_dataCol","currentCol","oldX","startAdjust","findClosestEditableTable","destroy$1","tbl","hideBars","showBars","lazySizing","hdirection","vdirection","beforeResize","afterResize","startDrag","TableResize","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","fireTableSelectionChange","fireTableSelectionClear","fireTableModified","styleModified","structureModified","defaultTableToolbar","defaultStyles","determineDefaultStyles","isPixelsForced","editorWidth","isResponsiveForced","defaultAttributes","defaultColumnResizingBehaviour","getTableSizingMode","getTableResponseWidth","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPercentagesForced","useColumnGroup","getTableHeaderType","defaultValue","validValues","getColumnResizingBehaviour","validModes","givenMode","isPreserveTableColumnResizing","isResizeTableColumnResizing","getCloneElements","cloneElements","hasObjectResizing","objectResizing","cleanupLegacyAttributes","convertToPercentSize","convertToPixelSize","convertToNoneSize","rowElements","enforcePercentage","tableSizing","enforcePixels","enforceNone","syncPixels","computedWidth","createContainer","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","lazyResize","lazyWire","lazyResizingBehaviour","afterCornerResize","isRightEdgeResize","percentW","targetPercentW","sz","rawWire","rawTable","toEnd","freefallRtl","freefallRtl$1","universe$1","freefallRtl$2","halve","main","setIfNot","generateSection","sectionName","newSection","newRows","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sync","sectionElems","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","columnGroupsSection","copy$2","clonedCell","getColumn","getRow","findDiff","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","toDetails","seen","updateSeen","toGrid","groupElementNew","rowCells","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","extractCells","cell$1","lc","postAction","genWrappers","sizing","newElements","onCell","onPasteByEditor","onMergable","_warehouse","onUnmergable","onCells","onUnlockedCell","onUnlockedCells","isUnlockedTableCell","allUnlocked","onUnlockedMergable","mergeable","onUnlockedUnmergable","substitution","unmerge","currentCell","currentCellElm","isToReplace","uniqueCells","splitCols","prevCell","splitRows","rowPrevCells","replacement","sub","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","measureHeight","rowLengthA","rowLengthB","generateElements","generator","rowFill","colFill","lockedColFill","colNum","newChild","tailor","fillCols","fillRows","gridWidth","isLastColLocked","modifiedCols","newLockedColumns","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","lockedColumnObj","skippedCol","gridBColIndex","newCellElm","getValidStartAddress","currentStartAddress","gridColLength","possibleColAddresses","validColAddress","getLockedColumnsWithinBounds","validStartAddress","lockedColumnsWithinBounds","fittedGrid","newLockedColumnsWithinBounds","insertCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","oldCols","oldRows","newLocked","secondDiff","fittedGridB","insertRowAt","example","between","withinSpan","getElementFor","insertColumnAt","deleteColumnsAt","deleteRowsAt","replaceIn","isTarget","notStartRow","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","uniqueColumns","uniqueCheck","columnExists","currentDetail","elementToData","toData","nuFrom","recent","getOrInit","makeNew","replaceOrInit","getScopeAttribute","merging","getScopeProperty","stringAttributes","baseScope_1","scopes_1","isMixed","Generators","blockList","universe$2","isBlock$1","isList$1","isEmptyTag$1","merge$2","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","elementFromGrid","findIn","uniqueRows","rowCompilation","rowExists","opInsertRowsBefore","targetIndex","newGrid","newG","opInsertRowsAfter","opInsertColumnsBefore","extractDetail","opInsertColumnsAfter","opMakeRowHeader","opMakeRowsHeader","initialGrid","currentGrid","opMakeColumnHeader","opMakeColumnsHeader","opUnmakeRowHeader","opUnmakeRowsHeader","opUnmakeColumnHeader","opUnmakeColumnsHeader","opEraseColumns","_comparator","_genWrappers","opEraseRows","opMergeCells","opUnmergeCells","unmerge$1","opPasteCells","pasteDetails","gridify","wh","mergedGrid","gridifyRows","opPasteColsBefore","opPasteColsAfter","opPasteRowsBefore","opPasteRowsAfter","opGetColumnType","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","getCellsType","headerPred","headerCells","adjustAndRedistributeWidths$1","firstColumnIsLocked","lastColumnIsLocked","getColumnsWidth","uniqueCols","colWidth","insertColumnsExtractor","checkLocked","eraseColumnsExtractor","pasteColumnsExtractor","insertRowsBefore","insertRowsAfter","insertColumnsBefore","insertColumnsAfter","eraseColumns","eraseRows","makeColumnsHeader","unmakeColumnsHeader","mergeCells","unmergeCells","pasteColsBefore","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnType","mapSectionNameToType","detectHeaderRow","isThead","areAllCellsThs","thead","ths","getRowType","_rowConfig","switchRowSection","rowElm","newSectionName","tableElm","oldSectionElm","oldSectionName","sectionElm_1","firstTableChild_1","renameCell","newCellType","switchCellType","switchCellsType","switchSectionType","determineHeaderRowType","allTableRows","detectedType","headerRowTypeSetting","headerRowType","getSelectionStartCellFallback","getSelectionStartFromSelector","startCellName","getSelectionStartCell","getSelectionStartCellOrCaption","getCellsFromSelection","_cell","getRowsFromSelection","rowsOpt","TableActions","isTableBody","lastRowGuard","lastColumnGuard","colMutationOp","guard","effect","des","deleteRow","deleteColumn","insertRowsBefore$1","insertRowsAfter$1","insertColumnsBefore$1","insertColumnsAfter$1","mergeCells$1","unmergeCells$1","pasteColsBefore$1","pasteColsAfter$1","pasteRowsBefore$1","pasteRowsAfter$1","pasteCells$1","extractType","validTypes","setTableCellType","setTableRowType","makeColumnsHeader$1","unmakeColumnsHeader$1","getTableRowType","rowTypes","hasHeader","hasFooter","hasBody","getTableCellType","getTableColType","DefaultRenderOptions","colGroups","tableHeaderCell","tableCell","tableColumn","createRow","rowHeaders","columnHeaders","createGroupRow","createRows","headerType","renderOpts","rowHeadersGoInThead","actualRowHeaders","theadRowHeaders","theadRows","tbody","numRowHeaders","tbodyRows","placeCaretInCell","selectFirstCellInTable","fireEvents","isPercentage$1","insert$1","colHeaders","addVisual","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","resizeHandler","selectionTargets","setClipboardRows","setRows","getClipboardRows","getRows","setClipboardCols","setColumns","getClipboardCols","getColumns","constrainSpan","currentColspan","generateColGroup","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateRows","cellsToCopy","copiedCells","fakeTR","copyCols","fakeColGroups","fakeRows","copyRows","slicedGrid","filteredGrid","slicedDetails","getTDTHOverallStyle","firstChildStyle","checkChildren","currentStyle","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","isListGroup","buildListItems","inputList","startItems","appendItems","rgbToHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemKey","comparisonValue","getAdvancedTab","dialogName","advTabItems","borderWidth","getAlignment","matchNode","getHAlignment","getVAlignment","extractDataFromSettings","hasAdvTableTab","extractAdvancedStyleData","defaultData","cellspacing","cellpadding","caption","class","getBorder","advStyle","getCellPaddingCellSpacing","spacing","extractDataFromTableElement","optBorderWidth","extractDataFromRowElement","extractDataFromCellElement","colElm","celltype","halign","getClassList","children$3","modifiers","testTruthy","setFormat","DomModifier","ifTruthy","getSelectedCells","cellA","cellB","updateSimpleProps","modifier","colModifier","updateAdvancedProps","applyCellData","oldData","isSingleCell","modifiedData","cellElm","styleModified_1","onSubmitCellForm","cellsData","dialogTabPanel","dialogPanel","getClassList$1","formChildren","getItems$1","updateSimpleProps$1","updateAdvancedProps$1","applyRowData","isSingleRow","typeModified_1","onSubmitRowForm","rowsData","getItems$2","insertNewTable","rowColCountItems","alwaysItems","appearanceItems","alignmentItem","classListItem","styleTDTH","applyDataToElement","serializeStyle","onSubmitTableForm","captionElm","captionModified","open$2","generalPanel","nonAdvancedForm","advancedForm","getSelectionStartCellOrCaption$1","getSelectionStartCell$1","eraseTable","cellOrCaption","setSizingMode","isForcedSizing","getTableFromCell","postExecute","actOnSelection","copyRowSelection","copyColSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutCol","_grid","mceTableCutRow","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","mceTableSizingMode","func","fireTableModifiedForSelection","mceTableCellType","mceTableRowType","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","registerQueryCommands","mceTableColType","Clipboard","clearClipboard","clearRows","clearColumns","cellFormats","tablecellbackgroundcolor","backgroundColor","remove_similar","tablecellbordercolor","borderColor","tablecellborderstyle","borderStyle","tablecellborderwidth","none$2","CellLocation","detect$5","selectNodeContents","selectNodeContentsUsing","searchForPoint","rectForOffset","curDeltaX","inRect","locateOffset","textnode","rangeForOffset","foundRect","searchInChildren","locateNode","locate$1","boundedX","boundedY","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","fromPoint$1","beforeSpecial","preprocessRelative","preprocessExact","after$3","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","setToElement","getAtPoint","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","body_1","isRoot_1","Response","Situs","convertToRange","makeSitus","selectRange","detect$6","cellSel","annotations","updateSelection","newSels","clearBeforeUpdate","traverse","backtrack","_direction","sidestep","advance","successors","go$1","ruleOpt","succ","Walkers","hone","left$1","right$1","isLeaf","before$3","seekLeft","after$4","seekRight","universe$3","before$4","after$5","seekLeft$1","seekRight$1","failedUp","failedDown","isOverlapping","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","afterCell","beforeCell","_sharedRow","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","analysis","_message","getTop$1","getBottom","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","JUMP_SIZE","NUM_RETRIES","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","guess","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","findSpot","brNeighbour","fromSitus","scan$1","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","handle$2","inSameTable","simulate","precheck","firstUpCheck","lastOffset","lastDownCheck","findCell","MouseSelection","clearstate","applySelection","selectContents","isKey","keycode","isUp","isDown","isNavigation","ltr$2","isBackward","rtl$2","by","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","getScrollY","rc","keyboard","clearToNavigate","realEvent","update$1","removeClasses","byClass","addSelectionClass","removeSelectionClasses","byAttr","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","getUpOrLeftCells","upGrid","upDetails","slicedCells","getDownOrRightCells","downGrid","downDetails","getOtherCells","hasInternalTarget","CellSelection","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","ns","wrappedEvent","isLeftMouse","isLeftButtonPressed","dragStart","mouseDown","mouseOver","mouseUp","getDoubleTap","lastTarget","lastTimeStamp","touchEnd","lT","lTS","timeStamp","doubleTap","getSelectionTargets","changeHandlers","selectionDetails","isCaption","isDisabledForSelection","findTargets","table$1","getExtractedDetails","onAny","onFirst","onLast","unmergeable","resetTargets","isDisabledFromLocked","lockedDisable","onSetupTable","onSetupCellOrRow","onSetupColumn","onSetupPasteable","getClipboardData","onSetupPasteableColumn","onSetupMergeable","_targets","onSetupUnmergeable","addButtons","addToolbars","addContextToolbar","addMenuItems","insertTableAction","tableProperties","deleteTable","addTempAttr","Plugin$1","_defineProperty","enumerable","configurable","isNull","assumeExternalTargets","externalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","getDefaultLinkProtocol","sanitizeList","extractValue","sanitizeWith","extracter","sanitize","createUi","ListOptions","isLink","getHref","collectNodesInRange","cloneContents","hasProtocol","applyRelTargetRules","isUnsafe","rels","addTargetRules","removeTargetRules","inArray","newRels","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","hasLinks","hasLinksInSelection","isOnlyTextSelected","inlineTextElements","getTextInlineElements","getLinkAttrs","handleExternalTargets","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","updateLink","createLink","linkImageFigure","createHTML","linkDomMutation","attachState","unlinkSelection","startAnchorElm","endAnchorElm","unlinkDomMutation","unlinkImageFigure","unwrapOptions","cls","fig","findTextByValue","catalog","persistentText","hasPersistentText","findCatalog","catalogs","linkCatalog","persistentData","getTitleFromUrlChange","getTextFromUrlChange","onUrlChange","onCatalogChange","DialogChanges","delayedConfirm","tryEmailTransform","suggestMailTo","tryProtocolTransform","defaultLinkProtocol","suggestProtocol","DialogConfirms","anchorNodes","AnchorListOptions","ClassListOptions","parseJson","getLinks","extractor","convertURL","linkList","optItems","noneItem","LinkListOptions","getRels","isTargetBlank_1","enforceSafe","safeRelExtractor","sanitizer","RelOptions","fallbacks","getTargets","TargetOptions","nonEmptyAttr","extractFromAnchor","onlyText","linkClass","collect","linkNode","links","optNode","flags","titleEnabled","DialogInfo","handleSubmit","getChangedValue","changedData","pData","collectData","getInitialData","defaultTarget","makeDialog","urlInput","titleText","dialogDelta","appendClickRemove","createEvent","initMouseEvent","getLink","getSelectedLink","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","scrollIntoView","openDialog","gotoSelectedLink","setupGotoLinks","toggler","toggleActiveState","toggleEnabledState","toggleUnlinkState","hasLinks$1","addShortcut","setupButtons","setupMenuItems","setupContextMenu","inLink","noLink","setupContextToolbars","collapseSelectionToEnd","onSetupLink","addContextForm","hasDimensions","hasAdvTab","hasUploadTab","getPrependUrl","hasDescription","hasImageTitle","hasImageCaption","getImageList","hasUploadUrl","hasUploadHandler","showAccessibilityOptions","isAutomaticUploadsEnabled","parseIntAndGetMax","val1","val2","getImageSize","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","imageList","waitLoadImage","imgElm","selectImage","isPlaceholderImage","getHspace","marginLeft","marginRight","getVspace","marginTop","marginBottom","hasCaption","updateAttrib","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","attrValue","setSize","getSize","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","isImage","getIsDecorative","getAlt","hspace","vspace","isDecorative","getStyleValue","setAlt","figure","updateProp","sugarImage","updateAlt","normalized","mergedCss","compressed","getSelectedImage","splitTextBlock","textBlockElements","parentElm","isValidChild","readImageDataFromSelection","insertImageAtCaret","outerHTML","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","insertOrUpdateImage","partialData","selectedImageData","isGroup","findEntryDelegate","findEntry","optList","ListUtils","makeTab","AdvTab","urlListSanitizer","futureImageList","hasAdvTab$1","hasUploadTab$1","hasUploadUrl$1","hasUploadHandler$1","hasDescription$1","hasImageTitle$1","hasDimensions$1","hasImageCaption$1","hasAccessibilityOptions","automaticUploads","prependURL","preUrl","makeItems","imageUrl","imageDescription","imageTitle","imageDimensions","makeTab$1","MainTab","makeTab$2","UploadTab","prevImage","prevAlt","fromImageData","images","fileinput","toImageData","removeEmptyAlt","addPrependUrl2","srcURL","prependUrl","addPrependUrl","formFillFromMeta2","formFillFromMeta","calculateImageSize","helpers","imageSize","updateImagesDropdown","changeSrc","changeImages","calcVSpace","matchingTopBottom","calcHSpace","matchingLeftRight","calcBorderWidth","calcBorderStyle","calcStyle","changeStyle2","dataCopy","changeStyle","changeAStyle","changeFileInput","blobUri","finalize","updateSrcAndSwitchTab","dataUrl","createBlobCache","uploadImage","alertErr","addToBlobCache","changeHandler","closeHandler","makeDialogBody","tabPanel","submitHandler","editorUpload","uploadImagesAuto","blobCache","filename","normalizeCss$1","stylesArg","Dialog","hasImageClass","toggleContentEditableState","toggleContentEditable","addNodeFilter","selectorChangedWithUnbind","removeZwsp","punctuationStr","regExps","aletter","midnumlet","midletter","midnum","numeric","cr","lf","newline","katakana","extendnumlet","punctuation","characterIndices","ALETTER","MIDNUMLET","MIDLETTER","MIDNUM","NUMERIC","CR","LF","NEWLINE","EXTEND","FORMAT","KATAKANA","EXTENDNUMLET","AT","OTHER","SETS","EMPTY_STRING","PUNCTUATION","WHITESPACE","SETS$1","setsLength","memoize","classify","memoized","isWordBoundary","nextType","nextNextType","prevType","EMPTY_STRING$1","WHITESPACE$1","PUNCTUATION$1","isProtocol","findWordEnd","findUrlEnd","peakedWord","findWords","chars","sChars","characterMap","word","includeWhitespace","includePunctuation","startOfWord","endOfWord","endOfUrl","getDefaultOptions","getWords","filteredChars","extractedChars","getWords$1","shortEndedElements","getShortEndedElements","isNewline","txt","treeWalker","strLen","countWords","countCharacters","countCharactersWithoutSpaces","createBodyCounter","createSelectionCounter","createBodyWordCounter","getWordCount","getCharacterCount","getCharacterCountWithoutSpaces","getCount","fireWordCountUpdate","charactersWithoutSpaces","updateCount","debouncedUpdate","debounce","source_view","editorContent"],"mappings":"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UpxH,QAAQq5F,GAASlnE,EAAMknE,EAAO65B,iBAIxDsB,GAAoB,SAAUriG,GAChC,OAAOmiG,GAASniG,IAGdsiG,GAAU,SAAU71H,EAAOgwC,EAAK7S,GAClC,IAAI24F,EAA+B,kBAAV91H,EAAqB+8B,WAAW/8B,GAASA,EAMlE,OALI81H,EAAc34F,EAChB24F,EAAc34F,EACL24F,EAAc9lF,IACvB8lF,EAAc9lF,GAET8lF,GAELC,GAAa,WACf,MAAO,CACL,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,IAGAC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEEC,GAAW,SAAUC,EAASC,GAIhC,IAHA,IAEI5rH,EAFA+1F,EAAM,GACN81B,EAAM,IAAI5zH,MAAM,IAEXf,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIiB,EAAI,EAAGA,EAAI,EAAGA,IACrB49F,EAAI59F,GAAKyzH,EAAQzzH,EAAQ,EAAJjB,GAEvB,IAASiB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B6H,EAAM,EACN,IAAK,IAAI9H,EAAI,EAAGA,EAAI,EA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","file":"assets/js/chunk-3555581c.b3565ea7.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$1 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$1,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$1,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var asDefaultedOptionThunk = adt.asDefaultedOptionThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$2 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$2(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return get$1(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = get$1(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(get$1(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = get$1(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Optional.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Optional.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, function (value) {\n        return value !== undefined && value !== null;\n      }));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, _instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, strength, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, strength, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (desc, processor) {\n      var getP = cached(function () {\n        return processor();\n      });\n      var extract = function (path, strength, val) {\n        return getP().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = get$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = get$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$2(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq$1(component.element, simulatedEvent.event.target);\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', always),\n        defaulted$1('abort', never),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var constant$1 = constant;\n    var touchstart = constant$1('touchstart');\n    var touchmove = constant$1('touchmove');\n    var touchend = constant$1('touchend');\n    var touchcancel = constant$1('touchcancel');\n    var mousedown = constant$1('mousedown');\n    var mousemove = constant$1('mousemove');\n    var mouseout = constant$1('mouseout');\n    var mouseup = constant$1('mouseup');\n    var mouseover = constant$1('mouseover');\n    var focusin = constant$1('focusin');\n    var focusout = constant$1('focusout');\n    var keydown = constant$1('keydown');\n    var keyup = constant$1('keyup');\n    var input = constant$1('input');\n    var change = constant$1('change');\n    var click = constant$1('click');\n    var transitionend = constant$1('transitionend');\n    var selectstart = constant$1('selectstart');\n\n    var prefixName = function (name) {\n      return constant('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight = prefixName('highlight');\n    var dehighlight = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).fold(function () {\n          var closest$1 = closest(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest$1.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$2(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$3(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow$1(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq$1(originator, component.element) && !eq$1(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom[idAttr$1] : null;\n      return Optional.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : ''));\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: never\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArrays([\n          component.getApis(),\n          component\n        ], rest));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$2(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = get$1(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var baseBehaviour = 'alloy.base.behaviour';\n    var toInfo = function (spec) {\n      var _a;\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith((_a = {}, _a[execute()] = [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ], _a[focus()] = [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ], _a[systemInit()] = [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ], _a[input()] = [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ], _a[detachedFromDom()] = [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'tooltipping'\n        ], _a[mousedown()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[touchstart()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[mouseover()] = [\n          'item-type-events',\n          'tooltipping'\n        ], _a[receive()] = [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ], _a)), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$3(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var get$6 = function (element) {\n      return element.dom.value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = get$1(spec, 'behaviours').getOr({});\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$1(spec, 'components').getOr([]);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: {}\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      return api$1.set(element, h);\n    };\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$a = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$a(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left, xy.top, w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds(window);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$1(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$2, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest$1(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$3(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$3(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant$1(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq$1(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = function (x, y, bubble, direction, boundsRestriction, label) {\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        boundsRestriction: boundsRestriction,\n        label: label\n      };\n    };\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$1(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds, boundsRestrictions, bubbleOffsets) {\n      var applyRestriction = function (dir, current) {\n        var bubbleOffset = dir === 'top' || dir === 'bottom' ? bubbleOffsets.top : bubbleOffsets.left;\n        return get$1(boundsRestrictions, dir).bind(identity).bind(function (restriction) {\n          if (dir === 'left' || dir === 'top') {\n            return restriction >= current ? Optional.some(restriction) : Optional.none();\n          } else {\n            return restriction <= current ? Optional.some(restriction) : Optional.none();\n          }\n        }).map(function (restriction) {\n          return restriction + bubbleOffset;\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds.x);\n      var adjustedTop = applyRestriction('top', bounds.y);\n      var adjustedRight = applyRestriction('right', bounds.right);\n      var adjustedBottom = applyRestriction('bottom', bounds.bottom);\n      return bounds$1(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var eastX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), boundsRestriction(anchor, { bottom: 2 }), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), boundsRestriction(anchor, { top: 3 }), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), boundsRestriction(anchor, { left: 0 }), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), boundsRestriction(anchor, { right: 1 }), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$1,\n        northwest$1,\n        southeast$1,\n        southwest$1,\n        north$1,\n        south$1\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$1,\n        northeast$1,\n        southwest$1,\n        southeast$1,\n        north$1,\n        south$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter(channels, function (ch) {\n        return contains(message.channels, ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$2(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$2(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant(schemaSchema),\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return get$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: constant(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$1(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var blur = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq$1(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq$1(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      return {\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      };\n    };\n    var applyPositionCss = function (element, position) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      setOptions(element, {\n        position: Optional.some(position.position),\n        left: position.left.map(addPx),\n        top: position.top.map(addPx),\n        right: position.right.map(addPx),\n        bottom: position.bottom.map(addPx)\n      });\n    };\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x - x;\n      var decisionY = decision.y - y;\n      var decisionWidth = decision.width;\n      var decisionHeight = decision.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return NuPositionCss('absolute', Optional.some(decision.x), Optional.some(decision.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$3(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x, bounds.y);\n          return bounds$1(pos.left, pos.top, bounds.width, bounds.height);\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var none$1 = adt$3.none;\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var adt$4 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x;\n      var boundsY = bounds.y;\n      var boundsWidth = bounds.width;\n      var boundsHeight = bounds.height;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var maxX = Math.max(bounds.x, bounds.right - width);\n      var maxY = Math.max(bounds.y, bounds.bottom - height);\n      var limitX = clamp(newX, bounds.x, maxX);\n      var limitY = clamp(newY, bounds.y, maxY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x;\n      var candidateY = candidate.y;\n      var bubbleOffsets = candidate.bubble.offset;\n      var bubbleLeft = bubbleOffsets.left;\n      var bubbleTop = bubbleOffsets.top;\n      var adjustedBounds = adjustBounds(bounds, candidate.boundsRestriction, bubbleOffsets);\n      var boundsY = adjustedBounds.y;\n      var boundsBottom = adjustedBounds.bottom;\n      var boundsX = adjustedBounds.x;\n      var boundsRight = adjustedBounds.right;\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction, eastAvailable, eastAvailable, westAvailable);\n      var reposition = {\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        classes: {\n          on: candidate.bubble.classesOn,\n          off: candidate.bubble.classesOff\n        },\n        label: candidate.label,\n        candidateYforTest: newY\n      };\n      return originInBounds && sizeInBounds ? adt$4.fit(reposition) : adt$4.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$4.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$4.nofit(newReposition, newDeltaW, newDeltaH) : adt$4.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$4.fit, bestNext);\n      }, adt$4.nofit({\n        x: anchorBox.x,\n        y: anchorBox.y,\n        width: elementBox.width,\n        height: elementBox.height,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y\n      }, -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$2(p),\n        height: getOuter$1(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position = function (element, decision, options) {\n      applyPositionCss(element, reposition(options.origin, decision));\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      };\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return get$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind(alignmentsOn, getClasses),\n          classesOff: bind(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$5(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement(current) && get$3(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$b = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$b(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$b(component.element, anchorInfo, all$2(), allRtl(), all$2(), allRtl(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var adt$5 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity, identity);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$5.screen;\n    var absolute$2 = adt$5.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element);\n        return eq$1(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(SugarPosition(newLeft, newTop));\n      return Optional.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$b(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$6.before;\n    var on = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$7 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$7.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$7.domRange;\n    var relative$1 = adt$7.relative;\n    var exact = adt$7.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$8 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$8.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$8.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$8.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr = adt$8.ltr;\n    var rtl = adt$8.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$c = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$c(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start, sel.soffset);\n        var modFinish = descendOnce$1(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$3 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before(sel.start, x);\n          return getFirstRect$1(win, SimSelection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return capRect(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$b(component.element, submenuInfo, all$3(), allRtl$1(), all$3(), allRtl$1(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element, 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element, 'visibility');\n        set$2(placee.element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element, 'visibility');\n        }, function (vis) {\n          set$2(placee.element, 'visibility', vis);\n        });\n        if (getRaw(placee.element, 'left').isNone() && getRaw(placee.element, 'top').isNone() && getRaw(placee.element, 'right').isNone() && getRaw(placee.element, 'bottom').isNone() && getRaw(placee.element, 'position').is('fixed')) {\n          remove$6(placee.element, 'position');\n        }\n      }, placee.element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element, child.element);\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$1(sandbox.element, attr);\n      }, function (v) {\n        set$1(sandbox.element, attr, v);\n      });\n      set$2(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$2(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Optional.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (comp) {\n        contents.set(Optional.some(comp));\n      };\n      var get = function () {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Optional.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$1(dataByValue.get(), itemString).orThunk(function () {\n          return get$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$1(item, 'meta').each(function (meta) {\n            get$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$d = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$d\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return get$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$2(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$2(detail.partUids, function (pUid, _k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$3(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq$1(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$7(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq$1, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', never));\n\n    var CyclicType = create$3(state$1('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Optional.none();\n    });\n\n    var flatgrid = function () {\n      var dimensions = Cell(Optional.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Optional.some({\n          numRows: numRows,\n          numColumns: numColumns\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq$1(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq$1(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, _gridState) {\n      descendant$1(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$2(moveLeft, moveRight)),\n      rule(inSet(UP), north$2(moveNorth)),\n      rule(inSet(DOWN), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape),\n      rule(inSet(SPACE.concat(ENTER)), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$3(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Optional.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER), execute$3),\n        rule(inSet(SPACE), execute$3),\n        rule(inSet(ESCAPE), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Optional.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$2(moveNorth$1)),\n      rule(inSet(DOWN), south$2(moveSouth$1)),\n      rule(inSet(SPACE.concat(ENTER)), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig, _state) {\n      descendant$1(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP), move(moveUp$1)),\n      rule(inSet(DOWN), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute$5),\n      rule(inSet(SPACE), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq$1(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$4(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function () {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run(click(), onClick),\n        run(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = constant('item-widget');\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$1(byMenu, finish).bind(function (triggerItem) {\n        return get$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$2(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$2(items, function (menu) {\n        return get$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Optional.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Optional.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Optional.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$1(expansions.get(), itemValue).map(function (menu) {\n          var current = get$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$1(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$1(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$1(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, _rawUiSpec) {\n      var submenuParentItems = Cell(Optional.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$2(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$2(detail.data.menus, function (data, _menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$3(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Optional.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Optional.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$3(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Optional.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Optional.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Optional.none),\n        defaulted$1('isExtraPart', never),\n        defaulted$1('eventOrder', Optional.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y;\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSoutheast(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), 'layout-inner-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSouthwest(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), 'layout-inner-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNortheast(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), 'layout-inner-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNorthwest(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), 'layout-inner-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), south(), boundsRestriction(anchor, { top: 2 }), 'layout-inner-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), north(), boundsRestriction(anchor, { bottom: 3 }), 'layout-inner-s');\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Optional.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$e = function (name, icons) {\n      return Optional.from(icons()[name.toLowerCase()]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Optional.from(icons()[name.toLowerCase()]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Optional.from(icons()[name.toLowerCase()]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', detail.iconProvider),\n              attributes: { 'aria-label': detail.translationProvider('Close') }\n            }\n          }],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__icon'],\n            innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n          }\n        },\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__body']\n          },\n          components: [memBannerText.asSpec()],\n          behaviours: derive$1([Replacing.config({})])\n        }\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }, backstage.shared.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$3(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$1 = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText$1 = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText$1(node)) {\n        return point$1(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$1(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$1(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted$1('type', 'autocompleteitem'),\n      defaulted$1('active', false),\n      defaulted$1('disabled', false),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$2(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      strictString('type'),\n      strictString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      strictString('type'),\n      strictString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      strictString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      strictArrayOf('items', itemSchema$2)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('label'),\n      strictArrayOf('items', itemSchema$2),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Optional.none());\n      var popup = Cell(Optional.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (comp) {\n        popup.set(Optional.some(comp));\n      };\n      var clearTooltip = function () {\n        popup.set(Optional.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Optional.some(setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$3(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element, 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig) {\n      return nu$6({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$7.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$5.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      return selector.length > 0 && editor.inline ? descendant$1(body(), selector) : Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$2(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          if (comp.getSystem().isConnected()) {\n            emit(comp, sandboxClose());\n          }\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a = {}, _a[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a);\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$8.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$8.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$6.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$6.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [checkmarkClass],\n          innerHtml: get$e('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-down', icons)\n        }\n      };\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArrays(baseDom.classes, ['tox-swatches__picker-btn']),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArrays(baseDom.classes, ['tox-swatch--remove']),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (rtlClass, ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$6.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? icon.or(Optional.some('')).map(renderIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(rtlClass, info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$6.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$6.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$1(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$5.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$6.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render = function (items, extras) {\n      return map(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(false, spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = generate$4(owner$2(), parts());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$9.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$9.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Optional.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(getColors(editor), hasCustomColors(editor)),\n        onAction: function (_splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), noop);\n          }\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Optional.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColors$1(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(click(), onClick),\n            run(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event.row;\n                  var col = e.event.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event.row + 1,\n                    numColumns: e.event.col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Optional.some(obj[key]) : Optional.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Optional.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Optional.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Optional.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: SugarElement.fromDom(editor.getBody()),\n          node: Optional.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$2 };\n\n    var filter$2 = always;\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$2, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq$1(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target)) && !closest$4(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$3().browser.isFirefox();\n    };\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Optional.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Optional.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(clearTimeout);\n        focusoutTimeout.get().each(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = get$1(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Optional.none();\n        }, function (id) {\n          return handlers.bind(function (h) {\n            return get$1(h, id);\n          }).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return get$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var handlers = get$1(registry, type);\n        return closest(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, _eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element);\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$1(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$d(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq$1(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element)) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element, 'for', id);\n              set$1(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element, 'id', descriptorId);\n              set$1(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$3(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$6.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$a.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(click(), onClick),\n        run(tap(), onClick),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$1(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$4(childElm, 'tox-collection__item--state-disabled');\n                remove$1(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$6(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$6(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$6(input.element);\n              if (current !== data) {\n                set$3(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$1\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Optional.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$1(coupled, name).getOrThunk(function () {\n            var builder = get$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$8(hotspot.element);\n      if (useMinWidth) {\n        set$2(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel({ isExtraPart: never })), receivingChannel$1({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function () {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function () {\n      return derive([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$1,\n              southeast$1,\n              south$1\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$1,\n              southwest$1,\n              south$1\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = generate$1('rgb-hex-update');\n    var sliderUpdate = generate$1('slider-update');\n    var paletteUpdate = generate$1('palette-update');\n\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive([\n            run(touchstart(), setValueFrom),\n            run(touchmove(), setValueFrom),\n            run(mousedown(), setValueFrom),\n            run(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var isTouchEvent = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$8(thumb.element) / 2;\n      set$2(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Optional.none;\n    var onDown = Optional.none;\n    var edgeActions = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left);\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top);\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$8(thumb.element) / 2;\n      var thumbYRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      state$1('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run(touchstart(), onDragStart),\n          run(touchend(), onDragEnd),\n          run(mousedown(), onDragStart),\n          run(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$2(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element.dom;\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var state = { paletteRgba: Cell(red) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba.set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldRgb = state.paletteRgba.get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue, value.x, 100 - value.y);\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var hex = calcHex(value.y);\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate, paletteUpdates()),\n              run(sliderUpdate, sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Optional.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Optional.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$b.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Optional.none());\n                  editorApi.set(Optional.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Optional.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$6, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$2, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$c.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter(from$1(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$5 = function (width, height) {\n      return resize(document.createElement('canvas'), width, height);\n    };\n    var clone$1 = function (canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var anyWindow = window;\n      var asap = Promise.immediateFn || typeof anyWindow.setImmediate === 'function' && anyWindow.setImmediate || function (fn) {\n        return setTimeout(fn, 1);\n      };\n      var bind = function (fn, thisArg) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return fn.apply(thisArg, args);\n        };\n      };\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      var doResolve = function (fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      };\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          var res = function (i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          };\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$6 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone$1);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp$1 = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity$1 = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp$1(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp$1(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp$1(adjustR, 0, 2);\n      adjustG = clamp$1(adjustG, 0, 2);\n      adjustB = clamp$1(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var rotate = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var flip = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$1 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a$1;\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a$1 = {}, _a$1[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a$1);\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = get$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$2(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch$1(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$e('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$e('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen$1);\n      var invertTransform = Optional.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var updateWithTouchData = function (e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || document;\n      var downButton;\n      var startX, startY;\n      var handleElement = doc.getElementById(settings.handle || id);\n      var start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        var handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (window.getComputedStyle) {\n          cursor = window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$e('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$e(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      var drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e);\n        global$e(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      var destroy = function () {\n        global$e(handleElement).off();\n      };\n      global$e(handleElement).on('mousedown touchstart', start);\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$d.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        global$e('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$c.each(blockers, function (blocker) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$c.each(handles, function (handle) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$c.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$e(containerElm).on('focusin focusout', function (e) {\n          global$e(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$e(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$c.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.keyCode) {\n          case global$g.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$g.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$g.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$g.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$g.ENTER:\n          case global$g.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      };\n      var toggleVisibility = function (state) {\n        var selectors = global$c.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$c.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$e(selectors, containerElm).show();\n        } else {\n          global$e(selectors, containerElm).hide();\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$e('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        };\n        global$c.each(handles, function (handle) {\n          global$e('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        global$c.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      };\n      render();\n      var instance = global$c.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$f);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Optional.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element, css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Optional.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom.naturalWidth,\n              h: img.dom.naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$d.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Optional.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Optional.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Optional.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$c.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Optional.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Optional.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant(noop),\n              getApi: constant({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$3(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$1(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$8 = function (detail, _spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$6(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$e('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$6(el);\n      var node = el.dom;\n      if (get$3(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$6(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Optional.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$e(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$e(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$e(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$6(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$1(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubble = nu$8(-12, 12, bubbleAlignments);\n      var overrides = { maxHeightFunction: expandable() };\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [northwest$3];\n            },\n            onLtr: function () {\n              return [northeast$3];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return hasCustomColors(editor);\n      };\n    };\n    var getColors$2 = function (editor) {\n      return function () {\n        return getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$2(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$1(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement$2 = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim$1 = global$c.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$2(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$9.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$9.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$2(global$c.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$6.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh = function (toolbar, detail, setOverflow) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element, 'visibility', 'hidden');\n      var groups = detail.builtGroups.get().concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups(primary, groups);\n      var availableWidth = get$8(primary.element);\n      var overflows = partition$3(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$8(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$l = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$m = constant([\n      markers(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink'),\n      state$1('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$l()));\n    var parts$8 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$k(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var schema$n = constant([\n      markers(['toggledClass']),\n      strict$1('lazySink'),\n      strictFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n      schema$1()\n    ]);\n    var parts$9 = constant([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle$2 = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position$2 = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, {\n        anchor: 'hotspot',\n        hotspot: button,\n        layouts: layouts,\n        overrides: { maxWidthFunction: expandable$1() }\n      }, toolbar, bounds);\n    };\n    var setGroups$1 = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position$2(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox$1 = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups$1(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position$2(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle$2(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox$1(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups$1(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position$2(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle$2(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite$1({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$n(),\n      partFields: parts$9(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$o = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$a = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$b = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$o(),\n      partFields: parts$a(),\n      factory: factory$b\n    });\n\n    var buildGroups = function (comps) {\n      return map(comps, function (g) {\n        return premade$1(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$c = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$1,\n              southeast$1\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$1,\n              southwest$1\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$1,\n              northeast$1\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$1,\n              northwest$1\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$m(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$2(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$2(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState, Optional.none());\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$8(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$p = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$l()));\n    var parts$b = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen$1 = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh$3 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh(toolbar, detail, function (groups) {\n          var builtGroups = map(groups, function (g) {\n            return premade$1(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$d = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh$3(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen$1(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds$1(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      strictString('type'),\n      strictOf('items', oneOf([\n        arrOfObj$1([\n          strictString('name'),\n          strictArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$e\n    });\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState$2\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$a = function () {\n      var cell = Cell(Optional.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$q = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$c = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$e = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element, 'id', descriptorId);\n            set$1(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$7(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$q(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      var getIconName = function (iconName) {\n        return global$6.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$6.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element, 'aria-pressed', state);\n            descendant$1(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x, contentAreaBox.x);\n      var contentBoxWidth = contentAreaBox.right - x;\n      var maxViewportWidth = viewportBounds.width - (x - viewportBounds.x);\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = box(container);\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y, viewportBounds.y),\n        bottom: Math.min(headerBox.y, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage) {\n      var viewportBounds = getBounds(window);\n      var contentAreaBox = box(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds$1(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop), y = _b.y, bottom = _b.bottom;\n        return bounds$1(x, y, width, bottom - y);\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor(startNode, function (ancestorElem) {\n          var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n          var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n          return toolbars.length > 0 ? Optional.some({\n            elem: ancestorElem,\n            toolbars: toolbars\n          }) : Optional.none();\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq$1(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains$2(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$4(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, _se) {\n              remove$4(comp.element, resizingClass);\n              remove$6(comp.element, 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$8(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$8(elem);\n              set$2(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$1(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, _se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : Optional.some(''),\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Optional.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Optional.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$1(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$1(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(function () {\n          return size;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return revocable(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value$3 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$1(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$1(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$1(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$1(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor, extras.backstage.shared);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().filter(function (ele) {\n          return inBody(SugarElement.fromDom(ele));\n        }).map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$9().top : absolute$1(SugarElement.fromDom(editor.getBody())).y;\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y, contextToolbarBounds.bottom);\n      };\n      var close = function () {\n        lastAnchor.set(Optional.none());\n        InlineView.hide(contextbar);\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Optional.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Optional.none());\n      var lastElement = Cell(Optional.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextMenuGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextMenuGroups(ctx, extras.backstage.shared.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$1('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: extras.backstage.shared.providers\n        });\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        get$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext([ctx], e.target === editor ? Optional.none() : Optional.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(SugarElement.fromDom);\n        var anchor = getAnchor(toolbarApi[0].position, sElem);\n        lastAnchor.set(Optional.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Optional.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        if (!editor.hasFocus()) {\n          return;\n        }\n        var scopes = getScopes();\n        lookup$1(scopes, editor).fold(close, function (info) {\n          launchContext(info.toolbars, Optional.some(info.elem.dom));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var asyncOpen = function () {\n        clearTimer();\n        timer.set(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent ObjectResized ResizeEditor', function () {\n          asyncOpen();\n        });\n        editor.on('focusout', function (_e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            asyncOpen();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(asyncOpen, noop);\n        });\n      });\n    };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var onTouchstart = bind$3(SugarElement.fromDom(document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(SugarElement.fromDom(document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(SugarElement.fromDom(document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(SugarElement.fromDom(document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(SugarElement.fromDom(document), 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$r = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$e = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$f = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$r(),\n      partFields: parts$e(),\n      factory: factory$f,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var setup$4 = noop;\n    var isDocked = never;\n    var getBehaviours$2 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$4,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours$2\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPosition().map(function (pos) {\n        return bounds$1(pos.bounds.x, pos.bounds.y, get$8(elem), get$7(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPosition(Optional.some({\n        style: getAllRaw(elem),\n        position: get$5(elem, 'position') || 'static',\n        bounds: box\n      }));\n    };\n    var revertToOriginal = function (elem, box$1, state) {\n      return state.getInitialPosition().bind(function (position) {\n        state.setInitialPosition(Optional.none());\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box).getOrThunk(function () {\n            return box(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$1(position.style, 'left').map(function (_left) {\n            return box$1.x - offsetBox_1.x;\n          }), get$1(position.style, 'top').map(function (_top) {\n            return box$1.y - offsetBox_1.y;\n          }), get$1(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box$1.right;\n          }), get$1(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box$1.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(state.getModes(), box$1, viewport)) {\n        storePrior(elem, box$1, state);\n        var winBox = win();\n        var left = box$1.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box$1.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, position) {\n      applyPositionCss(component.element, position);\n      var method = position.position === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element, contextInfo.transitionClass)) {\n              remove$5(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = Cell(Optional.none());\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$5({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPosition: initialBounds.get,\n        setInitialPosition: initialBounds.set,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$1(markerElement);\n      var markerHeight = get$7(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute(containerHeader);\n      var editorHeaderHeight = get$7(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$1(elm) + (parseInt(get$5(elm, 'margin-top'), 10) || 0) + (parseInt(get$5(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$8(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          set$2(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq$1(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq$1(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$5 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$2 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$3 = function (editor, sharedBackstage) {\n      var focusedElm = Cell(Optional.none());\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(SugarElement.fromDom(container));\n              var boxHeight = box$1.height - headerHeight;\n              var topBound = box$1.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds$1(box$1.x, topBound, box$1.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.set(Optional.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element, lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$5,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$3 : getBehaviours$2;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.sharedBackstage))\n      };\n    };\n\n    var factory$g = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq$1(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$g,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$s = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$s, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$3(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$2({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$6 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Optional.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$8(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element, 'width', se.event.width);\n            }),\n            run(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$2(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Optional.some(true);\n            },\n            onShiftTab: function () {\n              return Optional.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element;\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Optional.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Optional.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Optional.none());\n        }\n      });\n    };\n\n    var factory$h = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$d.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$1('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$h,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError$1 = function (editor, err) {\n      return function () {\n        return fireSkinLoadError(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$4(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$5.DOM.styleSheetLoader);\n      } else {\n        return global$4.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$4.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded$1(editor), fireSkinLoadError$1(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded$1(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$2(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll$1(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind$3(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$5.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$7(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$7(container.element) - offset;\n          var targetBounds = box(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$7(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$1(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$5(body(), 'margin-left')).getOr(0);\n          return get$8(body()) - absolute(targetElm).left + bodyMargin;\n        });\n        set$2(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$7(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll$1(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$2(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$2(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents$1 = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$2.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render$2 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents$1(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$2\n    });\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$c.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n\n    var register$6 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerButtons(editor);\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var normaliseLineHeight = function (input) {\n      return normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input);\n    };\n    var getLineHeights = function (editor) {\n      var options = getLineHeightFormats(editor);\n      var apis = new Map();\n      var lastApi = destroyable();\n      var callback = function () {\n        var current = normaliseLineHeight(editor.queryCommandValue('LineHeight'));\n        Optional.from(apis.get(current)).fold(function () {\n          return lastApi.clear();\n        }, function (api) {\n          lastApi.set({\n            destroy: function () {\n              api.setActive(false);\n            }\n          });\n          api.setActive(true);\n        });\n      };\n      editor.on('nodeChange', callback);\n      return map(options, function (value, i) {\n        return {\n          type: 'togglemenuitem',\n          text: value,\n          onSetup: function (api) {\n            apis.set(normaliseLineHeight(value), api);\n            if (i + 1 === options.length) {\n              callback();\n            }\n            return function () {\n              if (i === 0) {\n                editor.off('nodeChange', callback);\n                lastApi.clear();\n              }\n            };\n          },\n          onAction: function () {\n            return editor.execCommand('LineHeight', false, value);\n          }\n        };\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addNestedMenuItem('lineheight', {\n        type: 'nestedmenuitem',\n        text: 'Line height',\n        getSubmenuItems: function () {\n          return getLineHeights(editor);\n        }\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.ui.registry.addMenuButton('lineheight', {\n        tooltip: 'Line height',\n        icon: 'line-height',\n        fetch: function (callback) {\n          return callback(getLineHeights(editor));\n        }\n      });\n    };\n    var register$8 = function (editor) {\n      registerMenuItems(editor);\n      registerButtons$1(editor);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: toggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$c.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$1 = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$9 = function (editor) {\n      registerButtons$2(editor);\n      registerMenuItems$1(editor);\n    };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.mode.isReadOnly() || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$3 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$a = function (editor) {\n      registerMenuItems$2(editor);\n      registerButtons$3(editor);\n    };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$b = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$3(editor);\n    };\n\n    var setup$8 = function (editor, backstage) {\n      register$5(editor);\n      register$9(editor);\n      register$6(editor, backstage);\n      register$a(editor);\n      register$1(editor);\n      register$b(editor);\n      register$7(editor);\n      register$8(editor);\n    };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent$1 = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$5.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var items = buildMenu();\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var getPointAnchorSpec = function (editor, e) {\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, getPointAnchor(editor, e));\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, useNodeAnchor, highlightImmediately) {\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchorSpec(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: {\n            markers: markers$1('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, useNodeAnchor, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && !useNodeAnchor) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !useNodeAnchor) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items = contextMenus[name].update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var shouldUseNodeAnchor = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      if (isTriggeredByKeyboard(editor, e)) {\n        return true;\n      } else if (selector) {\n        var target = getSelectedElement(editor, e);\n        return closest$4(SugarElement.fromDom(target), selector);\n      } else {\n        return false;\n      }\n    };\n    var setup$9 = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var useNodeAnchor = shouldUseNodeAnchor(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, useNodeAnchor);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute$3(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed$1(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute$3), absorbOne(asFixed, fixed$1));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$3(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get$f = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$1(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$f(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left + delta.left, fixed.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo$1\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$2(root, 'z-index', zIndex);\n        });\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$5(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left, fixed.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element),\n        width: getOuter$2(comp.element)\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive(__spreadArrays([run(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState)));\n      };\n    };\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$g = function (dragConfig, dragState, updateStartState) {\n      return [run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$u = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$g) })]);\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var events$h = function (dragConfig, dragState, updateStartState) {\n      var blockerCell = Cell(Optional.none());\n      return [\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Optional.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: noop,\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Optional.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        })\n      ];\n    };\n    var schema$v = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$h) })]);\n\n    var events$i = function (dragConfig, dragState, updateStartState) {\n      return __spreadArrays(events$g(dragConfig, dragState, updateStartState), events$h(dragConfig, dragState, updateStartState));\n    };\n    var schema$w = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$i) })]);\n\n    var mouse = schema$u;\n    var touch = schema$v;\n    var mouseOrTouch = schema$w;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init$e = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$e\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute$3(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute$3(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq$1(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Optional.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$a = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Optional.none());\n      var finishCell = Cell(Optional.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$3().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Optional.some(e.start));\n          finishCell.set(Optional.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Optional.none());\n          finishCell.set(Optional.none());\n        });\n      }\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$7(container), get$8(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden$1(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: {\n              'title': providersBackstage.translate('Resize'),\n              'aria-hidden': 'true'\n            },\n            innerHtml: get$e('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$6.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !editor.hasPlugin('autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$b = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$6.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$2(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq$1(body(), uiContainer) && get$5(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive([run(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$6.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$3(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$8(editor, backstage);\n        setup$9(editor, lazySink, backstage);\n        setup$6(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$2(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$4(editor, contextToolbars, sink, { backstage: backstage });\n        setup$a(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$3(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$1('dialog-label');\n        set$1(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$x = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', always),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$f = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$2(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var block = function (component, config, state, getBusySpec) {\n      set$1(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade$1(blocker));\n      if (blocker.hasConfigured(Keying)) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$1(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$f = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$5({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Blocking = create$1({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var factory$i = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = Cell(Optional.none());\n      var showDialog = function (dialog) {\n        dialogComp.set(Optional.some(dialog));\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.set(Optional.none());\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$x(),\n      partFields: parts$f(),\n      factory: factory$i,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArrays(baseFooterButtonFields, [strictString('text')]);\n    var normalFooterButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields);\n    var menuFooterButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      strictString('text'),\n      strictString('value')\n    ];\n    var listBoxNestedItemFields = [\n      strictString('text'),\n      strictArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$3, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$3 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$j = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$j\n    });\n\n    var schema$y = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$g = constant([tabsPart]);\n\n    var factory$k = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$y(),\n      partFields: parts$g(),\n      factory: factory$k\n    });\n\n    var factory$l = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$l\n    });\n\n    var schema$z = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$h = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$m = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$1(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$z(),\n      partFields: parts$h(),\n      factory: factory$m,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor$2(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$5(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$7(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$8(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$7(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$5(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$5(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$7(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$2(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Optional.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Optional.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$8.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', providersBackstage.icons)\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus$1),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains$2(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains$2(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$2(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name(elem) !== 'button' || get$3(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$h = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$h(internalDialog.url, { base_uri: new global$h(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Optional.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$h(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Optional.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$c = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest$4(target, '.tox-alert-dialog') || closest$4(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$e = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$c(extras);\n      var confirmDialog = setup$d(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop))),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = setup$b(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup$e({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function Plugin () {\n      global.add('textcolor', function () {\n        console.warn('Text color plugin is now built in to the core editor, please remove it from your editor configuration');\n      });\n    }\n\n    Plugin();\n\n}());\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('tinymce-text',{attrs:{\"id\":\"tinymce\"},model:{value:(_vm.describe),callback:function ($$v) {_vm.describe=$$v},expression:\"describe\"}}),_c('el-button',{staticClass:\"mt10\",on:{\"click\":_vm.release}},[_vm._v(\"\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value),expression:\"value\"}],attrs:{\"id\":_vm.id},domProps:{\"value\":(_vm.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <textarea\r\n      :id=\"id\"\r\n      v-model=\"value\"\r\n    ></textarea>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport tinymce from \"tinymce/tinymce\";\r\n//tinymce\r\nimport \"tinymce/themes/silver/theme\";\r\nimport \"tinymce/plugins/image\";\r\nimport \"tinymce/plugins/link\";\r\nimport \"tinymce/plugins/code\";\r\nimport \"tinymce/plugins/table\";\r\nimport \"tinymce/plugins/lists\";\r\nimport \"tinymce/plugins/contextmenu\";\r\nimport \"tinymce/plugins/wordcount\";\r\nimport \"tinymce/plugins/colorpicker\";\r\nimport \"tinymce/plugins/textcolor\";\r\n//\r\nimport \"../../public/tinymce/langs/zh_CN.js\";\r\nexport default {\r\n  name: \"\",\r\n  props: {\r\n    id: String,\r\n    value: String,\r\n  },\r\n  data() {\r\n    return {\r\n      flag: true,\r\n      hasInit: false,\r\n      hasChange: false,\r\n    };\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      if (!this.hasChange && this.hasInit) {\r\n        this.setContent(val);\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    release() {\r\n      //content \r\n      let content = tinymce.get(this.id).getContent();\r\n      this.$emit(\"release\", content);\r\n    },\r\n    setContent(value) {\r\n      window.tinymce.get(this.id).setContent(value);\r\n    },\r\n    getContent() {\r\n      window.tinymce.get(this.id).getContent();\r\n    },\r\n    destroyTinymce() {\r\n      const tinymce = window.tinymce.get(this.id);\r\n      if (this.fullscreen) {\r\n        tinymce.execCommand(\"mceFullScreen\");\r\n      }\r\n\r\n      if (tinymce) {\r\n        tinymce.destroy();\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    var component = this;\r\n    tinymce.init({\r\n      selector: \"#\" + component.id,\r\n      language: \"zh_CN\",\r\n      hasChange: false,\r\n      hasInit: false,\r\n      menubar: false,\r\n      height: \"600px\",\r\n      body_class: \"panel-body \",\r\n      object_resizing: false,\r\n      end_container_on_empty_block: true,\r\n      powerpaste_word_import: \"clean\",\r\n      code_dialog_height: 450,\r\n      code_dialog_width: 1000,\r\n      media_live_embeds: true,\r\n      advlist_bullet_styles: \"square\",\r\n      advlist_number_styles: \"default\",\r\n      imagetools_cors_hosts: [\"www.tinymce.com\", \"codepen.io\"],\r\n      default_link_target: \"_blank\",\r\n      link_title: false,\r\n      relative_urls: false,\r\n      remove_script_host: false,\r\n      table_default_styles: {\r\n        width: \"100%\",\r\n        borderCollapse: \"collapse\",\r\n      },\r\n      image_title: false, // \r\n      automatic_uploads: true,\r\n      nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n      plugins: [\r\n        //imageimagetools\r\n        \"advlist autolink link axupimgs lists charmap print preview hr anchor pagebreak spellchecker \",\r\n        \"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking\",\r\n        \"save table contextmenu directionality emoticons template paste imagetools textcolor\",\r\n      ],\r\n      toolbar: [\r\n        \"searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample \",\r\n        \"hr bullist numlist link axupimgs charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen fontsizeselect\",\r\n      ],\r\n      file_picker_types: \"media\",\r\n      // lineheight_formats: \"8pt 9pt 10pt 11pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 26pt 36pt\",\r\n      file_picker_callback: function(cb, value, meta) {\r\n        //meidia,meta.filetype == 'media'file_picker_callbackmedia()image()file()\r\n        if (meta.filetype == \"media\") {\r\n          //type=fileinput\r\n          let input = document.createElement(\"input\");\r\n          input.setAttribute(\"type\", \"file\");\r\n          input.onchange = function() {\r\n            let file = this.files[0]; //\r\n            let xhr, formData;\r\n            xhr = new XMLHttpRequest();\r\n            xhr.open(\r\n              \"POST\",\r\n              YiMengYun.BASEURL + \"zxymobi-api/api/common/uploadImagePc\"\r\n            );\r\n            xhr.withCredentials = self.credentials;\r\n            xhr.upload.onprogress = function(e) {\r\n              // (e.loaded / e.total * 100)\r\n            };\r\n            xhr.onerror = function() {\r\n              //\r\n              console.log(xhr.status);\r\n              return;\r\n            };\r\n            xhr.onload = function() {\r\n              let json;\r\n              if (xhr.status < 200 || xhr.status >= 300) {\r\n                console.log(\"HTTP : \" + xhr.status);\r\n                return;\r\n              }\r\n              json = JSON.parse(xhr.responseText);\r\n              console.log(json, \"json\");\r\n              //JSON{status: 0, msg: \"\", data: {location: \"/localImgs/1546434503854.mp4\"}}\r\n              if (json.header.returnCode == 1) {\r\n                //\r\n                let mediaLocation = json.data.url;\r\n                //cb()mediaLocation\r\n                cb(mediaLocation, { title: json.data.url });\r\n              } else {\r\n                console.log(json.msg);\r\n                return;\r\n              }\r\n            };\r\n            formData = new FormData();\r\n            //file,\r\n            formData.append(\"file\", file);\r\n            //\r\n            xhr.send(formData);\r\n          };\r\n          //\r\n          input.click();\r\n        }\r\n      },\r\n      init_instance_callback: (editor) => {\r\n        if (this.value) {\r\n          editor.setContent(this.value);\r\n        }\r\n        this.hasInit = true;\r\n        editor.on(\"NodeChange Change KeyUp SetContent\", () => {\r\n          this.hasChange = true;\r\n          this.$emit(\"input\", editor.getContent());\r\n        });\r\n      },\r\n      setup: function(editor) {\r\n        editor.on(\"input undo redo execCommand\", function(e) {\r\n          component.flag = false;\r\n          component.$emit(\"input\", editor.getContent());\r\n        });\r\n      },\r\n      images_upload_handler: (blobInfo, success, failure) => {\r\n        var xhr, formData;\r\n        var file = blobInfo.blob(); //file\r\n        xhr = new XMLHttpRequest();\r\n        xhr.withCredentials = false;\r\n        xhr.open(\r\n          \"POST\",\r\n          YiMengYun.BASEURL + \"zxymobi-api/api/common/uploadImagePc\"\r\n        ); //strutsactionPHPxxx.php\r\n\r\n        xhr.onload = function() {\r\n          var json;\r\n          if (xhr.status !== 200) {\r\n            if (xhr.status === 413) {\r\n              failure(\"3M\");\r\n              return;\r\n            }\r\n            failure(\"HTTP Error: \" + xhr.status);\r\n            return;\r\n          }\r\n\r\n          json = JSON.parse(xhr.responseText);\r\n          if (!json || typeof json.data.url !== \"string\") {\r\n            failure(\"Invalid JSON: \" + xhr.responseText);\r\n            return;\r\n          }\r\n          console.log(json.data.url);\r\n          success(json.data.url);\r\n        };\r\n\r\n        formData = new FormData();\r\n        formData.append(\"file\", file, file.name);\r\n        xhr.send(formData);\r\n      },\r\n    });\r\n  },\r\n  // mounted() {\r\n  //   //\r\n  //   const that = this;\r\n  //   tinymce.init({\r\n  //     selector: \"#\" + that.id,\r\n  //     language: \"zh_CN\",\r\n  //     skin_url: \"tinymce/skins/ui/oxide\",\r\n  //     height: 500,\r\n  //     hasChange: false,\r\n  //     hasInit: false,\r\n  //     menubar: false,\r\n  //     body_class: \"panel-body \",\r\n  //     object_resizing: false,\r\n  //     end_container_on_empty_block: true,\r\n  //     powerpaste_word_import: \"clean\",\r\n  //     code_dialog_height: 450,\r\n  //     code_dialog_width: 1000,\r\n  //     media_live_embeds: true,\r\n  //     advlist_bullet_styles: \"square\",\r\n  //     advlist_number_styles: \"default\",\r\n  //     imagetools_cors_hosts: [\"www.tinymce.com\", \"codepen.io\"],\r\n  //     default_link_target: \"_blank\",\r\n  //     link_title: false,\r\n  //     relative_urls: false,\r\n  //     remove_script_host: false,\r\n  //     table_default_styles: {\r\n  //       width: \"100%\",\r\n  //       borderCollapse: \"collapse\",\r\n  //     },\r\n  //     image_title: false, // \r\n  //     automatic_uploads: true,\r\n  //     nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n  //     plugins: [\r\n  //       //imageimagetools\r\n  //       \"advlist autolink link axupimgs lists charmap print preview hr anchor pagebreak spellchecker \",\r\n  //       \"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking\",\r\n  //       \"save table contextmenu directionality emoticons template paste imagetools textcolor\",\r\n  //     ],\r\n  //     toolbar: [\r\n  //       \"searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample \",\r\n  //       \"hr bullist numlist link axupimgs charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen fontsizeselect\",\r\n  //     ],\r\n  //     file_picker_types: \"media\",\r\n  //     //\r\n  //     file_picker_callback: function(cb, value, meta) {\r\n  //       //meidia,meta.filetype == 'media'file_picker_callbackmedia()image()file()\r\n  //       if (meta.filetype == \"media\") {\r\n  //         //type=fileinput\r\n  //         let input = document.createElement(\"input\");\r\n  //         input.setAttribute(\"type\", \"file\");\r\n  //         input.onchange = function() {\r\n  //           let file = this.files[0]; //\r\n  //           let xhr, formData;\r\n  //           xhr = new XMLHttpRequest();\r\n  //           xhr.open(\r\n  //             \"POST\",\r\n  //             YiMengYun.BASEURL + \"zxymobi-api/api/common/uploadImagePc\"\r\n  //           );\r\n  //           xhr.withCredentials = self.credentials;\r\n  //           xhr.upload.onprogress = function(e) {\r\n  //             // (e.loaded / e.total * 100)\r\n  //           };\r\n  //           xhr.onerror = function() {\r\n  //             //\r\n  //             console.log(xhr.status);\r\n  //             return;\r\n  //           };\r\n  //           xhr.onload = function() {\r\n  //             let json;\r\n  //             if (xhr.status < 200 || xhr.status >= 300) {\r\n  //               console.log(\"HTTP : \" + xhr.status);\r\n  //               return;\r\n  //             }\r\n  //             json = JSON.parse(xhr.responseText);\r\n  //             console.log(json, \"json\");\r\n  //             //JSON{status: 0, msg: \"\", data: {location: \"/localImgs/1546434503854.mp4\"}}\r\n  //             if (json.header.returnCode == 1) {\r\n  //               //\r\n  //               let mediaLocation = json.data.url;\r\n  //               //cb()mediaLocation\r\n  //               cb(mediaLocation, { title: json.data.url });\r\n  //             } else {\r\n  //               console.log(json.msg);\r\n  //               return;\r\n  //             }\r\n  //           };\r\n  //           formData = new FormData();\r\n  //           //file,\r\n  //           formData.append(\"file\", file);\r\n  //           //\r\n  //           xhr.send(formData);\r\n  //         };\r\n  //         //\r\n  //         input.click();\r\n  //       }\r\n  //     },\r\n  //     init_instance_callback: (editor) => {\r\n  //       if (that.value) {\r\n  //         editor.setContent(that.value);\r\n  //       }\r\n  //       that.hasInit = true;\r\n  //       editor.on(\"NodeChange Change KeyUp SetContent\", () => {\r\n  //         that.hasChange = true;\r\n  //         that.$emit(\"input\", editor.getContent());\r\n  //       });\r\n  //     },\r\n  //     setup: function(editor) {\r\n  //       editor.on(\"input undo redo execCommand\", function(e) {\r\n  //         // that.flag = false;\r\n  //         that.$emit(\"input\", editor.getContent());\r\n  //         // that.release();\r\n  //       });\r\n  //     },\r\n  //     //\r\n  //     images_upload_handler: function(blobInfo, succFun, failFun) {\r\n  //       var xhr, formData;\r\n  //       var file = blobInfo.blob(); //file\r\n  //       xhr = new XMLHttpRequest();\r\n  //       xhr.withCredentials = false;\r\n  //       xhr.open(\"POST\", \"/demo/upimg2.php\");\r\n  //       xhr.onload = function() {\r\n  //         var json;\r\n  //         if (xhr.status != 200) {\r\n  //           failFun(\"HTTP Error: \" + xhr.status);\r\n  //           return;\r\n  //         }\r\n  //         json = JSON.parse(xhr.responseText);\r\n  //         if (!json || typeof json.location != \"string\") {\r\n  //           failFun(\"Invalid JSON: \" + xhr.responseText);\r\n  //           return;\r\n  //         }\r\n  //         succFun(json.location);\r\n  //       };\r\n  //       formData = new FormData();\r\n  //       formData.append(\"file\", file, file.name);\r\n  //       xhr.send(formData);\r\n  //     },\r\n  //   });\r\n  // },\r\n  beforeDestroy() {\r\n    //\r\n    tinymce.get(this.id).destroy();\r\n  },\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TinymceText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TinymceText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TinymceText.vue?vue&type=template&id=1a9c6b33&\"\nimport script from \"./TinymceText.vue?vue&type=script&lang=js&\"\nexport * from \"./TinymceText.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <tinymce-text\r\n      id=\"tinymce\"\r\n      v-model=\"describe\"\r\n    >\r\n    </tinymce-text>\r\n    <el-button\r\n      @click=\"release\"\r\n      class=\"mt10\"\r\n    ></el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TinymceText from \"@/components/TinymceText\";\r\n\r\nexport default {\r\n  name: \"\",\r\n  data() {\r\n    return {\r\n      describe: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    release() {\r\n      console.log(\"\", this.describe);\r\n    },\r\n  },\r\n  components: {\r\n    \"tinymce-text\": TinymceText,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.mt10 {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=48ac5e33&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=48ac5e33&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48ac5e33\",\n  null\n  \n)\n\nexport default component.exports","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var ELEMENT = 1;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var matchNodeName = function (name) {\n      return function (node) {\n        return node && node.nodeName.toLowerCase() === name;\n      };\n    };\n    var matchNodeNames = function (regex) {\n      return function (node) {\n        return node && regex.test(node.nodeName);\n      };\n    };\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = matchNodeNames(/^(OL|UL|DL)$/);\n    var isOlUlNode = matchNodeNames(/^(OL|UL)$/);\n    var isOlNode = matchNodeName('ol');\n    var isListItemNode = matchNodeNames(/^(LI|DT|DD)$/);\n    var isDlItemNode = matchNodeNames(/^(DT|DD)$/);\n    var isTableCellNode = matchNodeNames(/^(TH|TD)$/);\n    var isBr = matchNodeName('br');\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      return dom.isBlock(node.nextSibling) && !isBr(node.previousSibling);\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var blockName = getForcedRootBlock(editor);\n      var node, textBlock, hasContentNode;\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === blockName.toUpperCase()) {\n          dom.setAttribs(textBlock, getForcedRootBlockAttrs(editor));\n        }\n        if (!isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!blockName) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var DOM = global$4.DOM;\n    var splitList = function (editor, ul, li) {\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM.remove(targetNode);\n      };\n      var bookmarks = DOM.select('span[data-mce-type=\"bookmark\"]', ul);\n      var newBlock = createTextBlock(editor, li);\n      var tmpRng = DOM.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      var fragment = tmpRng.extractContents();\n      for (var node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM.insertAfter(fragment, ul);\n      }\n      DOM.insertAfter(newBlock, ul);\n      if (isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM.remove(li);\n      if (isEmpty(editor.dom, ul)) {\n        DOM.remove(ul);\n      }\n    };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return splitList(editor, dl.dom, item.dom);\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor, node) {\n      var selectionStart = node || editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$6.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$6.unique(listRoots);\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: SugarElement.fromTag(listType, scope),\n        item: SugarElement.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = SugarElement.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          dirty: false,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n      entry.dirty = true;\n    };\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = __assign({}, source.listAttributes);\n    };\n    var cleanListProperties = function (entry) {\n      entry.listAttributes = filter$1(entry.listAttributes, function (_value, key) {\n        return key !== 'start';\n      });\n    };\n    var closestSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      var matches = function (entry) {\n        return entry.depth === depth && !entry.dirty;\n      };\n      var until = function (entry) {\n        return entry.depth < depth;\n      };\n      return findUntil(reverse(entries.slice(0, start)), matches, until).orThunk(function () {\n        return findUntil(entries.slice(start + 1), matches, until);\n      });\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        closestSiblingEntry(entries, i).fold(function () {\n          if (entry.dirty) {\n            cleanListProperties(entry);\n          }\n        }, function (matchingEntry) {\n          return cloneListProperties(entry, matchingEntry);\n        });\n      });\n      return entries;\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return map(normalizedEntries, function (entry) {\n        var content = fromElements(entry.content);\n        return SugarElement.fromDom(createTextBlock(editor, content.dom));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return composeList(editor.contentDocument, normalizedEntries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(getSelectedListItems(editor), SugarElement.fromDom);\n      return lift2(find(selectedListItems, not(hasFirstChildList)), find(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom);\n        });\n        before$1(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(getSelectedListRoots(editor), SugarElement.fromDom);\n      var dlItems = map(getSelectedDlItems(editor), SugarElement.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$4.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      var restoreEndPoint = function (start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return normalizeRange(rng);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n    var listState = function (editor, listName, activate) {\n      var nodeChangeHandler = function (e) {\n        var inList = findUntil(e.parents, isListNode, isTableCellNode).filter(function (list) {\n          return list.nodeName === listName && !isCustomList(list);\n        }).isSome();\n        activate(inList);\n      };\n      var parents = editor.dom.getParents(editor.selection.getNode());\n      nodeChangeHandler({ parents: parents });\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || isBr(node)) {\n          if (isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$7.isBookmarkNode(node)) {\n          if (isListNode(nextSibling) || isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng();\n      var listItemName = 'LI';\n      var root = getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      var bookmark = createBookmark(rng);\n      var selectedTextBlocks = getSelectedTextBlocks(editor, rng, root);\n      global$5.each(selectedTextBlocks, function (block) {\n        var listBlock;\n        var sibling = block.previousSibling;\n        var parent = block.parentNode;\n        if (!isListItemNode(parent)) {\n          if (sibling && isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n            listBlock = sibling;\n            block = dom.rename(block, listItemName);\n            sibling.appendChild(block);\n          } else {\n            listBlock = dom.create(listName);\n            block.parentNode.insertBefore(listBlock, block);\n            listBlock.appendChild(block);\n            block = dom.rename(block, listItemName);\n          }\n          removeStyles(dom, block, [\n            'margin',\n            'margin-right',\n            'margin-bottom',\n            'margin-left',\n            'margin-top',\n            'padding',\n            'padding-right',\n            'padding-bottom',\n            'padding-left',\n            'padding-top'\n          ]);\n          updateListWithDetails(dom, listBlock, detail);\n          mergeWithAdjacentLists(editor.dom, listBlock);\n        }\n      });\n      editor.selection.setRng(resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      var parentIsList = isListNode(parentList);\n      if (parentIsList && parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        applyList(editor, listName, detail);\n        var bookmark = createBookmark(editor.selection.getRng(true));\n        var allLists = parentIsList ? __spreadArrays([parentList], lists) : lists;\n        global$5.each(allLists, function (elm) {\n          updateList(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(resolveBookmark(bookmark));\n          applyList(editor, listName, detail);\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = getParentList(editor);\n      var selectedSubLists = getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n\n    var DOM$2 = global$4.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      var walker = new global$2(node, root);\n      if (isForward) {\n        if (isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node;\n      var targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var listNode;\n      var ul = fromElm.parentNode;\n      if (!isChildOfBody(dom, fromElm) || !isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      var node = toElm.lastChild;\n      if (node && isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(SugarElement.fromDom(toElm), SugarElement.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi, 0);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && isEmpty(dom, ul)) {\n          return true;\n        }\n        var rng_1 = normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n\n    var get$1 = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          backspaceDelete(editor, isForward);\n        }\n      };\n    };\n\n    var open = function (editor) {\n      var dom = editor.dom;\n      var currentList = getParentList(editor);\n      if (!isOlNode(currentList)) {\n        return;\n      }\n      editor.windowManager.open({\n        title: 'List Properties',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'input',\n              name: 'start',\n              label: 'Start list at number',\n              inputMode: 'numeric'\n            }]\n        },\n        initialData: { start: dom.getAttrib(currentList, 'start') || '1' },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var data = api.getData();\n          editor.undoManager.transact(function () {\n            dom.setAttrib(getParentList(editor), 'start', data.start === '1' ? '' : data.start);\n          });\n          api.close();\n        }\n      });\n    };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addCommand('mceListProps', function () {\n        open(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      setup(editor);\n    };\n\n    var register$1 = function (editor) {\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!editor.hasPlugin('advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'OL', api.setActive);\n          }\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'UL', api.setActive);\n          }\n        });\n      }\n    };\n\n    var register$2 = function (editor) {\n      var listProperties = {\n        text: 'List properties...',\n        icon: 'ordered-list',\n        onAction: function () {\n          return open(editor);\n        },\n        onSetup: function (api) {\n          return listState(editor, 'OL', function (active) {\n            return api.setDisabled(!active);\n          });\n        }\n      };\n      editor.ui.registry.addMenuItem('listprops', listProperties);\n      editor.ui.registry.addContextMenu('lists', {\n        update: function (node) {\n          var parentList = getParentList(editor, node);\n          return isOlNode(parentList) ? ['listprops'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global.add('lists', function (editor) {\n        if (editor.hasPlugin('rtc', true) === false) {\n          setup$1(editor);\n          register(editor);\n        }\n        register$1(editor);\n        register$2(editor);\n        return get$1(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"colorpicker\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/colorpicker')\n//   ES2015:\n//     import 'tinymce/plugins/colorpicker'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function Plugin () {\n      global.add('colorpicker', function () {\n        console.warn('Color picker plugin is now built in to the core editor, please remove it from your editor configuration');\n      });\n    }\n\n    Plugin();\n\n}());\n","tinymce.addI18n('zh_CN',{\n\"Redo\": \"\",\n\"Undo\": \"\",\n\"Cut\": \"\",\n\"Copy\": \"\",\n\"Paste\": \"\",\n\"Select all\": \"\",\n\"New document\": \"\",\n\"Ok\": \"\",\n\"Cancel\": \"\",\n\"Visual aids\": \"\",\n\"Bold\": \"\",\n\"Italic\": \"\",\n\"Underline\": \"\",\n\"Strikethrough\": \"\",\n\"Superscript\": \"\",\n\"Subscript\": \"\",\n\"Clear formatting\": \"\",\n\"Align left\": \"\",\n\"Align center\": \"\",\n\"Align right\": \"\",\n\"Justify\": \"\",\n\"Bullet list\": \"\",\n\"Numbered list\": \"\",\n\"Decrease indent\": \"\",\n\"Increase indent\": \"\",\n\"Close\": \"\",\n\"Formats\": \"\",\n\"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X\\/C\\/V keyboard shortcuts instead.\": \"Ctrl+X/C/V\",\n\"Headers\": \"\",\n\"Header 1\": \"1\",\n\"Header 2\": \"2\",\n\"Header 3\": \"3\",\n\"Header 4\": \"4\",\n\"Header 5\": \"5\",\n\"Header 6\": \"6\",\n\"Headings\": \"\",\n\"Heading 1\": \"1\",\n\"Heading 2\": \"2\",\n\"Heading 3\": \"3\",\n\"Heading 4\": \"4\",\n\"Heading 5\": \"5\",\n\"Heading 6\": \"6\",\n\"Preformatted\": \"\",\n\"Div\": \"Div\",\n\"Pre\": \"\",\n\"Code\": \"\",\n\"Paragraph\": \"\",\n\"Blockquote\": \"\",\n\"Inline\": \"\",\n\"Blocks\": \"\",\n\"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.\": \"\",\n\"Fonts\": \"\",\n\"Font Sizes\": \"\",\n\"Class\": \"Class\",\n\"Browse for an image\": \"\",\n\"OR\": \"\",\n\"Drop an image here\": \"\",\n\"Upload\": \"\",\n\"Block\": \"\",\n\"Align\": \"\",\n\"Default\": \"\",\n\"Circle\": \"\",\n\"Disc\": \"\",\n\"Square\": \"\",\n\"Lower Alpha\": \"\",\n\"Lower Greek\": \"\",\n\"Lower Roman\": \"\",\n\"Upper Alpha\": \"\",\n\"Upper Roman\": \"\",\n\"Anchor...\": \"...\",\n\"Name\": \"\",\n\"Id\": \"id\",\n\"Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.\": \"id\",\n\"You have unsaved changes are you sure you want to navigate away?\": \"\",\n\"Restore last draft\": \"\",\n\"Special characters...\": \"...\",\n\"Source code\": \"HTML\",\n\"Insert\\/Edit code sample\": \"/\",\n\"Language\": \"\",\n\"Code sample...\": \"...\",\n\"Color Picker\": \"\",\n\"R\": \"R\",\n\"G\": \"G\",\n\"B\": \"B\",\n\"Left to right\": \"\",\n\"Right to left\": \"\",\n\"Emoticons...\": \"...\",\n\"Metadata and Document Properties\": \"\",\n\"Title\": \"\",\n\"Keywords\": \"\",\n\"Description\": \"\",\n\"Robots\": \"\",\n\"Author\": \"\",\n\"Encoding\": \"\",\n\"Fullscreen\": \"\",\n\"Action\": \"\",\n\"Shortcut\": \"\",\n\"Help\": \"\",\n\"Address\": \"\",\n\"Focus to menubar\": \"\",\n\"Focus to toolbar\": \"\",\n\"Focus to element path\": \"\",\n\"Focus to contextual toolbar\": \"\",\n\"Insert link (if link plugin activated)\": \" ()\",\n\"Save (if save plugin activated)\": \"()\",\n\"Find (if searchreplace plugin activated)\": \"()\",\n\"Plugins installed ({0}):\": \" ({0})\",\n\"Premium plugins:\": \"\",\n\"Learn more...\": \"...\",\n\"You are using {0}\": \" {0}\",\n\"Plugins\": \"\",\n\"Handy Shortcuts\": \"\",\n\"Horizontal line\": \"\",\n\"Insert\\/edit image\": \"/\",\n\"Image description\": \"\",\n\"Source\": \"\",\n\"Dimensions\": \"\",\n\"Constrain proportions\": \"\",\n\"General\": \"\",\n\"Advanced\": \"\",\n\"Style\": \"\",\n\"Vertical space\": \"\",\n\"Horizontal space\": \"\",\n\"Border\": \"\",\n\"Insert image\": \"\",\n\"Image...\": \"...\",\n\"Image list\": \"\",\n\"Rotate counterclockwise\": \"\",\n\"Rotate clockwise\": \"\",\n\"Flip vertically\": \"\",\n\"Flip horizontally\": \"\",\n\"Edit image\": \"\",\n\"Image options\": \"\",\n\"Zoom in\": \"\",\n\"Zoom out\": \"\",\n\"Crop\": \"\",\n\"Resize\": \"\",\n\"Orientation\": \"\",\n\"Brightness\": \"\",\n\"Sharpen\": \"\",\n\"Contrast\": \"\",\n\"Color levels\": \"\",\n\"Gamma\": \"\",\n\"Invert\": \"\",\n\"Apply\": \"\",\n\"Back\": \"\",\n\"Insert date\\/time\": \"/\",\n\"Date\\/time\": \"/\",\n\"Insert\\/Edit Link\": \"/\",\n\"Insert\\/edit link\": \"/\",\n\"Text to display\": \"\",\n\"Url\": \"\",\n\"Open link in...\": \"...\",\n\"Current window\": \"\",\n\"None\": \"/\",\n\"New window\": \"\",\n\"Remove link\": \"\",\n\"Anchors\": \"\",\n\"Link...\": \"...\",\n\"Paste or type a link\": \"\",\n\"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?\": \"URLmailto:\",\n\"The URL you entered seems to be an external link. Do you want to add the required http:\\/\\/ prefix?\": \"URLhttp://:\",\n\"Link list\": \"\",\n\"Insert video\": \"\",\n\"Insert\\/edit video\": \"/\",\n\"Insert\\/edit media\": \"/\",\n\"Alternative source\": \"\",\n\"Alternative image URL\": \"\",\n\"Media poster (Image URL)\": \"()\",\n\"Paste your embed code below:\": \":\",\n\"Embed\": \"\",\n\"Media...\": \"...\",\n\"Nonbreaking space\": \"\",\n\"Page break\": \"\",\n\"Paste as text\": \"\",\n\"Preview\": \"\",\n\"Print...\": \"...\",\n\"Save\": \"\",\n\"Find\": \"\",\n\"Replace with\": \"\",\n\"Replace\": \"\",\n\"Replace all\": \"\",\n\"Previous\": \"\",\n\"Next\": \"\",\n\"Find and replace...\": \"...\",\n\"Could not find the specified string.\": \"\",\n\"Match case\": \"\",\n\"Find whole words only\": \"\",\n\"Spell check\": \"\",\n\"Ignore\": \"\",\n\"Ignore all\": \"\",\n\"Finish\": \"\",\n\"Add to Dictionary\": \"\",\n\"Insert table\": \"\",\n\"Table properties\": \"\",\n\"Delete table\": \"\",\n\"Cell\": \"\",\n\"Row\": \"\",\n\"Column\": \"\",\n\"Cell properties\": \"\",\n\"Merge cells\": \"\",\n\"Split cell\": \"\",\n\"Insert row before\": \"\",\n\"Insert row after\": \"\",\n\"Delete row\": \"\",\n\"Row properties\": \"\",\n\"Cut row\": \"\",\n\"Copy row\": \"\",\n\"Paste row before\": \"\",\n\"Paste row after\": \"\",\n\"Insert column before\": \"\",\n\"Insert column after\": \"\",\n\"Delete column\": \"\",\n\"Cols\": \"\",\n\"Rows\": \"\",\n\"Width\": \"\",\n\"Height\": \"\",\n\"Cell spacing\": \"\",\n\"Cell padding\": \"\",\n\"Show caption\": \"\",\n\"Left\": \"\",\n\"Center\": \"\",\n\"Right\": \"\",\n\"Cell type\": \"\",\n\"Scope\": \"\",\n\"Alignment\": \"\",\n\"H Align\": \"\",\n\"V Align\": \"\",\n\"Top\": \"\",\n\"Middle\": \"\",\n\"Bottom\": \"\",\n\"Header cell\": \"\",\n\"Row group\": \"\",\n\"Column group\": \"\",\n\"Row type\": \"\",\n\"Header\": \"\",\n\"Body\": \"\",\n\"Footer\": \"\",\n\"Border color\": \"\",\n\"Insert template...\": \"...\",\n\"Templates\": \"\",\n\"Template\": \"\",\n\"Text color\": \"\",\n\"Background color\": \"\",\n\"Custom...\": \"...\",\n\"Custom color\": \"\",\n\"No color\": \"\",\n\"Remove color\": \"\",\n\"Table of Contents\": \"\",\n\"Show blocks\": \"\",\n\"Show invisible characters\": \"\",\n\"Word count\": \"\",\n\"Words: {0}\": \"{0}\",\n\"{0} words\": \"{0} \",\n\"File\": \"\",\n\"Edit\": \"\",\n\"Insert\": \"\",\n\"View\": \"\",\n\"Format\": \"\",\n\"Table\": \"\",\n\"Tools\": \"\",\n\"Powered by {0}\": \"Powered by {0}\",\n\"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help\": \"ALT+F9ALT+F10ALT+0\",\n\"Image title\": \"\",\n\"Border width\": \"\",\n\"Border style\": \"\",\n\"Error\": \"\",\n\"Warn\": \"\",\n\"Valid\": \"\",\n\"To open the popup, press Shift+Enter\": \"<br>\",\n\"Rich Text Area. Press ALT-0 for help.\": \". Alt+0\",\n\"System Font\": \"\",\n\"Failed to upload image: {0}\": \": {0}\",\n\"Failed to load plugin: {0} from url {1}\": \": {0} - {1}\",\n\"Failed to load plugin url: {0}\": \": {0}\",\n\"Failed to initialize plugin: {0}\": \": {0}\",\n\"example\": \"\",\n\"Search\": \"\",\n\"All\": \"\",\n\"Currency\": \"\",\n\"Text\": \"\",\n\"Quotations\": \"\",\n\"Mathematical\": \"\",\n\"Extended Latin\": \"\",\n\"Symbols\": \"\",\n\"Arrows\": \"\",\n\"User Defined\": \"\",\n\"dollar sign\": \"\",\n\"currency sign\": \"\",\n\"euro-currency sign\": \"\",\n\"colon sign\": \"\",\n\"cruzeiro sign\": \"\",\n\"french franc sign\": \"\",\n\"lira sign\": \"\",\n\"mill sign\": \"\",\n\"naira sign\": \"\",\n\"peseta sign\": \"\",\n\"rupee sign\": \"\",\n\"won sign\": \"\",\n\"new sheqel sign\": \"\",\n\"dong sign\": \"\",\n\"kip sign\": \"\",\n\"tugrik sign\": \"\",\n\"drachma sign\": \"\",\n\"german penny symbol\": \"\",\n\"peso sign\": \"\",\n\"guarani sign\": \"\",\n\"austral sign\": \"\",\n\"hryvnia sign\": \"\",\n\"cedi sign\": \"\",\n\"livre tournois sign\": \"\",\n\"spesmilo sign\": \"spesoj\",\n\"tenge sign\": \"\",\n\"indian rupee sign\": \"\",\n\"turkish lira sign\": \"\",\n\"nordic mark sign\": \"\",\n\"manat sign\": \"\",\n\"ruble sign\": \"\",\n\"yen character\": \"\",\n\"yuan character\": \"\",\n\"yuan character, in hong kong and taiwan\": \"\",\n\"yen\\/yuan character variant one\": \"\",\n\"Loading emoticons...\": \"...\",\n\"Could not load emoticons\": \"\",\n\"People\": \"\",\n\"Animals and Nature\": \"\",\n\"Food and Drink\": \"\",\n\"Activity\": \"\",\n\"Travel and Places\": \"\",\n\"Objects\": \"\",\n\"Flags\": \"\",\n\"Characters\": \"\",\n\"Characters (no spaces)\": \"\",\n\"Error: Form submit field collision.\": \": .\",\n\"Error: No form element found.\": \": form.\",\n\"Update\": \"\",\n\"Color swatch\": \"\",\n\"Turquoise\": \"\",\n\"Green\": \"\",\n\"Blue\": \"\",\n\"Purple\": \"\",\n\"Navy Blue\": \"\",\n\"Dark Turquoise\": \"\",\n\"Dark Green\": \"\",\n\"Medium Blue\": \"\",\n\"Medium Purple\": \"\",\n\"Midnight Blue\": \"\",\n\"Yellow\": \"\",\n\"Orange\": \"\",\n\"Red\": \"\",\n\"Light Gray\": \"\",\n\"Gray\": \"\",\n\"Dark Yellow\": \"\",\n\"Dark Orange\": \"\",\n\"Dark Red\": \"\",\n\"Medium Gray\": \"\",\n\"Dark Gray\": \"\",\n\"Black\": \"\",\n\"White\": \"\",\n\"Switch to or from fullscreen mode\": \"\",\n\"Open help dialog\": \"\",\n\"history\": \"\",\n\"styles\": \"\",\n\"formatting\": \"\",\n\"alignment\": \"\",\n\"indentation\": \"\",\n\"permanent pen\": \"\",\n\"comments\": \"\",\n\"Anchor\": \"\",\n\"Special character\": \"\",\n\"Code sample\": \"\",\n\"Color\": \"\",\n\"Emoticons\": \"\",\n\"Document properties\": \"\",\n\"Image\": \"\",\n\"Insert link\": \"\",\n\"Target\": \"\",\n\"Link\": \"\",\n\"Poster\": \"\",\n\"Media\": \"\",\n\"Print\": \"\",\n\"Prev\": \"\",\n\"Find and replace\": \"\",\n\"Whole words\": \"\",\n\"Spellcheck\": \"\",\n\"Caption\": \"\",\n\"Insert template\": \"\",\n// by \n\"Code view\": \"\",\n\"Select...\": \"...\",\n\"Format Painter\": \"\",\n\"No templates defined.\": \"\",\n\"Special character...\": \"...\",\n\"Open link\": \"\",\n\"None\": \"\",\n\"Count\": \"\",\n\"Document\": \"\",\n\"Selection\": \"\",\n\"Words\": \"\",\n\"{0} characters\": \"{0} \",\n\"Alternative source URL\": \"\",\n\"Alternative description\": \"\",\n\"Accessibility\": \"\",\n\"Image is decorative\": \"\",\n//5.6\n\"Line height\": \"\",\n\"Cut column\": \"\",\n\"Copy column\": \"\",\n\"Paste column before\": \"\",\n\"Paste column after\": \"\",\n\"Copy column\": \"\",\n//\n\"Version\": \"\",\n\"Keyboard Navigation\": \"\",\n\"Open popup menu for split buttons\": \"br\",\n});","// Exports the \"textcolor\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/textcolor')\n//   ES2015:\n//     import 'tinymce/plugins/textcolor'\nrequire('./plugin.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function Plugin () {\n      global.add('contextmenu', function () {\n        console.warn('Context menu plugin is now built in to the core editor, please remove it from your editor configuration');\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","// Exports the \"wordcount\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/wordcount')\n//   ES2015:\n//     import 'tinymce/plugins/wordcount'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var size = function (obj) {\n      return keys(obj).length;\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column, isLocked) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column,\n        isLocked: isLocked\n      };\n    };\n    var rowdata = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var elementnew = function (element, isNew, isLocked) {\n      return {\n        element: element,\n        isNew: isNew,\n        isLocked: isLocked\n      };\n    };\n    var rowdatanew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var rowcells = function (cells, section) {\n      return {\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetails = function (details, section) {\n      return {\n        details: details,\n        section: section\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$2(element, key));\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported$1(sourceDom) && isSupported$1(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cell) {\n      return getSpan(cell, 'colspan') > 1;\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$3(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        if (is(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns = function (ancestor) {\n      if (is(ancestor, 'colgroup')) {\n        return children$2(ancestor, 'col');\n      } else {\n        return bind(columnGroups(ancestor), function (columnGroup) {\n          return children$2(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$2(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells$1 = map(columns(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdata(row, cells$1, 'colgroup');\n        } else {\n          var cells$1 = map(cells(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdata(row, cells$1, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable = function (table) {\n      var rows$1 = rows(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArrays(columnGroups$1, rows$1);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var addCells = function (gridRow, index, cells) {\n      var existingCells = gridRow.cells;\n      var before = existingCells.slice(0, index);\n      var after = existingCells.slice(index);\n      var newCells = before.concat(cells).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var addCell = function (gridRow, index, cell) {\n      return addCells(gridRow, index, [cell]);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n\n    var LOCKED_COL_ATTR = 'data-snooker-locked-cols';\n    var getLockedColumnsFromTable = function (table) {\n      return getOpt(table, LOCKED_COL_ATTR).bind(function (lockedColStr) {\n        return Optional.from(lockedColStr.match(/\\d+/g));\n      }).map(function (lockedCols) {\n        return mapToObject(lockedCols, always);\n      });\n    };\n    var getLockedColumnsFromGrid = function (grid) {\n      var locked = foldl(extractGridDetails(grid).rows, function (acc, row) {\n        each(row.cells, function (cell, idx) {\n          if (cell.isLocked) {\n            acc[idx] = true;\n          }\n        });\n        return acc;\n      }, {});\n      var lockedArr = mapToArray(locked, function (_val, key) {\n        return parseInt(key, 10);\n      });\n      return sort(lockedArr);\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access[key(row, column)];\n      return raw !== undefined ? Optional.some(raw) : Optional.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var columns = {};\n      var tableOpt = head(list).map(function (rowData) {\n        return rowData.element;\n      }).bind(table);\n      var lockedColumns = tableOpt.bind(getLockedColumnsFromTable).getOr({});\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      each(list, function (rowData) {\n        if (rowData.section === 'colgroup') {\n          columns = generateColumns(rowData);\n        } else {\n          var currentRow_1 = [];\n          each(rowData.cells, function (rowCell) {\n            var start = 0;\n            while (access[key(rowCount, start)] !== undefined) {\n              start++;\n            }\n            var isLocked = hasNonNullableKey(lockedColumns, start.toString());\n            var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);\n            for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n              for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n                var rowPosition = rowCount + occupiedRowPosition;\n                var columnPosition = start + occupiedColumnPosition;\n                var newpos = key(rowPosition, columnPosition);\n                access[newpos] = current;\n                maxColumns = Math.max(maxColumns, columnPosition + 1);\n              }\n            }\n            currentRow_1.push(current);\n          });\n          maxRows++;\n          cells.push(rowdata(rowData.element, currentRow_1, rowData.section));\n          rowCount++;\n        }\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns\n      };\n    };\n    var fromTable$1 = function (table) {\n      var list = fromTable(table);\n      return generate(list);\n    };\n    var justCells = function (warehouse) {\n      return bind(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable$1,\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      return api.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$2(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      var isSpecial = function (element) {\n        var tag = name(element);\n        return contains([\n          'script',\n          'noscript',\n          'iframe',\n          'noframes',\n          'noembed',\n          'title',\n          'style',\n          'textarea',\n          'xmp'\n        ], tag);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$3,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get$2,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone$1,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          isSpecial: isSpecial,\n          getText: get$4,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$2 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$2(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne = oneAll;\n    var ancestors$3 = ancestors$2;\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return ancestors$3(universe, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts$1(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors$4(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne$1(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy$1(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox$1(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type$1.none;\n    var multiple = type$1.multiple;\n    var single = type$1.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve$1(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().map(single).getOrThunk(none$1);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$3(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$3(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$5 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var columns$1 = function (warehouse, isValidCell) {\n      if (isValidCell === void 0) {\n        isValidCell = always;\n      }\n      var grid = warehouse.grid;\n      var cols = range(grid.columns, identity);\n      var rowsArr = range(grid.rows, identity);\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isValid = function (detail) {\n          return detail.colspan === 1 && isValidCell(detail.element);\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isValid, getFallback);\n      });\n    };\n    var decide = function (getBlock, isValid, getFallback) {\n      var inBlock = getBlock();\n      var validInBlock = find(inBlock, isValid);\n      var detailOption = validInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range(grid.rows, identity);\n      var cols = range(grid.columns, identity);\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$3(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api$2 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$4 = onDirection(ltr, rtl);\n    var width = {\n      delta: function (amount, table) {\n        return detect$4(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$4(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$4(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$3(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var height = cell.dom.getBoundingClientRect().height;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return height;\n      } else {\n        var paddingTop = getProp(cell, 'padding-top', 0);\n        var paddingBottom = getProp(cell, 'padding-bottom', 0);\n        var borderTop = getProp(cell, 'border-top-width', 0);\n        var borderBottom = getProp(cell, 'border-bottom-width', 0);\n        var borders = borderTop + borderBottom;\n        return height - paddingTop - paddingBottom - borders;\n      }\n    };\n    var getCalculatedWidth = function (cell) {\n      var width = cell.dom.getBoundingClientRect().width;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return width;\n      } else {\n        var paddingLeft = getProp(cell, 'padding-left', 0);\n        var paddingRight = getProp(cell, 'padding-right', 0);\n        var borderLeft = getProp(cell, 'border-left-width', 0);\n        var borderRight = getProp(cell, 'border-right-width', 0);\n        var borders = borderLeft + borderRight;\n        return width - paddingLeft - paddingRight - borders;\n      }\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$6(cell));\n    };\n    var getWidth = function (cell) {\n      return needManualCalc() ? getCalculatedWidth(cell) : getProp(cell, 'width', get$5(cell));\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var getPercentSize = function (elm, getter) {\n      var relativeParent = offsetParent(elm).getOr(getBody(owner(elm)));\n      return getter(elm) / getter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$6(cell);\n      }\n      return normalizePixelSize(value, cell, get$6, setHeight);\n    };\n    var get$7 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Optional.from(get$2(element, 'width'));\n      }, function (width) {\n        return Optional.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = getWidth(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$5(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = rPixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return getWidth(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return getWidth(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$7(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$5(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$5) + '%';\n    };\n    var isPercentSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing = function (table) {\n      return getRawWidth(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n    var pixelBasedSizeRegex = constant(rPixelBasedSizeRegex);\n\n    var isCol = isTag('col');\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      var fallback = function (e) {\n        return isCol(e) ? get$5(e) : getPixelWidth(e, tableSize);\n      };\n      return getRaw$1(cell, 'width', fallback);\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', getHeight$1);\n    };\n    var justCols = function (warehouse) {\n      return map(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var hasRawStyle = function (cell, prop) {\n      return getRaw(cell, prop).isSome();\n    };\n    var isValidColumn = function (cell) {\n      return !isCol(cell) || hasRawStyle(cell, 'width');\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback, tableSize) {\n      var columnCells = columns$1(warehouse, function (cell) {\n        return hasRawStyle(cell, 'width');\n      });\n      var columns = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map(columns, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column, tableSize);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$5(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows = rows$1(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map(direction.positions(rows, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map(rows, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight$1, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var noneSize = function (table) {\n      var getWidth = function () {\n        return get$5(table);\n      };\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (initialWidth, table) {\n      var floatWidth = Cell(parseFloat(initialWidth));\n      var pixelWidth = Cell(get$5(table));\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth.get() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / pixelWidth.get() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = floatWidth.get();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n        floatWidth.set(newWidth);\n        pixelWidth.set(get$5(table));\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: floatWidth.get,\n        pixelWidth: pixelWidth.get,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (initialWidth, table) {\n      var width = Cell(initialWidth);\n      var getWidth = width.get;\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n        width.set(newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth, element);\n      }\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth, element);\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol, allCells, selectedCells) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol,\n        allCells: allCells,\n        selectedCells: selectedCells\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      var allCells = [];\n      var selectedCells = [];\n      each$1(house.access, function (detail) {\n        allCells.push(detail);\n        if (isSelected(detail)) {\n          selectedCells.push(detail);\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (replica, stats, house, widthDelta) {\n      each$1(house.columns, function (col) {\n        if (col.column < stats.minCol || col.column > stats.maxCol) {\n          remove$2(col.element);\n        }\n      });\n      var emptyRows = filter(firstLayer(replica, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each(firstLayer(replica, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(replica, LOCKED_COL_ATTR);\n      remove(replica, 'data-snooker-col-series');\n      var tableSize = TableSize.getTableSize(replica);\n      tableSize.adjustTableWidth(widthDelta);\n    };\n    var getTableWidthDelta = function (table, warehouse, tableSize, stats) {\n      if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {\n        return 0;\n      }\n      var colWidths = getPixelWidths(warehouse, table, tableSize);\n      var allColsWidth = foldl(colWidths, function (acc, width) {\n        return acc + width;\n      }, 0);\n      var selectedColsWidth = foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), function (acc, width) {\n        return acc + width;\n      }, 0);\n      var newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();\n      var delta = newWidth - tableSize.pixelWidth();\n      return tableSize.getCellDelta(delta);\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element, selectedSelector);\n      };\n      var replica = deep(table);\n      var list = fromTable(replica);\n      var tableSize = TableSize.getTableSize(table);\n      var replicaHouse = Warehouse.generate(list);\n      var replicaStats = findSelectedStats(replicaHouse, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(replica, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, replicaHouse, replicaStats, isSelected);\n      var house = Warehouse.fromTable(table);\n      var widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);\n      clean(replica, replicaStats, replicaHouse, widthDelta);\n      return replica;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function () {\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      return td;\n    };\n    var createCol = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createColgroup = function () {\n      return SugarElement.fromTag('colgroup');\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy(prev.element, clone);\n        remove$1(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$1(clone, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var docu = owner(prev.element);\n        var td = SugarElement.fromTag(name(prev.element), docu.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var doc = owner(prev.element);\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        col: createCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map(nodes, SugarElement.fromDom);\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody$1 = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove(element, 'data-mce-style');\n      };\n      each(cells(table), removeStyleAttribute);\n      each(columns(table), removeStyleAttribute);\n    };\n    var getRawWidth$1 = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n\n    var selection = function (selections) {\n      return cata(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste$1 = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var replica = extract(table, attributeSelector);\n        removeDataStyle(replica);\n        return [replica];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Optional.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = SugarElement.fromDom(domCell);\n            table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = function (elm) {\n                return name(elm) === 'table';\n              };\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste(doc);\n                var targets = paste$1(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (data) {\n                  editor.selection.setRng(data.rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustAndRedistributeWidths = function (_table, list, details, tableSize, resizeBehaviour) {\n      var warehouse = Warehouse.generate(list);\n      var sizes = tableSize.getWidths(warehouse, tableSize);\n      var tablePixelWidth = tableSize.pixelWidth();\n      var _a = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative), newSizes = _a.newSizes, delta = _a.delta;\n      recalculateAndApply(warehouse, newSizes, tableSize);\n      tableSize.adjustTableWidth(delta);\n    };\n    var adjustWidthTo = function (_table, list, _info, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, isRelative) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, totalWidth, pixelDelta, isRelative) {\n        if (isRelative) {\n          var tableWidth = totalWidth + pixelDelta;\n          var ratio_1 = tableWidth / totalWidth;\n          var newSizes = map(sizes, function (size) {\n            return size / ratio_1;\n          });\n          return {\n            delta: ratio_1 * 100 - 100,\n            newSizes: newSizes\n          };\n        } else {\n          return {\n            delta: pixelDelta,\n            newSizes: sizes\n          };\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, isRelative) {\n        if (isRelative) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, _totalWidth, _pixelDelta, _isRelative) {\n        return {\n          delta: 0,\n          newSizes: sizes\n        };\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body$1 = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var adt$1 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$1.invalid(value);\n    };\n    var from$1 = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$1.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$1.pixels, value);\n      }\n      return adt$1.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$1), { from: from$1 });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute$1 = function (table, optWidth, optHeight, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$5(table);\n        var oldWidths = getRawWidths(warehouse, table, tableSize);\n        var nuWidths = redistribute(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$6(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing$1 = isPercentSizing;\n    var isPixelSizing$1 = isPixelSizing;\n    var isNoneSizing$1 = isNoneSizing;\n    var getPercentTableWidth$1 = getPercentTableWidth;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort$1(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var InDrag = function () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    };\n\n    var NoDrag = function () {\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: noop,\n        reset: noop,\n        events: events.registry\n      };\n    };\n\n    var Movement = function () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$2 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var read = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$8 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-dragster');\n    var resolve = styles.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$3(div, resolve('blocker'));\n      add$3(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract$1 = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get$2(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var styles$1 = css('ephox-snooker');\n    var resolve$1 = styles$1.resolve;\n\n    var Mutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve$1('resizer-bar');\n    var resizeRowBar = resolve$1('resizer-rows');\n    var resizeColBar = resolve$1('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$3(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add$3(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add$3(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows = rows$1(warehouse);\n        var cols = columns$1(warehouse);\n        refreshGrid(warehouse, wire, table, rows, cols);\n      }\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve$1('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$2(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add$3(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$1 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$1 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n    var styleModified = {\n      structure: false,\n      style: true\n    };\n    var structureModified = {\n      structure: true,\n      style: false\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var determineDefaultStyles = function (editor) {\n      if (isPixelsForced(editor)) {\n        var editorWidth = editor.getBody().offsetWidth;\n        return __assign(__assign({}, defaultStyles), { width: editorWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var isResizeTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'resizetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n\n    var get$9 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        var width = getRawWidth$1(editor, table.dom).filter(isPercentage).getOrThunk(function () {\n          return getPercentTableWidth$1(table);\n        });\n        return TableSize.percentageSize(width, table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(get$5(table), table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove(element, 'width');\n    };\n    var convertToPercentSize = function (table, tableSize) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table, tableSize) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$1(table, 'width');\n      var columns$1 = columns(table);\n      var rowElements = columns$1.length > 0 ? columns$1 : cells(table);\n      each(rowElements, function (cell) {\n        remove$1(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPercentSize(table, tableSizing);\n    };\n    var enforcePixels = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPixelSize(table, tableSizing);\n    };\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each(cells(table), function (cell) {\n          var computedWidth = get$3(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$a = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$2(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$9(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(editor, table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$6(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$a(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing$1(table) && isPixelsForced(editor)) {\n            enforcePixels(editor, table);\n          } else if (!isPercentSizing$1(table) && isPercentagesForced(editor)) {\n            enforcePercentage(editor, table);\n          }\n          if (isNoneSizing$1(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(editor, table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth$1(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, styleModified);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl = function (universe, element) {\n      var candidate = scan(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl;\n\n    var universe$1 = DomUniverse();\n    var freefallRtl$2 = function (element) {\n      return freefallRtl$1(universe$1, element);\n    };\n\n    var halve = function (main, other) {\n      var colspan = getSpan(main, 'colspan');\n      if (colspan === 1) {\n        var width = getGenericWidth(main);\n        width.each(function (w) {\n          var newWidth = w.value / 2;\n          setGenericWidth(main, newWidth, w.unit);\n          setGenericWidth(other, newWidth, w.unit);\n        });\n      }\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var insert = function (table, selector, element) {\n      last(children$2(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$2(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert(table, 'caption', newSection);\n        } else {\n          append(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind(gridSection, function (colGroup) {\n          return map(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append$1(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy$2 = function (grid) {\n      return map(grid, function (row) {\n        var tr = shallow(row.element);\n        each(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells.slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: endColIndex,\n        rowspan: endRowIndex\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row) {\n        return map(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map(grid, function (row, rowIndex) {\n        var details = bind(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      if (Warehouse.hasColumns(warehouse)) {\n        var groupElementNew = map(Warehouse.justColumns(warehouse), function (column) {\n          return elementnew(column.element, isNew, false);\n        });\n        grid.push(rowcells(groupElementNew, 'colgroup'));\n      }\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew, item.isLocked);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true, false);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all[rowIndex].section);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew, false);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true, false);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details);\n        return rowdatanew(row.element, details.details, details.section, row.isNew);\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = toDetails(grid, eq$1);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var extractCells = function (warehouse, target, predicate) {\n      var details = map(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        }).filter(predicate);\n      });\n      var cells = cat(details);\n      return someIf(cells.length > 0, cells);\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, sizing, resizeBehaviour) {\n        var warehouse = Warehouse.fromTable(table);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators));\n          var lockedColumns = getLockedColumnsFromGrid(result.grid);\n          var grid = toDetailList(result.grid, generators);\n          return {\n            info: info,\n            grid: grid,\n            cursor: result.cursor,\n            lockedColumns: lockedColumns\n          };\n        });\n        return output.bind(function (out) {\n          var newElements = render(table, out.grid);\n          var tableSizing = Optional.from(sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          var resizing = Optional.from(resizeBehaviour).getOrThunk(preserveTable);\n          adjustment(table, out.grid, out.info, tableSizing, resizing);\n          postAction(table);\n          refresh(wire, table);\n          remove(table, LOCKED_COL_ATTR);\n          if (out.lockedColumns.length > 0) {\n            set(table, LOCKED_COL_ATTR, out.lockedColumns.join(','));\n          }\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      return extractCells(warehouse, target, always).map(function (cells) {\n        return {\n          cells: cells,\n          generators: target.generators,\n          clipboard: target.clipboard\n        };\n      });\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      return extractCells(warehouse, target, always);\n    };\n    var onUnlockedCell = function (warehouse, target) {\n      return onCell(warehouse, target).filter(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var onUnlockedCells = function (warehouse, target) {\n      return extractCells(warehouse, target, function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var isUnlockedTableCell = function (warehouse, cell) {\n      return findInWarehouse(warehouse, cell).exists(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var allUnlocked = function (warehouse, cells) {\n      return forall(cells, function (cell) {\n        return isUnlockedTableCell(warehouse, cell);\n      });\n    };\n    var onUnlockedMergable = function (warehouse, target) {\n      return onMergable(warehouse, target).filter(function (mergeable) {\n        return allUnlocked(warehouse, mergeable.cells);\n      });\n    };\n    var onUnlockedUnmergable = function (warehouse, target) {\n      return onUnmergable(warehouse, target).filter(function (cells) {\n        return allUnlocked(warehouse, cells);\n      });\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          var row = rows[i];\n          var isLocked = getCell(row, j).isLocked;\n          mutateCell(row, j, elementnew(substitution(), false, isLocked));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var row = rows[i];\n          var currentCell = getCell(row, j);\n          var currentCellElm = currentCell.element;\n          var isToReplace = comparator(currentCellElm, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(row, j, elementnew(substitution(), true, currentCell.isLocked));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true, current.isLocked));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Optional.none();\n          for (var i = index; i < rows.length; i++) {\n            var _loop_1 = function (j) {\n              var row = rows[i];\n              var current = getCell(row, j);\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(row, j, elementnew(sub, true, current.isLocked));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_1(j);\n            }\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (amount, row, generators, isLocked) {\n      var generator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return range(amount, function (idx) {\n        return elementnew(generator(), true, isLocked(idx));\n      });\n    };\n    var rowFill = function (grid, amount, generators, lockedColumns) {\n      return grid.concat(range(amount, function () {\n        var row = grid[grid.length - 1];\n        var elements = generateElements(row.cells.length, row, generators, function (idx) {\n          return has(lockedColumns, idx.toString());\n        });\n        return setCells(row, elements);\n      }));\n    };\n    var colFill = function (grid, amount, generators, startIndex) {\n      return map(grid, function (row) {\n        var newChildren = generateElements(amount, row, generators, never);\n        return addCells(row, startIndex, newChildren);\n      });\n    };\n    var lockedColFill = function (grid, generators, lockedColumns) {\n      return map(grid, function (row) {\n        return foldl(lockedColumns, function (acc, colNum) {\n          var newChild = generateElements(1, row, generators, always)[0];\n          return addCell(acc, colNum, newChild);\n        }, row);\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var gridWidth = cellLength(gridA[0]);\n      var isLastColLocked = exists(lockedColumns, function (locked) {\n        return locked === gridWidth - 1;\n      });\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);\n      var newLockedColumns = getLockedColumnsFromGrid(modifiedCols);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, mapToObject(newLockedColumns, always));\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator, lockedColumns) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth + lockedColumns.length;\n      var lockedColumnObj = mapToObject(lockedColumns, always);\n      for (var r = startRow; r < endRow; r++) {\n        var skippedCol = 0;\n        for (var c = startCol; c < endCol; c++) {\n          if (lockedColumnObj[c]) {\n            skippedCol++;\n            continue;\n          }\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var gridBColIndex = c - startCol - skippedCol;\n          var newCell = getCell(gridB[r - startRow], gridBColIndex);\n          var newCellElm = newCell.element;\n          var replacement = generator.replace(newCellElm);\n          mutateCell(gridA[r], c, elementnew(replacement, true, newCell.isLocked));\n        }\n      }\n      return gridA;\n    };\n    var getValidStartAddress = function (currentStartAddress, grid, lockedColumns) {\n      var gridColLength = cellLength(grid[0]);\n      var possibleColAddresses = range(gridColLength - currentStartAddress.column, function (num) {\n        return num + currentStartAddress.column;\n      });\n      var validColAddress = find(possibleColAddresses, function (num) {\n        return forall(lockedColumns, function (col) {\n          return col !== num;\n        });\n      }).getOr(gridColLength - 1);\n      return __assign(__assign({}, currentStartAddress), { column: validColAddress });\n    };\n    var getLockedColumnsWithinBounds = function (startAddress, grid, lockedColumns) {\n      return filter(lockedColumns, function (colNum) {\n        return colNum >= startAddress.column && colNum <= cellLength(grid[0]) + startAddress.column;\n      });\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);\n      var lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, lockedColumns);\n      var result = measure(validStartAddress, gridA, gridB);\n      return result.map(function (diff) {\n        var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - lockedColumnsWithinBounds.length });\n        var fittedGrid = tailor(gridA, delta, generator);\n        var newLockedColumns = getLockedColumnsFromGrid(fittedGrid);\n        var newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, newLockedColumns);\n        return mergeTables(validStartAddress, fittedGrid, gridB, generator, comparator, newLockedColumnsWithinBounds);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map(fittedOldGrid, function (gridRow, i) {\n        return addCells(gridRow, index, fittedNewGrid[i].cells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var locked = getLockedColumnsFromGrid(gridA);\n      var diff = measureWidth(gridA, gridB);\n      var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - locked.length });\n      var fittedOldGrid = tailor(gridA, delta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      var newLocked = getLockedColumnsFromGrid(fittedOldGrid);\n      var secondDiff = measureWidth(gridB, gridA);\n      var secondDelta = __assign(__assign({}, secondDiff), { colDelta: secondDiff.colDelta + newLocked.length });\n      var fittedGridB = lockedColFill(gridB, generator, newLocked);\n      var fittedNewGrid = tailor(fittedGridB, secondDelta, generator);\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var between = mapCells(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true, ex.isLocked);\n        return ret;\n      });\n      return cols.concat(before).concat([between]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        var cell = getCell(row, example);\n        return elementnew(substitution(cell.element, comparator), true, false);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, columns) {\n      return bind(grid, function (row) {\n        var existingCells = row.cells;\n        var cells = foldr(columns, function (acc, column) {\n          return column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc;\n        }, existingCells);\n        return cells.length > 0 ? [rowcells(cells, row.section)] : [];\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map(grid, function (row) {\n        return mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element, comparator), true, cell.isLocked) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targets = bind(rows, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetRow = rows[index];\n      var targets = bind(targetRow.cells, function (item, i) {\n        var alreadyAdded = notStartRow(rows, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      var position = Cell(Optional.none());\n      var nu = function (data) {\n        switch (name(data.element)) {\n        case 'col':\n          return generators.col(data);\n        default:\n          return generators.cell(data);\n        }\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Optional.some(replacement));\n        }\n        recent = Optional.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform$1 = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Optional.none());\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Optional.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          if (name(element) === 'col') {\n            return element;\n          } else {\n            return find$1(element, comparator).fold(function () {\n              return makeNew(element);\n            }, function (p) {\n              return comparator(element, p.item) ? p.sub : makeNew(element);\n            });\n          }\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var getScopeAttribute = function (cell) {\n      return getOpt(cell, 'scope').map(function (attribute) {\n        return attribute.substr(0, 3);\n      });\n    };\n    var merging = function (generators) {\n      var position = Cell(Optional.none());\n      var unmerge = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Optional.some(cell));\n        }\n        var scope = getScopeAttribute(cell);\n        scope.each(function (attribute) {\n          return set(cell, 'scope', attribute);\n        });\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          scope.each(function (attribute) {\n            return set(raw, 'scope', attribute);\n          });\n          return raw;\n        };\n      };\n      var merge = function (cells) {\n        var getScopeProperty = function () {\n          var stringAttributes = cat(map(cells, getScopeAttribute));\n          if (stringAttributes.length === 0) {\n            return Optional.none();\n          } else {\n            var baseScope_1 = stringAttributes[0];\n            var scopes_1 = [\n              'row',\n              'col'\n            ];\n            var isMixed = exists(stringAttributes, function (attribute) {\n              return attribute !== baseScope_1 && contains(scopes_1, attribute);\n            });\n            return isMixed ? Optional.none() : Optional.from(baseScope_1);\n          }\n        };\n        remove$1(cells[0], 'width');\n        getScopeProperty().fold(function () {\n          return remove(cells[0], 'scope');\n        }, function (attribute) {\n          return set(cells[0], 'scope', attribute + 'group');\n        });\n        return constant(cells[0]);\n      };\n      return {\n        unmerge: unmerge,\n        merge: merge,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform$1,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$2 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return isBlock(universe$2, element);\n    };\n    var isList$1 = function (element) {\n      return isList(universe$2, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return isEmptyTag(universe$2, element);\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$4(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, isList$1).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock$1(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag$1(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock$1(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n\n    var prune = function (table) {\n      var cells$1 = cells(table);\n      if (cells$1.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return findIn(rows, row, column).orThunk(function () {\n        return findIn(rows, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Optional.from(grid[row]).bind(function (r) {\n        return Optional.from(r.cells[column]).bind(function (c) {\n          return Optional.from(c.element);\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return outcome(grid, findIn(rows, row, column));\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldr(rows, function (acc, row) {\n        var newG = insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var target = rows[rows.length - 1];\n      var targetIndex = target.row + target.rowspan;\n      var newGrid = foldr(rows, function (newG, row) {\n        return insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var columns = uniqueColumns(details);\n      var targetIndex = columns[0].column;\n      var newGrid = foldr(columns, function (acc, col) {\n        var newG = insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var target = details[details.length - 1];\n      var targetIndex = target.column + target.colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldr(columns, function (newG, col) {\n        return insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opEraseColumns = function (grid, extractDetail, _comparator, _genWrappers) {\n      var columns = uniqueColumns(extractDetail.details);\n      var newGrid = deleteColumnsAt(grid, map(columns, function (column) {\n        return column.column;\n      }));\n      var cursor = elementFromGrid(newGrid, columns[0].row, columns[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var cursor = elementFromGrid(newGrid, details[0].row, details[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opMergeCells = function (grid, mergable, comparator, genWrappers) {\n      var cells = mergable.cells;\n      merge$2(cells);\n      var newGrid = merge(grid, mergable.bounds, comparator, genWrappers.merge(cells));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var unmerge$1 = function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.unmerge(cell));\n      };\n      var newGrid = foldr(unmergable, unmerge$1, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        var cursor = elementFromGrid(newGrid, pasteDetails.row, pasteDetails.column);\n        return outcome(newGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opGetColumnType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten(map(house.all, function (row) {\n          return filter(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return getCellsType(selectedColumnCells, function (cell) {\n          return name(cell.element) === 'th';\n        });\n      }).getOr('');\n    };\n    var getCellsType = function (cells, headerPred) {\n      var headerCells = filter(cells, headerPred);\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var resize = adjustWidthTo;\n    var adjustAndRedistributeWidths$1 = adjustAndRedistributeWidths;\n    var firstColumnIsLocked = function (_warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column === 0 && detail.isLocked;\n      });\n    };\n    var lastColumnIsLocked = function (warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked;\n      });\n    };\n    var getColumnsWidth = function (warehouse, details) {\n      var columns = columns$1(warehouse);\n      var uniqueCols = uniqueColumns(details);\n      return foldl(uniqueCols, function (acc, detail) {\n        var column = columns[detail.column];\n        var colWidth = column.map(getOuter).getOr(0);\n        return acc + colWidth;\n      }, 0);\n    };\n    var insertColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onCells(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details);\n        }).map(function (details) {\n          return {\n            details: details,\n            pixelDelta: getColumnsWidth(warehouse, details)\n          };\n        });\n      };\n    };\n    var eraseColumnsExtractor = function (warehouse, target) {\n      return onUnlockedCells(warehouse, target).map(function (details) {\n        return {\n          details: details,\n          pixelDelta: -getColumnsWidth(warehouse, details)\n        };\n      });\n    };\n    var pasteColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onPasteByEditor(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details.cells);\n        });\n      };\n    };\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths$1, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnHeader = run(opMakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform('row', 'th'));\n    var makeColumnsHeader = run(opMakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform('row', 'th'));\n    var unmakeColumnHeader = run(opUnmakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform(null, 'td'));\n    var makeRowHeader = run(opMakeRowHeader, onCell, noop, noop, Generators.transform('col', 'th'));\n    var makeRowsHeader = run(opMakeRowsHeader, onCells, noop, noop, Generators.transform('col', 'th'));\n    var unmakeRowHeader = run(opUnmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeRowsHeader = run(opUnmakeRowsHeader, onCells, noop, noop, Generators.transform(null, 'td'));\n    var mergeCells = run(opMergeCells, onUnlockedMergable, resize, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnlockedUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, pasteColumnsExtractor(true), noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, pasteColumnsExtractor(false), noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnType = opGetColumnType;\n\n    var getSection = function (elm) {\n      return getNodeName(elm.parentNode);\n    };\n    var mapSectionNameToType = function (section) {\n      if (section === 'thead') {\n        return 'header';\n      } else if (section === 'tfoot') {\n        return 'footer';\n      } else {\n        return 'body';\n      }\n    };\n    var detectHeaderRow = function (editor, elm) {\n      var isThead = getSection(elm) === 'thead';\n      var areAllCellsThs = !exists(elm.cells, function (c) {\n        return getNodeName(c) !== 'th';\n      });\n      return isThead || areAllCellsThs ? Optional.some({\n        thead: isThead,\n        ths: areAllCellsThs\n      }) : Optional.none();\n    };\n    var getRowType = function (editor, elm) {\n      return mapSectionNameToType(detectHeaderRow(editor, elm).fold(function () {\n        return getSection(elm);\n      }, function (_rowConfig) {\n        return 'thead';\n      }));\n    };\n    var switchRowSection = function (dom, rowElm, newSectionName) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldSectionElm = rowElm.parentNode;\n      var oldSectionName = getNodeName(oldSectionElm);\n      if (newSectionName !== oldSectionName) {\n        var sectionElm_1 = dom.select(newSectionName, tableElm)[0];\n        if (!sectionElm_1) {\n          sectionElm_1 = dom.create(newSectionName);\n          var firstTableChild_1 = tableElm.firstChild;\n          if (newSectionName === 'thead') {\n            last(children$2(SugarElement.fromDom(tableElm), 'caption,colgroup')).fold(function () {\n              return tableElm.insertBefore(sectionElm_1, firstTableChild_1);\n            }, function (c) {\n              return dom.insertAfter(sectionElm_1, c.dom);\n            });\n          } else {\n            tableElm.appendChild(sectionElm_1);\n          }\n        }\n        if (newSectionName === 'tbody' && oldSectionName === 'thead' && sectionElm_1.firstChild) {\n          sectionElm_1.insertBefore(rowElm, sectionElm_1.firstChild);\n        } else {\n          sectionElm_1.appendChild(rowElm);\n        }\n        if (!oldSectionElm.hasChildNodes()) {\n          dom.remove(oldSectionElm);\n        }\n      }\n    };\n    var renameCell = function (editor, cell, newCellType) {\n      if (isNonNullable(newCellType) && getNodeName(cell) !== newCellType) {\n        var newCellElm = editor.dom.rename(cell, newCellType);\n        fireNewCell(editor, newCellElm);\n        return newCellElm;\n      } else {\n        return cell;\n      }\n    };\n    var switchCellType = function (editor, cell, newCellType, scope) {\n      var dom = editor.dom;\n      var newCell = renameCell(editor, cell, newCellType);\n      if (!isUndefined(scope)) {\n        dom.setAttrib(newCell, 'scope', scope);\n      }\n      return newCell;\n    };\n    var switchCellsType = function (editor, cells, newCellType, scope) {\n      return each(cells, function (c) {\n        return switchCellType(editor, c, newCellType, scope);\n      });\n    };\n    var switchSectionType = function (editor, rowElm, newType) {\n      var determineHeaderRowType = function () {\n        var allTableRows = table(SugarElement.fromDom(rowElm.cells[0])).map(function (table) {\n          return rows(table);\n        }).getOr([]);\n        return findMap(allTableRows, function (row) {\n          return detectHeaderRow(editor, row.dom);\n        }).map(function (detectedType) {\n          if (detectedType.thead && detectedType.ths) {\n            return 'sectionCells';\n          } else {\n            return detectedType.thead ? 'section' : 'cells';\n          }\n        }).getOr('section');\n      };\n      var dom = editor.dom;\n      if (newType === 'header') {\n        var headerRowTypeSetting = getTableHeaderType(editor);\n        var headerRowType = headerRowTypeSetting === 'auto' ? determineHeaderRowType() : headerRowTypeSetting;\n        switchCellsType(editor, rowElm.cells, headerRowType === 'section' ? 'td' : 'th', 'col');\n        switchRowSection(dom, rowElm, headerRowType === 'cells' ? 'tbody' : 'thead');\n      } else {\n        switchCellsType(editor, rowElm.cells, 'td', null);\n        switchRowSection(dom, rowElm, newType === 'footer' ? 'tfoot' : 'tbody');\n      }\n    };\n\n    var getSelectionStartCellFallback = function (start) {\n      return table(start).bind(function (table) {\n        return retrieve$1(table, ephemera.firstSelectedSelector);\n      }).fold(function () {\n        return start;\n      }, function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionStartFromSelector = function (selector) {\n      return function (start) {\n        var startCellName = name(start);\n        var startCell = startCellName === 'col' || startCellName === 'colgroup' ? getSelectionStartCellFallback(start) : start;\n        return closest$1(startCell, selector);\n      };\n    };\n    var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n    var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n    var getCellsFromSelection = function (start, selections) {\n      return getSelectionStartCell(start).map(function (_cell) {\n        return selection(selections);\n      }).getOr([]);\n    };\n    var getRowsFromSelection = function (start, selector) {\n      var cellOpt = getSelectionStartCell(start);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter(rows, function (row) {\n          return exists(fromDom$1(row.dom.cells), function (rowCell) {\n            return get$2(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var TableActions = function (editor, lazyWire, selections) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var colMutationOp = isResizeTableColumnResizing(editor) ? noop : halve;\n      var execute = function (operation, guard, mutate, lazyWire, effect) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var sizing = get$9(editor, table);\n          var resizeBehaviour = isResizeTableColumnResizing(editor) ? resizeTable() : preserveTable();\n          return guard(table) ? operation(wire, table, target, generators, sizing, resizeBehaviour).bind(function (result) {\n            each(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            return result.cursor.map(function (cell) {\n              var des = freefallRtl$2(cell);\n              var rng = editor.dom.createRng();\n              rng.setStart(des.element.dom, des.offset);\n              rng.setEnd(des.element.dom, des.offset);\n              return {\n                rng: rng,\n                effect: effect\n              };\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire, structureModified);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire, structureModified);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire, structureModified);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire, structureModified);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, colMutationOp, lazyWire, structureModified);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, colMutationOp, lazyWire, structureModified);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire, structureModified);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire, structureModified);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire, structureModified);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire, structureModified);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire, structureModified);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire, structureModified);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire, structureModified);\n      var extractType = function (args, validTypes) {\n        return get$1(args, 'type').filter(function (type) {\n          return contains(validTypes, type);\n        });\n      };\n      var setTableCellType = function (editor, args) {\n        return extractType(args, [\n          'td',\n          'th'\n        ]).each(function (type) {\n          var cells = map(getCellsFromSelection(getSelectionStart(editor), selections), function (c) {\n            return c.dom;\n          });\n          switchCellsType(editor, cells, type, null);\n        });\n      };\n      var setTableRowType = function (editor, args) {\n        return extractType(args, [\n          'header',\n          'body',\n          'footer'\n        ]).each(function (type) {\n          map(getRowsFromSelection(getSelectionStart(editor), ephemera.selected), function (row) {\n            return switchSectionType(editor, row.dom, type);\n          });\n        });\n      };\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire, structureModified);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire, structureModified);\n      var getTableRowType = function (editor) {\n        var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n        if (rows.length > 0) {\n          var rowTypes = map(rows, function (r) {\n            return getRowType(editor, r.dom);\n          });\n          var hasHeader = contains(rowTypes, 'header');\n          var hasFooter = contains(rowTypes, 'footer');\n          if (!hasHeader && !hasFooter) {\n            return 'body';\n          } else {\n            var hasBody = contains(rowTypes, 'body');\n            if (hasHeader && !hasBody && !hasFooter) {\n              return 'header';\n            } else if (!hasHeader && !hasBody && hasFooter) {\n              return 'footer';\n            } else {\n              return '';\n            }\n          }\n        }\n      };\n      var getTableCellType = function (editor) {\n        return getCellsType(getCellsFromSelection(getSelectionStart(editor), selections), function (cell) {\n          return name(cell) === 'th';\n        }).getOr('');\n      };\n      var getTableColType = getColumnType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        setTableCellType: setTableCellType,\n        setTableRowType: setTableRowType,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set(td, 'scope', 'col');\n        }\n        append(td, SugarElement.fromTag('br'));\n        append(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range(columns, function () {\n        return append(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append$1(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append$1(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$b = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$b(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage$1 = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render$1(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set(table, 'data-mce-id', '__mce');\n        var html = getOuter$2(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(editor, table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage$1(defaultStyles.width)) {\n          enforcePercentage(editor, table);\n        }\n        removeDataStyle(table);\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert$1(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom$1(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove(element, property);\n      } else {\n        set(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append$1(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map(house.all, function (row) {\n        var cellsToCopy = filter(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append$1(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onUnlockedCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArrays(fakeColGroups, fakeRows);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.bind(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var filteredGrid = bind(slicedGrid, function (row) {\n          var newCells = filter(row.cells, function (cell) {\n            return !cell.isLocked;\n          });\n          return newCells.length > 0 ? [__assign(__assign({}, row), { cells: newCells })] : [];\n        });\n        var slicedDetails = toDetailList(filteredGrid, generators);\n        return someIf(slicedDetails.length > 0, slicedDetails);\n      }).map(function (slicedDetails) {\n        return copy$2(slicedDetails);\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (inputList, startItems) {\n      var appendItems = function (values, acc) {\n        return acc.concat(map(values, function (item) {\n          var text = item.text || item.title;\n          if (isListGroup(item)) {\n            return {\n              text: text,\n              items: buildListItems(item.menu)\n            };\n          } else {\n            return {\n              text: text,\n              value: item.value\n            };\n          }\n        }));\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw(element, 'border-width').getOr(''),\n        borderstyle: getRaw(element, 'border-style').getOr(''),\n        bordercolor: getRaw(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each(comparisonData, function (items) {\n        each(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAdvancedTab = function (dialogName) {\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: [\n            {\n              text: 'Select...',\n              value: ''\n            },\n            {\n              text: 'Solid',\n              value: 'solid'\n            },\n            {\n              text: 'Dotted',\n              value: 'dotted'\n            },\n            {\n              text: 'Dashed',\n              value: 'dashed'\n            },\n            {\n              text: 'Double',\n              value: 'double'\n            },\n            {\n              text: 'Groove',\n              value: 'groove'\n            },\n            {\n              text: 'Ridge',\n              value: 'ridge'\n            },\n            {\n              text: 'Inset',\n              value: 'inset'\n            },\n            {\n              text: 'Outset',\n              value: 'outset'\n            },\n            {\n              text: 'None',\n              value: 'none'\n            },\n            {\n              text: 'Hidden',\n              value: 'hidden'\n            }\n          ]\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find(formats, function (name) {\n        return editor.formatter.matchNode(elm, formatName + name);\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$1(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$1(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$1(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$1(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$1(style, 'border-spacing').or(get$1(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$1(style, 'border-padding').or(get$1(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n        cellpadding: dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(editor.dom, elm, 'padding'),\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(editor, elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children$3 = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'H Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'V Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Top',\n            value: 'top'\n          },\n          {\n            text: 'Middle',\n            value: 'middle'\n          },\n          {\n            text: 'Bottom',\n            value: 'bottom'\n          }\n        ]\n      }\n    ];\n    var getItems = function (editor) {\n      return children$3.concat(getClassList(editor).toArray());\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var getSelectedCells = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var warehouse = Warehouse.fromTable(table);\n        var allCells = Warehouse.justCells(warehouse);\n        var filtered = filter(allCells, function (cellA) {\n          return exists(cells, function (cellB) {\n            return eq$1(cellA.element, cellB);\n          });\n        });\n        return map(filtered, function (cell) {\n          return {\n            element: cell.element.dom,\n            column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n              return col.element.dom;\n            })\n          };\n        });\n      });\n    };\n    var updateSimpleProps = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyCellData = function (editor, cells, oldData, data) {\n      var isSingleCell = cells.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0 && cells.length >= 1) {\n        var tableOpt = table(cells[0]);\n        getSelectedCells(cells).each(function (selectedCells) {\n          each(selectedCells, function (item) {\n            var cellElm = switchCellType(editor, item.element, data.celltype);\n            var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n            var colModifier = item.column.map(function (col) {\n              return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n            }).getOr(modifier);\n            updateSimpleProps(modifier, colModifier, data);\n            if (hasAdvancedCellTab(editor)) {\n              updateAdvancedProps(modifier, data);\n            }\n            if (isSingleCell) {\n              unApplyAlign(editor, cellElm);\n              unApplyVAlign(editor, cellElm);\n            }\n            if (data.halign) {\n              applyAlign(editor, cellElm, data.halign);\n            }\n            if (data.valign) {\n              applyVAlign(editor, cellElm, data.valign);\n            }\n          });\n        });\n        var styleModified_1 = size(filter$1(modifiedData, function (_value, key) {\n          return key !== 'scope' && key !== 'celltype';\n        })) > 0;\n        tableOpt.each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: has(modifiedData, 'celltype'),\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, oldData, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = getSelectedCells(cells).map(function (selectedCells) {\n        return map(selectedCells, function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open = function (editor, selections) {\n      var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems(editor)\n          },\n          getAdvancedTab('cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells, data)\n      });\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList$1(editor).toArray());\n    };\n\n    var updateSimpleProps$1 = function (modifier, data) {\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var isSingleRow = rows.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0) {\n        each(rows, function (rowElm) {\n          if (data.type !== getNodeName(rowElm.parentNode)) {\n            switchSectionType(editor, rowElm, data.type);\n          }\n          var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n          updateSimpleProps$1(modifier, data);\n          if (hasAdvancedRowTab(editor)) {\n            updateAdvancedProps$1(modifier, data);\n          }\n          if (data.align !== oldData.align) {\n            unApplyAlign(editor, rowElm);\n            applyAlign(editor, rowElm, data.align);\n          }\n        });\n        var typeModified_1 = has(modifiedData, 'type');\n        var styleModified_1 = typeModified_1 ? size(modifiedData) > 1 : true;\n        table(SugarElement.fromDom(rows[0])).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: typeModified_1,\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab('row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getItems$2 = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, oldData, api) {\n      var dom = editor.dom;\n      var captionElm;\n      var data = api.getData();\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert$1(editor, cols, rows, 0, 0);\n        }\n        if (size(modifiedData) > 0) {\n          applyDataToElement(editor, tableElm, data);\n          captionElm = dom.select('caption', tableElm)[0];\n          if (captionElm && !data.caption) {\n            dom.remove(captionElm);\n          }\n          if (!captionElm && data.caption) {\n            captionElm = dom.create('caption');\n            captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : nbsp;\n            tableElm.insertBefore(captionElm, tableElm.firstChild);\n          }\n          if (data.align === '') {\n            unApplyAlign(editor, tableElm);\n          } else {\n            applyAlign(editor, tableElm, data.align);\n          }\n        }\n        editor.focus();\n        editor.addVisual();\n        if (size(modifiedData) > 0) {\n          var captionModified = has(modifiedData, 'caption');\n          var styleModified = captionModified ? size(modifiedData) > 1 : true;\n          fireTableModified(editor, tableElm, {\n            structure: captionModified,\n            style: styleModified\n          });\n        }\n      });\n    };\n    var open$2 = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems$2(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab('table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm, data),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption$1 = function (editor) {\n      return getSelectionStartCellOrCaption(getSelectionStart(editor));\n    };\n    var getSelectionStartCell$1 = function (editor) {\n      return getSelectionStartCell(getSelectionStart(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing$1(table)) {\n                enforcePercentage(editor, table);\n              } else if (sizing === 'fixed' && !isPixelSizing$1(table)) {\n                enforcePixels(editor, table);\n              } else if (sizing === 'responsive' && !isNoneSizing$1(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom, structureModified);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var postExecute = function (table) {\n        return function (data) {\n          editor.selection.setRng(data.rng);\n          editor.focus();\n          cellSelection.clear(table);\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, data.effect);\n        };\n      };\n      var actOnSelection = function (execute) {\n        return getSelectionStartCell$1(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = forMenu(selections, table, cell);\n            execute(table, targets).each(postExecute(table));\n          });\n        });\n      };\n      var copyRowSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n            return copyRows(table, targets, generators);\n          });\n        });\n      };\n      var copyColSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return copyCols(table, targets);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell$1(editor).each(function (cell) {\n            return getTableFromCell(cell).each(function (table) {\n              var generators = paste(SugarElement.fromDom(editor.getDoc()));\n              var targets = pasteRows(selections, cell, clonedRows, generators);\n              execute(table, targets).each(postExecute(table));\n            });\n          });\n        });\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableSizingMode: function (ui, sizing) {\n          return setSizingMode(sizing);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      var fireTableModifiedForSelection = function (editor, tableOpt) {\n        tableOpt.each(function (table) {\n          fireTableModified(editor, table.dom, structureModified);\n        });\n      };\n      each$1({\n        mceTableCellType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableCellType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        },\n        mceTableRowType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableRowType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      editor.addCommand('mceTableColType', function (_ui, args) {\n        return get$1(args, 'type').each(function (type) {\n          return actOnSelection(type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader);\n        });\n      });\n      each$1({\n        mceTableProps: curry(open$2, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open$2(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, styleModified);\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      each$1({\n        mceTableRowType: function () {\n          return actions.getTableRowType(editor);\n        },\n        mceTableCellType: function () {\n          return actions.getTableCellType(editor);\n        },\n        mceTableColType: function () {\n          return getSelectionStartCell(getSelectionStart(editor)).bind(function (cell) {\n            return getTableFromCell(cell).map(function (table) {\n              var targets = forMenu(selections, table, cell);\n              return actions.getTableColType(table, targets);\n            });\n          }).getOr('');\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = Cell(Optional.none());\n      var cols = Cell(Optional.none());\n      var clearClipboard = function (clipboard) {\n        clipboard.set(Optional.none());\n      };\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          rows.set(r);\n          clearClipboard(cols);\n        },\n        clearRows: function () {\n          return clearClipboard(rows);\n        },\n        getColumns: cols.get,\n        setColumns: function (c) {\n          cols.set(c);\n          clearClipboard(rows);\n        },\n        clearColumns: function () {\n          return clearClipboard(cols);\n        }\n      };\n    };\n\n    var cellFormats = {\n      tablecellbackgroundcolor: {\n        selector: 'td,th',\n        styles: { backgroundColor: '%value' },\n        remove_similar: true\n      },\n      tablecellbordercolor: {\n        selector: 'td,th',\n        styles: { borderColor: '%value' },\n        remove_similar: true\n      },\n      tablecellborderstyle: {\n        selector: 'td,th',\n        styles: { borderStyle: '%value' },\n        remove_similar: true\n      },\n      tablecellborderwidth: {\n        selector: 'td,th',\n        styles: { borderWidth: '%value' },\n        remove_similar: true\n      }\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$2 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$2 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$2.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$2), { none: none$2 });\n\n    var detect$5 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index + 1 < info.all.length ? CellLocation.middle(current, info.all[info.index + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index - 1 >= 0 ? CellLocation.middle(current, info.all[info.index - 1]) : CellLocation.first(current);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$3 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$3.before;\n    var on = adt$3.on;\n    var after$2 = adt$3.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$4 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$4.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$4.domRange;\n    var relative = adt$4.relative;\n    var exact = adt$4.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$5 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$5.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$5.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$5.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr$1 = adt$5.ltr;\n    var rtl$1 = adt$5.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$4(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint$1 = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$3(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$c = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, next(cell), actions);\n    };\n    var backward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, prev(cell), actions);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return table(current, isRoot).bind(function (table) {\n          var targets = noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n\n    var create$3 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$3 };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create$4 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$6(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect$6 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$3 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$3, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$3, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$3, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$3, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$6 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne$1(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$6.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$6.none('in same cell');\n          }\n        });\n      }).getOr(adt$6.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$6), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$4(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop$1 = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, isBlock$1).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt$7.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt$7.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var upMovement = {\n      point: getTop$1,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan$1 = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan$1(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle$2(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect$6(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    var MouseSelection = function (bridge, container, isRoot, annotations) {\n      var cursor = value$1();\n      var clearstate = cursor.clear;\n      var applySelection = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq$1(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        applySelection(event);\n      };\n      var mouseup = function (event) {\n        applySelection(event);\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    };\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr$2 = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl$2 = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get$d = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel);\n      };\n      var getSelection = function () {\n        return get$c(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$c(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$d(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve(container, annotations.selectedSelector).fold(function () {\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$3(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$3(start, ephemera.firstSelected);\n        add$3(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected);\n        remove(element, ephemera.firstSelected);\n        remove(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected, '1');\n        set(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells, generators) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid, generators);\n      return bind(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells, generators) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid, generators);\n      return bind(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne$1(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr$2, rtl$2)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent$1(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent$1(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent$1(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var selectionDetails = Optional.none();\n      var isCaption = isTag('caption');\n      var isDisabledForSelection = function (key) {\n        return selectionDetails.forall(function (details) {\n          return !details[key];\n        });\n      };\n      var findTargets = function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor)).bind(function (cellOrCaption) {\n          var table$1 = table(cellOrCaption);\n          return table$1.map(function (table) {\n            if (isCaption(cellOrCaption)) {\n              return noMenu(cellOrCaption);\n            } else {\n              return forMenu(selections, table, cellOrCaption);\n            }\n          });\n        });\n      };\n      var getExtractedDetails = function (targets) {\n        var tableOpt = table(targets.element);\n        return tableOpt.map(function (table) {\n          var warehouse = Warehouse.fromTable(table);\n          var selectedCells = onCells(warehouse, targets).getOr([]);\n          var locked = foldl(selectedCells, function (acc, cell) {\n            if (cell.isLocked) {\n              acc.onAny = true;\n              if (cell.column === 0) {\n                acc.onFirst = true;\n              } else if (cell.column + cell.colspan >= warehouse.grid.columns) {\n                acc.onLast = true;\n              }\n            }\n            return acc;\n          }, {\n            onAny: false,\n            onFirst: false,\n            onLast: false\n          });\n          return {\n            mergeable: onUnlockedMergable(warehouse, targets).isSome(),\n            unmergeable: onUnlockedUnmergable(warehouse, targets).isSome(),\n            locked: locked\n          };\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        selectionDetails = targets.get().bind(getExtractedDetails);\n        each(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var onSetup = function (api, isDisabled) {\n        var handler = function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        };\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var isDisabledFromLocked = function (lockedDisable) {\n        return selectionDetails.exists(function (details) {\n          return details.locked[lockedDisable];\n        });\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return isCaption(targets.element);\n        });\n      };\n      var onSetupColumn = function (lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupPasteableColumn = function (getClipboardData, lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('mergeable');\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('unmergeable');\n        });\n      };\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupColumn: onSetupColumn,\n        onSetupPasteable: onSetupPasteable,\n        onSetupPasteableColumn: onSetupPasteableColumn,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        targets: function () {\n          return targets.get();\n        }\n      };\n    };\n\n    var addButtons = function (editor, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: function () {\n          return 'tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: function () {\n          return 'tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: function () {\n          return 'tablecellprops tablemergecells tablesplitcells';\n        }\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(function () {\n            return '';\n          }, function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n    };\n\n    var Plugin = function (editor) {\n      var selections = Selections(function () {\n        return getBody$1(editor);\n      }, function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, resizeHandler.lazyWire, selections);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions, cellSelection);\n      addMenuItems(editor, selectionTargets, clipboard);\n      addButtons(editor, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, actions);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    };\n    function Plugin$1 () {\n      global.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$2.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$3(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$2.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$2.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$2.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var link = function (editor, attachState, data) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(data)) : linkDomMutation(editor, attachState, data);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$4.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$5.resolve(data);\n      }, function (transform) {\n        return new global$5(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$5(function (callback) {\n        if (isString(linkList)) {\n          global$6.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open$1 = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open$1(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        return toggleState(editor, function () {\n          api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        });\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: noop\n                };\n                var onlyText = isOnlyTextSelected(editor);\n                var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Optional.from(value)) : Optional.none();\n                link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Optional.none(),\n                  rel: Optional.none(),\n                  target: Optional.none(),\n                  class: Optional.none()\n                });\n                formApi.hide();\n              } else {\n                editor.undoManager.transact(function () {\n                  editor.dom.setAttrib(anchor, 'href', value);\n                  collapseSelectionToEnd(editor);\n                  formApi.hide();\n                });\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isNumber = isSimpleType('number');\n\n    var nativePush = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var hasDimensions = function (editor) {\n      return editor.getParam('image_dimensions', true, 'boolean');\n    };\n    var hasAdvTab = function (editor) {\n      return editor.getParam('image_advtab', false, 'boolean');\n    };\n    var hasUploadTab = function (editor) {\n      return editor.getParam('image_uploadtab', true, 'boolean');\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '', 'string');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.getParam('image_description', true, 'boolean');\n    };\n    var hasImageTitle = function (editor) {\n      return editor.getParam('image_title', false, 'boolean');\n    };\n    var hasImageCaption = function (editor) {\n      return editor.getParam('image_caption', false, 'boolean');\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return isNonNullable(editor.getParam('images_upload_url'));\n    };\n    var hasUploadHandler = function (editor) {\n      return isNonNullable(editor.getParam('images_upload_handler'));\n    };\n    var showAccessibilityOptions = function (editor) {\n      return editor.getParam('a11y_advanced_options', false, 'boolean');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url) {\n      return new global$2(function (callback) {\n        var img = document.createElement('img');\n        var done = function (dimensions) {\n          if (img.parentNode) {\n            img.parentNode.removeChild(img);\n          }\n          callback(dimensions);\n        };\n        img.onload = function () {\n          var width = parseIntAndGetMax(img.width, img.clientWidth);\n          var height = parseIntAndGetMax(img.height, img.clientHeight);\n          var dimensions = {\n            width: width,\n            height: height\n          };\n          done(global$2.resolve(dimensions));\n        };\n        img.onerror = function () {\n          done(global$2.reject('Failed to get image dimensions for: ' + url));\n        };\n        var style = img.style;\n        style.visibility = 'hidden';\n        style.position = 'fixed';\n        style.bottom = style.left = '0px';\n        style.width = style.height = 'auto';\n        document.body.appendChild(img);\n        img.src = url;\n      });\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = String(css.margin).split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = getImageList(editor);\n      if (typeof imageList === 'string') {\n        global$3.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (typeof imageList === 'function') {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      var selectImage = function () {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      };\n      imgElm.onload = function () {\n        if (!data.width && !data.height && hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: String(imgElm.clientWidth),\n            height: String(imgElm.clientHeight)\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$2(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var isPlaceholderImage = function (imgElm) {\n      return imgElm.nodeName === 'IMG' && (imgElm.hasAttribute('data-mce-object') || imgElm.hasAttribute('data-mce-placeholder'));\n    };\n\n    var DOM = global$1.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var updateAttrib = function (image, name, value) {\n      if (value === '') {\n        image.removeAttribute(name);\n      } else {\n        image.setAttribute(name, value);\n      }\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          updateAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var isImage = function (elm) {\n      return elm.nodeName === 'IMG';\n    };\n    var getIsDecorative = function (image) {\n      return DOM.getAttrib(image, 'alt').length === 0 && DOM.getAttrib(image, 'role') === 'presentation';\n    };\n    var getAlt = function (image) {\n      if (getIsDecorative(image)) {\n        return '';\n      } else {\n        return getAttrib(image, 'alt');\n      }\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: '',\n        isDecorative: false\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = document.createElement('img');\n      updateAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = document.createElement('img');\n      write(normalizeCss, __assign(__assign({}, data), { caption: false }), image);\n      setAlt(image, data.alt, data.isDecorative);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAlt(image),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle'),\n        isDecorative: getIsDecorative(image)\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var setAlt = function (image, alt, isDecorative) {\n      if (isDecorative) {\n        DOM.setAttrib(image, 'role', 'presentation');\n        var sugarImage = SugarElement.fromDom(image);\n        set(sugarImage, 'alt', '');\n      } else {\n        if (isNull(alt)) {\n          var sugarImage = SugarElement.fromDom(image);\n          remove(sugarImage, 'alt');\n        } else {\n          var sugarImage = SugarElement.fromDom(image);\n          set(sugarImage, 'alt', alt);\n        }\n        if (DOM.getAttrib(image, 'role') === 'presentation') {\n          DOM.setAttrib(image, 'role', '');\n        }\n      }\n    };\n    var updateAlt = function (image, oldData, newData) {\n      if (newData.alt !== oldData.alt || newData.isDecorative !== oldData.isDecorative) {\n        setAlt(image, newData.alt, newData.isDecorative);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', updateAttrib);\n      updateProp(image, oldData, newData, 'title', updateAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', updateAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return updateAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n      updateAlt(image, oldData, newData);\n    };\n\n    var normalizeCss = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || isPlaceholderImage(imgElm))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlockElements = filter(editor.schema.getTextBlockElements(), function (_, parentElm) {\n        return !editor.schema.isValidChild(parentElm, 'figure');\n      });\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return hasNonNullableKey(textBlockElements, node.nodeName);\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        waitLoadImage(editor, data, image);\n      }\n    };\n    var insertOrUpdateImage = function (editor, partialData) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        var selectedImageData = read(function (css) {\n          return normalizeCss(editor, css);\n        }, image);\n        var data = __assign(__assign({}, selectedImageData), partialData);\n        if (data.src) {\n          writeImageDataToSelection(editor, data);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (partialData.src) {\n        insertImageAtCaret(editor, __assign(__assign({}, defaultData()), partialData));\n      }\n    };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.ImageUploader');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizer = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        if (list) {\n          return Optional.from(list).map(function (list) {\n            return sanitizeList(list, extracter);\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizer(getValue)(list);\n    };\n    var isGroup = function (item) {\n      return Object.prototype.hasOwnProperty.call(item, 'items');\n    };\n    var findEntryDelegate = function (list, value) {\n      return findMap(list, function (item) {\n        if (isGroup(item)) {\n          return findEntryDelegate(item.items, value);\n        } else if (item.value === value) {\n          return Optional.some(item);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var findEntry = function (optList, value) {\n      return optList.bind(function (list) {\n        return findEntryDelegate(list, value);\n      });\n    };\n    var ListUtils = {\n      sanitizer: sanitizer,\n      sanitize: sanitize,\n      findEntry: findEntry\n    };\n\n    var makeTab = function (_info) {\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: [\n          {\n            type: 'input',\n            label: 'Style',\n            name: 'style'\n          },\n          {\n            type: 'grid',\n            columns: 2,\n            items: [\n              {\n                type: 'input',\n                label: 'Vertical space',\n                name: 'vspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Horizontal space',\n                name: 'hspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Border width',\n                name: 'border',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'listbox',\n                name: 'borderstyle',\n                label: 'Border style',\n                items: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab };\n\n    var collect = function (editor) {\n      var urlListSanitizer = ListUtils.sanitizer(function (item) {\n        return editor.convertURL(item.value || item.url, 'src');\n      });\n      var futureImageList = new global$2(function (completer) {\n        createImageList(editor, function (imageList) {\n          completer(urlListSanitizer(imageList).map(function (items) {\n            return flatten([\n              [{\n                  text: 'None',\n                  value: ''\n                }],\n              items\n            ]);\n          }));\n        });\n      });\n      var classList = ListUtils.sanitize(getClassList(editor));\n      var hasAdvTab$1 = hasAdvTab(editor);\n      var hasUploadTab$1 = hasUploadTab(editor);\n      var hasUploadUrl$1 = hasUploadUrl(editor);\n      var hasUploadHandler$1 = hasUploadHandler(editor);\n      var image = readImageDataFromSelection(editor);\n      var hasDescription$1 = hasDescription(editor);\n      var hasImageTitle$1 = hasImageTitle(editor);\n      var hasDimensions$1 = hasDimensions(editor);\n      var hasImageCaption$1 = hasImageCaption(editor);\n      var hasAccessibilityOptions = showAccessibilityOptions(editor);\n      var automaticUploads = isAutomaticUploadsEnabled(editor);\n      var prependURL = Optional.some(getPrependUrl(editor)).filter(function (preUrl) {\n        return isString(preUrl) && preUrl.length > 0;\n      });\n      return futureImageList.then(function (imageList) {\n        return {\n          image: image,\n          imageList: imageList,\n          classList: classList,\n          hasAdvTab: hasAdvTab$1,\n          hasUploadTab: hasUploadTab$1,\n          hasUploadUrl: hasUploadUrl$1,\n          hasUploadHandler: hasUploadHandler$1,\n          hasDescription: hasDescription$1,\n          hasImageTitle: hasImageTitle$1,\n          hasDimensions: hasDimensions$1,\n          hasImageCaption: hasImageCaption$1,\n          prependURL: prependURL,\n          hasAccessibilityOptions: hasAccessibilityOptions,\n          automaticUploads: automaticUploads\n        };\n      });\n    };\n\n    var makeItems = function (info) {\n      var imageUrl = {\n        name: 'src',\n        type: 'urlinput',\n        filetype: 'image',\n        label: 'Source'\n      };\n      var imageList = info.imageList.map(function (items) {\n        return {\n          name: 'images',\n          type: 'listbox',\n          label: 'Image list',\n          items: items\n        };\n      });\n      var imageDescription = {\n        name: 'alt',\n        type: 'input',\n        label: 'Alternative description',\n        disabled: info.hasAccessibilityOptions && info.image.isDecorative\n      };\n      var imageTitle = {\n        name: 'title',\n        type: 'input',\n        label: 'Image title'\n      };\n      var imageDimensions = {\n        name: 'dimensions',\n        type: 'sizeinput'\n      };\n      var isDecorative = {\n        type: 'label',\n        label: 'Accessibility',\n        items: [{\n            name: 'isDecorative',\n            type: 'checkbox',\n            label: 'Image is decorative'\n          }]\n      };\n      var classList = info.classList.map(function (items) {\n        return {\n          name: 'classes',\n          type: 'listbox',\n          label: 'Class',\n          items: items\n        };\n      });\n      var caption = {\n        type: 'label',\n        label: 'Caption',\n        items: [{\n            type: 'checkbox',\n            name: 'caption',\n            label: 'Show caption'\n          }]\n      };\n      return flatten([\n        [imageUrl],\n        imageList.toArray(),\n        info.hasAccessibilityOptions && info.hasDescription ? [isDecorative] : [],\n        info.hasDescription ? [imageDescription] : [],\n        info.hasImageTitle ? [imageTitle] : [],\n        info.hasDimensions ? [imageDimensions] : [],\n        [{\n            type: 'grid',\n            columns: 2,\n            items: flatten([\n              classList.toArray(),\n              info.hasImageCaption ? [caption] : []\n            ])\n          }]\n      ]);\n    };\n    var makeTab$1 = function (info) {\n      return {\n        title: 'General',\n        name: 'general',\n        items: makeItems(info)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab$1,\n      makeItems: makeItems\n    };\n\n    var makeTab$2 = function (_info) {\n      var items = [{\n          type: 'dropzone',\n          name: 'fileinput'\n        }];\n      return {\n        title: 'Upload',\n        name: 'upload',\n        items: items\n      };\n    };\n    var UploadTab = { makeTab: makeTab$2 };\n\n    var createState = function (info) {\n      return {\n        prevImage: ListUtils.findEntry(info.imageList, info.image.src),\n        prevAlt: info.image.alt,\n        open: true\n      };\n    };\n    var fromImageData = function (image) {\n      return {\n        src: {\n          value: image.src,\n          meta: {}\n        },\n        images: image.src,\n        alt: image.alt,\n        title: image.title,\n        dimensions: {\n          width: image.width,\n          height: image.height\n        },\n        classes: image.class,\n        caption: image.caption,\n        style: image.style,\n        vspace: image.vspace,\n        border: image.border,\n        hspace: image.hspace,\n        borderstyle: image.borderStyle,\n        fileinput: [],\n        isDecorative: image.isDecorative\n      };\n    };\n    var toImageData = function (data, removeEmptyAlt) {\n      return {\n        src: data.src.value,\n        alt: data.alt.length === 0 && removeEmptyAlt ? null : data.alt,\n        title: data.title,\n        width: data.dimensions.width,\n        height: data.dimensions.height,\n        class: data.classes,\n        style: data.style,\n        caption: data.caption,\n        hspace: data.hspace,\n        vspace: data.vspace,\n        border: data.border,\n        borderStyle: data.borderstyle,\n        isDecorative: data.isDecorative\n      };\n    };\n    var addPrependUrl2 = function (info, srcURL) {\n      if (!/^(?:[a-zA-Z]+:)?\\/\\//.test(srcURL)) {\n        return info.prependURL.bind(function (prependUrl) {\n          if (srcURL.substring(0, prependUrl.length) !== prependUrl) {\n            return Optional.some(prependUrl + srcURL);\n          }\n          return Optional.none();\n        });\n      }\n      return Optional.none();\n    };\n    var addPrependUrl = function (info, api) {\n      var data = api.getData();\n      addPrependUrl2(info, data.src.value).each(function (srcURL) {\n        api.setData({\n          src: {\n            value: srcURL,\n            meta: data.src.meta\n          }\n        });\n      });\n    };\n    var formFillFromMeta2 = function (info, data, meta) {\n      if (info.hasDescription && isString(meta.alt)) {\n        data.alt = meta.alt;\n      }\n      if (info.hasAccessibilityOptions) {\n        data.isDecorative = meta.isDecorative || data.isDecorative || false;\n      }\n      if (info.hasImageTitle && isString(meta.title)) {\n        data.title = meta.title;\n      }\n      if (info.hasDimensions) {\n        if (isString(meta.width)) {\n          data.dimensions.width = meta.width;\n        }\n        if (isString(meta.height)) {\n          data.dimensions.height = meta.height;\n        }\n      }\n      if (isString(meta.class)) {\n        ListUtils.findEntry(info.classList, meta.class).each(function (entry) {\n          data.classes = entry.value;\n        });\n      }\n      if (info.hasImageCaption) {\n        if (isBoolean(meta.caption)) {\n          data.caption = meta.caption;\n        }\n      }\n      if (info.hasAdvTab) {\n        if (isString(meta.style)) {\n          data.style = meta.style;\n        }\n        if (isString(meta.vspace)) {\n          data.vspace = meta.vspace;\n        }\n        if (isString(meta.border)) {\n          data.border = meta.border;\n        }\n        if (isString(meta.hspace)) {\n          data.hspace = meta.hspace;\n        }\n        if (isString(meta.borderstyle)) {\n          data.borderstyle = meta.borderstyle;\n        }\n      }\n    };\n    var formFillFromMeta = function (info, api) {\n      var data = api.getData();\n      var meta = data.src.meta;\n      if (meta !== undefined) {\n        var newData = deepMerge({}, data);\n        formFillFromMeta2(info, newData, meta);\n        api.setData(newData);\n      }\n    };\n    var calculateImageSize = function (helpers, info, state, api) {\n      var data = api.getData();\n      var url = data.src.value;\n      var meta = data.src.meta || {};\n      if (!meta.width && !meta.height && info.hasDimensions) {\n        if (isNotEmpty(url)) {\n          helpers.imageSize(url).then(function (size) {\n            if (state.open) {\n              api.setData({ dimensions: size });\n            }\n          }).catch(function (e) {\n            return console.error(e);\n          });\n        } else {\n          api.setData({\n            dimensions: {\n              width: '',\n              height: ''\n            }\n          });\n        }\n      }\n    };\n    var updateImagesDropdown = function (info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.src.value);\n      state.prevImage = image;\n      api.setData({\n        images: image.map(function (entry) {\n          return entry.value;\n        }).getOr('')\n      });\n    };\n    var changeSrc = function (helpers, info, state, api) {\n      addPrependUrl(info, api);\n      formFillFromMeta(info, api);\n      calculateImageSize(helpers, info, state, api);\n      updateImagesDropdown(info, state, api);\n    };\n    var changeImages = function (helpers, info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.images);\n      image.each(function (img) {\n        var updateAlt = data.alt === '' || state.prevImage.map(function (image) {\n          return image.text === data.alt;\n        }).getOr(false);\n        if (updateAlt) {\n          if (img.value === '') {\n            api.setData({\n              src: img,\n              alt: state.prevAlt\n            });\n          } else {\n            api.setData({\n              src: img,\n              alt: img.text\n            });\n          }\n        } else {\n          api.setData({ src: img });\n        }\n      });\n      state.prevImage = image;\n      changeSrc(helpers, info, state, api);\n    };\n    var calcVSpace = function (css) {\n      var matchingTopBottom = css['margin-top'] && css['margin-bottom'] && css['margin-top'] === css['margin-bottom'];\n      return matchingTopBottom ? removePixelSuffix(String(css['margin-top'])) : '';\n    };\n    var calcHSpace = function (css) {\n      var matchingLeftRight = css['margin-right'] && css['margin-left'] && css['margin-right'] === css['margin-left'];\n      return matchingLeftRight ? removePixelSuffix(String(css['margin-right'])) : '';\n    };\n    var calcBorderWidth = function (css) {\n      return css['border-width'] ? removePixelSuffix(String(css['border-width'])) : '';\n    };\n    var calcBorderStyle = function (css) {\n      return css['border-style'] ? String(css['border-style']) : '';\n    };\n    var calcStyle = function (parseStyle, serializeStyle, css) {\n      return serializeStyle(parseStyle(serializeStyle(css)));\n    };\n    var changeStyle2 = function (parseStyle, serializeStyle, data) {\n      var css = mergeMargins(parseStyle(data.style));\n      var dataCopy = deepMerge({}, data);\n      dataCopy.vspace = calcVSpace(css);\n      dataCopy.hspace = calcHSpace(css);\n      dataCopy.border = calcBorderWidth(css);\n      dataCopy.borderstyle = calcBorderStyle(css);\n      dataCopy.style = calcStyle(parseStyle, serializeStyle, css);\n      return dataCopy;\n    };\n    var changeStyle = function (helpers, api) {\n      var data = api.getData();\n      var newData = changeStyle2(helpers.parseStyle, helpers.serializeStyle, data);\n      api.setData(newData);\n    };\n    var changeAStyle = function (helpers, info, api) {\n      var data = deepMerge(fromImageData(info.image), api.getData());\n      var style = getStyleValue(helpers.normalizeCss, toImageData(data, false));\n      api.setData({ style: style });\n    };\n    var changeFileInput = function (helpers, info, state, api) {\n      var data = api.getData();\n      api.block('Uploading image');\n      head(data.fileinput).fold(function () {\n        api.unblock();\n      }, function (file) {\n        var blobUri = URL.createObjectURL(file);\n        var finalize = function () {\n          api.unblock();\n          URL.revokeObjectURL(blobUri);\n        };\n        var updateSrcAndSwitchTab = function (url) {\n          api.setData({\n            src: {\n              value: url,\n              meta: {}\n            }\n          });\n          api.showTab('general');\n          changeSrc(helpers, info, state, api);\n        };\n        blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = helpers.createBlobCache(file, blobUri, dataUrl);\n          if (info.automaticUploads) {\n            helpers.uploadImage(blobInfo).then(function (result) {\n              updateSrcAndSwitchTab(result.url);\n              finalize();\n            }).catch(function (err) {\n              finalize();\n              helpers.alertErr(err);\n            });\n          } else {\n            helpers.addToBlobCache(blobInfo);\n            updateSrcAndSwitchTab(blobInfo.blobUri());\n            api.unblock();\n          }\n        });\n      });\n    };\n    var changeHandler = function (helpers, info, state) {\n      return function (api, evt) {\n        if (evt.name === 'src') {\n          changeSrc(helpers, info, state, api);\n        } else if (evt.name === 'images') {\n          changeImages(helpers, info, state, api);\n        } else if (evt.name === 'alt') {\n          state.prevAlt = api.getData().alt;\n        } else if (evt.name === 'style') {\n          changeStyle(helpers, api);\n        } else if (evt.name === 'vspace' || evt.name === 'hspace' || evt.name === 'border' || evt.name === 'borderstyle') {\n          changeAStyle(helpers, info, api);\n        } else if (evt.name === 'fileinput') {\n          changeFileInput(helpers, info, state, api);\n        } else if (evt.name === 'isDecorative') {\n          if (api.getData().isDecorative) {\n            api.disable('alt');\n          } else {\n            api.enable('alt');\n          }\n        }\n      };\n    };\n    var closeHandler = function (state) {\n      return function () {\n        state.open = false;\n      };\n    };\n    var makeDialogBody = function (info) {\n      if (info.hasAdvTab || info.hasUploadUrl || info.hasUploadHandler) {\n        var tabPanel = {\n          type: 'tabpanel',\n          tabs: flatten([\n            [MainTab.makeTab(info)],\n            info.hasAdvTab ? [AdvTab.makeTab(info)] : [],\n            info.hasUploadTab && (info.hasUploadUrl || info.hasUploadHandler) ? [UploadTab.makeTab(info)] : []\n          ])\n        };\n        return tabPanel;\n      } else {\n        var panel = {\n          type: 'panel',\n          items: MainTab.makeItems(info)\n        };\n        return panel;\n      }\n    };\n    var makeDialog = function (helpers) {\n      return function (info) {\n        var state = createState(info);\n        return {\n          title: 'Insert/Edit Image',\n          size: 'normal',\n          body: makeDialogBody(info),\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: fromImageData(info.image),\n          onSubmit: helpers.onSubmit(info),\n          onChange: changeHandler(helpers, info, state),\n          onClose: closeHandler(state)\n        };\n      };\n    };\n    var submitHandler = function (editor) {\n      return function (info) {\n        return function (api) {\n          var data = deepMerge(fromImageData(info.image), api.getData());\n          editor.execCommand('mceUpdateImage', false, toImageData(data, info.hasAccessibilityOptions));\n          editor.editorUpload.uploadImagesAuto();\n          api.close();\n        };\n      };\n    };\n    var imageSize = function (editor) {\n      return function (url) {\n        return getImageSize(editor.documentBaseURI.toAbsolute(url)).then(function (dimensions) {\n          return {\n            width: String(dimensions.width),\n            height: String(dimensions.height)\n          };\n        });\n      };\n    };\n    var createBlobCache = function (editor) {\n      return function (file, blobUri, dataUrl) {\n        return editor.editorUpload.blobCache.create({\n          blob: file,\n          blobUri: blobUri,\n          name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n          filename: file.name,\n          base64: dataUrl.split(',')[1]\n        });\n      };\n    };\n    var addToBlobCache = function (editor) {\n      return function (blobInfo) {\n        editor.editorUpload.blobCache.add(blobInfo);\n      };\n    };\n    var alertErr = function (editor) {\n      return function (message) {\n        editor.windowManager.alert(message);\n      };\n    };\n    var normalizeCss$1 = function (editor) {\n      return function (cssText) {\n        return normalizeCss(editor, cssText);\n      };\n    };\n    var parseStyle = function (editor) {\n      return function (cssText) {\n        return editor.dom.parseStyle(cssText);\n      };\n    };\n    var serializeStyle = function (editor) {\n      return function (stylesArg, name) {\n        return editor.dom.serializeStyle(stylesArg, name);\n      };\n    };\n    var uploadImage = function (editor) {\n      return function (blobInfo) {\n        return global$4(editor).upload([blobInfo], false).then(function (results) {\n          if (results.length === 0) {\n            return global$2.reject('Failed to upload image');\n          } else if (results[0].status === false) {\n            return global$2.reject(results[0].error);\n          } else {\n            return results[0];\n          }\n        });\n      };\n    };\n    var Dialog = function (editor) {\n      var helpers = {\n        onSubmit: submitHandler(editor),\n        imageSize: imageSize(editor),\n        addToBlobCache: addToBlobCache(editor),\n        createBlobCache: createBlobCache(editor),\n        alertErr: alertErr(editor),\n        normalizeCss: normalizeCss$1(editor),\n        parseStyle: parseStyle(editor),\n        serializeStyle: serializeStyle(editor),\n        uploadImage: uploadImage(editor)\n      };\n      var open = function () {\n        collect(editor).then(makeDialog(helpers)).then(editor.windowManager.open);\n      };\n      return { open: open };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n      editor.addCommand('mceUpdateImage', function (_ui, data) {\n        editor.undoManager.transact(function () {\n          return insertOrUpdateImage(editor, data);\n        });\n      });\n    };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          var node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global$5.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addToggleButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onAction: Dialog(editor).open,\n        onSetup: function (buttonApi) {\n          return editor.selection.selectorChangedWithUnbind('img:not([data-mce-object],[data-mce-placeholder]),figure.image', buttonApi.setActive).unbind;\n        }\n      });\n      editor.ui.registry.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image...',\n        onAction: Dialog(editor).open\n      });\n      editor.ui.registry.addContextMenu('image', {\n        update: function (element) {\n          return isFigure(element) || isImage(element) && !isPlaceholderImage(element) ? ['image'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global.add('image', function (editor) {\n        setup(editor);\n        register$1(editor);\n        register(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var identity = function (x) {\n      return x;\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n\n    var punctuationStr = '[!-#%-*,-\\\\/:;?@\\\\[-\\\\]_{}\\xA1\\xAB\\xB7\\xBB\\xBF;\\xB7\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1361-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u3008\\u3009\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30\\u2E31\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uff3f\\uFF5B\\uFF5D\\uFF5F-\\uFF65]';\n    var regExps = {\n      aletter: '[A-Za-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05F3\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u10a0-\\u10c5\\u10d0-\\u10fa\\u10fc\\u1100-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1a00-\\u1a16\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bc0-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u24B6-\\u24E9\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2d00-\\u2d25\\u2d30-\\u2d65\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005\\u303b\\u303c\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790\\ua791\\ua7a0-\\ua7a9\\ua7fa-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uffa0-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]',\n      midnumlet: '[-\\'\\\\.\\u2018\\u2019\\u2024\\uFE52\\uFF07\\uFF0E]',\n      midletter: '[:\\xB7\\xB7\\u05F4\\u2027\\uFE13\\uFE55\\uFF1A]',\n      midnum: '[\\xB1+*/,;;\\u0589\\u060C\\u060D\\u066C\\u07F8\\u2044\\uFE10\\uFE14\\uFE50\\uFE54\\uFF0C\\uFF1B]',\n      numeric: '[0-9\\u0660-\\u0669\\u066B\\u06f0-\\u06f9\\u07c0-\\u07c9\\u0966-\\u096f\\u09e6-\\u09ef\\u0a66-\\u0a6f\\u0ae6-\\u0aef\\u0b66-\\u0b6f\\u0be6-\\u0bef\\u0c66-\\u0c6f\\u0ce6-\\u0cef\\u0d66-\\u0d6f\\u0e50-\\u0e59\\u0ed0-\\u0ed9\\u0f20-\\u0f29\\u1040-\\u1049\\u1090-\\u1099\\u17e0-\\u17e9\\u1810-\\u1819\\u1946-\\u194f\\u19d0-\\u19d9\\u1a80-\\u1a89\\u1a90-\\u1a99\\u1b50-\\u1b59\\u1bb0-\\u1bb9\\u1c40-\\u1c49\\u1c50-\\u1c59\\ua620-\\ua629\\ua8d0-\\ua8d9\\ua900-\\ua909\\ua9d0-\\ua9d9\\uaa50-\\uaa59\\uabf0-\\uabf9]',\n      cr: '\\\\r',\n      lf: '\\\\n',\n      newline: '[\\x0B\\f\\x85\\u2028\\u2029]',\n      extend: '[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0c01-\\u0c03\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d02\\u0d03\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f\\u109a-\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b6-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u19b0-\\u19c0\\u19c8\\u19c9\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1baa\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2\\u1dc0-\\u1de6\\u1dfc-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\uA672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa7b\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe3-\\uabea\\uabec\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]',\n      format: '[\\xAD\\u0600-\\u0603\\u06DD\\u070F\\u17b4\\u17b5\\u200E\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u206A-\\u206F\\uFEFF\\uFFF9-\\uFFFB]',\n      katakana: '[\\u3031-\\u3035\\u309B\\u309C\\u30A0-\\u30fa\\u30fc-\\u30ff\\u31f0-\\u31ff\\u32D0-\\u32FE\\u3300-\\u3357\\uff66-\\uff9d]',\n      extendnumlet: '[=_\\u203f\\u2040\\u2054\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff3f\\u2200-\\u22FF<>]',\n      punctuation: punctuationStr\n    };\n    var characterIndices = {\n      ALETTER: 0,\n      MIDNUMLET: 1,\n      MIDLETTER: 2,\n      MIDNUM: 3,\n      NUMERIC: 4,\n      CR: 5,\n      LF: 6,\n      NEWLINE: 7,\n      EXTEND: 8,\n      FORMAT: 9,\n      KATAKANA: 10,\n      EXTENDNUMLET: 11,\n      AT: 12,\n      OTHER: 13\n    };\n    var SETS = [\n      new RegExp(regExps.aletter),\n      new RegExp(regExps.midnumlet),\n      new RegExp(regExps.midletter),\n      new RegExp(regExps.midnum),\n      new RegExp(regExps.numeric),\n      new RegExp(regExps.cr),\n      new RegExp(regExps.lf),\n      new RegExp(regExps.newline),\n      new RegExp(regExps.extend),\n      new RegExp(regExps.format),\n      new RegExp(regExps.katakana),\n      new RegExp(regExps.extendnumlet),\n      new RegExp('@')\n    ];\n    var EMPTY_STRING = '';\n    var PUNCTUATION = new RegExp('^' + regExps.punctuation + '$');\n    var WHITESPACE = /^\\s+$/;\n\n    var SETS$1 = SETS;\n    var OTHER = characterIndices.OTHER;\n    var getType = function (char) {\n      var type = OTHER;\n      var setsLength = SETS$1.length;\n      for (var j = 0; j < setsLength; ++j) {\n        var set = SETS$1[j];\n        if (set && set.test(char)) {\n          type = j;\n          break;\n        }\n      }\n      return type;\n    };\n    var memoize = function (func) {\n      var cache = {};\n      return function (char) {\n        if (cache[char]) {\n          return cache[char];\n        } else {\n          var result = func(char);\n          cache[char] = result;\n          return result;\n        }\n      };\n    };\n    var classify = function (characters) {\n      var memoized = memoize(getType);\n      return map(characters, memoized);\n    };\n\n    var isWordBoundary = function (map, index) {\n      var type = map[index];\n      var nextType = map[index + 1];\n      if (index < 0 || index > map.length - 1 && index !== 0) {\n        return false;\n      }\n      if (type === characterIndices.ALETTER && nextType === characterIndices.ALETTER) {\n        return false;\n      }\n      var nextNextType = map[index + 2];\n      if (type === characterIndices.ALETTER && (nextType === characterIndices.MIDLETTER || nextType === characterIndices.MIDNUMLET || nextType === characterIndices.AT) && nextNextType === characterIndices.ALETTER) {\n        return false;\n      }\n      var prevType = map[index - 1];\n      if ((type === characterIndices.MIDLETTER || type === characterIndices.MIDNUMLET || nextType === characterIndices.AT) && nextType === characterIndices.ALETTER && prevType === characterIndices.ALETTER) {\n        return false;\n      }\n      if ((type === characterIndices.NUMERIC || type === characterIndices.ALETTER) && (nextType === characterIndices.NUMERIC || nextType === characterIndices.ALETTER)) {\n        return false;\n      }\n      if ((type === characterIndices.MIDNUM || type === characterIndices.MIDNUMLET) && nextType === characterIndices.NUMERIC && prevType === characterIndices.NUMERIC) {\n        return false;\n      }\n      if (type === characterIndices.NUMERIC && (nextType === characterIndices.MIDNUM || nextType === characterIndices.MIDNUMLET) && nextNextType === characterIndices.NUMERIC) {\n        return false;\n      }\n      if (type === characterIndices.EXTEND || type === characterIndices.FORMAT || prevType === characterIndices.EXTEND || prevType === characterIndices.FORMAT || nextType === characterIndices.EXTEND || nextType === characterIndices.FORMAT) {\n        return false;\n      }\n      if (type === characterIndices.CR && nextType === characterIndices.LF) {\n        return false;\n      }\n      if (type === characterIndices.NEWLINE || type === characterIndices.CR || type === characterIndices.LF) {\n        return true;\n      }\n      if (nextType === characterIndices.NEWLINE || nextType === characterIndices.CR || nextType === characterIndices.LF) {\n        return true;\n      }\n      if (type === characterIndices.KATAKANA && nextType === characterIndices.KATAKANA) {\n        return false;\n      }\n      if (nextType === characterIndices.EXTENDNUMLET && (type === characterIndices.ALETTER || type === characterIndices.NUMERIC || type === characterIndices.KATAKANA || type === characterIndices.EXTENDNUMLET)) {\n        return false;\n      }\n      if (type === characterIndices.EXTENDNUMLET && (nextType === characterIndices.ALETTER || nextType === characterIndices.NUMERIC || nextType === characterIndices.KATAKANA)) {\n        return false;\n      }\n      if (type === characterIndices.AT) {\n        return false;\n      }\n      return true;\n    };\n\n    var EMPTY_STRING$1 = EMPTY_STRING;\n    var WHITESPACE$1 = WHITESPACE;\n    var PUNCTUATION$1 = PUNCTUATION;\n    var isProtocol = function (str) {\n      return str === 'http' || str === 'https';\n    };\n    var findWordEnd = function (characters, startIndex) {\n      var i;\n      for (i = startIndex; i < characters.length; i++) {\n        if (WHITESPACE$1.test(characters[i])) {\n          break;\n        }\n      }\n      return i;\n    };\n    var findUrlEnd = function (characters, startIndex) {\n      var endIndex = findWordEnd(characters, startIndex + 1);\n      var peakedWord = characters.slice(startIndex + 1, endIndex).join(EMPTY_STRING$1);\n      return peakedWord.substr(0, 3) === '://' ? endIndex : startIndex;\n    };\n    var findWords = function (chars, sChars, characterMap, options) {\n      var words = [];\n      var word = [];\n      for (var i = 0; i < characterMap.length; ++i) {\n        word.push(chars[i]);\n        if (isWordBoundary(characterMap, i)) {\n          var ch = sChars[i];\n          if ((options.includeWhitespace || !WHITESPACE$1.test(ch)) && (options.includePunctuation || !PUNCTUATION$1.test(ch))) {\n            var startOfWord = i - word.length + 1;\n            var endOfWord = i + 1;\n            var str = sChars.slice(startOfWord, endOfWord).join(EMPTY_STRING$1);\n            if (isProtocol(str)) {\n              var endOfUrl = findUrlEnd(sChars, i);\n              var url = chars.slice(endOfWord, endOfUrl);\n              Array.prototype.push.apply(word, url);\n              i = endOfUrl;\n            }\n            words.push(word);\n          }\n          word = [];\n        }\n      }\n      return words;\n    };\n    var getDefaultOptions = function () {\n      return {\n        includeWhitespace: false,\n        includePunctuation: false\n      };\n    };\n    var getWords = function (chars, extract, options) {\n      options = __assign(__assign({}, getDefaultOptions()), options);\n      var filteredChars = [];\n      var extractedChars = [];\n      for (var i = 0; i < chars.length; i++) {\n        var ch = extract(chars[i]);\n        if (ch !== zeroWidth) {\n          filteredChars.push(chars[i]);\n          extractedChars.push(ch);\n        }\n      }\n      var characterMap = classify(extractedChars);\n      return findWords(filteredChars, extractedChars, characterMap, options);\n    };\n\n    var getWords$1 = getWords;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var getText = function (node, schema) {\n      var blockElements = schema.getBlockElements();\n      var shortEndedElements = schema.getShortEndedElements();\n      var isNewline = function (node) {\n        return blockElements[node.nodeName] || shortEndedElements[node.nodeName];\n      };\n      var textBlocks = [];\n      var txt = '';\n      var treeWalker = new global$1(node, node);\n      while (node = treeWalker.next()) {\n        if (node.nodeType === 3) {\n          txt += removeZwsp(node.data);\n        } else if (isNewline(node) && txt.length) {\n          textBlocks.push(txt);\n          txt = '';\n        }\n      }\n      if (txt.length) {\n        textBlocks.push(txt);\n      }\n      return textBlocks;\n    };\n\n    var strLen = function (str) {\n      return str.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n    };\n    var countWords = function (node, schema) {\n      var text = getText(node, schema).join('\\n');\n      return getWords$1(text.split(''), identity).length;\n    };\n    var countCharacters = function (node, schema) {\n      var text = getText(node, schema).join('');\n      return strLen(text);\n    };\n    var countCharactersWithoutSpaces = function (node, schema) {\n      var text = getText(node, schema).join('').replace(/\\s/g, '');\n      return strLen(text);\n    };\n\n    var createBodyCounter = function (editor, count) {\n      return function () {\n        return count(editor.getBody(), editor.schema);\n      };\n    };\n    var createSelectionCounter = function (editor, count) {\n      return function () {\n        return count(editor.selection.getRng().cloneContents(), editor.schema);\n      };\n    };\n    var createBodyWordCounter = function (editor) {\n      return createBodyCounter(editor, countWords);\n    };\n    var get = function (editor) {\n      return {\n        body: {\n          getWordCount: createBodyWordCounter(editor),\n          getCharacterCount: createBodyCounter(editor, countCharacters),\n          getCharacterCountWithoutSpaces: createBodyCounter(editor, countCharactersWithoutSpaces)\n        },\n        selection: {\n          getWordCount: createSelectionCounter(editor, countWords),\n          getCharacterCount: createSelectionCounter(editor, countCharacters),\n          getCharacterCountWithoutSpaces: createSelectionCounter(editor, countCharactersWithoutSpaces)\n        },\n        getCount: createBodyWordCounter(editor)\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var fireWordCountUpdate = function (editor, api) {\n      editor.fire('wordCountUpdate', {\n        wordCount: {\n          words: api.body.getWordCount(),\n          characters: api.body.getCharacterCount(),\n          charactersWithoutSpaces: api.body.getCharacterCountWithoutSpaces()\n        }\n      });\n    };\n\n    var updateCount = function (editor, api) {\n      fireWordCountUpdate(editor, api);\n    };\n    var setup = function (editor, api, delay) {\n      var debouncedUpdate = global$2.debounce(function () {\n        return updateCount(editor, api);\n      }, delay);\n      editor.on('init', function () {\n        updateCount(editor, api);\n        global$2.setEditorTimeout(editor, function () {\n          editor.on('SetContent BeforeAddUndo Undo Redo keyup', debouncedUpdate);\n        }, 0);\n      });\n    };\n\n    var open = function (editor, api) {\n      editor.windowManager.open({\n        title: 'Word Count',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'table',\n              header: [\n                'Count',\n                'Document',\n                'Selection'\n              ],\n              cells: [\n                [\n                  'Words',\n                  String(api.body.getWordCount()),\n                  String(api.selection.getWordCount())\n                ],\n                [\n                  'Characters (no spaces)',\n                  String(api.body.getCharacterCountWithoutSpaces()),\n                  String(api.selection.getCharacterCountWithoutSpaces())\n                ],\n                [\n                  'Characters',\n                  String(api.body.getCharacterCount()),\n                  String(api.selection.getCharacterCount())\n                ]\n              ]\n            }]\n        },\n        buttons: [{\n            type: 'cancel',\n            name: 'close',\n            text: 'Close',\n            primary: true\n          }]\n      });\n    };\n\n    var register = function (editor, api) {\n      editor.ui.registry.addButton('wordcount', {\n        tooltip: 'Word count',\n        icon: 'character-count',\n        onAction: function () {\n          return open(editor, api);\n        }\n      });\n      editor.ui.registry.addMenuItem('wordcount', {\n        text: 'Word count',\n        icon: 'character-count',\n        onAction: function () {\n          return open(editor, api);\n        }\n      });\n    };\n\n    function Plugin (delay) {\n      if (delay === void 0) {\n        delay = 300;\n      }\n      global.add('wordcount', function (editor) {\n        var api = get(editor);\n        register(editor, api);\n        setup(editor, api, delay);\n        return api;\n      });\n    }\n\n    Plugin();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n\n    var open = function (editor) {\n      var editorContent = getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        open(editor);\n      });\n    };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: function () {\n          return open(editor);\n        }\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: function () {\n          return open(editor);\n        }\n      });\n    };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        register(editor);\n        register$1(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"contextmenu\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/contextmenu')\n//   ES2015:\n//     import 'tinymce/plugins/contextmenu'\nrequire('./plugin.js');","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=48ac5e33&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=48ac5e33&lang=scss&scoped=true&\""],"sourceRoot":""}