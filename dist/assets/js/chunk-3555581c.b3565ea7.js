(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3555581c"],{"030f":function(n,t,e){(function(n){(function(){"use strict";var t=function(){},e=function(n){return function(){return n()}},r=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},o=function(n,t){return function(e){return n(t(e))}},i=function(n){return function(){return n}},u=function(n){return n};function a(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var c=function(n){return function(t){return!n(t)}},s=function(n){return function(){throw new Error(n)}},l=i(!1),f=i(!0),d=tinymce.util.Tools.resolve("tinymce.ThemeManager"),m=function(){return m=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},m.apply(this,arguments)};function g(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function p(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var i=arguments[t],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r}var v,h=function(){return b},b=function(){var n=function(n){return n.isNone()},e=function(n){return n()},r=function(n){return n},o={fold:function(n,t){return n()},is:l,isSome:l,isNone:f,getOr:r,getOrThunk:e,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:r,orThunk:e,map:h,each:t,bind:h,exists:l,forall:f,filter:h,equals:n,equals_:n,toArray:function(){return[]},toString:i("none()")};return o}(),y=function(n){var t=i(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:f,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return y(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:b},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(l,(function(t){return e(n,t)}))}};return o},x=function(n){return null===n||void 0===n?b:y(n)},w={some:y,none:h,from:x},C=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},S=function(n){return function(t){return C(t)===n}},k=function(n){return function(t){return typeof t===n}},O=function(n){return function(t){return n===t}},T=S("string"),D=S("object"),_=S("array"),A=k("boolean"),E=O(void 0),R=function(n){return null===n||void 0===n},B=function(n){return!R(n)},M=k("function"),I=k("number"),N=function(n,t){if(_(n)){for(var e=0,r=n.length;e<r;++e)if(!t(n[e]))return!1;return!0}return!1},P=Array.prototype.slice,F=Array.prototype.indexOf,L=Array.prototype.push,H=function(n,t){return F.call(n,t)},z=function(n,t){var e=H(n,t);return-1===e?w.none():w.some(e)},V=function(n,t){return H(n,t)>-1},U=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return!0}return!1},j=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},W=function(n,t){for(var e=[],r=0;r<n.length;r+=t){var o=P.call(n,r,r+t);e.push(o)}return e},G=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},q=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},X=function(n,t){for(var e=n.length-1;e>=0;e--){var r=n[e];t(r,e)}},K=function(n,t){for(var e=[],r=[],o=0,i=n.length;o<i;o++){var u=n[o],a=t(u,o)?e:r;a.push(u)}return{pass:e,fail:r}},Y=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r)&&e.push(i)}return e},$=function(n,t,e){return X(n,(function(n){e=t(e,n)})),e},J=function(n,t,e){return q(n,(function(n){e=t(e,n)})),e},Q=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var i=n[r];if(t(i,r))return w.some(i);if(e(i,r))break}return w.none()},Z=function(n,t){return Q(n,t,l)},nn=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return w.some(e)}return w.none()},tn=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!_(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);L.apply(t,n[e])}return t},en=function(n,t){return tn(G(n,t))},rn=function(n,t){for(var e=0,r=n.length;e<r;++e){var o=n[e];if(!0!==t(o,e))return!1}return!0},on=function(n){var t=P.call(n,0);return t.reverse(),t},un=function(n,t){return Y(n,(function(n){return!V(t,n)}))},an=function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var i=n[r];e[String(i)]=t(i,r)}return e},cn=function(n,t){var e=P.call(n,0);return e.sort(t),e},sn=function(n,t){return t>=0&&t<n.length?w.some(n[t]):w.none()},ln=function(n){return sn(n,0)},fn=function(n){return sn(n,n.length-1)},dn=M(Array.from)?Array.from:function(n){return P.call(n)},mn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return w.none()},gn=function(n){var t=function(t){return n===t},e=function(t){return gn(n)},r=function(t){return gn(n)},o=function(t){return gn(t(n))},u=function(t){return gn(n)},a=function(t){t(n)},c=function(t){return t(n)},s=function(t,e){return e(n)},d=function(t){return t(n)},m=function(t){return t(n)},g=function(){return w.some(n)};return{is:t,isValue:f,isError:l,getOr:i(n),getOrThunk:i(n),getOrDie:i(n),or:e,orThunk:r,fold:s,map:o,mapError:u,each:a,bind:c,exists:d,forall:m,toOptional:g}},pn=function(n){var e=function(n){return n()},r=function(){return s(String(n))()},o=function(n){return n},i=function(n){return n()},a=function(t){return pn(n)},c=function(t){return pn(t(n))},d=function(t){return pn(n)},m=function(t,e){return t(n)};return{is:l,isValue:l,isError:f,getOr:u,getOrThunk:e,getOrDie:r,or:o,orThunk:i,fold:m,map:a,mapError:c,each:t,bind:d,exists:l,forall:f,toOptional:w.none}},vn=function(n,t){return n.fold((function(){return pn(t)}),gn)},hn={value:gn,error:pn,fromOption:vn};(function(n){n[n["Error"]=0]="Error",n[n["Value"]=1]="Value"})(v||(v={}));var bn=function(n,t,e){return n.stype===v.Error?t(n.serror):e(n.svalue)},yn=function(n){var t=[],e=[];return q(n,(function(n){bn(n,(function(n){return e.push(n)}),(function(n){return t.push(n)}))})),{values:t,errors:e}},xn=function(n,t){return n.stype===v.Error?{stype:v.Error,serror:t(n.serror)}:n},wn=function(n,t){return n.stype===v.Value?{stype:v.Value,svalue:t(n.svalue)}:n},Cn=function(n,t){return n.stype===v.Value?t(n.svalue):n},Sn=function(n,t){return n.stype===v.Error?t(n.serror):n},kn=function(n){return{stype:v.Value,svalue:n}},On=function(n){return{stype:v.Error,serror:n}},Tn=function(n){return bn(n,hn.error,hn.value)},Dn=function(n){return n.fold(On,kn)},_n={fromResult:Dn,toResult:Tn,svalue:kn,partition:yn,serror:On,bind:Cn,bindError:Sn,map:wn,mapError:xn,fold:bn},An=Object.keys,En=Object.hasOwnProperty,Rn=function(n,t){for(var e=An(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];t(u,i)}},Bn=function(n,t){return Mn(n,(function(n,e){return{k:e,v:t(n,e)}}))},Mn=function(n,t){var e={};return Rn(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},In=function(n){return function(t,e){n[e]=t}},Nn=function(n,t,e,r){var o={};return Rn(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},Pn=function(n,e){var r={};return Nn(n,e,In(r),t),r},Fn=function(n,t){var e=[];return Rn(n,(function(n,r){e.push(t(n,r))})),e},Ln=function(n,t){for(var e=An(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];if(t(u,i,n))return w.some(u)}return w.none()},Hn=function(n){return Fn(n,(function(n){return n}))},zn=function(n,t){return Vn(n,t)?w.from(n[t]):w.none()},Vn=function(n,t){return En.call(n,t)},Un=function(n,t){return Vn(n,t)&&void 0!==n[t]&&null!==n[t]},jn=function(n){if(!_(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return q(n,(function(r,o){var i=An(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=r[u];if(void 0!==e[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!_(a))throw new Error("case arguments must be an array");t.push(u),e[u]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i);var c=function(n){var r=An(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));var o=rn(t,(function(n){return V(r,n)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[u].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var i=t[o];return i.apply(null,e)},match:c,log:function(n){console.log(n,{constructors:t,constructor:u,params:e})}}}})),e},Wn={generate:jn},Gn=Object.prototype.hasOwnProperty,qn=function(n,t){return t},Xn=function(n,t){var e=D(n)&&D(t);return e?Yn(n,t):t},Kn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var u in i)Gn.call(i,u)&&(r[u]=n(r[u],i[u]))}return r}},Yn=Kn(Xn),$n=Kn(qn),Jn=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},Qn=Wn.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Zn=function(n){return Qn.defaultedThunk(i(n))},nt=function(n){return Qn.mergeWithThunk(i(n))},tt=Qn.strict,et=Qn.asOption,rt=Qn.defaultedThunk,ot=(Qn.asDefaultedOptionThunk,Qn.mergeWithThunk),it=(Wn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(n){var t=[],e=[];return q(n,(function(n){n.fold((function(n){t.push(n)}),(function(n){e.push(n)}))})),{errors:t,values:e}}),ut=function(n,t){var e={};return Rn(n,(function(n,r){V(t,r)||(e[r]=n)})),e},at=function(n,t){var e;return e={},e[n]=t,e},ct=function(n){var t={};return q(n,(function(n){t[n.key]=n.value})),t},st=function(n,t){return ut(n,t)},lt=function(n,t){return at(n,t)},ft=function(n){return ct(n)},dt=function(n,t){return 0===n.length?hn.value(t):hn.value(Yn(t,$n.apply(void 0,n)))},mt=function(n){return hn.error(tn(n))},gt=function(n,t){var e=it(n);return e.errors.length>0?mt(e.errors):dt(e.values,t)},pt=function(n,t){return n.length>0?_n.svalue(Yn(t,$n.apply(void 0,n))):_n.svalue(t)},vt=function(n){return r(_n.serror,tn)(n)},ht=function(n,t){var e=_n.partition(n);return e.errors.length>0?vt(e.errors):pt(e.values,t)},bt=function(n){var t=_n.partition(n);return t.errors.length>0?vt(t.errors):_n.svalue(t.values)},yt={consolidateObj:ht,consolidateArr:bt},xt=function(n){return D(n)&&An(n).length>100?" removed due to size":JSON.stringify(n,null,2)},wt=function(n){var t=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n;return G(t,(function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}))},Ct=function(n,t){return _n.serror([{path:n,getErrorInfo:t}])},St=function(n,t,e){return Ct(n,(function(){return'Could not find valid *strict* value for "'+t+'" in '+xt(e)}))},kt=function(n,t){return Ct(n,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))},Ot=function(n,t,e){return Ct(n,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+xt(t)}))},Tt=function(n,t){return Ct(n,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))},Dt=function(n,t){return Ct(n,(function(){return t}))},_t=Wn.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),At=function(n,t,e){return zn(t,e).fold((function(){return St(n,e,t)}),_n.svalue)},Et=function(n,t,e){var r=zn(n,t).fold((function(){return e(n)}),u);return _n.svalue(r)},Rt=function(n,t){return _n.svalue(zn(n,t))},Bt=function(n,t,e){var r=zn(n,t).map((function(t){return!0===t?e(n):t}));return _n.svalue(r)},Mt=function(n,t,e,r){return e.fold((function(e,o,u,a){var c=function(t){var i=a.extract(n.concat([e]),r,t);return _n.map(i,(function(n){return at(o,r(n))}))},s=function(t){return t.fold((function(){var n=at(o,r(w.none()));return _n.svalue(n)}),(function(t){var i=a.extract(n.concat([e]),r,t);return _n.map(i,(function(n){return at(o,r(w.some(n)))}))}))};return function(){return u.fold((function(){return _n.bind(At(n,t,e),c)}),(function(n){return _n.bind(Et(t,e,n),c)}),(function(){return _n.bind(Rt(t,e),s)}),(function(n){return _n.bind(Bt(t,e,n),s)}),(function(n){var r=n(t),o=_n.map(Et(t,e,i({})),(function(n){return Yn(r,n)}));return _n.bind(o,c)}))}()}),(function(n,e){var o=e(t);return _n.svalue(at(n,r(o)))}))},It=function(n,t,e,r){var o=G(e,(function(e){return Mt(n,t,e,r)}));return yt.consolidateObj(o,{})},Nt=function(n){var t=function(t,e,r){return n().extract(t,e,r)},e=function(){return n().toString()};return{extract:t,toString:e}},Pt=function(n){var t=function(t,e,r){return _n.bindError(n(r,e),(function(n){return Dt(t,n)}))},e=function(){return"val"};return{extract:t,toString:e}},Ft=function(n){return An(Pn(n,(function(n){return void 0!==n&&null!==n})))},Lt=function(n){var t=Ht(n),e=$(n,(function(n,t){return t.fold((function(t){return Yn(n,lt(t,!0))}),i(n))}),{}),r=function(n,r,o){var i=A(o)?[]:Ft(o),u=Y(i,(function(n){return!Un(e,n)}));return 0===u.length?t.extract(n,r,o):Tt(n,u)};return{extract:r,toString:t.toString}},Ht=function(n){var t=function(t,e,r){return It(t,r,n,e)},e=function(){var t=G(n,(function(n){return n.fold((function(n,t,e,r){return n+" -> "+r.toString()}),(function(n,t){return"state("+n+")"}))}));return"obj{\n"+t.join("\n")+"}"};return{extract:t,toString:e}},zt=function(n){var t=function(t,e,r){var o=G(r,(function(r,o){return n.extract(t.concat(["["+o+"]"]),e,r)}));return yt.consolidateArr(o)},e=function(){return"array("+n.toString()+")"};return{extract:t,toString:e}},Vt=function(n){var t=function(t,e,r){for(var o=[],i=0,u=n;i<u.length;i++){var a=u[i],c=a.extract(t,e,r);if(c.stype===v.Value)return c;o.push(c)}return yt.consolidateArr(o)},e=function(){return"oneOf("+G(n,(function(n){return n.toString()})).join(", ")+")"};return{extract:t,toString:e}},Ut=function(n,t){var e=function(t,e){return zt(Pt(n)).extract(t,u,e)},r=function(n,r,o){var i=An(o),u=e(n,i);return _n.bind(u,(function(e){var i=G(e,(function(n){return _t.field(n,n,tt(),t)}));return Ht(i).extract(n,r,o)}))},o=function(){return"setOf("+t.toString()+")"};return{extract:r,toString:o}},jt=function(n,t){var e=Jn((function(){return t()})),r=function(n,t,r){return e().extract(n,t,r)},o=function(){return e().toString()};return{extract:r,toString:o}},Wt=i(Pt(_n.svalue)),Gt=r(zt,Ht),qt=_t.state,Xt=_t.field,Kt=function(n,t,e,r,o){var i=zn(r,o);return i.fold((function(){return Ot(n,r,o)}),(function(r){return r.extract(n.concat(["branch: "+o]),t,e)}))},Yt=function(n,t){var e=function(e,r,o){var i=zn(o,n);return i.fold((function(){return kt(e,n)}),(function(n){return Kt(e,r,o,t,n)}))},r=function(){return"chooseOn("+n+"). Possible values: "+An(t)};return{extract:e,toString:r}},$t=Pt(_n.svalue),Jt=function(n){return Gt(n)},Qt=function(){return zt($t)},Zt=Nt,ne=function(n){return Pt((function(t){return n(t).fold(_n.serror,_n.svalue)}))},te=function(n,t){return Ut((function(t){return _n.fromResult(n(t))}),t)},ee=function(n,t,e,r){var o=t.extract([n],e,r);return _n.mapError(o,(function(n){return{input:r,errors:n}}))},re=function(n,t,e){return _n.toResult(ee(n,t,u,e))},oe=function(n){return n.fold((function(n){throw new Error(ue(n))}),u)},ie=function(n,t,e){return oe(re(n,t,e))},ue=function(n){return"Errors: \n"+wt(n.errors).join("\n")+"\n\nInput object: "+xt(n.input)},ae=function(n,t){return Yt(n,t)},ce=function(n,t){return Yt(n,Bn(t,Ht))},se=function(n,t){return jt(n,t)},le=i($t),fe=function(n,t){return Pt((function(e){var r=typeof e;return n(e)?_n.svalue(e):_n.serror("Expected type: "+t+" but got: "+r)}))},de=fe(I,"number"),me=fe(T,"string"),ge=fe(A,"boolean"),pe=fe(M,"function"),ve=function(n){var t=function(n,t){var e=n.next();while(!e.done){if(!t(e.value))return!1;e=n.next()}return!0};if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every((function(t){return ve(n[t])}));case"Map":return t(n.keys(),ve)&&t(n.values(),ve);case"Set":return t(n.keys(),ve);default:return!1}},he=Pt((function(n){return ve(n)?_n.svalue(n):_n.serror("Expected value to be acceptable for sending via postMessage")})),be=function(n){return ne((function(t){return V(n,t)?hn.value(t):hn.error('Unsupported value: "'+t+'", choose one of "'+n.join(", ")+'".')}))},ye=function(n){return Xt(n,n,tt(),Wt())},xe=function(n,t){return Xt(n,n,tt(),t)},we=function(n){return xe(n,de)},Ce=function(n){return xe(n,me)},Se=function(n,t){return Xt(n,n,tt(),be(t))},ke=function(n){return xe(n,ge)},Oe=function(n){return xe(n,pe)},Te=function(n,t){return Xt(n,n,et(),Pt((function(e){return _n.serror("The field: "+n+" is forbidden. "+t)})))},De=function(n,t){return Xt(n,n,tt(),Ht(t))},_e=function(n,t){return Xt(n,n,tt(),Gt(t))},Ae=function(n,t){return Xt(n,n,tt(),zt(t))},Ee=function(n){return Xt(n,n,et(),Wt())},Re=function(n,t){return Xt(n,n,et(),t)},Be=function(n){return Re(n,de)},Me=function(n){return Re(n,me)},Ie=function(n){return Re(n,pe)},Ne=function(n,t){return Re(n,zt(t))},Pe=function(n,t){return Re(n,Ht(t))},Fe=function(n,t){return Re(n,Lt(t))},Le=function(n,t){return Xt(n,n,Zn(t),Wt())},He=function(n,t,e){return Xt(n,n,Zn(t),e)},ze=function(n,t){return He(n,t,de)},Ve=function(n,t){return He(n,t,me)},Ue=function(n,t,e){return He(n,t,be(e))},je=function(n,t){return He(n,t,ge)},We=function(n,t){return He(n,t,pe)},Ge=function(n,t){return He(n,t,he)},qe=function(n,t,e){return He(n,t,zt(e))},Xe=function(n,t,e){return He(n,t,Ht(e))},Ke=function(n,t){return qt(n,t)},Ye=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},$e=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Ze(r.childNodes[0])},Je=function(n,t){var e=t||document,r=e.createElement(n);return Ze(r)},Qe=function(n,t){var e=t||document,r=e.createTextNode(n);return Ze(r)},Ze=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},nr=function(n,t,e){return w.from(n.dom.elementFromPoint(t,e)).map(Ze)},tr={fromHtml:$e,fromTag:Je,fromText:Qe,fromDom:Ze,fromPoint:nr},er=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),u=n.isiOS()&&!o,a=n.isiOS()||n.isAndroid(),c=a||r("(pointer:coarse)"),s=o||!u&&a&&r("(min-device-width:768px)"),l=u||a&&!s,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),d=!l&&!s&&!f;return{isiPad:i(o),isiPhone:i(u),isTablet:i(s),isPhone:i(l),isTouch:i(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:i(f),isDesktop:i(d)}},rr=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},or=function(n,t){var e=rr(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return ar(r(1),r(2))},ir=function(n,t){var e=String(t).toLowerCase();return 0===n.length?ur():or(n,e)},ur=function(){return ar(0,0)},ar=function(n,t){return{major:n,minor:t}},cr={nu:ar,detect:ir,unknown:ur},sr=function(n,t){var e=String(t).toLowerCase();return Z(n,(function(n){return n.search(e)}))},lr=function(n,t){return sr(n,t).map((function(n){var e=cr.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},fr=function(n,t){return sr(n,t).map((function(n){var e=cr.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},dr={detectBrowser:lr,detectOs:fr},mr=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},gr=function(n,t){return-1!==n.indexOf(t)},pr=function(n,t){return mr(n,t,n.length-t.length)},vr=function(n){return function(t){return t.replace(n,"")}},hr=vr(/^\s+|\s+$/g),br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yr=function(n){return function(t){return gr(t,n)}},xr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return gr(n,"edge/")&&gr(n,"chrome")&&gr(n,"safari")&&gr(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,br],search:function(n){return gr(n,"chrome")&&!gr(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return gr(n,"msie")||gr(n,"trident")}},{name:"Opera",versionRegexes:[br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yr("firefox")},{name:"Safari",versionRegexes:[br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(gr(n,"safari")||gr(n,"mobile/"))&&gr(n,"applewebkit")}}],wr=[{name:"Windows",search:yr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return gr(n,"iphone")||gr(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:yr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yr("linux"),versionRegexes:[]},{name:"Solaris",search:yr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cr={browsers:i(xr),oses:i(wr)},Sr="Edge",kr="Chrome",Or="IE",Tr="Opera",Dr="Firefox",_r="Safari",Ar=function(){return Er({current:void 0,version:cr.unknown()})},Er=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(Sr),isChrome:r(kr),isIE:r(Or),isOpera:r(Tr),isFirefox:r(Dr),isSafari:r(_r)}},Rr={unknown:Ar,nu:Er,edge:i(Sr),chrome:i(kr),ie:i(Or),opera:i(Tr),firefox:i(Dr),safari:i(_r)},Br="Windows",Mr="iOS",Ir="Android",Nr="Linux",Pr="OSX",Fr="Solaris",Lr="FreeBSD",Hr="ChromeOS",zr=function(){return Vr({current:void 0,version:cr.unknown()})},Vr=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(Br),isiOS:r(Mr),isAndroid:r(Ir),isOSX:r(Pr),isLinux:r(Nr),isSolaris:r(Fr),isFreeBSD:r(Lr),isChromeOS:r(Hr)}},Ur={unknown:zr,nu:Vr,windows:i(Br),ios:i(Mr),android:i(Ir),linux:i(Nr),osx:i(Pr),solaris:i(Fr),freebsd:i(Lr),chromeos:i(Hr)},jr=function(n,t){var e=Cr.browsers(),r=Cr.oses(),o=dr.detectBrowser(e,n).fold(Rr.unknown,Rr.nu),i=dr.detectOs(r,n).fold(Ur.unknown,Ur.nu),u=er(i,o,n,t);return{browser:o,os:i,deviceType:u}},Wr={detect:jr},Gr=function(n){return window.matchMedia(n).matches},qr=Jn((function(){return Wr.detect(navigator.userAgent,Gr)})),Xr=function(){return qr()},Kr=function(n,t,e){return 0!==(n.compareDocumentPosition(t)&e)},Yr=function(n,t){return Kr(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},$r=9,Jr=11,Qr=1,Zr=3,no=function(n,t){var e=n.dom;if(e.nodeType!==Qr)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},to=function(n){return n.nodeType!==Qr&&n.nodeType!==$r&&n.nodeType!==Jr||0===n.childElementCount},eo=function(n,t){var e=void 0===t?document:t.dom;return to(e)?[]:G(e.querySelectorAll(n),tr.fromDom)},ro=function(n,t){var e=void 0===t?document:t.dom;return to(e)?w.none():w.from(e.querySelector(n)).map(tr.fromDom)},oo=function(n,t){return n.dom===t.dom},io=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},uo=function(n,t){return Yr(n.dom,t.dom)},ao=function(n,t){return Xr().browser.isIE()?uo(n,t):io(n,t)},co=function(n){return M(n)?n:l},so=function(n,t,e){var r=n.dom,o=co(e);while(r.parentNode){r=r.parentNode;var i=tr.fromDom(r),u=t(i);if(u.isSome())return u;if(o(i))break}return w.none()},lo=function(n,t,e){var r=t(n),o=co(e);return r.orThunk((function(){return o(n)?w.none():so(n,t,o)}))},fo=function(n,t){return oo(n.element,t.event.target)},mo=function(n){if(!Un(n,"can")&&!Un(n,"abort")&&!Un(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return ie("Extracting event.handler",Lt([Le("can",f),Le("abort",l),Le("run",t)]),n)},go=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return J(n,(function(n,r){return n&&t(r).apply(void 0,e)}),!0)}},po=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return J(n,(function(n,r){return n||t(r).apply(void 0,e)}),!1)}},vo=function(n){return M(n)?{can:f,abort:l,run:n}:n},ho=function(n){var t=go(n,(function(n){return n.can})),e=po(n,(function(n){return n.abort})),r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];q(n,(function(n){n.run.apply(void 0,t)}))};return mo({can:t,abort:e,run:r})},bo=i,yo=bo("touchstart"),xo=bo("touchmove"),wo=bo("touchend"),Co=bo("touchcancel"),So=bo("mousedown"),ko=bo("mousemove"),Oo=bo("mouseout"),To=bo("mouseup"),Do=bo("mouseover"),_o=bo("focusin"),Ao=bo("focusout"),Eo=bo("keydown"),Ro=bo("keyup"),Bo=bo("input"),Mo=bo("change"),Io=bo("click"),No=bo("transitionend"),Po=bo("selectstart"),Fo=function(n){return i("alloy."+n)},Lo={tap:Fo("tap")},Ho=Fo("focus"),zo=Fo("blur.post"),Vo=Fo("paste.post"),Uo=Fo("receive"),jo=Fo("execute"),Wo=Fo("focus.item"),Go=Lo.tap,qo=Fo("longpress"),Xo=Fo("sandbox.close"),Ko=Fo("typeahead.cancel"),Yo=Fo("system.init"),$o=Fo("system.touchmove"),Jo=Fo("system.touchend"),Qo=Fo("system.scroll"),Zo=Fo("system.resize"),ni=Fo("system.attached"),ti=Fo("system.detached"),ei=Fo("system.dismissRequested"),ri=Fo("system.repositionRequested"),oi=Fo("focusmanager.shifted"),ii=Fo("slotcontainer.visibility"),ui=Fo("change.tab"),ai=Fo("dismiss.tab"),ci=Fo("highlight"),si=Fo("dehighlight"),li=function(n,t){gi(n,n.element,t,{})},fi=function(n,t,e){gi(n,n.element,t,e)},di=function(n){li(n,jo())},mi=function(n,t,e){gi(n,t,e,{})},gi=function(n,t,e,r){var o=m({target:t},r);n.getSystem().triggerEvent(e,t,o)},pi=function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event)},vi=function(n){return ft(n)},hi=function(n,t){return{key:n,value:mo({abort:t})}},bi=function(n,t){return{key:n,value:mo({can:t})}},yi=function(n){return{key:n,value:mo({run:function(n,t){t.event.prevent()}})}},xi=function(n,t){return{key:n,value:mo({run:t})}},wi=function(n,t,e){return{key:n,value:mo({run:function(n,r){t.apply(void 0,[n,r].concat(e))}})}},Ci=function(n){return function(t){return xi(n,t)}},Si=function(n){return function(t){return{key:n,value:mo({run:function(n,e){fo(n,e)&&t(n,e)}})}}},ki=function(n,t){return xi(n,(function(e,r){e.getSystem().getByUid(t).each((function(t){pi(t,t.element,n,r)}))}))},Oi=function(n,t,e){var r=t.partUids[e];return ki(n,r)},Ti=function(n,t){return xi(n,(function(n,e){var r=e.event,o=n.getSystem().getByDom(r.target).fold((function(){var t=lo(r.target,(function(t){return n.getSystem().getByDom(t).toOptional()}),l);return t.getOr(n)}),(function(n){return n}));t(n,o,e)}))},Di=function(n){return xi(n,(function(n,t){t.cut()}))},_i=function(n){return xi(n,(function(n,t){t.stop()}))},Ai=function(n,t){return Si(n)(t)},Ei=Si(ni()),Ri=Si(ti()),Bi=Si(Yo()),Mi=Ci(jo()),Ii=("undefined"!==typeof window?window:Function("return this;")(),function(n){var t=n.dom.nodeName;return t.toLowerCase()}),Ni=function(n){return n.dom.nodeType},Pi=function(n){return function(t){return Ni(t)===n}},Fi=Pi(Qr),Li=Pi(Zr),Hi=Pi($r),zi=Pi(Jr),Vi=function(n){return tr.fromDom(n.dom.ownerDocument)},Ui=function(n){return Hi(n)?n:Vi(n)},ji=function(n){return tr.fromDom(Ui(n).dom.documentElement)},Wi=function(n){return tr.fromDom(Ui(n).dom.defaultView)},Gi=function(n){return w.from(n.dom.parentNode).map(tr.fromDom)},qi=function(n){return Gi(n)},Xi=function(n){return w.from(n.dom.offsetParent).map(tr.fromDom)},Ki=function(n){return w.from(n.dom.nextSibling).map(tr.fromDom)},Yi=function(n){return G(n.dom.childNodes,tr.fromDom)},$i=function(n,t){var e=n.dom.childNodes;return w.from(e[t]).map(tr.fromDom)},Ji=function(n){return $i(n,0)},Qi=function(n){return zi(n)&&B(n.dom.host)},Zi=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode),nu=i(Zi),tu=Zi?function(n){return tr.fromDom(n.dom.getRootNode())}:Ui,eu=function(n){return Qi(n)?n:tr.fromDom(Ui(n).dom.body)},ru=function(n){return ou(n).isSome()},ou=function(n){var t=tu(n);return Qi(t)?w.some(t):w.none()},iu=function(n){return tr.fromDom(n.dom.host)},uu=function(n){if(nu()&&B(n.target)){var t=tr.fromDom(n.target);if(Fi(t)&&au(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return ln(e)}}return w.from(n.target)},au=function(n){return B(n.dom.shadowRoot)},cu=function(n,t){var e=Gi(n);e.each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},su=function(n,t){var e=Ki(n);e.fold((function(){var e=Gi(n);e.each((function(n){fu(n,t)}))}),(function(n){cu(n,t)}))},lu=function(n,t){var e=Ji(n);e.fold((function(){fu(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},fu=function(n,t){n.dom.appendChild(t.dom)},du=function(n,t,e){$i(n,e).fold((function(){fu(n,t)}),(function(n){cu(n,t)}))},mu=function(n,t){q(t,(function(t){cu(n,t)}))},gu=function(n,t){q(t,(function(t){fu(n,t)}))},pu=function(n){n.dom.textContent="",q(Yi(n),(function(n){vu(n)}))},vu=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},hu=function(n){var t=Yi(n);t.length>0&&mu(n,t),vu(n)},bu=function(n,t){var e=t||document,r=e.createElement("div");return r.innerHTML=n,Yi(tr.fromDom(r))},yu=function(n){return n.dom.innerHTML},xu=function(n,t){var e=Vi(n),r=e.dom,o=tr.fromDom(r.createDocumentFragment()),i=bu(t,r);gu(o,i),pu(n),fu(n,o)},wu=function(n){var t=tr.fromTag("div"),e=tr.fromDom(n.dom.cloneNode(!0));return fu(t,e),yu(t)},Cu=function(n,t,e){if(!(T(e)||A(e)||I(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},Su=function(n,t,e){Cu(n.dom,t,e)},ku=function(n,t){var e=n.dom;Rn(t,(function(n,t){Cu(e,t,n)}))},Ou=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},Tu=function(n,t){return w.from(Ou(n,t))},Du=function(n,t){var e=n.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},_u=function(n,t){n.dom.removeAttribute(t)},Au=function(n,t){return tr.fromDom(n.dom.cloneNode(t))},Eu=function(n){return Au(n,!1)},Ru=function(n){if(Qi(n))return"#shadow-root";var t=Eu(n);return wu(t)},Bu=function(n){return Ru(n)},Mu=function(n,t,e){return oo(t,n.element)&&!oo(t,e)},Iu=vi([bi(Ho(),(function(n,t){var e=t.event,r=e.originator,o=e.target;return!Mu(n,r,o)||(console.warn(Ho()+" did not get interpreted by the desired target. \nOriginator: "+Bu(r)+"\nTarget: "+Bu(o)+"\nCheck the "+Ho()+" event handlers"),!1)}))]),Nu=Object.freeze({__proto__:null,events:Iu}),Pu=0,Fu=function(n){var t=new Date,e=t.getTime(),r=Math.floor(1e9*Math.random());return Pu++,n+"_"+r+Pu+String(e)},Lu=i("alloy-id-"),Hu=i("data-alloy-id"),zu=Lu(),Vu=Hu(),Uu=function(n,t){var e=Fu(zu+n);return ju(t,e),e},ju=function(n,t){Object.defineProperty(n.dom,Vu,{value:t,writable:!0})},Wu=function(n){var t=Fi(n)?n.dom[Vu]:null;return w.from(t)},Gu=function(n){return Fu(n)},qu=u,Xu=function(n){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+(n?"\n"+Bu(n().element)+" is not in context.":""))}};return{debugInfo:i("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:l}},Ku=Xu(),Yu=function(n,t,e){var r=e.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),u=r.substring(i+1,o-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:$u(u.slice(0,1).concat(u.slice(3)))}},n},$u=function(n){return G(n,(function(n){return pr(n,"/*")?n.substring(0,n.length-"/*".length):n}))},Ju=function(n,t){var e=n.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:$u(i)}},n},Qu=function(n,t){var e=t.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:$u(i.slice(1))}},n},Zu=Fu("alloy-premade"),na=function(n){return lt(Zu,n)},ta=function(n){return zn(n,Zu)},ea=function(n){return Qu((function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return n.apply(void 0,p([t.getApis(),t],e))}),n)},ra={init:function(){return oa({readState:function(){return"No State required"}})}},oa=function(n){return n},ia=function(n,t){var e=G(t,(function(n){return Pe(n.name(),[ye("config"),Le("state",ra)])})),r=re("component.behaviours",Ht(e),n.behaviours).fold((function(t){throw new Error(ue(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(n){return n}));return{list:t,data:Bn(r,(function(n){var t=n.map((function(n){return{config:n.config,state:n.state.init(n.config)}}));return function(){return t}}))}},ua=function(n){return n.list},aa=function(n){return n.data},ca=function(n,t){var e={};return Rn(n,(function(n,r){Rn(n,(function(n,o){var i=zn(e,o).getOr([]);e[o]=i.concat([t(r,n)])}))})),e},sa=function(n){return{classes:void 0!==n.classes?n.classes:[],attributes:void 0!==n.attributes?n.attributes:{},styles:void 0!==n.styles?n.styles:{}}},la=function(n,t){return m(m({},n),{attributes:m(m({},n.attributes),t.attributes),styles:m(m({},n.styles),t.styles),classes:n.classes.concat(t.classes)})},fa=function(n,t,e,r){var o=m({},t);q(e,(function(t){o[t.name()]=t.exhibit(n,r)}));var i=ca(o,(function(n,t){return{name:n,modification:t}})),u=function(n){return $(n,(function(n,t){return m(m({},t.modification),n)}),{})},a=$(i.classes,(function(n,t){return t.modification.concat(n)}),[]),c=u(i.attributes),s=u(i.styles);return sa({classes:a,attributes:c,styles:s})},da=function(n,t,e,r){try{var o=cn(e,(function(e,o){var i=e[t],u=o[t],a=r.indexOf(i),c=r.indexOf(u);if(-1===a)throw new Error("The ordering for "+n+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+n+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(r,null,2));return a<c?-1:c<a?1:0}));return hn.value(o)}catch(i){return hn.error([i])}},ma=function(n,t){return{handler:n,purpose:t}},ga=function(n,t){return{cHandler:n,purpose:t}},pa=function(n,t){return ga(a.apply(void 0,[n.handler].concat(t)),n.purpose)},va=function(n){return n.cHandler},ha=function(n,t){return{name:n,handler:t}},ba=function(n,t){var e={};return q(n,(function(n){e[n.name()]=n.handlers(t)})),e},ya=function(n,t,e){var r=m(m({},e),ba(t,n));return ca(r,ha)},xa=function(n,t,e,r){var o=ya(n,e,r);return ka(o,t)},wa=function(n){var t=vo(n);return function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[n,e].concat(r);t.abort.apply(void 0,i)?e.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}},Ca=function(n,t){return hn.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(G(t,(function(n){return n.name})),null,2)])},Sa=function(n,t,e){var r=t[e];return r?da("Event: "+e,"name",n,r).map((function(n){var t=G(n,(function(n){return n.handler}));return ho(t)})):Ca(e,n)},ka=function(n,t){var e=Fn(n,(function(n,e){var r=1===n.length?hn.value(n[0].handler):Sa(n,t,e);return r.map((function(r){var o=wa(r),i=n.length>1?Y(t[e],(function(t){return U(n,(function(n){return n.name===t}))})).join(" > "):n[0].name;return lt(e,ma(o,i))}))}));return gt(e,{})},Oa="alloy.base.behaviour",Ta=function(n){var t;return re("custom.definition",Ht([Xt("dom","dom",tt(),Ht([ye("tag"),Le("styles",{}),Le("classes",[]),Le("attributes",{}),Ee("value"),Ee("innerHtml")])),ye("components"),ye("uid"),Le("events",{}),Le("apis",{}),Xt("eventOrder","eventOrder",nt((t={},t[jo()]=["disabling",Oa,"toggling","typeaheadevents"],t[Ho()]=[Oa,"focusing","keying"],t[Yo()]=[Oa,"disabling","toggling","representing"],t[Bo()]=[Oa,"representing","streaming","invalidating"],t[ti()]=[Oa,"representing","item-events","tooltipping"],t[So()]=["focusing",Oa,"item-type-events"],t[yo()]=["focusing",Oa,"item-type-events"],t[Do()]=["item-type-events","tooltipping"],t[Uo()]=["receiving","reflecting","tooltipping"],t)),le()),Ee("domModification")]),n)},Da=function(n){return m(m({},n.dom),{uid:n.uid,domChildren:G(n.components,(function(n){return n.element}))})},_a=function(n){return n.domModification.fold((function(){return sa({})}),sa)},Aa=function(n){return n.events},Ea=function(n,t){var e=Ou(n,t);return void 0===e||""===e?[]:e.split(" ")},Ra=function(n,t,e){var r=Ea(n,t),o=r.concat([e]);return Su(n,t,o.join(" ")),!0},Ba=function(n,t,e){var r=Y(Ea(n,t),(function(n){return n!==e}));return r.length>0?Su(n,t,r.join(" ")):_u(n,t),!1},Ma=function(n){return void 0!==n.dom.classList},Ia=function(n){return Ea(n,"class")},Na=function(n,t){return Ra(n,"class",t)},Pa=function(n,t){return Ba(n,"class",t)},Fa=function(n,t){Ma(n)?n.dom.classList.add(t):Na(n,t)},La=function(n){var t=Ma(n)?n.dom.classList:Ia(n);0===t.length&&_u(n,"class")},Ha=function(n,t){if(Ma(n)){var e=n.dom.classList;e.remove(t)}else Pa(n,t);La(n)},za=function(n,t){return Ma(n)&&n.dom.classList.contains(t)},Va=function(n,t){q(t,(function(t){Fa(n,t)}))},Ua=function(n,t){q(t,(function(t){Ha(n,t)}))},ja=function(n){return void 0!==n.style&&M(n.style.getPropertyValue)},Wa=function(n){var t=Li(n)?n.dom.parentNode:n.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var e=t.ownerDocument;return ou(tr.fromDom(t)).fold((function(){return e.body.contains(t)}),o(Wa,iu))},Ga=function(){return qa(tr.fromDom(document))},qa=function(n){var t=n.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return tr.fromDom(t)},Xa=function(n,t,e){if(!T(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);ja(n)&&n.style.setProperty(t,e)},Ka=function(n,t){ja(n)&&n.style.removeProperty(t)},Ya=function(n,t,e){var r=n.dom;Xa(r,t,e)},$a=function(n,t){var e=n.dom;Rn(t,(function(n,t){Xa(e,t,n)}))},Ja=function(n,t){var e=n.dom;Rn(t,(function(n,t){n.fold((function(){Ka(e,t)}),(function(n){Xa(e,t,n)}))}))},Qa=function(n,t){var e=n.dom,r=window.getComputedStyle(e),o=r.getPropertyValue(t);return""!==o||Wa(n)?o:Za(e,t)},Za=function(n,t){return ja(n)?n.style.getPropertyValue(t):""},nc=function(n,t){var e=n.dom,r=Za(e,t);return w.from(r).filter((function(n){return n.length>0}))},tc=function(n){var t={},e=n.dom;if(ja(e))for(var r=0;r<e.style.length;r++){var o=e.style.item(r);t[o]=e.style[o]}return t},ec=function(n,t,e){var r=tr.fromTag(n);Ya(r,t,e);var o=nc(r,t);return o.isSome()},rc=function(n,t){var e=n.dom;Ka(e,t),Tu(n,"style").map(hr).is("")&&_u(n,"style")},oc=function(n){return n.dom.offsetWidth},ic=function(n){return n.dom.value},uc=function(n,t){if(void 0===t)throw new Error("Value.set was undefined");n.dom.value=t},ac=function(n){var t=tr.fromTag(n.tag);ku(t,n.attributes),Va(t,n.classes),$a(t,n.styles),n.innerHtml.each((function(n){return xu(t,n)}));var e=n.domChildren;return gu(t,e),n.value.each((function(n){uc(t,n)})),n.uid,ju(t,n.uid),t},cc=function(n){var t=zn(n,"behaviours").getOr({}),e=Y(An(t),(function(n){return void 0!==t[n]}));return G(e,(function(n){return t[n].me}))},sc=function(n,t){return ia(n,t)},lc=function(n){var t=cc(n);return sc(n,t)},fc=function(n,t,e){var r=Da(n),o=_a(n),i={"alloy.base.modification":o},u=t.length>0?fa(e,i,t,r):o;return la(r,u)},dc=function(n,t,e){var r={"alloy.base.behaviour":Aa(n)};return xa(e,n.eventOrder,t,r).getOrDie()},mc=function(n){var t=function(){return b},e=Ye(Ku),r=oe(Ta(n)),o=lc(n),i=ua(o),u=aa(o),a=fc(r,i,u),c=ac(a),s=dc(r,i,u),l=Ye(r.components),f=function(n){e.set(n)},d=function(){e.set(Xu(t))},m=function(){var n=Yi(c),t=en(n,(function(n){return e.get().getByDom(n).fold((function(){return[]}),(function(n){return[n]}))}));l.set(t)},g=function(t){var e=u,r=M(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))};return r()},p=function(n){return M(u[n.name()])},v=function(){return r.apis},h=function(n){return u[n]().map((function(n){return n.state.readState()})).getOr("not enabled")},b={getSystem:e.get,config:g,hasConfigured:p,spec:n,readState:h,getApis:v,connect:f,disconnect:d,element:c,syncComponents:m,components:l.get,events:s};return b},gc=function(n){var t=zn(n,"components").getOr([]);return G(t,yc)},pc=function(n){var t=qu(n),e=t.events,r=g(t,["events"]),o=gc(r),i=m(m({},r),{events:m(m({},Nu),e),components:o});return hn.value(mc(i))},vc=function(n){var t=tr.fromText(n);return hc({element:t})},hc=function(n){var e=ie("external.component",Lt([ye("element"),Ee("uid")]),n),r=Ye(Xu()),o=function(n){r.set(n)},u=function(){r.set(Xu((function(){return a})))};e.uid.each((function(n){ju(e.element,n)}));var a={getSystem:r.get,config:w.none,hasConfigured:l,connect:o,disconnect:u,getApis:function(){return{}},element:e.element,spec:n,readState:i("No state"),syncComponents:t,components:i([]),events:{}};return na(a)},bc=Gu,yc=function(n){return ta(n).fold((function(){var t=n.hasOwnProperty("uid")?n:m({uid:bc("")},n);return pc(t).getOrDie()}),(function(n){return n}))},xc=na,wc=function(n,t){var e=function(t,e){if(!I(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;ja(r)&&(r.style[n]=e+"px")},r=function(e){var r=t(e);if(r<=0||null===r){var o=Qa(e,n);return parseFloat(o)||0}return r},o=r,i=function(n,t){return J(t,(function(t,e){var r=Qa(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)},u=function(n,t,e){var r=i(n,e),o=t>r?t-r:0;return o};return{set:e,get:r,getOuter:o,aggregate:i,max:u}},Cc=wc("height",(function(n){var t=n.dom;return Wa(n)?t.getBoundingClientRect().height:t.offsetHeight})),Sc=function(n){return Cc.get(n)},kc=function(n){return Cc.getOuter(n)},Oc=function(n,t){var e=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=Cc.max(n,t,e);Ya(n,"max-height",r+"px")},Tc=function(n,t){var e=function(e,r){return Tc(n+e,t+r)};return{left:n,top:t,translate:e}},Dc=Tc,_c=function(n){var t=n.getBoundingClientRect();return Dc(t.left,t.top)},Ac=function(n,t){return void 0!==n?n:void 0!==t?t:0},Ec=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return Dc(e.offsetLeft,e.offsetTop);var i=Ac(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),u=Ac(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),a=Ac(o.clientTop,e.clientTop),c=Ac(o.clientLeft,e.clientLeft);return Rc(n).translate(u-c,i-a)},Rc=function(n){var t=n.dom,e=t.ownerDocument,r=e.body;return r===t?Dc(r.offsetLeft,r.offsetTop):Wa(n)?_c(t):Dc(0,0)},Bc=wc("width",(function(n){return n.dom.offsetWidth})),Mc=function(n,t){return Bc.set(n,t)},Ic=function(n){return Bc.get(n)},Nc=function(n){return Bc.getOuter(n)},Pc=function(n,t){var e=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Bc.max(n,t,e);Ya(n,"max-width",r+"px")},Fc=function(n,t,e,r,o,i,u){return{target:n,x:t,y:e,stop:r,prevent:o,kill:i,raw:u}},Lc=function(n){var t=tr.fromDom(uu(n).getOr(n.target)),e=function(){return n.stopPropagation()},o=function(){return n.preventDefault()},i=r(o,e);return Fc(t,n.clientX,n.clientY,e,o,i,n)},Hc=function(n,t){return function(e){n(e)&&t(Lc(e))}},zc=function(n,t,e,r,o){var i=Hc(e,r);return n.dom.addEventListener(t,i,o),{unbind:a(jc,n,t,i,o)}},Vc=function(n,t,e,r){return zc(n,t,e,r,!1)},Uc=function(n,t,e,r){return zc(n,t,e,r,!0)},jc=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Wc=function(n){var t=void 0!==n?n.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Dc(e,r)},Gc=function(n,t,e){var r=void 0!==e?e.dom:document,o=r.defaultView;o&&o.scrollTo(n,t)},qc=function(n){var t=void 0===n?window:n;return w.from(t["visualViewport"])},Xc=function(n,t,e,r){return{x:n,y:t,width:e,height:r,right:n+e,bottom:t+r}},Kc=function(n){var t=void 0===n?window:n,e=t.document,r=Wc(tr.fromDom(e));return qc(t).fold((function(){var n=t.document.documentElement,e=n.clientWidth,o=n.clientHeight;return Xc(r.left,r.top,e,o)}),(function(n){return Xc(Math.max(n.pageLeft,r.left),Math.max(n.pageTop,r.top),n.width,n.height)}))},Yc=function(n,t){var e=n.view(t);return e.fold(i([]),(function(t){var e=n.owner(t),r=Yc(n,e);return[t].concat(r)}))},$c=function(n,t){var e=t.owner(n),r=Yc(t,e);return w.some(r)},Jc=function(n){var t,e=n.dom===document?w.none():w.from(null===(t=n.dom.defaultView)||void 0===t?void 0:t.frameElement);return e.map(tr.fromDom)},Qc=function(n){return Vi(n)},Zc=Object.freeze({__proto__:null,view:Jc,owner:Qc}),ns=function(n){var t=tr.fromDom(document),e=Wc(t),r=$c(n,Zc);return r.fold(a(Ec,n),(function(t){var r=Rc(n),o=$(t,(function(n,t){var e=Rc(t);return{left:n.left+e.left,top:n.top+e.top}}),{left:0,top:0});return Dc(o.left+r.left+e.left,o.top+r.top+e.top)}))},ts=function(n,t,e){return{point:n,width:t,height:e}},es=function(n,t,e,r){return{x:n,y:t,width:e,height:r}},rs=function(n,t,e,r){return{x:n,y:t,width:e,height:r,right:n+e,bottom:t+r}},os=function(n){var t=Ec(n),e=Nc(n),r=kc(n);return rs(t.left,t.top,e,r)},is=function(n){var t=ns(n),e=Nc(n),r=kc(n);return rs(t.left,t.top,e,r)},us=function(){return Kc(window)};function as(n,t,e,r,o){return n(e,r)?w.some(e):M(o)&&o(e)?w.none():t(e,r,o)}var cs,ss=function(n,t,e){var r=n.dom,o=M(e)?e:l;while(r.parentNode){r=r.parentNode;var i=tr.fromDom(r);if(t(i))return w.some(i);if(o(i))break}return w.none()},ls=function(n,t,e){var r=function(n,t){return t(n)};return as(r,ss,n,t,e)},fs=function(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=tr.fromDom(n.childNodes[r]);if(t(o))return w.some(o);var i=e(n.childNodes[r]);if(i.isSome())return i}return w.none()};return e(n.dom)},ds=function(n,t,e){return ls(n,t,e).isSome()},ms=function(n,t,e){return ss(n,(function(n){return no(n,t)}),e)},gs=function(n,t){return ro(t,n)},ps=function(n,t,e){var r=function(n,t){return no(n,t)};return as(r,ms,n,t,e)},vs=function(n){var t=ls(n,(function(n){if(!Fi(n))return!1;var t=Ou(n,"id");return void 0!==t&&t.indexOf("aria-owns")>-1}));return t.bind((function(n){var t=Ou(n,"id"),e=tu(n);return gs(e,'[aria-owns="'+t+'"]')}))},hs=function(){var n=Fu("aria-owns"),t=function(t){Su(t,"aria-owns",n)},e=function(n){_u(n,"aria-owns")};return{id:n,link:t,unlink:e}},bs=function(n,t){return vs(t).exists((function(t){return ys(n,t)}))},ys=function(n,t){return ds(t,(function(t){return oo(t,n.element)}),l)||bs(n,t)},xs="unknown";(function(n){n[n["STOP"]=0]="STOP",n[n["NORMAL"]=1]="NORMAL",n[n["LOGGING"]=2]="LOGGING"})(cs||(cs={}));var ws,Cs=Ye({}),Ss=function(n,t){var e=[],r=(new Date).getTime();return{logEventCut:function(n,t,r){e.push({outcome:"cut",target:t,purpose:r})},logEventStopped:function(n,t,r){e.push({outcome:"stopped",target:t,purpose:r})},logNoParent:function(n,t,r){e.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:function(n,t){e.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,r){e.push({outcome:"response",purpose:r,target:t})},write:function(){var o=(new Date).getTime();V(["mousemove","mouseover","mouseout",Yo()],n)||console.log(n,{event:n,time:o-r,target:t.dom,sequence:G(e,(function(n){return V(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+Bu(n.target)+")":n.outcome}))})}}},ks=function(n,t,e){var r=zn(Cs.get(),n).orThunk((function(){var t=An(Cs.get());return mn(t,(function(t){return n.indexOf(t)>-1?w.some(Cs.get()[t]):w.none()}))})).getOr(cs.NORMAL);switch(r){case cs.NORMAL:return e(As());case cs.LOGGING:var o=Ss(n,t),i=e(o);return o.write(),i;case cs.STOP:return!0}},Os=["alloy/data/Fields","alloy/debugging/Debugging"],Ts=function(){var n=new Error;if(void 0!==n.stack){var t=n.stack.split("\n");return Z(t,(function(n){return n.indexOf("alloy")>0&&!U(Os,(function(t){return n.indexOf(t)>-1}))})).getOr(xs)}return xs},Ds={logEventCut:t,logEventStopped:t,logNoParent:t,logEventNoHandlers:t,logEventResponse:t,write:t},_s=function(n,t,e){return ks(n,t,e)},As=i(Ds),Es=i([ye("menu"),ye("selectedMenu")]),Rs=i([ye("item"),ye("selectedItem")]),Bs=(i(Ht(Rs().concat(Es()))),i(Ht(Rs()))),Ms=De("initSize",[ye("numColumns"),ye("numRows")]),Is=function(){return xe("markers",Bs())},Ns=function(){return De("markers",[ye("backgroundMenu")].concat(Es()).concat(Rs()))},Ps=function(n){return De("markers",G(n,ye))},Fs=function(n,t,e){Ts();return Xt(t,t,e,ne((function(n){return hn.value((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,t)}))})))},Ls=function(n){return Fs("onHandler",n,Zn(t))},Hs=function(n){return Fs("onKeyboardHandler",n,Zn(w.none))},zs=function(n){return Fs("onHandler",n,tt())},Vs=function(n){return Fs("onKeyboardHandler",n,tt())},Us=function(n,t){return Ke(n,i(t))},js=function(n){return Ke(n,u)},Ws=i(Ms),Gs=function(n,t,e,r,o,i){return{x:n,y:t,bubble:e,direction:r,boundsRestriction:o,label:i}},qs=Wn.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Xs=function(n,t,e,r,o,i,u,a,c){return n.fold(t,e,r,o,i,u,a,c)},Ks=function(n,t,e,r){return n.fold(t,t,r,r,t,r,e,e)},Ys=function(n,t,e,r){return n.fold(t,r,t,r,e,e,t,r)},$s=qs.southeast,Js=qs.southwest,Qs=qs.northeast,Zs=qs.northwest,nl=qs.south,tl=qs.north,el=qs.east,rl=qs.west,ol=function(n,t){switch(t){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},il=function(n,t){return an(["left","right","top","bottom"],(function(e){return zn(t,e).map((function(t){return ol(n,t)}))}))},ul=function(n,t,e){var r=function(n,r){var o="top"===n||"bottom"===n?e.top:e.left;return zn(t,n).bind(u).bind((function(t){return"left"===n||"top"===n?t>=r?w.some(t):w.none():t<=r?w.some(t):w.none()})).map((function(n){return n+o})).getOr(r)},o=r("left",n.x),i=r("top",n.y),a=r("right",n.right),c=r("bottom",n.bottom);return rs(o,i,a-o,c-i)},al=function(n){return n.x},cl=function(n,t){return n.x+n.width/2-t.width/2},sl=function(n,t){return n.x+n.width-t.width},ll=function(n,t){return n.y-t.height},fl=function(n){return n.y+n.height},dl=function(n,t){return n.y+n.height/2-t.height/2},ml=function(n){return n.x+n.width},gl=function(n,t){return n.x-t.width},pl=function(n,t,e){return Gs(al(n),fl(n),e.southeast(),$s(),il(n,{left:1,top:3}),"layout-se")},vl=function(n,t,e){return Gs(sl(n,t),fl(n),e.southwest(),Js(),il(n,{right:0,top:3}),"layout-sw")},hl=function(n,t,e){return Gs(al(n),ll(n,t),e.northeast(),Qs(),il(n,{left:1,bottom:2}),"layout-ne")},bl=function(n,t,e){return Gs(sl(n,t),ll(n,t),e.northwest(),Zs(),il(n,{right:0,bottom:2}),"layout-nw")},yl=function(n,t,e){return Gs(cl(n,t),ll(n,t),e.north(),tl(),il(n,{bottom:2}),"layout-n")},xl=function(n,t,e){return Gs(cl(n,t),fl(n),e.south(),nl(),il(n,{top:3}),"layout-s")},wl=function(n,t,e){return Gs(ml(n),dl(n,t),e.east(),el(),il(n,{left:0}),"layout-e")},Cl=function(n,t,e){return Gs(gl(n,t),dl(n,t),e.west(),rl(),il(n,{right:1}),"layout-w")},Sl=function(){return[pl,vl,hl,bl,xl,yl,wl,Cl]},kl=function(){return[vl,pl,bl,hl,xl,yl,wl,Cl]},Ol=function(){return[hl,bl,pl,vl,yl,xl]},Tl=function(){return[bl,hl,vl,pl,yl,xl]},Dl=function(){return[pl,vl,hl,bl,xl,yl]},_l=function(){return[vl,pl,bl,hl,xl,yl]},Al=function(n,t){return t.universal?n:Y(n,(function(n){return V(t.channels,n)}))},El=function(n){return vi([xi(Uo(),(function(t,e){var r=n.channels,o=An(r),i=e,u=Al(o,i);q(u,(function(n){var e=r[n],o=e.schema,u=ie("channel["+n+"] data\nReceiver: "+Bu(t.element),o,i.data);e.onReceive(t,u)}))}))])},Rl=Object.freeze({__proto__:null,events:El}),Bl=[xe("channels",te(hn.value,Lt([zs("onReceive"),Le("schema",le())])))],Ml=function(n,t,e){return Mi((function(r){e(r,n,t)}))},Il=function(n,t,e){return Bi((function(r,o){e(r,n,t)}))},Nl=function(n,t,e,r,o,i){var u=Lt(n),a=Pe(t,[Fe("config",n)]);return Hl(u,a,t,e,r,o,i)},Pl=function(n,t,e,r,o,i){var u=n,a=Pe(t,[Re("config",n)]);return Hl(u,a,t,e,r,o,i)},Fl=function(n,t,e){var r=function(r){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var a=[r].concat(o);return r.config({name:i(n)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+e)}),(function(n){var e=Array.prototype.slice.call(a,1);return t.apply(void 0,[r,n.config,n.state].concat(e))}))};return Yu(r,e,t)},Ll=function(n){return{key:n,value:void 0}},Hl=function(n,t,e,r,o,u,c){var s=function(n){return Un(n,e)?n[e]():w.none()},l=Bn(o,(function(n,t){return Fl(e,n,t)})),f=Bn(u,(function(n,t){return Ju(n,t)})),d=m(m(m({},f),l),{revoke:a(Ll,e),config:function(t){var r=ie(e+"-config",n,t);return{key:e,value:{config:r,me:d,configAsRaw:Jn((function(){return ie(e+"-config",n,t)})),initialConfig:t,state:c}}},schema:i(t),exhibit:function(n,t){return s(n).bind((function(n){return zn(r,"exhibit").map((function(e){return e(t,n.config,n.state)}))})).getOr(sa({}))},name:i(e),handlers:function(n){return s(n).map((function(n){var t=zn(r,"events").getOr((function(){return{}}));return t(n.config,n.state)})).getOr({})}});return d},zl=function(n){return ft(n)},Vl=Lt([ye("fields"),ye("name"),Le("active",{}),Le("apis",{}),Le("state",ra),Le("extra",{})]),Ul=function(n){var t=ie("Creating behaviour: "+n.name,Vl,n);return Nl(t.fields,t.name,t.active,t.apis,t.extra,t.state)},jl=Lt([ye("branchKey"),ye("branches"),ye("name"),Le("active",{}),Le("apis",{}),Le("state",ra),Le("extra",{})]),Wl=function(n){var t=ie("Creating behaviour: "+n.name,jl,n);return Pl(ce(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Gl=i(void 0),ql=Ul({fields:Bl,name:"receiving",active:Rl}),Xl=function(n,t){return sa({classes:[],styles:t.useFixed()?{}:{position:"relative"}})},Kl=Object.freeze({__proto__:null,exhibit:Xl}),Yl=function(){return tr.fromDom(document)},$l=function(n){return n.dom.focus()},Jl=function(n){return n.dom.blur()},Ql=function(n){var t=tu(n).dom;return n.dom===t.activeElement},Zl=function(n){return void 0===n&&(n=Yl()),w.from(n.dom.activeElement).map(tr.fromDom)},nf=function(n){return Zl(tu(n)).filter((function(t){return n.dom.contains(t.dom)}))},tf=function(n,e){var r=tu(e),o=Zl(r).bind((function(n){var t=function(t){return oo(n,t)};return t(e)?w.some(e):fs(e,t)})),i=n(e);return o.each((function(n){Zl(r).filter((function(t){return oo(t,n)})).fold((function(){$l(n)}),t)})),i},ef=function(n,t,e,r,o){return{position:n,left:t,top:e,right:r,bottom:o}},rf=function(n,t){var e=function(n){return n+"px"};Ja(n,{position:w.some(t.position),left:t.left.map(e),top:t.top.map(e),right:t.right.map(e),bottom:t.bottom.map(e)})},of=Wn.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),uf=function(n,t,e,r,o,i){var u=t.x-e,a=t.y-r,c=t.width,s=t.height,l=o-(u+c),f=i-(a+s),d=w.some(u),m=w.some(a),g=w.some(l),p=w.some(f),v=w.none();return Xs(t.direction,(function(){return ef(n,d,m,v,v)}),(function(){return ef(n,v,m,g,v)}),(function(){return ef(n,d,v,v,p)}),(function(){return ef(n,v,v,g,p)}),(function(){return ef(n,d,m,v,v)}),(function(){return ef(n,d,v,v,p)}),(function(){return ef(n,d,m,v,v)}),(function(){return ef(n,v,m,g,v)}))},af=function(n,t){return n.fold((function(){return ef("absolute",w.some(t.x),w.some(t.y),w.none(),w.none())}),(function(n,e,r,o){return uf("absolute",t,n,e,r,o)}),(function(n,e,r,o){return uf("fixed",t,n,e,r,o)}))},cf=function(n,t){var e=a(ns,t),r=n.fold(e,e,(function(){var n=Wc();return ns(t).translate(-n.left,-n.top)})),o=Nc(t),i=kc(t);return rs(r.left,r.top,o,i)},sf=function(n,t){return t.fold((function(){return n.fold(us,us,rs)}),(function(t){return n.fold(t,t,(function(){var e=t(),r=lf(n,e.x,e.y);return rs(r.left,r.top,e.width,e.height)}))}))},lf=function(n,t,e){var r=Dc(t,e),o=function(){var n=Wc();return r.translate(-n.left,-n.top)};return n.fold(i(r),i(r),o)},ff=function(n,t,e,r){return n.fold(t,e,r)},df=(of.none,of.relative),mf=of.fixed,gf=function(n,t){return{anchorBox:n,origin:t}},pf=function(n,t){return gf(n,t)},vf=function(n,t,e,r){var o=n+t;return o>r?e:o<e?r:o},hf=function(n,t,e){return Math.min(Math.max(n,t),e)},bf=Wn.generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),yf=function(n,t,e,r,o){var i=o.x,u=o.y,a=o.width,c=o.height,s=n>=i,l=t>=u,f=s&&l,d=n+e<=i+a,m=t+r<=u+c,g=d&&m,p=Math.abs(Math.min(e,s?i+a-n:i-(n+e))),v=Math.abs(Math.min(r,l?u+c-t:u-(t+r))),h=Math.max(o.x,o.right-e),b=Math.max(o.y,o.bottom-r),y=hf(n,o.x,h),x=hf(t,o.y,b);return{originInBounds:f,sizeInBounds:g,limitX:y,limitY:x,deltaW:p,deltaH:v}},xf=function(n,t,e,r){var o=n.x,u=n.y,a=n.bubble.offset,c=a.left,s=a.top,l=ul(r,n.boundsRestriction,a),f=l.y,d=l.bottom,m=l.x,g=l.right,p=o+c,v=u+s,h=yf(p,v,t,e,l),b=h.originInBounds,y=h.sizeInBounds,x=h.limitX,w=h.limitY,C=h.deltaW,S=h.deltaH,k=i(w+S-f),O=i(d-w),T=Ks(n.direction,O,O,k),D=i(x+C-m),_=i(g-x),A=Ys(n.direction,_,_,D),E={x:x,y:w,width:C,height:S,maxHeight:T,maxWidth:A,direction:n.direction,classes:{on:n.bubble.classesOn,off:n.bubble.classesOff},label:n.label,candidateYforTest:v};return b&&y?bf.fit(E):bf.nofit(E,C,S)},wf=function(n,t,e,r,o){var i=e.width,c=e.height,s=function(n,u,a,s){var l=n(t,e,r),f=xf(l,i,c,o);return f.fold(bf.fit,(function(n,t,e){var r=e>s||t>a;return r?bf.nofit(n,t,e):bf.nofit(u,a,s)}))},l=J(n,(function(n,t){var e=a(s,t);return n.fold(bf.fit,e)}),bf.nofit({x:t.x,y:t.y,width:e.width,height:e.height,maxHeight:e.height,maxWidth:e.width,direction:$s(),classes:{on:[],off:[]},label:"none",candidateYforTest:t.y},-1,-1));return l.fold(u,u)},Cf=function(n){return{width:Nc(n),height:kc(n)}},Sf=function(n,t,e,r){rc(t,"max-height"),rc(t,"max-width");var o=Cf(t);return wf(r.preference,n,o,e,r.bounds)},kf=function(n,t){var e=t.classes;Ua(n,e.off),Va(n,e.on)},Of=function(n,t,e){var r=e.maxHeightFunction;r(n,t.maxHeight)},Tf=function(n,t,e){var r=e.maxWidthFunction;r(n,t.maxWidth)},Df=function(n,t,e){rf(n,af(e.origin,t))},_f=function(n,t){Oc(n,Math.floor(t))},Af=i((function(n,t){_f(n,t),$a(n,{"overflow-x":"hidden","overflow-y":"auto"})})),Ef=i((function(n,t){_f(n,t)})),Rf=function(n,t,e){return void 0===n[t]?e:n[t]},Bf=function(n,e,r,o,i,u){var a=Rf(u,"maxHeightFunction",Af()),c=Rf(u,"maxWidthFunction",t),s=n.anchorBox,l=n.origin,f={bounds:sf(l,i),origin:l,preference:o,maxHeightFunction:a,maxWidthFunction:c};Mf(s,e,r,f)},Mf=function(n,t,e,r){var o=Sf(n,t,e,r);Df(t,o,r),kf(t,o),Of(t,o,r),Tf(t,o,r)},If=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Nf=function(n,t,e){var r=function(n){return zn(e,n).getOr([])},o=function(n,t,e){var o=un(If,e);return{offset:Dc(n,t),classesOn:en(e,r),classesOff:en(o,r)}};return{southeast:function(){return o(-n,t,["top","alignLeft"])},southwest:function(){return o(n,t,["top","alignRight"])},south:function(){return o(-n/2,t,["top","alignCentre"])},northeast:function(){return o(-n,-t,["bottom","alignLeft"])},northwest:function(){return o(n,-t,["bottom","alignRight"])},north:function(){return o(-n/2,-t,["bottom","alignCentre"])},east:function(){return o(n,-t/2,["valignCentre","left"])},west:function(){return o(-n,-t/2,["valignCentre","right"])},innerNorthwest:function(){return o(-n,t,["top","alignRight"])},innerNortheast:function(){return o(n,t,["top","alignLeft"])},innerNorth:function(){return o(-n/2,t,["top","alignCentre"])},innerSouthwest:function(){return o(-n,-t,["bottom","alignRight"])},innerSoutheast:function(){return o(n,-t,["bottom","alignLeft"])},innerSouth:function(){return o(-n/2,-t,["bottom","alignCentre"])},innerWest:function(){return o(n,-t/2,["valignCentre","right"])},innerEast:function(){return o(-n,-t/2,["valignCentre","left"])}}},Pf=function(){return Nf(0,0,{})},Ff=function(n){return n},Lf=function(n,t){return function(e){return"rtl"===Hf(e)?t:n}},Hf=function(n){return"rtl"===Qa(n,"direction")?"rtl":"ltr"};(function(n){n["TopToBottom"]="toptobottom",n["BottomToTop"]="bottomtotop"})(ws||(ws={}));var zf,Vf="data-alloy-vertical-dir",Uf=function(n){return ds(n,(function(n){return Fi(n)&&Ou(n,"data-alloy-vertical-dir")===ws.BottomToTop}))},jf=function(){return Pe("layouts",[ye("onLtr"),ye("onRtl"),Ee("onBottomLtr"),Ee("onBottomRtl")])},Wf=function(n,t,e,r,o,i,u){var a=u.map(Uf).getOr(!1),c=t.layouts.map((function(t){return t.onLtr(n)})),s=t.layouts.map((function(t){return t.onRtl(n)})),l=a?t.layouts.bind((function(t){return t.onBottomLtr.map((function(t){return t(n)}))})).or(c).getOr(o):c.getOr(e),f=a?t.layouts.bind((function(t){return t.onBottomRtl.map((function(t){return t(n)}))})).or(s).getOr(i):s.getOr(r),d=Lf(l,f);return d(n)},Gf=function(n,t,e){var r=t.hotspot,o=cf(e,r.element),i=Wf(n.element,t,Dl(),_l(),Ol(),Tl(),w.some(t.hotspot.element));return w.some(Ff({anchorBox:o,bubble:t.bubble.getOr(Pf()),overrides:t.overrides,layouts:i,placer:w.none()}))},qf=[ye("hotspot"),Ee("bubble"),Le("overrides",{}),jf(),Us("placement",Gf)],Xf=function(n,t,e){var r=lf(e,t.x,t.y),o=rs(r.left,r.top,t.width,t.height),i=Wf(n.element,t,Sl(),kl(),Sl(),kl(),w.none());return w.some(Ff({anchorBox:o,bubble:t.bubble,overrides:t.overrides,layouts:i,placer:w.none()}))},Kf=[ye("x"),ye("y"),Le("height",0),Le("width",0),Le("bubble",Pf()),Le("overrides",{}),jf(),Us("placement",Xf)],Yf=Wn.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),$f=function(n){return n.fold(u,(function(n,t,e){return n.translate(-t,-e)}))},Jf=function(n){return n.fold(u,u)},Qf=function(n){return J(n,(function(n,t){return n.translate(t.left,t.top)}),Dc(0,0))},Zf=function(n){var t=G(n,$f);return Qf(t)},nd=function(n){var t=G(n,Jf);return Qf(t)},td=Yf.screen,ed=Yf.absolute,rd=function(n,t,e){var r=Wi(e.root).dom,o=function(t){var e=Vi(t),r=Vi(n.element);return oo(e,r)};return w.from(r.frameElement).map(tr.fromDom).filter(o).map(Ec)},od=function(n,t,e){var r=Vi(n.element),o=Wc(r),i=rd(n,t,e).getOr(o);return ed(i,o.left,o.top)},id=function(n,t,e,r){var o=n,i=t,u=e,a=r;n<0&&(o=0,u=e+n),t<0&&(i=0,a=r+t);var c=td(Dc(o,i));return w.some(ts(c,u,a))},ud=function(n,t,e,r,o){return n.map((function(n){var i=[t,n.point],u=ff(r,(function(){return nd(i)}),(function(){return nd(i)}),(function(){return Zf(i)})),a=es(u.left,u.top,n.width,n.height),c=e.showAbove?Ol():Dl(),s=e.showAbove?Tl():_l(),l=Wf(o,e,c,s,c,s,w.none());return Ff({anchorBox:a,bubble:e.bubble.getOr(Pf()),overrides:e.overrides,layouts:l,placer:w.none()})}))},ad=function(n,t,e){var r=od(n,e,t);return t.node.filter(Wa).bind((function(o){var i=o.dom.getBoundingClientRect(),u=id(i.left,i.top,i.width,i.height),a=t.node.getOr(n.element);return ud(u,r,t,e,a)}))},cd=[ye("node"),ye("root"),Ee("bubble"),jf(),Le("overrides",{}),Le("showAbove",!1),Us("placement",ad)],sd="\ufeff",ld="",fd=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},dd={create:fd},md=Wn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),gd=function(n,t,e,r){return n.fold(t,e,r)},pd=function(n){return n.fold(u,u,u)},vd=md.before,hd=md.on,bd=md.after,yd={before:vd,on:hd,after:bd,cata:gd,getStart:pd},xd=Wn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wd=function(n){return xd.exact(n.start,n.soffset,n.finish,n.foffset)},Cd=function(n){return n.match({domRange:function(n){return tr.fromDom(n.startContainer)},relative:function(n,t){return yd.getStart(n)},exact:function(n,t,e,r){return n}})},Sd=xd.domRange,kd=xd.relative,Od=xd.exact,Td=function(n){var t=Cd(n);return Wi(t)},Dd=dd.create,_d={domRange:Sd,relative:kd,exact:Od,exactFromRange:wd,getWin:Td,range:Dd},Ad=function(n,t){t.fold((function(t){n.setStartBefore(t.dom)}),(function(t,e){n.setStart(t.dom,e)}),(function(t){n.setStartAfter(t.dom)}))},Ed=function(n,t){t.fold((function(t){n.setEndBefore(t.dom)}),(function(t,e){n.setEnd(t.dom,e)}),(function(t){n.setEndAfter(t.dom)}))},Rd=function(n,t,e){var r=n.document.createRange();return Ad(r,t),Ed(r,e),r},Bd=function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},Md=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},Id=function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?w.some(e).map(Md):w.none()},Nd=Wn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Pd=function(n,t,e){return t(tr.fromDom(e.startContainer),e.startOffset,tr.fromDom(e.endContainer),e.endOffset)},Fd=function(n,t){return t.match({domRange:function(n){return{ltr:i(n),rtl:w.none}},relative:function(t,e){return{ltr:Jn((function(){return Rd(n,t,e)})),rtl:Jn((function(){return w.some(Rd(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:Jn((function(){return Bd(n,t,e,r,o)})),rtl:Jn((function(){return w.some(Bd(n,r,o,t,e))}))}}})},Ld=function(n,t){var e=t.ltr();if(e.collapsed){var r=t.rtl().filter((function(n){return!1===n.collapsed}));return r.map((function(n){return Nd.rtl(tr.fromDom(n.endContainer),n.endOffset,tr.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return Pd(n,Nd.ltr,e)}))}return Pd(n,Nd.ltr,e)},Hd=function(n,t){var e=Fd(n,t);return Ld(n,e)},zd=function(n,t){var e=Hd(n,t);return e.match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom,o),i.setEnd(t.dom,e),i}})},Vd=(Nd.ltr,Nd.rtl,function(n,t){var e=function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return r(e).getOr("")},r=function(t){return n(t)?w.from(t.dom.nodeValue):w.none()},o=function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r};return{get:e,getOption:r,set:o}}),Ud=Vd(Li,"text"),jd=function(n){return Ud.get(n)},Wd=function(n){return Ud.getOption(n)},Gd=function(n){return"img"===Ii(n)?1:Wd(n).fold((function(){return Yi(n).length}),(function(n){return n.length}))},qd=function(n){return Wd(n).filter((function(n){return 0!==n.trim().length||n.indexOf(ld)>-1})).isSome()},Xd=["img","br"],Kd=function(n){var t=qd(n);return t||V(Xd,Ii(n))},Yd=function(n){return $d(n,Kd)},$d=function(n,t){var e=function(n){for(var r=Yi(n),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return w.some(i);var u=e(i);if(u.isSome())return u}return w.none()};return e(n)},Jd=function(n,t){return eo(t,n)},Qd=function(n,t,e,r){var o=Vi(n),i=o.dom.createRange();return i.setStart(n.dom,t),i.setEnd(e.dom,r),i},Zd=function(n,t,e,r){var o=Qd(n,t,e,r),i=oo(n,e)&&t===r;return o.collapsed&&!i},nm=function(n){return w.from(n.getSelection())},tm=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return w.some(dd.create(tr.fromDom(t.startContainer),t.startOffset,tr.fromDom(e.endContainer),e.endOffset))}return w.none()},em=function(n){if(null===n.anchorNode||null===n.focusNode)return tm(n);var t=tr.fromDom(n.anchorNode),e=tr.fromDom(n.focusNode);return Zd(t,n.anchorOffset,e,n.focusOffset)?w.some(dd.create(t,n.anchorOffset,e,n.focusOffset)):tm(n)},rm=function(n){return nm(n).filter((function(n){return n.rangeCount>0})).bind(em)},om=function(n,t){var e=zd(n,t);return Id(e)},im=function(n,t){return{element:n,offset:t}},um=function(n,t){var e=Yi(n);if(0===e.length)return im(n,t);if(t<e.length)return im(e[t],0);var r=e[e.length-1],o=Li(r)?jd(r).length:Yi(r).length;return im(r,o)},am=function(n,t){return Li(n)?im(n,t):um(n,t)},cm=function(n,t){var e=t.getSelection.getOrThunk((function(){return function(){return rm(n)}}));return e().map((function(n){var t=am(n.start,n.soffset),e=am(n.finish,n.foffset);return _d.range(t.element,t.offset,e.element,e.offset)}))},sm=function(n,t,e){var r=Wi(t.root).dom,o=od(n,e,t),i=cm(r,t).bind((function(n){var t=om(r,_d.exactFromRange(n)).orThunk((function(){var t=tr.fromText(sd);return cu(n.start,t),om(r,_d.exact(t,0,t,1)).map((function(n){return vu(t),n}))}));return t.bind((function(n){return id(n.left,n.top,n.width,n.height)}))})),u=cm(r,t).bind((function(n){return Fi(n.start)?w.some(n.start):qi(n.start)})),a=u.getOr(n.element);return ud(i,o,t,e,a)},lm=[Ee("getSelection"),ye("root"),Ee("bubble"),jf(),Le("overrides",{}),Le("showAbove",!1),Us("placement",sm)],fm=function(n){return n.x+n.width},dm=function(n,t){return n.x-t.width},mm=function(n,t){return n.y-t.height+n.height},gm=function(n){return n.y},pm=function(n,t,e){return Gs(fm(n),gm(n),e.southeast(),$s(),il(n,{left:0,top:2}),"link-layout-se")},vm=function(n,t,e){return Gs(dm(n,t),gm(n),e.southwest(),Js(),il(n,{right:1,top:2}),"link-layout-sw")},hm=function(n,t,e){return Gs(fm(n),mm(n,t),e.northeast(),Qs(),il(n,{left:0,bottom:3}),"link-layout-ne")},bm=function(n,t,e){return Gs(dm(n,t),mm(n,t),e.northwest(),Zs(),il(n,{right:1,bottom:3}),"link-layout-nw")},ym=function(){return[pm,vm,hm,bm]},xm=function(){return[vm,pm,bm,hm]},wm=function(n,t,e){var r=cf(e,t.item.element),o=Wf(n.element,t,ym(),xm(),ym(),xm(),w.none());return w.some(Ff({anchorBox:r,bubble:Pf(),overrides:t.overrides,layouts:o,placer:w.none()}))},Cm=[ye("item"),jf(),Le("overrides",{}),Us("placement",wm)],Sm=ce("anchor",{selection:lm,node:cd,hotspot:qf,submenu:Cm,makeshift:Kf}),km=function(){var n=document.documentElement;return mf(0,0,n.clientWidth,n.clientHeight)},Om=function(n){var t=Ec(n.element),e=n.element.dom.getBoundingClientRect();return df(t.left,t.top,e.width,e.height)},Tm=function(n,t,e,r,o){var i=pf(e.anchorBox,t);Bf(i,o.element,e.bubble,e.layouts,r,e.overrides)},Dm=function(n,t,e,r,o){_m(n,t,e,r,o,w.none())},_m=function(n,t,e,r,o,i){var u=i.map(os);return Am(n,t,e,r,o,u)},Am=function(n,t,e,r,o,u){var a=ie("positioning anchor.info",Sm,r);tf((function(){Ya(o.element,"position","fixed");var e=nc(o.element,"visibility");Ya(o.element,"visibility","hidden");var r=t.useFixed()?km():Om(n),c=a.placement,s=u.map(i).or(t.getBounds);c(n,a,r).each((function(t){var e=t.placer.getOr(Tm);e(n,r,t,s,o)})),e.fold((function(){rc(o.element,"visibility")}),(function(n){Ya(o.element,"visibility",n)})),nc(o.element,"left").isNone()&&nc(o.element,"top").isNone()&&nc(o.element,"right").isNone()&&nc(o.element,"bottom").isNone()&&nc(o.element,"position").is("fixed")&&rc(o.element,"position")}),o.element)},Em=function(n,t,e){return t.useFixed()?"fixed":"absolute"},Rm=Object.freeze({__proto__:null,position:Dm,positionWithin:_m,positionWithinBounds:Am,getMode:Em}),Bm=[Le("useFixed",l),Ee("getBounds")],Mm=Ul({fields:Bm,name:"positioning",active:Kl,apis:Rm}),Im=function(n){li(n,ti());var t=n.components();q(t,Im)},Nm=function(n){var t=n.components();q(t,Nm),li(n,ni())},Pm=function(n,t){fu(n.element,t.element)},Fm=function(n){q(n.components(),(function(n){return vu(n.element)})),pu(n.element),n.syncComponents()},Lm=function(n,t){var e=n.components();Fm(n);var r=un(e,t);q(r,(function(t){Im(t),n.getSystem().removeFromWorld(t)})),q(t,(function(t){t.getSystem().isConnected()?Pm(n,t):(n.getSystem().addToWorld(t),Pm(n,t),Wa(n.element)&&Nm(t)),n.syncComponents()}))},Hm=function(n,t){zm(n,t,fu)},zm=function(n,t,e){n.getSystem().addToWorld(t),e(n.element,t.element),Wa(n.element)&&Nm(t),n.syncComponents()},Vm=function(n){Im(n),vu(n.element),n.getSystem().removeFromWorld(n)},Um=function(n){var t=Gi(n.element).bind((function(t){return n.getSystem().getByDom(t).toOptional()}));Vm(n),t.each((function(n){n.syncComponents()}))},jm=function(n){var t=n.components();q(t,Vm),pu(n.element),n.syncComponents()},Wm=function(n,t){qm(n,t,fu)},Gm=function(n,t){qm(n,t,su)},qm=function(n,t,e){e(n,t.element);var r=Yi(t.element);q(r,(function(n){t.getByDom(n).each(Nm)}))},Xm=function(n){var t=Yi(n.element);q(t,(function(t){n.getByDom(t).each(Im)})),vu(n.element)},Km=function(n,t,e,r){e.get().each((function(t){jm(n)}));var o=t.getAttachPoint(n);Hm(o,n);var i=n.getSystem().build(r);return Hm(n,i),e.set(i),i},Ym=function(n,t,e,r){var o=Km(n,t,e,r);return t.onOpen(n,o),o},$m=function(n,t,e,r){return e.get().map((function(){return Km(n,t,e,r)}))},Jm=function(n,t,e,r,o){og(n,t),Ym(n,t,e,r),o(),ug(n,t)},Qm=function(n,t,e){e.get().each((function(r){jm(n),Um(n),t.onClose(n,r),e.clear()}))},Zm=function(n,t,e){return e.isOpen()},ng=function(n,t,e,r){return Zm(n,t,e)&&e.get().exists((function(e){return t.isPartOf(n,e,r)}))},tg=function(n,t,e){return e.get()},eg=function(n,t,e,r){nc(n.element,t).fold((function(){_u(n.element,e)}),(function(t){Su(n.element,e,t)})),Ya(n.element,t,r)},rg=function(n,t,e){Tu(n.element,e).fold((function(){return rc(n.element,t)}),(function(e){return Ya(n.element,t,e)}))},og=function(n,t,e){var r=t.getAttachPoint(n);Ya(n.element,"position",Mm.getMode(r)),eg(n,"visibility",t.cloakVisibilityAttr,"hidden")},ig=function(n){return U(["top","left","right","bottom"],(function(t){return nc(n,t).isSome()}))},ug=function(n,t,e){ig(n.element)||rc(n.element,"position"),rg(n,"visibility",t.cloakVisibilityAttr)},ag=Object.freeze({__proto__:null,cloak:og,decloak:ug,open:Ym,openWhileCloaked:Jm,close:Qm,isOpen:Zm,isPartOf:ng,getState:tg,setContent:$m}),cg=function(n,t){return vi([xi(Xo(),(function(e,r){Qm(e,n,t)}))])},sg=Object.freeze({__proto__:null,events:cg}),lg=[Ls("onOpen"),Ls("onClose"),ye("isPartOf"),ye("getAttachPoint"),Le("cloakVisibilityAttr","data-precloak-visibility")],fg=function(){var n=Ye(w.none()),t=i("not-implemented"),e=function(){return n.get().isSome()},r=function(t){n.set(w.some(t))},o=function(){return n.get()},u=function(){n.set(w.none())};return oa({readState:t,isOpen:e,clear:u,set:r,get:o})},dg=Object.freeze({__proto__:null,init:fg}),mg=Ul({fields:lg,name:"sandboxing",active:sg,apis:ag,state:dg}),gg=i("dismiss.popups"),pg=i("reposition.popups"),vg=i("mouse.released"),hg=Lt([Le("isExtraPart",l),Pe("fireEventInstead",[Le("event",ei())])]),bg=function(n){var t,e=ie("Dismissal",hg,n);return t={},t[gg()]={schema:Lt([ye("target")]),onReceive:function(n,t){if(mg.isOpen(n)){var r=mg.isPartOf(n,t.target)||e.isExtraPart(n,t.target);r||e.fireEventInstead.fold((function(){return mg.close(n)}),(function(t){return li(n,t.event)}))}}},t},yg=Lt([Pe("fireEventInstead",[Le("event",ri())]),Oe("doReposition")]),xg=function(n){var t,e=ie("Reposition",yg,n);return t={},t[pg()]={onReceive:function(n){mg.isOpen(n)&&e.fireEventInstead.fold((function(){return e.doReposition(n)}),(function(t){return li(n,t.event)}))}},t},wg=function(n,t,e){t.store.manager.onLoad(n,t,e)},Cg=function(n,t,e){t.store.manager.onUnload(n,t,e)},Sg=function(n,t,e,r){t.store.manager.setValue(n,t,e,r)},kg=function(n,t,e){return t.store.manager.getValue(n,t,e)},Og=function(n,t,e){return e},Tg=Object.freeze({__proto__:null,onLoad:wg,onUnload:Cg,setValue:Sg,getValue:kg,getState:Og}),Dg=function(n,t){var e=n.resetOnDom?[Ei((function(e,r){wg(e,n,t)})),Ri((function(e,r){Cg(e,n,t)}))]:[Il(n,t,wg)];return vi(e)},_g=Object.freeze({__proto__:null,events:Dg}),Ag=function(){var n=Ye(null),t=function(){return{mode:"memory",value:n.get()}},e=function(){return null===n.get()},r=function(){n.set(null)};return oa({set:n.set,get:n.get,isNotSet:e,clear:r,readState:t})},Eg=function(){var n=t;return oa({readState:n})},Rg=function(){var n=Ye({}),t=Ye({}),e=function(){return{mode:"dataset",dataByValue:n.get(),dataByText:t.get()}},r=function(){n.set({}),t.set({})},o=function(e){return zn(n.get(),e).orThunk((function(){return zn(t.get(),e)}))},i=function(e){var r=n.get(),o=t.get(),i={},u={};q(e,(function(n){i[n.value]=n,zn(n,"meta").each((function(t){zn(t,"text").each((function(t){u[t]=n}))}))})),n.set(m(m({},r),i)),t.set(m(m({},o),u))};return oa({readState:e,lookup:o,update:i,clear:r})},Bg=function(n){return n.store.manager.state(n)},Mg=Object.freeze({__proto__:null,memory:Ag,dataset:Rg,manual:Eg,init:Bg}),Ig=function(n,t,e,r){var o=t.store;e.update([r]),o.setValue(n,r),t.onSetValue(n,r)},Ng=function(n,t,e){var r=t.store,o=r.getDataKey(n);return e.lookup(o).fold((function(){return r.getFallbackEntry(o)}),(function(n){return n}))},Pg=function(n,t,e){var r=t.store;r.initialValue.each((function(r){Ig(n,t,e,r)}))},Fg=function(n,t,e){e.clear()},Lg=[Ee("initialValue"),ye("getFallbackEntry"),ye("getDataKey"),ye("setValue"),Us("manager",{setValue:Ig,getValue:Ng,onLoad:Pg,onUnload:Fg,state:Rg})],Hg=function(n,t,e){return t.store.getValue(n)},zg=function(n,t,e,r){t.store.setValue(n,r),t.onSetValue(n,r)},Vg=function(n,t,e){t.store.initialValue.each((function(e){t.store.setValue(n,e)}))},Ug=[ye("getValue"),Le("setValue",t),Ee("initialValue"),Us("manager",{setValue:zg,getValue:Hg,onLoad:Vg,onUnload:t,state:ra.init})],jg=function(n,t,e,r){e.set(r),t.onSetValue(n,r)},Wg=function(n,t,e){return e.get()},Gg=function(n,t,e){t.store.initialValue.each((function(n){e.isNotSet()&&e.set(n)}))},qg=function(n,t,e){e.clear()},Xg=[Ee("initialValue"),Us("manager",{setValue:jg,getValue:Wg,onLoad:Gg,onUnload:qg,state:Ag})],Kg=[He("store",{mode:"memory"},ce("mode",{memory:Xg,manual:Ug,dataset:Lg})),Ls("onSetValue"),Le("resetOnDom",!1)],Yg=Ul({fields:Kg,name:"representing",active:_g,apis:Tg,extra:{setValueFrom:function(n,t){var e=Yg.getValue(t);Yg.setValue(n,e)}},state:Mg}),$g=function(n,t){return Xe(n,{},G(t,(function(t){return Te(t.name(),"Cannot configure "+t.name()+" for "+n)})).concat([Ke("dump",u)]))},Jg=function(n){return n.dump},Qg=function(n,t){return m(m({},n.dump),zl(t))},Zg={field:$g,augment:Qg,get:Jg},np="placeholder",tp=Wn.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ep=function(n){return Vn(n,"uiType")},rp=function(n,t,e,r){return n.exists((function(n){return n!==e.owner}))?tp.single(!0,i(e)):zn(r,e.name).fold((function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+An(r)+"]\nNamespace: "+n.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2))}),(function(n){return n.replace()}))},op=function(n,t,e,r){return ep(e)&&e.uiType===np?rp(n,t,e,r):tp.single(!1,i(e))},ip=function(n,t,e,r){var o=op(n,t,e,r);return o.fold((function(o,i){var u=ep(e)?i(t,e.config,e.validated):i(t),a=zn(u,"components").getOr([]),c=en(a,(function(e){return ip(n,t,e,r)}));return[m(m({},u),{components:c})]}),(function(n,r){if(ep(e)){var o=r(t,e.config,e.validated),i=e.validated.preprocess.getOr(u);return i(o)}return r(t)}))},up=function(n,t,e,r){return en(e,(function(e){return ip(n,t,e,r)}))},ap=function(n,t){var e=!1,r=function(){return e},o=function(){if(e)throw new Error("Trying to use the same placeholder more than once: "+n);return e=!0,t},u=function(){return t.fold((function(n,t){return n}),(function(n,t){return n}))};return{name:i(n),required:u,used:r,replace:o}},cp=function(n,t,e,r){var o=Bn(r,(function(n,t){return ap(t,n)})),i=up(n,t,e,o);return Rn(o,(function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i},sp=tp.single,lp=tp.multiple,fp=i(np),dp=Wn.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),mp=Le("factory",{sketch:u}),gp=Le("schema",[]),pp=ye("name"),vp=Xt("pname","pname",rt((function(n){return"<alloy."+Fu(n.name)+">"})),le()),hp=Ke("schema",(function(){return[Ee("preprocess")]})),bp=Le("defaults",i({})),yp=Le("overrides",i({})),xp=Ht([mp,gp,pp,vp,bp,yp]),wp=Ht([mp,gp,pp,bp,yp]),Cp=Ht([mp,gp,pp,vp,bp,yp]),Sp=Ht([mp,hp,pp,ye("unit"),vp,bp,yp]),kp=function(n){return n.fold(w.some,w.none,w.some,w.some)},Op=function(n){var t=function(n){return n.name};return n.fold(t,t,t,t)},Tp=function(n){return n.fold(u,u,u,u)},Dp=function(n,t){return function(e){var r=ie("Converting part type",t,e);return n(r)}},_p=Dp(dp.required,xp),Ap=Dp(dp.external,wp),Ep=Dp(dp.optional,Cp),Rp=Dp(dp.group,Sp),Bp=i("entirety"),Mp=Object.freeze({__proto__:null,required:_p,external:Ap,optional:Ep,group:Rp,asNamedPart:kp,name:Op,asCommon:Tp,original:Bp}),Ip=function(n,t,e,r){return Yn(t.defaults(n,e,r),e,{uid:n.partUids[t.name]},t.overrides(n,e,r))},Np=function(n,t,e){var r={},o={};return q(e,(function(n){n.fold((function(n){r[n.pname]=sp(!0,(function(t,e,r){return n.factory.sketch(Ip(t,n,e,r))}))}),(function(n){var e=t.parts[n.name];o[n.name]=i(n.factory.sketch(Ip(t,n,e[Bp()]),e))}),(function(n){r[n.pname]=sp(!1,(function(t,e,r){return n.factory.sketch(Ip(t,n,e,r))}))}),(function(n){r[n.pname]=lp(!0,(function(t,e,r){var o=t[n.name];return G(o,(function(e){return n.factory.sketch(Yn(n.defaults(t,e,r),e,n.overrides(t,e)))}))}))}))})),{internals:i(r),externals:i(o)}},Pp=function(n,t){var e={};return q(t,(function(t){kp(t).each((function(t){var r=Fp(n,t.pname);e[t.name]=function(e){var o=ie("Part: "+t.name+" in "+n,Ht(t.schema),e);return m(m({},r),{config:e,validated:o})}}))})),e},Fp=function(n,t){return{uiType:fp(),owner:n,name:t}},Lp=function(n,t,e){return{uiType:fp(),owner:n,name:t,config:e,validated:{}}},Hp=function(n){return en(n,(function(n){return n.fold(w.none,w.some,w.none,w.none).map((function(n){return De(n.name,n.schema.concat([js(Bp())]))})).toArray()}))},zp=function(n){return G(n,Op)},Vp=function(n,t,e){return Np(n,t,e)},Up=function(n,t,e){return cp(w.some(n),t,t.components,e)},jp=function(n,t,e){var r=t.partUids[e];return n.getSystem().getByUid(r).toOptional()},Wp=function(n,t,e){return jp(n,t,e).getOrDie("Could not find part: "+e)},Gp=function(n,t,e){var r={},o=t.partUids,u=n.getSystem();return q(e,(function(n){r[n]=i(u.getByUid(o[n]))})),r},qp=function(n,t){var e=n.getSystem();return Bn(t.partUids,(function(n,t){return i(e.getByUid(n))}))},Xp=function(n){return An(n.partUids)},Kp=function(n,t,e){var r={},o=t.partUids,u=n.getSystem();return q(e,(function(n){r[n]=i(u.getByUid(o[n]).getOrDie())})),r},Yp=function(n,t){var e=zp(t);return ft(G(e,(function(t){return{key:t,value:n+"-"+t}})))},$p=function(n){return Xt("partUids","partUids",ot((function(t){return Yp(t.uid,n)})),le())},Jp=Object.freeze({__proto__:null,generate:Pp,generateOne:Lp,schemas:Hp,names:zp,substitutes:Vp,components:Up,defaultUids:Yp,defaultUidsSchema:$p,getAllParts:qp,getAllPartNames:Xp,getPart:jp,getPartOrDie:Wp,getParts:Gp,getPartsOrDie:Kp}),Qp=function(n,t){var e=n.length>0?[De("parts",n)]:[];return e.concat([ye("uid"),Le("dom",{}),Le("components",[]),js("originalSpec"),Le("debug.sketcher",{})]).concat(t)},Zp=function(n,t,e,r,o){var i=Qp(r,o);return ie(n+" [SpecSchema]",Lt(i.concat(t)),e)},nv=function(n,t,e,r){var o=rv(r),i=Zp(n,t,o,[],[]);return e(i,o)},tv=function(n,t,e,r,o){var i=rv(o),u=Hp(e),a=$p(e),c=Zp(n,t,i,u,[a]),s=Vp(n,c,e),l=Up(n,c,s.internals());return r(c,l,i,s.externals())},ev=function(n){return Vn(n,"uid")},rv=function(n){return ev(n)?n:m(m({},n),{uid:Gu("uid")})},ov=function(n){return void 0!==n.uid},iv=Lt([ye("name"),ye("factory"),ye("configFields"),Le("apis",{}),Le("extraApis",{})]),uv=Lt([ye("name"),ye("factory"),ye("configFields"),ye("partFields"),Le("apis",{}),Le("extraApis",{})]),av=function(n){var t=ie("Sketcher for "+n.name,iv,n),e=function(n){return nv(t.name,t.configFields,t.factory,n)},r=Bn(t.apis,ea),o=Bn(t.extraApis,(function(n,t){return Ju(n,t)}));return m(m({name:t.name,configFields:t.configFields,sketch:e},r),o)},cv=function(n){var t=ie("Sketcher for "+n.name,uv,n),e=function(n){return tv(t.name,t.configFields,t.partFields,t.factory,n)},r=Pp(t.name,t.partFields),o=Bn(t.apis,ea),i=Bn(t.extraApis,(function(n,t){return Ju(n,t)}));return m(m({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e,parts:r},o),i)},sv=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},lv=function(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];if(!r.isSome())return w.none();t.push(r.getOrDie())}return w.some(t)},fv=function(n,t,e){return n.isSome()&&t.isSome()?w.some(e(n.getOrDie(),t.getOrDie())):w.none()},dv=function(n,t,e,r){return n.isSome()&&t.isSome()&&e.isSome()?w.some(r(n.getOrDie(),t.getOrDie(),e.getOrDie())):w.none()},mv=function(n,t){return void 0!==n&&null!==n?w.some(t(n)):w.none()},gv=function(n,t){return n?w.some(t):w.none()},pv=function(n){return"input"===Ii(n)&&"radio"!==Ou(n,"type")||"textarea"===Ii(n)},vv=function(n,t,e){return t.find(n)},hv=Object.freeze({__proto__:null,getCurrent:vv}),bv=[ye("find")],yv=Ul({fields:bv,name:"composing",apis:hv}),xv=function(n,t,e,r){var o=Jd(n.element,"."+t.highlightClass);q(o,(function(e){U(r,(function(n){return n.element===e}))||(Ha(e,t.highlightClass),n.getSystem().getByDom(e).each((function(e){t.onDehighlight(n,e),li(e,si())})))}))},wv=function(n,t,e){return xv(n,t,e,[])},Cv=function(n,t,e,r){_v(n,t,e,r)&&(Ha(r.element,t.highlightClass),t.onDehighlight(n,r),li(r,si()))},Sv=function(n,t,e,r){xv(n,t,e,[r]),_v(n,t,e,r)||(Fa(r.element,t.highlightClass),t.onHighlight(n,r),li(r,ci()))},kv=function(n,t,e){Rv(n,t).each((function(r){Sv(n,t,e,r)}))},Ov=function(n,t,e){Bv(n,t).each((function(r){Sv(n,t,e,r)}))},Tv=function(n,t,e,r){Ev(n,t,e,r).fold((function(n){throw n}),(function(r){Sv(n,t,e,r)}))},Dv=function(n,t,e,r){var o=Pv(n,t),i=Z(o,r);i.each((function(r){Sv(n,t,e,r)}))},_v=function(n,t,e,r){return za(r.element,t.highlightClass)},Av=function(n,t,e){return gs(n.element,"."+t.highlightClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},Ev=function(n,t,e,r){var o=Jd(n.element,"."+t.itemClass);return w.from(o[r]).fold((function(){return hn.error(new Error("No element found with index "+r))}),n.getSystem().getByDom)},Rv=function(n,t,e){return gs(n.element,"."+t.itemClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},Bv=function(n,t,e){var r=Jd(n.element,"."+t.itemClass),o=r.length>0?w.some(r[r.length-1]):w.none();return o.bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},Mv=function(n,t,e,r){var o=Jd(n.element,"."+t.itemClass),i=nn(o,(function(n){return za(n,t.highlightClass)}));return i.bind((function(t){var e=vf(t,r,0,o.length-1);return n.getSystem().getByDom(o[e]).toOptional()}))},Iv=function(n,t,e){return Mv(n,t,e,-1)},Nv=function(n,t,e){return Mv(n,t,e,1)},Pv=function(n,t,e){var r=Jd(n.element,"."+t.itemClass);return sv(G(r,(function(t){return n.getSystem().getByDom(t).toOptional()})))},Fv=Object.freeze({__proto__:null,dehighlightAll:wv,dehighlight:Cv,highlight:Sv,highlightFirst:kv,highlightLast:Ov,highlightAt:Tv,highlightBy:Dv,isHighlighted:_v,getHighlighted:Av,getFirst:Rv,getLast:Bv,getPrevious:Iv,getNext:Nv,getCandidates:Pv}),Lv=[ye("highlightClass"),ye("itemClass"),Ls("onHighlight"),Ls("onDehighlight")],Hv=Ul({fields:Lv,name:"highlighting",apis:Fv}),zv=[8],Vv=[9],Uv=[13],jv=[27],Wv=[32],Gv=[37],qv=[38],Xv=[39],Kv=[40],Yv=function(n,t,e){var r=on(n.slice(0,t)),o=on(n.slice(t+1));return Z(r.concat(o),e)},$v=function(n,t,e){var r=on(n.slice(0,t));return Z(r,e)},Jv=function(n,t,e){var r=n.slice(0,t),o=n.slice(t+1);return Z(o.concat(r),e)},Qv=function(n,t,e){var r=n.slice(t+1);return Z(r,e)},Zv=function(n){return function(t){var e=t.raw;return V(n,e.which)}},nh=function(n){return function(t){return rn(n,(function(n){return n(t)}))}},th=function(n){var t=n.raw;return!0===t.shiftKey},eh=function(n){var t=n.raw;return!0===t.ctrlKey},rh=c(th),oh=function(n,t){return{matches:n,classification:t}},ih=function(n,t){var e=Z(n,(function(n){return n.matches(t)}));return e.map((function(n){return n.classification}))},uh=function(n,t,e){var r=t.exists((function(n){return e.exists((function(t){return oo(t,n)}))}));r||fi(n,oi(),{prevFocus:t,newFocus:e})},ah=function(){var n=function(n){return nf(n.element)},t=function(t,e){var r=n(t);t.getSystem().triggerFocus(e,t.element);var o=n(t);uh(t,r,o)};return{get:n,set:t}},ch=function(){var n=function(n){return Hv.getHighlighted(n).map((function(n){return n.element}))},e=function(e,r){var o=n(e);e.getSystem().getByDom(r).fold(t,(function(n){Hv.highlight(e,n)}));var i=n(e);uh(e,o,i)};return{get:n,set:e}};(function(n){n["OnFocusMode"]="onFocus",n["OnEnterOrSpaceMode"]="onEnterOrSpace",n["OnApiMode"]="onApi"})(zf||(zf={}));var sh=function(n,t,e,r,o){var i=function(){return n.concat([Le("focusManager",ah()),He("focusInside","onFocus",ne((function(n){return V(["onFocus","onEnterOrSpace","onApi"],n)?hn.value(n):hn.error("Invalid value for focusInside")}))),Us("handler",c),Us("state",t),Us("sendFocusIn",o)])},u=function(n,t,e,r,o){var i=e(n,t,r,o);return ih(i,t.event).bind((function(e){return e(n,t,r,o)}))},a=function(n,t){var i=n.focusInside!==zf.OnFocusMode?w.none():o(n).map((function(e){return xi(Ho(),(function(r,o){e(r,n,t),o.stop()}))})),a=function(e,r){var i=Zv(Wv.concat(Uv))(r.event);n.focusInside===zf.OnEnterOrSpaceMode&&i&&fo(e,r)&&o(n).each((function(o){o(e,n,t),r.stop()}))},c=[xi(Eo(),(function(r,o){u(r,o,e,n,t).fold((function(){a(r,o)}),(function(n){o.stop()}))})),xi(Ro(),(function(e,o){u(e,o,r,n,t).each((function(n){o.stop()}))}))];return vi(i.toArray().concat(c))},c={schema:i,processKey:u,toEvents:a};return c},lh=function(n){var t=[Ee("onEscape"),Ee("onEnter"),Le("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Le("firstTabstop",0),Le("useTabstopAt",f),Ee("visibilitySelector")].concat([n]),e=function(n,t){var e=n.visibilitySelector.bind((function(n){return ps(t,n)})).getOr(t);return Sc(e)>0},r=function(n,t){var r=Jd(n.element,t.selector),o=Y(r,(function(n){return e(t,n)}));return w.from(o[t.firstTabstop])},o=function(n,t){return t.focusManager.get(n).bind((function(n){return ps(n,t.selector)}))},u=function(n,t){return e(n,t)&&n.useTabstopAt(t)},c=function(n,t,e){r(n,t).each((function(e){t.focusManager.set(n,e)}))},s=function(n,t,e,r,o){return o(t,e,(function(n){return u(r,n)})).fold((function(){return r.cyclic?w.some(!0):w.none()}),(function(t){return r.focusManager.set(n,t),w.some(!0)}))},l=function(n,t,e,r){var i=Jd(n.element,e.selector);return o(n,e).bind((function(t){var o=nn(i,a(oo,t));return o.bind((function(t){return s(n,i,t,e,r)}))}))},d=function(n,t,e){var r=e.cyclic?Yv:$v;return l(n,t,e,r)},m=function(n,t,e){var r=e.cyclic?Jv:Qv;return l(n,t,e,r)},g=function(n,t,e){return e.onEnter.bind((function(e){return e(n,t)}))},p=function(n,t,e){return e.onEscape.bind((function(e){return e(n,t)}))},v=i([oh(nh([th,Zv(Vv)]),d),oh(Zv(Vv),m),oh(Zv(jv),p),oh(nh([rh,Zv(Uv)]),g)]),h=i([]);return sh(t,ra.init,v,h,(function(){return w.some(c)}))},fh=lh(Ke("cyclic",l)),dh=lh(Ke("cyclic",f)),mh=function(n,t,e){return mi(n,e,jo()),w.some(!0)},gh=function(n,t,e){var r=pv(e)&&Zv(Wv)(t.event);return r?w.none():mh(n,t,e)},ph=function(n,t){return w.some(!0)},vh=[Le("execute",gh),Le("useSpace",!1),Le("useEnter",!0),Le("useControlEnter",!1),Le("useDown",!1)],hh=function(n,t,e){return e.execute(n,t,n.element)},bh=function(n,t,e,r){var o=e.useSpace&&!pv(n.element)?Wv:[],i=e.useEnter?Uv:[],u=e.useDown?Kv:[],a=o.concat(i).concat(u);return[oh(Zv(a),hh)].concat(e.useControlEnter?[oh(nh([eh,Zv(Uv)]),hh)]:[])},yh=function(n,t,e,r){return e.useSpace&&!pv(n.element)?[oh(Zv(Wv),ph)]:[]},xh=sh(vh,ra.init,bh,yh,(function(){return w.none()})),wh=function(){var n=Ye(w.none()),t=function(t,e){n.set(w.some({numRows:t,numColumns:e}))},e=function(){return n.get().map((function(n){return n.numRows}))},r=function(){return n.get().map((function(n){return n.numColumns}))};return oa({readState:function(){return n.get().map((function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:t,getNumRows:e,getNumColumns:r})},Ch=function(n){return n.state(n)},Sh=Object.freeze({__proto__:null,flatgrid:wh,init:Ch}),kh=function(n){return function(t,e,r,o){var i=n(t.element);return _h(i,t,e,r,o)}},Oh=function(n,t){var e=Lf(n,t);return kh(e)},Th=function(n,t){var e=Lf(t,n);return kh(e)},Dh=function(n){return function(t,e,r,o){return _h(n,t,e,r,o)}},_h=function(n,t,e,r,o){var i=r.focusManager.get(t).bind((function(e){return n(t.element,e,r,o)}));return i.map((function(n){return r.focusManager.set(t,n),!0}))},Ah=Dh,Eh=Dh,Rh=Dh,Bh=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0},Mh=function(n){return!Bh(n.dom)},Ih=function(n,t){return nn(n,t).map((function(t){return{index:t,candidates:n}}))},Nh=function(n,t,e){var r=function(n){return oo(n,t)},o=Jd(n,e),i=Y(o,Mh);return Ih(i,r)},Ph=function(n,t){return nn(n,(function(n){return oo(t,n)}))},Fh=function(n,t,e,r){var o=Math.floor(t/e),i=t%e;return r(o,i).bind((function(t){var r=t.row*e+t.column;return r>=0&&r<n.length?w.some(n[r]):w.none()}))},Lh=function(n,t,e,r,o){return Fh(n,t,r,(function(t,i){var u=t===e-1,a=u?n.length-t*r:r,c=vf(i,o,0,a-1);return w.some({row:t,column:c})}))},Hh=function(n,t,e,r,o){return Fh(n,t,r,(function(t,i){var u=vf(t,o,0,e-1),a=u===e-1,c=a?n.length-u*r:r,s=hf(i,0,c-1);return w.some({row:u,column:s})}))},zh=function(n,t,e,r){return Lh(n,t,e,r,1)},Vh=function(n,t,e,r){return Lh(n,t,e,r,-1)},Uh=function(n,t,e,r){return Hh(n,t,e,r,-1)},jh=function(n,t,e,r){return Hh(n,t,e,r,1)},Wh=[ye("selector"),Le("execute",gh),Hs("onEscape"),Le("captureTab",!1),Ws()],Gh=function(n,t,e){gs(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},qh=function(n,t){return t.focusManager.get(n).bind((function(n){return ps(n,t.selector)}))},Xh=function(n,t,e,r){return qh(n,e).bind((function(r){return e.execute(n,t,r)}))},Kh=function(n){return function(t,e,r,o){return Nh(t,e,r.selector).bind((function(t){return n(t.candidates,t.index,o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))}))}},Yh=function(n,t,e){return e.captureTab?w.some(!0):w.none()},$h=function(n,t,e){return e.onEscape(n,t)},Jh=Kh(Vh),Qh=Kh(zh),Zh=Kh(Uh),nb=Kh(jh),tb=i([oh(Zv(Gv),Oh(Jh,Qh)),oh(Zv(Xv),Th(Jh,Qh)),oh(Zv(qv),Ah(Zh)),oh(Zv(Kv),Eh(nb)),oh(nh([th,Zv(Vv)]),Yh),oh(nh([rh,Zv(Vv)]),Yh),oh(Zv(jv),$h),oh(Zv(Wv.concat(Uv)),Xh)]),eb=i([oh(Zv(Wv),ph)]),rb=sh(Wh,wh,tb,eb,(function(){return w.some(Gh)})),ob=function(n,t,e,r){var o=function(n){return"button"===Ii(n)&&"disabled"===Ou(n,"disabled")},i=function(n,t,e){var u=vf(t,r,0,e.length-1);return u===n?w.none():o(e[u])?i(n,u,e):w.from(e[u])};return Nh(n,e,t).bind((function(n){var t=n.index,e=n.candidates;return i(t,t,e)}))},ib=[ye("selector"),Le("getInitial",w.none),Le("execute",gh),Hs("onEscape"),Le("executeOnMove",!1),Le("allowVertical",!0)],ub=function(n,t){return t.focusManager.get(n).bind((function(n){return ps(n,t.selector)}))},ab=function(n,t,e){return ub(n,e).bind((function(r){return e.execute(n,t,r)}))},cb=function(n,t,e){t.getInitial(n).orThunk((function(){return gs(n.element,t.selector)})).each((function(e){t.focusManager.set(n,e)}))},sb=function(n,t,e){return ob(n,e.selector,t,-1)},lb=function(n,t,e){return ob(n,e.selector,t,1)},fb=function(n){return function(t,e,r,o){return n(t,e,r,o).bind((function(){return r.executeOnMove?ab(t,e,r):w.some(!0)}))}},db=function(n,t,e){return e.onEscape(n,t)},mb=function(n,t,e,r){var o=Gv.concat(e.allowVertical?qv:[]),i=Xv.concat(e.allowVertical?Kv:[]);return[oh(Zv(o),fb(Oh(sb,lb))),oh(Zv(i),fb(Th(sb,lb))),oh(Zv(Uv),ab),oh(Zv(Wv),ab),oh(Zv(jv),db)]},gb=i([oh(Zv(Wv),ph)]),pb=sh(ib,ra.init,mb,gb,(function(){return w.some(cb)})),vb=function(n,t,e){return w.from(n[t]).bind((function(n){return w.from(n[e]).map((function(n){return{rowIndex:t,columnIndex:e,cell:n}}))}))},hb=function(n,t,e,r){var o=n[t],i=o.length,u=vf(e,r,0,i-1);return vb(n,t,u)},bb=function(n,t,e,r){var o=vf(e,r,0,n.length-1),i=n[o].length,u=hf(t,0,i-1);return vb(n,o,u)},yb=function(n,t,e,r){var o=n[t],i=o.length,u=hf(e+r,0,i-1);return vb(n,t,u)},xb=function(n,t,e,r){var o=hf(e+r,0,n.length-1),i=n[o].length,u=hf(t,0,i-1);return vb(n,o,u)},wb=function(n,t,e){return hb(n,t,e,1)},Cb=function(n,t,e){return hb(n,t,e,-1)},Sb=function(n,t,e){return bb(n,e,t,-1)},kb=function(n,t,e){return bb(n,e,t,1)},Ob=function(n,t,e){return yb(n,t,e,-1)},Tb=function(n,t,e){return yb(n,t,e,1)},Db=function(n,t,e){return xb(n,e,t,-1)},_b=function(n,t,e){return xb(n,e,t,1)},Ab=[De("selectors",[ye("row"),ye("cell")]),Le("cycles",!0),Le("previousSelector",w.none),Le("execute",gh)],Eb=function(n,t,e){var r=t.previousSelector(n).orThunk((function(){var e=t.selectors;return gs(n.element,e.cell)}));r.each((function(e){t.focusManager.set(n,e)}))},Rb=function(n,t,e){return nf(n.element).bind((function(r){return e.execute(n,t,r)}))},Bb=function(n,t){return G(n,(function(n){return Jd(n,t.selectors.cell)}))},Mb=function(n,t){return function(e,r,o){var i=o.cycles?n:t;return ps(r,o.selectors.row).bind((function(n){var t=Jd(n,o.selectors.cell);return Ph(t,r).bind((function(t){var r=Jd(e,o.selectors.row);return Ph(r,n).bind((function(n){var e=Bb(r,o);return i(e,n,t).map((function(n){return n.cell}))}))}))}))}},Ib=Mb(Cb,Ob),Nb=Mb(wb,Tb),Pb=Mb(Sb,Db),Fb=Mb(kb,_b),Lb=i([oh(Zv(Gv),Oh(Ib,Nb)),oh(Zv(Xv),Th(Ib,Nb)),oh(Zv(qv),Ah(Pb)),oh(Zv(Kv),Eh(Fb)),oh(Zv(Wv.concat(Uv)),Rb)]),Hb=i([oh(Zv(Wv),ph)]),zb=sh(Ab,ra.init,Lb,Hb,(function(){return w.some(Eb)})),Vb=[ye("selector"),Le("execute",gh),Le("moveOnTab",!1)],Ub=function(n,t,e){return e.focusManager.get(n).bind((function(r){return e.execute(n,t,r)}))},jb=function(n,t,e){gs(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},Wb=function(n,t,e){return ob(n,e.selector,t,-1)},Gb=function(n,t,e){return ob(n,e.selector,t,1)},qb=function(n,t,e,r){return e.moveOnTab?Rh(Wb)(n,t,e,r):w.none()},Xb=function(n,t,e,r){return e.moveOnTab?Rh(Gb)(n,t,e,r):w.none()},Kb=i([oh(Zv(qv),Rh(Wb)),oh(Zv(Kv),Rh(Gb)),oh(nh([th,Zv(Vv)]),qb),oh(nh([rh,Zv(Vv)]),Xb),oh(Zv(Uv),Ub),oh(Zv(Wv),Ub)]),Yb=i([oh(Zv(Wv),ph)]),$b=sh(Vb,ra.init,Kb,Yb,(function(){return w.some(jb)})),Jb=[Hs("onSpace"),Hs("onEnter"),Hs("onShiftEnter"),Hs("onLeft"),Hs("onRight"),Hs("onTab"),Hs("onShiftTab"),Hs("onUp"),Hs("onDown"),Hs("onEscape"),Le("stopSpaceKeyup",!1),Ee("focusIn")],Qb=function(n,t,e){return[oh(Zv(Wv),e.onSpace),oh(nh([rh,Zv(Uv)]),e.onEnter),oh(nh([th,Zv(Uv)]),e.onShiftEnter),oh(nh([th,Zv(Vv)]),e.onShiftTab),oh(nh([rh,Zv(Vv)]),e.onTab),oh(Zv(qv),e.onUp),oh(Zv(Kv),e.onDown),oh(Zv(Gv),e.onLeft),oh(Zv(Xv),e.onRight),oh(Zv(Wv),e.onSpace),oh(Zv(jv),e.onEscape)]},Zb=function(n,t,e){return e.stopSpaceKeyup?[oh(Zv(Wv),ph)]:[]},ny=sh(Jb,ra.init,Qb,Zb,(function(n){return n.focusIn})),ty=fh.schema(),ey=dh.schema(),ry=pb.schema(),oy=rb.schema(),iy=zb.schema(),uy=xh.schema(),ay=$b.schema(),cy=ny.schema(),sy=Object.freeze({__proto__:null,acyclic:ty,cyclic:ey,flow:ry,flatgrid:oy,matrix:iy,execution:uy,menu:ay,special:cy}),ly=function(n){return Un(n,"setGridSize")},fy=Wl({branchKey:"mode",branches:sy,name:"keying",active:{events:function(n,t){var e=n.handler;return e.toEvents(n,t)}},apis:{focusIn:function(n,t,e){t.sendFocusIn(t).fold((function(){n.getSystem().triggerFocus(n.element,n.element)}),(function(r){r(n,t,e)}))},setGridSize:function(n,t,e,r,o){ly(e)?e.setGridSize(r,o):console.error("Layout does not support setGridSize")}},state:Sh}),dy=function(n,t,e,r){tf((function(){var t=G(r,n.getSystem().build);Lm(n,t)}),n.element)},my=function(n,t,e,r){var o=n.getSystem().build(r);zm(n,o,e)},gy=function(n,t,e,r){my(n,t,fu,r)},py=function(n,t,e,r){my(n,t,lu,r)},vy=function(n,t,e,r){var o=hy(n),i=Z(o,(function(n){return oo(r.element,n.element)}));i.each(Um)},hy=function(n,t){return n.components()},by=function(n,t,e,r,o){var i=hy(n);return w.from(i[r]).map((function(i){return vy(n,t,e,i),o.each((function(e){my(n,t,(function(n,t){du(n,t,r)}),e)})),i}))},yy=function(n,t,e,r,o){var i=hy(n);return nn(i,r).bind((function(r){return by(n,t,e,r,o)}))},xy=Object.freeze({__proto__:null,append:gy,prepend:py,remove:vy,replaceAt:by,replaceBy:yy,set:dy,contents:hy}),wy=Ul({fields:[],name:"replacing",apis:xy}),Cy=function(n,t){var e=vi(t);return Ul({fields:[ye("enabled")],name:n,active:{events:i(e)}})},Sy=function(n,t){var e=Cy(n,t);return{key:n,value:{config:{},me:e,configAsRaw:i({}),initialConfig:{},state:ra}}},ky=function(n,t){t.ignore||($l(n.element),t.onFocus(n))},Oy=function(n,t){t.ignore||Jl(n.element)},Ty=function(n){return Ql(n.element)},Dy=Object.freeze({__proto__:null,focus:ky,blur:Oy,isFocused:Ty}),_y=function(n,t){var e=t.ignore?{}:{attributes:{tabindex:"-1"}};return sa(e)},Ay=function(n){return vi([xi(Ho(),(function(t,e){ky(t,n),e.stop()}))].concat(n.stopMousedown?[xi(So(),(function(n,t){t.event.prevent()}))]:[]))},Ey=Object.freeze({__proto__:null,exhibit:_y,events:Ay}),Ry=[Ls("onFocus"),Le("stopMousedown",!1),Le("ignore",!1)],By=Ul({fields:Ry,name:"focusing",active:Ey,apis:Dy}),My=function(n){var t=function(){var t=Ye(n),e=function(){return t.get()},r=function(n){return t.set(n)},o=function(){return t.set(n)},i=function(){return t.get()};return{get:e,set:r,clear:o,readState:i}};return{init:t}},Iy=function(n,t,e){var r=t.aria;r.update(n,r,e.get())},Ny=function(n,t,e){t.toggleClass.each((function(t){e.get()?Fa(n.element,t):Ha(n.element,t)}))},Py=function(n,t,e){Hy(n,t,e,!e.get())},Fy=function(n,t,e){e.set(!0),Ny(n,t,e),Iy(n,t,e)},Ly=function(n,t,e){e.set(!1),Ny(n,t,e),Iy(n,t,e)},Hy=function(n,t,e,r){var o=r?Fy:Ly;o(n,t,e)},zy=function(n,t,e){return e.get()},Vy=function(n,t,e){Hy(n,t,e,t.selected)},Uy=Object.freeze({__proto__:null,onLoad:Vy,toggle:Py,isOn:zy,on:Fy,off:Ly,set:Hy}),jy=function(){return sa({})},Wy=function(n,t){var e=Ml(n,t,Py),r=Il(n,t,Vy);return vi(tn([n.toggleOnExecute?[e]:[],[r]]))},Gy=Object.freeze({__proto__:null,exhibit:jy,events:Wy}),qy=function(n,t,e){Su(n.element,"aria-pressed",e),t.syncWithExpanded&&Yy(n,t,e)},Xy=function(n,t,e){Su(n.element,"aria-selected",e)},Ky=function(n,t,e){Su(n.element,"aria-checked",e)},Yy=function(n,t,e){Su(n.element,"aria-expanded",e)},$y=[Le("selected",!1),Ee("toggleClass"),Le("toggleOnExecute",!0),He("aria",{mode:"none"},ce("mode",{pressed:[Le("syncWithExpanded",!1),Us("update",qy)],checked:[Us("update",Ky)],expanded:[Us("update",Yy)],selected:[Us("update",Xy)],none:[Us("update",t)]}))],Jy=Ul({fields:$y,name:"toggling",active:Gy,apis:Uy,state:My(!1)}),Qy=function(){var n=function(n,t){t.stop(),di(n)};return[xi(Io(),n),xi(Go(),n),Di(yo()),Di(So())]},Zy=function(n){var t=function(n){return Mi((function(t,e){n(t),e.stop()}))};return vi(tn([n.map(t).toArray(),Qy()]))},nx="alloy.item-hover",tx="alloy.item-focus",ex=function(n){(nf(n.element).isNone()||By.isFocused(n))&&(By.isFocused(n)||By.focus(n),fi(n,nx,{item:n}))},rx=function(n){fi(n,tx,{item:n})},ox=i(nx),ix=i(tx),ux=function(n){return{dom:n.dom,domModification:m(m({},n.domModification),{attributes:m(m(m({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Zg.augment(n.itemBehaviours,[n.toggling.fold(Jy.revoke,(function(n){return Jy.config(m({aria:{mode:"checked"}},n))})),By.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(n){rx(n)}}),fy.config({mode:"execution"}),Yg.config({store:{mode:"memory",initialValue:n.data}}),Sy("item-type-events",p(Qy(),[xi(Do(),ex),xi(Wo(),By.focus)]))]),components:n.components,eventOrder:n.eventOrder}},ax=[ye("data"),ye("components"),ye("dom"),Le("hasSubmenu",!1),Ee("toggling"),Zg.field("itemBehaviours",[Jy,By,fy,Yg]),Le("ignoreFocus",!1),Le("domModification",{}),Us("builder",ux),Le("eventOrder",{})],cx=function(n){return{dom:n.dom,components:n.components,events:vi([_i(Wo())])}},sx=[ye("dom"),ye("components"),Us("builder",cx)],lx=i("item-widget"),fx=i([_p({name:"widget",overrides:function(n){return{behaviours:zl([Yg.config({store:{mode:"manual",getValue:function(t){return n.data},setValue:t}})])}}})]),dx=function(n){var t=Vp(lx(),n,fx()),e=Up(lx(),n,t.internals()),r=function(t){return jp(t,n,"widget").map((function(n){return fy.focusIn(n),n}))},o=function(t,e){return pv(e.event.target)?w.none():function(){return n.autofocus?(e.setSource(t.element),w.none()):w.none()}()};return{dom:n.dom,components:e,domModification:n.domModification,events:vi([Mi((function(n,t){r(n).each((function(n){t.stop()}))})),xi(Do(),ex),xi(Wo(),(function(t,e){n.autofocus?r(t):By.focus(t)}))]),behaviours:Zg.augment(n.widgetBehaviours,[Yg.config({store:{mode:"memory",initialValue:n.data}}),By.config({ignore:n.ignoreFocus,onFocus:function(n){rx(n)}}),fy.config({mode:"special",focusIn:n.autofocus?function(n){r(n)}:Gl(),onLeft:o,onRight:o,onEscape:function(t,e){return By.isFocused(t)||n.autofocus?n.autofocus?(e.setSource(t.element),w.none()):w.none():(By.focus(t),w.some(!0))}})])}},mx=[ye("uid"),ye("data"),ye("components"),ye("dom"),Le("autofocus",!1),Le("ignoreFocus",!1),Zg.field("widgetBehaviours",[Yg,By,fy]),Le("domModification",{}),$p(fx()),Us("builder",dx)],gx=ce("type",{widget:mx,item:ax,separator:sx}),px=function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}},vx=function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}},hx=function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}},bx=i([Rp({factory:{sketch:function(n){var t=ie("menu.spec item",gx,n);return t.builder(t)}},name:"items",unit:"item",defaults:function(n,t){return t.hasOwnProperty("uid")?t:m(m({},t),{uid:Gu("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),yx=i([ye("value"),ye("items"),ye("dom"),ye("components"),Le("eventOrder",{}),$g("menuBehaviours",[Hv,Yg,yv,fy]),He("movement",{mode:"menu",moveOnTab:!0},ce("mode",{grid:[Ws(),Us("config",px)],matrix:[Us("config",vx),ye("rowSelector")],menu:[Le("moveOnTab",!0),Us("config",hx)]})),Is(),Le("fakeFocus",!1),Le("focusManager",ah()),Ls("onHighlight")]),xx=i("alloy.menu-focus"),wx=function(n,t,e,r){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Qg(n.menuBehaviours,[Hv.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),Yg.config({store:{mode:"memory",initialValue:n.value}}),yv.config({find:w.some}),fy.config(n.movement.config(n,n.movement))]),events:vi([xi(ix(),(function(n,t){var e=t.event;n.getSystem().getByDom(e.target).each((function(e){Hv.highlight(n,e),t.stop(),fi(n,xx(),{menu:n,item:e})}))})),xi(ox(),(function(n,t){var e=t.event.item;Hv.highlight(n,e)}))]),components:t,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}},Cx=cv({name:"Menu",configFields:yx(),partFields:bx(),factory:wx}),Sx=function(n){return Mn(n,(function(n,t){return{k:n,v:t}}))},kx=function(n,t,e,r){return zn(e,r).bind((function(r){return zn(n,r).bind((function(r){var o=kx(n,t,e,r);return w.some([r].concat(o))}))})).getOr([])},Ox=function(n,t){var e={};Rn(n,(function(n,t){q(n,(function(n){e[n]=t}))}));var r=t,o=Sx(t),i=Bn(o,(function(n,t){return[t].concat(kx(e,r,o,t))}));return Bn(e,(function(n){return zn(i,n).getOr([n])}))},Tx=function(){var n=Ye({}),t=Ye({}),e=Ye({}),r=Ye(w.none()),o=Ye({}),i=function(){n.set({}),t.set({}),e.set({}),r.set(w.none())},u=function(){return r.get().isNone()},a=function(n,e){var r;t.set(m(m({},t.get()),(r={},r[n]={type:"prepared",menu:e},r)))},c=function(i,u,a,c){r.set(w.some(i)),n.set(a),t.set(u),o.set(c);var s=Ox(c,a);e.set(s)},s=function(t){return Ln(n.get(),(function(n,e){return n===t}))},l=function(n,t,e){return v(n).bind((function(r){return s(n).bind((function(n){return t(n).map((function(n){return{triggeredMenu:r,triggeringItem:n,triggeringPath:e}}))}))}))},f=function(n,t){var o=Y(b(n).toArray(),(function(n){return v(n).isSome()}));return zn(e.get(),n).bind((function(n){var e=on(o.concat(n)),i=en(e,(function(n,o){return l(n,t,e.slice(0,o+1)).fold((function(){return r.get().is(n)?[]:[w.none()]}),(function(n){return[w.some(n)]}))}));return lv(i)}))},d=function(t){return zn(n.get(),t).map((function(n){var r=zn(e.get(),t).getOr([]);return[n].concat(r)}))},g=function(n){return zn(e.get(),n).bind((function(n){return n.length>1?w.some(n.slice(1)):w.none()}))},p=function(n){return zn(e.get(),n)},v=function(n){return h(n).bind(Dx)},h=function(n){return zn(t.get(),n)},b=function(t){return zn(n.get(),t)},y=function(n){var t=o.get();return un(An(t),n)},x=function(){return r.get().bind(v)},C=function(){return t.get()};return{setMenuBuilt:a,setContents:c,expand:d,refresh:p,collapse:g,lookupMenu:h,lookupItem:b,otherMenus:y,getPrimary:x,getMenus:C,clear:i,isClear:u,getTriggeringPath:f}},Dx=function(n){return"prepared"===n.type?w.some(n.menu):w.none()},_x={init:Tx,extractPreparedMenu:Dx},Ax=function(n,e){var r,o=Ye(w.none()),i=function(t,e,r){return Bn(r,(function(r,o){var i=function(){return Cx.sketch(m(m({},r),{value:o,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:n.onHighlight,focusManager:n.fakeFocus?ch():ah()}))};return o===e?{type:"prepared",menu:t.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))},u=_x.init(),a=function(t){var e=i(t,n.data.primary,n.data.menus),r=l();return u.setContents(n.data.primary,e,n.data.expansions,r),u.getPrimary()},c=function(n){return Yg.getValue(n).value},s=function(n,t,e){return mn(t,(function(n){if(!n.getSystem().isConnected())return w.none();var t=Hv.getCandidates(n);return Z(t,(function(n){return c(n)===e}))}))},l=function(t){return Bn(n.data.menus,(function(n,t){return en(n.items,(function(n){return"separator"===n.type?[]:[n.data.value]}))}))},d=function(n,t){Hv.highlight(n,t),Hv.getHighlighted(t).orThunk((function(){return Hv.getFirst(t)})).each((function(t){mi(n,t.element,Wo())}))},g=function(n,t){return sv(G(t,(function(t){return n.lookupMenu(t).bind((function(n){return"prepared"===n.type?w.some(n.menu):w.none()}))})))},p=function(t,e,r){var o=g(e,e.otherMenus(r));q(o,(function(e){Ua(e.element,[n.markers.backgroundMenu]),n.stayInDom||wy.remove(t,e)}))},v=function(t){return o.get().getOrThunk((function(){var e={},r=Jd(t.element,"."+n.markers.item),i=Y(r,(function(n){return"true"===Ou(n,"aria-haspopup")}));return q(i,(function(n){t.getSystem().getByDom(n).each((function(n){var t=c(n);e[t]=n}))})),o.set(w.some(e)),e}))},h=function(n,t){var e=v(n);Rn(e,(function(n,e){var r=V(t,e);Su(n.element,"aria-expanded",r)}))},b=function(t,e,r){return w.from(r[0]).bind((function(o){return e.lookupMenu(o).bind((function(o){if("notbuilt"===o.type)return w.none();var i=o.menu,u=g(e,r.slice(1));return q(u,(function(t){Fa(t.element,n.markers.backgroundMenu)})),Wa(i.element)||wy.append(t,xc(i)),Ua(i.element,[n.markers.backgroundMenu]),d(t,i),p(t,e,r),w.some(i)}))}))};(function(n){n[n["HighlightSubmenu"]=0]="HighlightSubmenu",n[n["HighlightParent"]=1]="HighlightParent"})(r||(r={}));var y=function(n,t,e){if("notbuilt"===e.type){var r=n.getSystem().build(e.nbMenu());return u.setMenuBuilt(t,r),r}return e.menu},x=function(t,e,o){void 0===o&&(o=r.HighlightSubmenu);var i=c(e);return u.expand(i).bind((function(i){return h(t,i),w.from(i[0]).bind((function(a){return u.lookupMenu(a).bind((function(c){var s=y(t,a,c);return Wa(s.element)||wy.append(t,xc(s)),n.onOpenSubmenu(t,e,s,on(i)),o===r.HighlightSubmenu?(Hv.highlightFirst(s),b(t,u,i)):(Hv.dehighlightAll(s),w.some(e))}))}))}))},C=function(t,e){var r=c(e);return u.collapse(r).bind((function(r){return h(t,r),b(t,u,r).map((function(r){return n.onCollapseMenu(t,e,r),r}))}))},S=function(n,t){var e=c(t);return u.refresh(e).bind((function(t){return h(n,t),b(n,u,t)}))},k=function(n,t){return pv(t.element)?w.none():x(n,t,r.HighlightSubmenu)},O=function(n,t){return pv(t.element)?w.none():C(n,t)},T=function(t,e){return C(t,e).orThunk((function(){return n.onEscape(t,e).map((function(){return t}))}))},D=function(t){return function(e,r){return ps(r.getSource(),"."+n.markers.item).bind((function(n){return e.getSystem().getByDom(n).toOptional().bind((function(n){return t(e,n).map(f)}))}))}},_=vi([xi(xx(),(function(n,t){var e=t.event.item;u.lookupItem(c(e)).each((function(){var e=t.event.menu;Hv.highlight(n,e);var r=c(t.event.item);u.refresh(r).each((function(t){return p(n,u,t)}))}))})),Mi((function(e,o){var i=o.event.target;e.getSystem().getByDom(i).each((function(o){var i=c(o);0===i.indexOf("collapse-item")&&C(e,o),x(e,o,r.HighlightSubmenu).fold((function(){n.onExecute(e,o)}),t)}))})),Ei((function(t,e){a(t).each((function(e){wy.append(t,xc(e)),n.onOpenMenu(t,e),n.highlightImmediately&&d(t,e)}))}))].concat(n.navigateOnHover?[xi(ox(),(function(t,e){var o=e.event.item;S(t,o),x(t,o,r.HighlightParent),n.onHover(t,o)}))]:[])),A=function(n){return Hv.getHighlighted(n).bind(Hv.getHighlighted)},E=function(n){A(n).each((function(t){C(n,t)}))},R=function(n){u.getPrimary().each((function(t){d(n,t)}))},B=function(n){return w.from(n.components()[0]).filter((function(n){return"menu"===Ou(n.element,"role")}))},M=function(t){var e=u.getPrimary().bind((function(n){return A(t).bind((function(n){var e=c(n),r=Hn(u.getMenus()),o=sv(G(r,_x.extractPreparedMenu));return u.getTriggeringPath(e,(function(n){return s(t,o,n)}))})).map((function(t){return{primary:n,triggeringPath:t}}))}));e.fold((function(){B(t).each((function(e){n.onRepositionMenu(t,e,[])}))}),(function(e){var r=e.primary,o=e.triggeringPath;n.onRepositionMenu(t,r,o)}))},I={collapseMenu:E,highlightPrimary:R,repositionMenus:M};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Qg(n.tmenuBehaviours,[fy.config({mode:"special",onRight:D(k),onLeft:D(O),onEscape:D(T),focusIn:function(n,t){u.getPrimary().each((function(t){mi(n,t.element,Wo())}))}}),Hv.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),yv.config({find:function(n){return Hv.getHighlighted(n)}}),wy.config({})]),eventOrder:n.eventOrder,apis:I,events:_}},Ex=i("collapse-item"),Rx=function(n,t,e){return{primary:n,menus:t,expansions:e}},Bx=function(n,t){return{primary:n,menus:lt(n,t),expansions:{}}},Mx=function(n){return{value:Fu(Ex()),meta:{text:n}}},Ix=av({name:"TieredMenu",configFields:[Vs("onExecute"),Vs("onEscape"),zs("onOpenMenu"),zs("onOpenSubmenu"),Ls("onRepositionMenu"),Ls("onCollapseMenu"),Le("highlightImmediately",!0),De("data",[ye("primary"),ye("menus"),ye("expansions")]),Le("fakeFocus",!1),Ls("onHighlight"),Ls("onHover"),Ns(),ye("dom"),Le("navigateOnHover",!0),Le("stayInDom",!1),$g("tmenuBehaviours",[fy,Hv,yv,wy]),Le("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:Ax,extraApis:{tieredData:Rx,singleData:Bx,collapseItem:Mx}}),Nx=function(n,t,e,r,o){var i=function(){return n.lazySink(t)},u="horizontal"===r.type?{layouts:{onLtr:function(){return Dl()},onRtl:function(){return _l()}}}:{},a=function(n){return 2===n.length},c=function(n){return a(n)?u:{}};return Ix.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:function(){return mg.close(t),n.onEscape.map((function(n){return n(t)})),w.some(!0)},onExecute:function(){return w.some(!0)},onOpenMenu:function(n,t){Mm.positionWithinBounds(i().getOrDie(),e,t,o())},onOpenSubmenu:function(n,t,e,r){var o=i().getOrDie();Mm.position(o,m({anchor:"submenu",item:t},c(r)),e)},onRepositionMenu:function(n,t,r){var u=i().getOrDie();Mm.positionWithinBounds(u,e,t,o()),q(r,(function(n){var t=c(n.triggeringPath);Mm.position(u,m({anchor:"submenu",item:n.triggeringItem},t),n.triggeredMenu)}))}})},Px=function(n,t){var e=function(t,e){var r=n.getRelated(t);return r.exists((function(n){return ys(n,e)}))},r=function(n,t){mg.setContent(n,t)},o=function(n,t,e){i(n,t,e,w.none())},i=function(n,t,e,r){u(n,t,e,(function(){return r.map((function(n){return os(n)}))}))},u=function(t,e,r,o){var i=n.lazySink(t).getOrDie();mg.openWhileCloaked(t,r,(function(){return Mm.positionWithinBounds(i,e,t,o())})),Yg.setValue(t,w.some({mode:"position",anchor:e,getBounds:o}))},a=function(n,t,e){c(n,t,e,(function(){return w.none()}))},c=function(t,e,r,o){var i=Nx(n,t,e,r,o);mg.open(t,i),Yg.setValue(t,w.some({mode:"menu",menu:i}))},s=function(n){mg.isOpen(n)&&(Yg.setValue(n,w.none()),mg.close(n))},l=function(n){return mg.getState(n)},f=function(t){mg.isOpen(t)&&Yg.getValue(t).each((function(e){switch(e.mode){case"menu":mg.getState(t).each((function(n){Ix.repositionMenus(n)}));break;case"position":var r=n.lazySink(t).getOrDie();Mm.positionWithinBounds(r,e.anchor,t,e.getBounds());break}}))},d={setContent:r,showAt:o,showWithin:i,showWithinBounds:u,showMenuAt:a,showMenuWithinBounds:c,hide:s,getContent:l,reposition:f,isOpen:mg.isOpen};return{uid:n.uid,dom:n.dom,behaviours:Qg(n.inlineBehaviours,[mg.config({isPartOf:function(n,t,r){return ys(t,r)||e(n,r)},getAttachPoint:function(t){return n.lazySink(t).getOrDie()},onOpen:function(t){n.onShow(t)},onClose:function(t){n.onHide(t)}}),Yg.config({store:{mode:"memory",initialValue:w.none()}}),ql.config({channels:m(m({},bg(m({isExtraPart:t.isExtraPart},n.fireDismissalEventInstead.map((function(n){return{fireEventInstead:{event:n.event}}})).getOr({})))),xg(m(m({},n.fireRepositionEventInstead.map((function(n){return{fireEventInstead:{event:n.event}}})).getOr({})),{doReposition:f})))})]),eventOrder:n.eventOrder,apis:d}},Fx=av({name:"InlineView",configFields:[ye("lazySink"),Ls("onShow"),Ls("onHide"),Ie("onEscape"),$g("inlineBehaviours",[mg,Yg,ql]),Pe("fireDismissalEventInstead",[Le("event",ei())]),Pe("fireRepositionEventInstead",[Le("event",ri())]),Le("getRelated",w.none),Le("isExtraPart",l),Le("eventOrder",w.none)],factory:Px,apis:{showAt:function(n,t,e,r){n.showAt(t,e,r)},showWithin:function(n,t,e,r,o){n.showWithin(t,e,r,o)},showWithinBounds:function(n,t,e,r,o){n.showWithinBounds(t,e,r,o)},showMenuAt:function(n,t,e,r){n.showMenuAt(t,e,r)},showMenuWithinBounds:function(n,t,e,r,o){n.showMenuWithinBounds(t,e,r,o)},hide:function(n,t){n.hide(t)},isOpen:function(n,t){return n.isOpen(t)},getContent:function(n,t){return n.getContent(t)},setContent:function(n,t,e){n.setContent(t,e)},reposition:function(n,t){n.reposition(t)}}}),Lx=function(n){return n.x},Hx=function(n,t){return n.x+n.width/2-t.width/2},zx=function(n,t){return n.x+n.width-t.width},Vx=function(n){return n.y},Ux=function(n,t){return n.y+n.height-t.height},jx=function(n,t,e){return Gs(zx(n,t),Ux(n,t),e.innerSoutheast(),Zs(),il(n,{right:0,bottom:3}),"layout-inner-se")},Wx=function(n,t,e){return Gs(Lx(n),Ux(n,t),e.innerSouthwest(),Qs(),il(n,{left:1,bottom:3}),"layout-inner-sw")},Gx=function(n,t,e){return Gs(zx(n,t),Vx(n),e.innerNortheast(),Js(),il(n,{right:0,top:2}),"layout-inner-ne")},qx=function(n,t,e){return Gs(Lx(n),Vx(n),e.innerNorthwest(),$s(),il(n,{left:1,top:2}),"layout-inner-nw")},Xx=function(n,t,e){return Gs(Hx(n,t),Vx(n),e.innerNorth(),nl(),il(n,{top:2}),"layout-inner-n")},Kx=function(n,t,e){return Gs(Hx(n,t),Ux(n,t),e.innerSouth(),tl(),il(n,{bottom:3}),"layout-inner-s")},Yx=tinymce.util.Tools.resolve("tinymce.util.Delay"),$x=function(n){var t=Zy(n.action),e=n.dom.tag,r=function(t){return zn(n.dom,"attributes").bind((function(n){return zn(n,t)}))},o=function(){if("button"===e){var n=r("type").getOr("button"),t=r("role").map((function(n){return{role:n}})).getOr({});return m({type:n},t)}var o=r("role").getOr("button");return{role:o}};return{uid:n.uid,dom:n.dom,components:n.components,events:t,behaviours:Zg.augment(n.buttonBehaviours,[By.config({}),fy.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:o()},eventOrder:n.eventOrder}},Jx=av({name:"Button",factory:$x,configFields:[Le("uid",void 0),ye("dom"),Le("components",[]),Zg.field("buttonBehaviours",[By,fy]),Ee("action"),Ee("role"),Le("eventOrder",{})]}),Qx=function(n){var t=ov(n)&&Un(n,"uid")?n.uid:Gu("memento"),e=function(n){return n.getSystem().getByUid(t).getOrDie()},r=function(n){return n.getSystem().getByUid(t).toOptional()},o=function(){return m(m({},n),{uid:t})};return{get:e,getOpt:r,asSpec:o}},Zx=function(n){return w.from(n()["temporary-placeholder"]).getOr("!not found!")},nw=function(n,t){return w.from(t()[n.toLowerCase()]).getOrThunk((function(){return Zx(t)}))},tw=function(n,t,e){return w.from(t()[n.toLowerCase()]).or(e).getOrThunk((function(){return Zx(t)}))},ew=function(n,t){return mn(n,(function(n){return w.from(t()[n.toLowerCase()])})).getOrThunk((function(){return Zx(t)}))},rw={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ow=function(n){var t=Qx({dom:{tag:"p",innerHtml:n.translationProvider(n.text)},behaviours:zl([wy.config({})])}),e=function(n){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+n+"%"}}}},r=function(n){return{dom:{tag:"div",classes:["tox-text"],innerHtml:n+"%"}}},o=Qx({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},r(0)],behaviours:zl([wy.config({})])}),i=function(n,t){n.getSystem().isConnected()&&o.getOpt(n).each((function(n){wy.set(n,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(t)]},r(t)])}))},u=function(n,e){if(n.getSystem().isConnected()){var r=t.get(n);wy.set(r,[vc(e)])}},a={updateProgress:i,updateText:u},c=tn([n.icon.toArray(),n.level.toArray(),n.level.bind((function(n){return w.from(rw[n])})).toArray()]),s=Qx(Jx.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:nw("close",n.iconProvider),attributes:{"aria-label":n.translationProvider("Close")}}}],action:function(t){n.onAction(t)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:ew(c,n.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:zl([wy.config({})])}];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map((function(n){return["tox-notification","tox-notification--in","tox-notification--"+n]})).getOr(["tox-notification","tox-notification--in"])},behaviours:zl([By.config({}),Sy("notification-events",[xi(_o(),(function(n){s.getOpt(n).each(By.focus)}))])]),components:l.concat(n.progress?[o.asSpec()]:[]).concat(n.closeButton?[s.asSpec()]:[]),apis:a}},iw=av({name:"Notification",factory:ow,configFields:[Ee("level"),ye("progress"),ye("icon"),ye("onAction"),ye("text"),ye("iconProvider"),ye("translationProvider"),je("closeButton",!0)],apis:{updateProgress:function(n,t,e){n.updateProgress(t,e)},updateText:function(n,t,e){n.updateText(t,e)}}});function uw(n,t,e){var r=t.backstage,o=function(n){switch(n){case"bc-bc":return Kx;case"tc-tc":return Xx;case"tc-bc":return yl;case"bc-tc":default:return xl}},i=function(n){q(n,(function(n){return n.moveTo(0,0)}))},u=function(n){n.length>0&&(ln(n).each((function(n){return n.moveRel(null,"banner")})),q(n,(function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")})))},a=function(n){i(n),u(n)},c=function(n,i){var u=!n.closeButton&&n.timeout&&(n.timeout>0||n.timeout<0),a=function(){i(),Fx.hide(s)},c=yc(iw.sketch({text:n.text,level:V(["success","error","warning","warn","info"],n.type)?n.type:void 0,progress:!0===n.progressBar,icon:w.from(n.icon),closeButton:!u,onAction:a,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),s=yc(Fx.sketch(m({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:t.backstage.shared.getSink,fireDismissalEventInstead:{}},r.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return e.add(s),n.timeout>0&&Yx.setTimeout((function(){a()}),n.timeout),{close:a,moveTo:function(n,t){Fx.showAt(s,{anchor:"makeshift",x:n,y:t},xc(c))},moveRel:function(n,e){if("banner"!==e){var r=o(e),i={anchor:"node",root:Ga(),node:w.some(tr.fromDom(n)),layouts:{onRtl:function(){return[r]},onLtr:function(){return[r]}}};Fx.showAt(s,i,xc(c))}else Fx.showAt(s,t.backstage.shared.anchors.banner(),xc(c))},text:function(n){iw.updateText(c,n)},settings:n,getEl:function(){return c.element.dom},progressBar:{value:function(n){iw.updateProgress(c,n)}}}},s=function(n){n.close()},l=function(n){return n.settings};return{open:c,close:s,reposition:a,getArgs:l}}var aw,cw=function(n,t){var e=null,r=function(){null!==e&&(clearTimeout(e),e=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null===e&&(e=setTimeout((function(){n.apply(null,r),e=null}),t))};return{cancel:r,throttle:o}},sw=function(n,t){var e=null,r=function(){null!==e&&(clearTimeout(e),e=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==e&&clearTimeout(e),e=setTimeout((function(){n.apply(null,r),e=null}),t)};return{cancel:r,throttle:o}},lw=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),fw=function(n,t){return n.isBlock(t)||V(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===n.getContentEditable(t)},dw=function(n,t,e,r,o){var i=lw(n,(function(t){return fw(n,t)}));return w.from(i.backwards(t,e,r,o))},mw="[data-mce-autocompleter]",gw=function(n,t){return pw(tr.fromDom(n.selection.getNode())).getOrThunk((function(){var e=tr.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());return fu(e,tr.fromDom(t.extractContents())),t.insertNode(e.dom),Gi(e).each((function(n){return n.dom.normalize()})),Yd(e).map((function(t){n.selection.setCursorLocation(t.dom,Gd(t))})),e}))},pw=function(n){return ps(n,mw)},vw=function(n){return n.collapsed&&3===n.startContainer.nodeType},hw=function(n){return n.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},bw=function(n){return""!==n&&-1!==" \f\n\r\t\v".indexOf(n)},yw=function(n,t){return n.substring(t.length)},xw=function(n,t,e){var r;for(r=t-1;r>=0;r--){var o=n.charAt(r);if(bw(o))return w.none();if(o===e)break}return w.some(r)},ww=function(n,t,e,r){if(void 0===r&&(r=0),!vw(t))return w.none();var o=function(n,t,r){return xw(r,t,e).getOr(t)},i=n.getParent(t.startContainer,n.isBlock)||n.getRoot();return dw(n,t.startContainer,t.startOffset,o,i).bind((function(n){var o=t.cloneRange();if(o.setStart(n.container,n.offset),o.setEnd(t.endContainer,t.endOffset),o.collapsed)return w.none();var i=hw(o),u=i.lastIndexOf(e);return 0!==u||yw(i,e).length<r?w.none():w.some({text:yw(i,e),range:o,triggerChar:e})}))},Cw=function(n,t,e,r){return void 0===r&&(r=0),pw(tr.fromDom(t.startContainer)).fold((function(){return ww(n,t,e,r)}),(function(t){var r=n.createRng();r.selectNode(t.dom);var o=hw(r);return w.some({range:r,text:yw(o,e),triggerChar:e})}))},Sw=function(n,t){t.on("keypress compositionend",n.onKeypress.throttle),t.on("remove",n.onKeypress.cancel);var e=function(n,t){fi(n,Eo(),{raw:t})};t.on("keydown",(function(t){var r=function(){return n.getView().bind(Hv.getHighlighted)};8===t.which&&n.onKeypress.throttle(t),n.isActive()&&(27===t.which&&n.cancelIfNecessary(),n.isMenuOpen()?13===t.which?(r().each(di),t.preventDefault()):40===t.which?(r().fold((function(){n.getView().each(Hv.highlightFirst)}),(function(n){e(n,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||r().each((function(n){e(n,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==t.which&&38!==t.which&&40!==t.which||n.cancelIfNecessary())})),t.on("NodeChange",(function(t){n.isActive()&&!n.isProcessingAction()&&pw(tr.fromDom(t.element)).isNone()&&n.cancelIfNecessary()}))},kw={setup:Sw},Ow=tinymce.util.Tools.resolve("tinymce.util.Promise"),Tw=function(n,t){return{container:n,offset:t}},Dw=function(n){return n.nodeType===Zr},_w=function(n){return n.nodeType===Qr},Aw=function(n){if(Dw(n))return Tw(n,n.data.length);var t=n.childNodes;return t.length>0?Aw(t[t.length-1]):Tw(n,t.length)},Ew=function(n,t){var e=n.childNodes;return e.length>0&&t<e.length?Ew(e[t],0):e.length>0&&_w(n)&&e.length===t?Aw(e[e.length-1]):Tw(n,t)},Rw=function(n,t){return dw(n,t.container,t.offset,(function(n,t){return 0===t?-1:t}),n.getRoot()).filter((function(n){var t=n.container.data.charAt(n.offset-1);return!bw(t)})).isSome()},Bw=function(n){return function(t){var e=Ew(t.startContainer,t.startOffset);return!Rw(n,e)}},Mw=function(n,t,e){return mn(e.triggerChars,(function(e){return Cw(n,t,e)}))},Iw=function(n,t){var e=t(),r=n.selection.getRng();return Mw(n.dom,r,e).bind((function(e){return Nw(n,t,e)}))},Nw=function(n,t,e,r){void 0===r&&(r={});var o=t(),i=n.selection.getRng(),u=i.startContainer.nodeValue,a=Y(o.lookupByChar(e.triggerChar),(function(t){return e.text.length>=t.minChars&&t.matches.getOrThunk((function(){return Bw(n.dom)}))(e.range,u,e.text)}));if(0===a.length)return w.none();var c=Ow.all(G(a,(function(n){var t=n.fetch(e.text,n.maxResults,r);return t.then((function(t){return{matchText:e.text,items:t,columns:n.columns,onAction:n.onAction,highlightOn:n.highlightOn}}))})));return w.some({lookupData:c,context:e})},Pw=Ht([Ce("type"),Me("text")]),Fw=function(n){return re("separatormenuitem",Pw,n)},Lw=Ht([Le("type","autocompleteitem"),Le("active",!1),Le("disabled",!1),Le("meta",{}),Ce("value"),Me("text"),Me("icon")]),Hw=Ht([Ce("type"),Ce("ch"),ze("minChars",1),Le("columns",1),ze("maxResults",10),Ie("matches"),Oe("fetch"),Oe("onAction"),qe("highlightOn",[],me)]),zw=function(n){return re("Autocompleter.Separator",Pw,n)},Vw=function(n){return re("Autocompleter.Item",Lw,n)},Uw=function(n){return re("Autocompleter",Hw,n)},jw=[je("disabled",!1),Me("tooltip"),Me("icon"),Me("text"),We("onSetup",(function(){return t}))],Ww=Ht([Ce("type"),Oe("onAction")].concat(jw)),Gw=function(n){return re("toolbarbutton",Ww,n)},qw=[je("active",!1)].concat(jw),Xw=Ht(qw.concat([Ce("type"),Oe("onAction")])),Kw=function(n){return re("ToggleButton",Xw,n)},Yw=[We("predicate",l),Ue("scope","node",["node","editor"]),Ue("position","selection",["node","selection","line"])],$w=jw.concat([Le("type","contextformbutton"),Le("primary",!1),Oe("onAction"),Ke("original",u)]),Jw=qw.concat([Le("type","contextformbutton"),Le("primary",!1),Oe("onAction"),Ke("original",u)]),Qw=jw.concat([Le("type","contextformbutton")]),Zw=qw.concat([Le("type","contextformtogglebutton")]),nC=ce("type",{contextformbutton:$w,contextformtogglebutton:Jw}),tC=Ht([Le("type","contextform"),We("initValue",(function(){return""})),Me("label"),Ae("commands",nC),Re("launch",ce("type",{contextformbutton:Qw,contextformtogglebutton:Zw}))].concat(Yw)),eC=function(n){return re("ContextForm",tC,n)},rC=Ht([Le("type","contexttoolbar"),Ce("items")].concat(Yw)),oC=function(n){return re("ContextToolbar",rC,n)},iC=function(n){var t={};return q(n,(function(n){t[n]={}})),An(t)},uC=function(n){var t=n.ui.registry.getAll().popups,e=Bn(t,(function(n){return Uw(n).fold((function(n){throw new Error(ue(n))}),(function(n){return n}))})),r=iC(Fn(e,(function(n){return n.ch}))),o=Hn(e),i=function(n){return Y(o,(function(t){return t.ch===n}))};return{dataset:e,triggerChars:r,lookupByChar:i}};(function(n){n[n["CLOSE_ON_EXECUTE"]=0]="CLOSE_ON_EXECUTE",n[n["BUBBLE_TO_SANDBOX"]=1]="BUBBLE_TO_SANDBOX"})(aw||(aw={}));var aC,cC=aw,sC="tox-menu-nav__js",lC="tox-collection__item",fC="tox-swatch",dC={normal:sC,color:fC},mC="tox-collection__item--enabled",gC="tox-collection__group-heading",pC="tox-collection__item-icon",vC="tox-collection__item-label",hC="tox-collection__item-accessory",bC="tox-collection__item-caret",yC="tox-collection__item-checkmark",xC="tox-collection__item--active",wC="tox-collection__item-icon-rtl",CC="tox-collection__item-container",SC="tox-collection__item-container--column",kC="tox-collection__item-container--row",OC="tox-collection__item-container--align-right",TC="tox-collection__item-container--align-left",DC="tox-collection__item-container--valign-top",_C="tox-collection__item-container--valign-middle",AC="tox-collection__item-container--valign-bottom",EC=function(n){return zn(dC,n).getOr(sC)},RC=function(n){return"color"===n?"tox-swatches":"tox-menu"},BC=function(n){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:RC(n),tieredMenu:"tox-tiered-menu"}},MC=function(n){var t=BC(n);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:EC(n)}},IC=function(n,t,e){var r=BC(e);return{tag:"div",classes:tn([[r.menu,"tox-menu-"+t+"-column"],n?[r.hasIcons]:[]])}},NC=[Cx.parts.items({})],PC=function(n,t,e){var r=BC(e),o={tag:"div",classes:tn([[r.tieredMenu]])};return{dom:o,markers:MC(e)}},FC=function(n,t){return function(e){var r=W(e,t);return G(r,(function(t){return{dom:n,components:t}}))}},LC=function(n){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Cx.parts.items({preprocess:"auto"!==n?FC({tag:"div",classes:["tox-swatches__row"]},n):u})]}]}},HC=function(n){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Cx.parts.items({preprocess:FC({tag:"div",classes:["tox-collection__group"]},n)})]}},zC=function(n,t){var e=[],r=[];return q(n,(function(n,o){t(n,o)?(r.length>0&&e.push(r),r=[],Vn(n.dom,"innerHtml")&&r.push(n)):r.push(n)})),r.length>0&&e.push(r),G(e,(function(n){return{dom:{tag:"div",classes:["tox-collection__group"]},components:n}}))},VC=function(n,t,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===n?["tox-collection--list"]:["tox-collection--grid"])},components:[Cx.parts.items({preprocess:function(e){return"auto"!==n&&n>1?FC({tag:"div",classes:["tox-collection__group"]},n)(e):zC(e,(function(n,e){return"separator"===t[e].type}))}})]}},UC=function(n,t){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Cx.parts.items({preprocess:function(t){return zC(t,(function(t,e){return"separator"===n[e].type}))}})]}},jC=function(n){return U(n,(function(n){return"icon"in n&&void 0!==n.icon}))},WC=function(n){return console.error(ue(n)),console.log(n),w.none()},GC=function(n,t,e,r,o){var i=UC(e);return{value:n,dom:i.dom,components:i.components,items:e}},qC=function(n,t,e,r,o){if("color"===o){var i=LC(r);return{value:n,dom:i.dom,components:i.components,items:e}}if("normal"===o&&"auto"===r){i=VC(r,e);return{value:n,dom:i.dom,components:i.components,items:e}}if("normal"===o&&1===r){i=VC(1,e);return{value:n,dom:i.dom,components:i.components,items:e}}if("normal"===o){i=VC(r,e);return{value:n,dom:i.dom,components:i.components,items:e}}if("listpreview"===o&&"auto"!==r){i=HC(r);return{value:n,dom:i.dom,components:i.components,items:e}}return{value:n,dom:IC(t,r,o),components:NC,items:e}},XC=[Ce("type"),Ce("src"),Me("alt"),qe("classes",[],me)],KC=Ht(XC),YC=[Ce("type"),Ce("text"),Me("name"),qe("classes",["tox-collection__item-label"],me)],$C=Ht(YC),JC=Zt((function(){return ae("type",{cardimage:KC,cardtext:$C,cardcontainer:QC})})),QC=Ht([Ce("type"),Ve("direction","horizontal"),Ve("align","left"),Ve("valign","middle"),Ae("items",JC)]),ZC=[je("disabled",!1),Me("text"),Me("shortcut"),Xt("value","value",rt((function(){return Fu("menuitem-value")})),le()),Le("meta",{})],nS=Ht([Ce("type"),Me("label"),Ae("items",JC),We("onSetup",(function(){return t})),We("onAction",t)].concat(ZC)),tS=function(n){return re("cardmenuitem",nS,n)},eS=Ht([Ce("type"),je("active",!1),Me("icon")].concat(ZC)),rS=function(n){return re("choicemenuitem",eS,n)},oS=["inserttable","colorswatch"],iS=Ht([Ce("type"),Se("fancytype",oS),We("onAction",t)]),uS=function(n){return re("fancymenuitem",iS,n)},aS=Ht([Ce("type"),We("onSetup",(function(){return t})),We("onAction",t),Me("icon")].concat(ZC)),cS=function(n){return re("menuitem",aS,n)},sS=Ht([Ce("type"),Oe("getSubmenuItems"),We("onSetup",(function(){return t})),Me("icon")].concat(ZC)),lS=function(n){return re("nestedmenuitem",sS,n)},fS=Ht([Ce("type"),Me("icon"),je("active",!1),We("onSetup",(function(){return t})),Oe("onAction")].concat(ZC)),dS=function(n){return re("togglemenuitem",fS,n)},mS=function(n,t,e){var r=Jd(n.element,"."+e);if(r.length>0){var o=nn(r,(function(n){var e=n.dom.getBoundingClientRect().top,o=r[0].dom.getBoundingClientRect().top;return Math.abs(e-o)>t})).getOr(r.length);return w.some({numColumns:o,numRows:Math.ceil(r.length/o)})}return w.none()},gS=function(n,t){return zl([Sy(n,t)])},pS=function(n){return gS(Fu("unnamed-events"),n)},vS={namedEvents:gS,unnamedEvents:pS},hS=Fu("tooltip.exclusive"),bS=Fu("tooltip.show"),yS=Fu("tooltip.hide"),xS=function(n,t,e){n.getSystem().broadcastOn([hS],{})},wS=function(n,t,e,r){e.getTooltip().each((function(n){n.getSystem().isConnected()&&wy.set(n,r)}))},CS=Object.freeze({__proto__:null,hideAllExclusive:xS,setComponents:wS}),SS=function(n,t){var e=function(e){t.getTooltip().each((function(r){Um(r),n.onHide(e,r),t.clearTooltip()})),t.clearTimer()},r=function(e){if(!t.isShowing()){xS(e);var r=n.lazySink(e).getOrDie(),o=e.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:vi("normal"===n.mode?[xi(Do(),(function(n){li(e,bS)})),xi(Oo(),(function(n){li(e,yS)}))]:[]),behaviours:zl([wy.config({})])});t.setTooltip(o),Hm(r,o),n.onShow(e,o),Mm.position(r,n.anchor(e),o)}};return vi(tn([[xi(bS,(function(e){t.resetTimer((function(){r(e)}),n.delay)})),xi(yS,(function(r){t.resetTimer((function(){e(r)}),n.delay)})),xi(Uo(),(function(n,t){var r=t;r.universal||V(r.channels,hS)&&e(n)})),Ri((function(n){e(n)}))],"normal"===n.mode?[xi(_o(),(function(n){li(n,bS)})),xi(zo(),(function(n){li(n,yS)})),xi(Do(),(function(n){li(n,bS)})),xi(Oo(),(function(n){li(n,yS)}))]:[xi(ci(),(function(n,t){li(n,bS)})),xi(si(),(function(n){li(n,yS)}))]]))},kS=Object.freeze({__proto__:null,events:SS}),OS=[ye("lazySink"),ye("tooltipDom"),Le("exclusive",!0),Le("tooltipComponents",[]),Le("delay",300),Ue("mode","normal",["normal","follow-highlight"]),Le("anchor",(function(n){return{anchor:"hotspot",hotspot:n,layouts:{onLtr:i([xl,yl,pl,hl,vl,bl]),onRtl:i([xl,yl,pl,hl,vl,bl])}}})),Ls("onHide"),Ls("onShow")],TS=function(){var n=Ye(w.none()),t=Ye(w.none()),e=function(){return t.get()},r=function(n){t.set(w.some(n))},o=function(){t.set(w.none())},u=function(){n.get().each((function(n){clearTimeout(n)}))},a=function(t,e){u(),n.set(w.some(setTimeout((function(){t()}),e)))},c=function(){return t.get().isSome()},s=i("not-implemented");return oa({getTooltip:e,isShowing:c,setTooltip:r,clearTooltip:o,clearTimer:u,resetTimer:a,readState:s})},DS=Object.freeze({__proto__:null,init:TS}),_S=Ul({fields:OS,name:"tooltipping",active:kS,state:DS,apis:CS}),AS=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},ES=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),RS=tinymce.util.Tools.resolve("tinymce.util.I18n"),BS=["input","button","textarea","select"],MS=function(n,t,e){var r=t.disabled()?VS:US;r(n,t)},IS=function(n,t){return!0===t.useNative&&V(BS,Ii(n.element))},NS=function(n){return Du(n.element,"disabled")},PS=function(n){Su(n.element,"disabled","disabled")},FS=function(n){_u(n.element,"disabled")},LS=function(n){return"true"===Ou(n.element,"aria-disabled")},HS=function(n){Su(n.element,"aria-disabled","true")},zS=function(n){Su(n.element,"aria-disabled","false")},VS=function(n,t,e){t.disableClass.each((function(t){Fa(n.element,t)}));var r=IS(n,t)?PS:HS;r(n),t.onDisabled(n)},US=function(n,t,e){t.disableClass.each((function(t){Ha(n.element,t)}));var r=IS(n,t)?FS:zS;r(n),t.onEnabled(n)},jS=function(n,t){return IS(n,t)?NS(n):LS(n)},WS=function(n,t,e,r){var o=r?VS:US;o(n,t)},GS=Object.freeze({__proto__:null,enable:US,disable:VS,isDisabled:jS,onLoad:MS,set:WS}),qS=function(n,t){return sa({classes:t.disabled()?t.disableClass.toArray():[]})},XS=function(n,t){return vi([hi(jo(),(function(t,e){return jS(t,n)})),Il(n,t,MS)])},KS=Object.freeze({__proto__:null,exhibit:qS,events:XS}),YS=[We("disabled",l),Le("useNative",!0),Ee("disableClass"),Ls("onDisabled"),Ls("onEnabled")],$S=Ul({fields:YS,name:"disabling",active:KS,apis:GS}),JS=tinymce.util.Tools.resolve("tinymce.EditorManager"),QS=function(n){var t=n.getParam("skin"),e=n.getParam("skin_url");if(!1!==t){var r=t||"oxide";e=e?n.documentBaseURI.toAbsolute(e):JS.baseURL+"/skins/ui/"+r}return e},ZS=function(n){return n.getParam("readonly",!1,"boolean")},nk=function(n){return!1===n.getParam("skin")},tk=function(n){return n.getParam("height",Math.max(n.getElement().offsetHeight,200))},ek=function(n){return n.getParam("width",ES.DOM.getStyle(n.getElement(),"width"))},rk=function(n){return w.from(n.getParam("min_width")).filter(I)},ok=function(n){return w.from(n.getParam("min_height")).filter(I)},ik=function(n){return w.from(n.getParam("max_width")).filter(I)},uk=function(n){return w.from(n.getParam("max_height")).filter(I)},ak=function(n){return w.from(n.getParam("style_formats")).filter(_)},ck=function(n){return n.getParam("style_formats_merge",!1,"boolean")},sk=function(n){return n.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},lk=function(n){return n.getParam("removed_menuitems","")},fk=function(n){return!1!==n.getParam("menubar",!0,"boolean")},dk=function(n){var t=n.getParam("toolbar",!0),e=!0===t,r=T(t),o=_(t)&&t.length>0;return!gk(n)&&(o||r||e)},mk=function(n){var t=j(9,(function(t){return n.getParam("toolbar"+(t+1),!1,"string")})),e=Y(t,(function(n){return"string"===typeof n}));return e.length>0?w.some(e):w.none()},gk=function(n){return mk(n).fold((function(){var t=n.getParam("toolbar",[],"string[]");return t.length>0}),f)};(function(n){n["default"]="wrap",n["floating"]="floating",n["sliding"]="sliding",n["scrolling"]="scrolling"})(aC||(aC={}));var pk,vk=function(n){return n.getParam("toolbar_mode","","string")};(function(n){n["auto"]="auto",n["top"]="top",n["bottom"]="bottom"})(pk||(pk={}));var hk,bk=function(n){return n.getParam("toolbar_groups",{},"object")},yk=function(n){return n.getParam("toolbar_location",pk.auto,"string")},xk=function(n){return yk(n)===pk.bottom},wk=function(n){return n.getParam("fixed_toolbar_container","","string")},Ck=function(n){return n.getParam("toolbar_persist",!1,"boolean")},Sk=function(n){var t=wk(n);return t.length>0&&n.inline?gs(Ga(),t):w.none()},kk=function(n){return n.inline&&Sk(n).isSome()},Ok=function(n){var t=Sk(n);return t.getOrThunk((function(){return eu(tu(tr.fromDom(n.getElement())))}))},Tk=function(n){return n.inline&&!fk(n)&&!dk(n)&&!gk(n)},Dk=function(n){var t=n.getParam("toolbar_sticky",!1,"boolean");return(t||n.inline)&&!kk(n)&&!Tk(n)},_k=function(n){return n.getParam("draggable_modal",!1,"boolean")},Ak=function(n){var t=n.getParam("menu");return t?Bn(t,(function(n){return m(m({},n),{items:n.items})})):{}},Ek=function(n){return n.getParam("menubar")},Rk=function(n){return n.getParam("toolbar",!0)},Bk=function(n){return n.getParam("file_picker_callback")},Mk=function(n){return n.getParam("file_picker_types")},Ik=function(n){return n.getParam("file_browser_callback_types")},Nk=function(n){return!1===n.getParam("typeahead_urls")},Pk=function(n){return n.getParam("anchor_top","#top")},Fk=function(n){return n.getParam("anchor_bottom","#bottom")},Lk=function(n){var t=n.getParam("file_picker_validator_handler",void 0,"function");return void 0===t?n.getParam("filepicker_validator_handler",void 0,"function"):t},Hk="silver.readonly",zk=Ht([ke("readonly")]),Vk=function(n,t){var e=n.outerContainer,r=e.element;t&&(n.mothership.broadcastOn([gg()],{target:r}),n.uiMothership.broadcastOn([gg()],{target:r})),n.mothership.broadcastOn([Hk],{readonly:t}),n.uiMothership.broadcastOn([Hk],{readonly:t})},Uk=function(n,t){n.on("init",(function(){n.mode.isReadOnly()&&Vk(t,!0)})),n.on("SwitchMode",(function(){return Vk(t,n.mode.isReadOnly())})),ZS(n)&&n.setMode("readonly")},jk=function(){var n;return ql.config({channels:(n={},n[Hk]={schema:zk,onReceive:function(n,t){$S.set(n,t.readonly)}},n)})},Wk=function(n){return $S.config({disabled:n,disableClass:"tox-collection__item--state-disabled"})},Gk=function(n){return $S.config({disabled:n})},qk=function(n){return $S.config({disabled:n,disableClass:"tox-tbtn--disabled"})},Xk=function(n){return $S.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},Kk={item:Wk,button:Gk,splitButton:qk,toolbarButton:Xk},Yk=function(n,t){var e=n.getApi(t);return function(n){n(e)}},$k=function(n,t){return Ei((function(e){var r=Yk(n,e);r((function(e){var r=n.onSetup(e);M(r)&&t.set(r)}))}))},Jk=function(n,t){return Ri((function(e){return Yk(n,e)(t.get())}))},Qk=function(n,t){return Mi((function(e,r){Yk(n,e)(n.onAction),n.triggersSubmenu||t!==cC.CLOSE_ON_EXECUTE||(e.getSystem().isConnected()&&li(e,Xo()),r.stop())}))},Zk=(hk={},hk[jo()]=["disabling","alloy.base.behaviour","toggling","item-events"],hk),nO=function(n){return en(n,(function(n){return n.toArray()}))},tO=function(n,e,r,o){var i=Ye(t);return{type:"item",dom:e.dom,components:nO(e.optComponents),data:n.data,eventOrder:Zk,hasSubmenu:n.triggersSubmenu,itemBehaviours:zl([Sy("item-events",[Qk(n,r),$k(n,i),Jk(n,i)]),Kk.item((function(){return n.disabled||o.isDisabled()})),jk(),wy.config({})].concat(n.itemBehaviours))}},eO=function(n){return{value:n.value,meta:m({text:n.text.getOr("")},n.meta)}},rO=tinymce.util.Tools.resolve("tinymce.Env"),oO=function(n){var t={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},e={meta:"Ctrl",access:"Shift+Alt"},r=rO.mac?t:e,o=n.split("+"),i=G(o,(function(n){var t=n.toLowerCase().trim();return Vn(r,t)?r[t]:n}));return rO.mac?i.join(""):i.join("+")},iO=function(n){return{dom:{tag:"div",classes:[pC],innerHtml:n}}},uO=function(n){return{dom:{tag:"div",classes:[vC]},components:[vc(RS.translate(n))]}},aO=function(n,t){return{dom:{tag:"div",classes:t,innerHtml:n}}},cO=function(n,t){return{dom:{tag:"div",classes:[vC]},components:[{dom:{tag:n.tag,styles:n.styles},components:[vc(RS.translate(t))]}]}},sO=function(n){return{dom:{tag:"div",classes:[hC],innerHtml:oO(n)}}},lO=function(n){return{dom:{tag:"div",classes:[yC],innerHtml:nw("checkmark",n)}}},fO=function(n){return{dom:{tag:"div",classes:[bC],innerHtml:nw("chevron-right",n)}}},dO=function(n){return{dom:{tag:"div",classes:[bC],innerHtml:nw("chevron-down",n)}}},mO=function(n,t){var e="vertical"===n.direction?SC:kC,r="left"===n.align?TC:OC,o=function(){switch(n.valign){case"top":return DC;case"middle":return _C;case"bottom":return AC}};return{dom:{tag:"div",classes:[CC,e,r,o()]},components:t}},gO=function(n,t,e){return{dom:{tag:"img",classes:t,attributes:{src:n,alt:e.getOr("")}}}},pO=function(n,t,e,r){var o="custom",i="remove",u=function(){var u=fC,a=e.getOr(""),c=n.map((function(n){return{title:r.translate(n)}})).getOr({}),s={tag:"div",attributes:c,classes:[u]};return m(m({},s),t===o?{tag:"button",classes:p(s.classes,["tox-swatches__picker-btn"]),innerHtml:a}:t===i?{classes:p(s.classes,["tox-swatch--remove"]),innerHtml:a}:{attributes:m(m({},s.attributes),{"data-mce-color":t}),styles:{"background-color":t}})};return{dom:u(),optComponents:[]}},vO=function(n,t){var e=t.map((function(n){return{attributes:{title:RS.translate(n)}}})).getOr({});return m({tag:"div",classes:[sC,lC].concat(n?[wC]:[])},e)},hO=function(n,t,e,r,o){var i=e?t.or(w.some("")).map(iO):w.none(),u=n.checkMark,a=n.htmlContent.fold((function(){return n.textContent.map(r)}),(function(n){return w.some(aO(n,[vC]))})),c={dom:vO(o,n.ariaLabel),optComponents:[i,a,n.shortcutContent.map(sO),u,n.caret]};return c},bO=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],yO=["list-bull-circle","list-bull-default","list-bull-square"],xO=function(n,t,e,r){void 0===r&&(r=w.none());var o=function(n){return n.map((function(n){return RS.isRtl()&&V(bO,n)?n+"-rtl":n}))},i=RS.isRtl()&&n.iconContent.exists((function(n){return V(yO,n)})),u=o(n.iconContent).map((function(n){return tw(n,t.icons,r)})),c=w.from(n.meta).fold((function(){return uO}),(function(n){return Vn(n,"style")?a(cO,n.style):uO}));return"color"===n.presets?pO(n.ariaLabel,n.value,u,t):hO(n,u,e,c,i)},wO=function(n,t){return zn(n,"tooltipWorker").map((function(n){return[_S.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(n){return{anchor:"submenu",item:n,overrides:{maxHeightFunction:Ef}}},mode:"follow-highlight",onShow:function(t,e){n((function(n){_S.setComponents(t,[hc({element:tr.fromDom(n)})])}))}})]})).getOr([])},CO=function(n){return ES.DOM.encode(n)},SO=function(n,t){var e=RS.translate(n),r=CO(e);if(t.length>0){var o=new RegExp(AS(t),"gi");return r.replace(o,(function(n){return'<span class="tox-autocompleter-highlight">'+n+"</span>"}))}return r},kO=function(n,e,r,o,u,a,c,s){void 0===s&&(s=!0);var l=xO({presets:o,textContent:w.none(),htmlContent:r?n.text.map((function(n){return SO(n,e)})):w.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:w.none(),checkMark:w.none(),caret:w.none(),value:n.value},c.providers,s,n.icon);return tO({data:eO(n),disabled:n.disabled,getApi:i({}),onAction:function(t){return u(n.value,n.meta)},onSetup:i(t),triggersSubmenu:!1,itemBehaviours:wO(n.meta,c)},l,a,c.providers)},OO=function(n,t){return G(n,(function(n){switch(n.type){case"cardcontainer":return mO(n,OO(n.items,t));case"cardimage":return gO(n.src,n.classes,n.alt);case"cardtext":var e=n.name.exists((function(n){return V(t.cardText.highlightOn,n)})),r=e?w.from(t.cardText.matchText).getOr(""):"";return aO(SO(n.text,r),n.classes)}}))},TO=function(n,t,e,r){var o=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){$S.set(n,t),q(Jd(n.element,"*"),(function(e){n.getSystem().getByDom(e).each((function(n){n.hasConfigured($S)&&$S.set(n,t)}))}))}}},i={dom:vO(!1,n.label),optComponents:[w.some({dom:{tag:"div",classes:[CC,kC]},components:OO(n.items,r)})]};return tO({data:eO(m({text:w.none()},n)),disabled:n.disabled,getApi:o,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:w.from(r.itemBehaviours).getOr([])},i,t,e.providers)},DO=function(n,e,r,o,i,u,a,c){void 0===c&&(c=!0);var s=function(n){return{setActive:function(t){Jy.set(n,t)},isActive:function(){return Jy.isOn(n)},isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},l=xO({presets:r,textContent:e?n.text:w.none(),htmlContent:w.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:e?n.shortcut:w.none(),checkMark:e?w.some(lO(a.icons)):w.none(),caret:w.none(),value:n.value},a,c);return Yn(tO({data:eO(n),disabled:n.disabled,getApi:s,onAction:function(t){return o(n.value)},onSetup:function(n){return n.setActive(i),t},triggersSubmenu:!1,itemBehaviours:[]},l,u,a),{toggling:{toggleClass:mC,toggleOnExecute:!1,selected:n.active}})},_O=Pp(lx(),fx()),AO=function(n){return{value:n}},EO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,RO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,BO=function(n){return EO.test(n)||RO.test(n)},MO=function(n){var t=n.value.replace(EO,(function(n,t,e,r){return t+t+e+e+r+r}));return{value:t}},IO=function(n){var t=MO(n),e=RO.exec(t.value);return null===e?["FFFFFF","FF","FF","FF"]:e},NO=function(n){var t=n.toString(16);return 1===t.length?"0"+t:t},PO=function(n){var t=NO(n.red)+NO(n.green)+NO(n.blue);return AO(t)},FO=Math.min,LO=Math.max,HO=Math.round,zO=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,VO=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,UO=function(n,t,e,r){return{red:n,green:t,blue:e,alpha:r}},jO=function(n){var t=parseInt(n,10);return t.toString()===n&&t>=0&&t<=255},WO=function(n){var t,e,r,o=(n.hue||0)%360,i=n.saturation/100,u=n.value/100;if(i=LO(0,FO(i,1)),u=LO(0,FO(u,1)),0===i)return t=e=r=HO(255*u),UO(t,e,r,1);var a=o/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c;switch(Math.floor(a)){case 0:t=c,e=s,r=0;break;case 1:t=s,e=c,r=0;break;case 2:t=0,e=c,r=s;break;case 3:t=0,e=s,r=c;break;case 4:t=s,e=0,r=c;break;case 5:t=c,e=0,r=s;break;default:t=e=r=0}return t=HO(255*(t+l)),e=HO(255*(e+l)),r=HO(255*(r+l)),UO(t,e,r,1)},GO=function(n){var t=IO(n),e=parseInt(t[1],16),r=parseInt(t[2],16),o=parseInt(t[3],16);return UO(e,r,o,1)},qO=function(n,t,e,r){var o=parseInt(n,10),i=parseInt(t,10),u=parseInt(e,10),a=parseFloat(r);return UO(o,i,u,a)},XO=function(n){if("transparent"===n)return w.some(UO(0,0,0,0));var t=zO.exec(n);if(null!==t)return w.some(qO(t[1],t[2],t[3],"1"));var e=VO.exec(n);return null!==e?w.some(qO(e[1],e[2],e[3],e[4])):w.none()},KO=function(n){return"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"},YO=UO(255,0,0,1),$O=function(n){return n.fire("SkinLoaded")},JO=function(n,t){return n.fire("SkinLoadError",t)},QO=function(n){return n.fire("ResizeEditor")},ZO=function(n,t){return n.fire("ResizeContent",t)},nT=function(n,t){return n.fire("ScrollContent",t)},tT=function(n,t){return n.fire("TextColorChange",t)},eT=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),rT="tinymce-custom-colors";function oT(n){void 0===n&&(n=10);var t=eT.getItem(rT),e=T(t)?JSON.parse(t):[],r=function(t){var e=n-t.length;return e<0?t.slice(0,n):t},o=r(e),i=function(t){z(o,t).each(u),o.unshift(t),o.length>n&&o.pop(),eT.setItem(rT,JSON.stringify(o))},u=function(n){o.splice(n,1)},a=function(){return o.slice(0)};return{add:i,state:a}}var iT,uT="choiceitem",aT=[{type:uT,text:"Light Green",value:"#BFEDD2"},{type:uT,text:"Light Yellow",value:"#FBEEB8"},{type:uT,text:"Light Red",value:"#F8CAC6"},{type:uT,text:"Light Purple",value:"#ECCAFA"},{type:uT,text:"Light Blue",value:"#C2E0F4"},{type:uT,text:"Green",value:"#2DC26B"},{type:uT,text:"Yellow",value:"#F1C40F"},{type:uT,text:"Red",value:"#E03E2D"},{type:uT,text:"Purple",value:"#B96AD9"},{type:uT,text:"Blue",value:"#3598DB"},{type:uT,text:"Dark Turquoise",value:"#169179"},{type:uT,text:"Orange",value:"#E67E23"},{type:uT,text:"Dark Red",value:"#BA372A"},{type:uT,text:"Dark Purple",value:"#843FA1"},{type:uT,text:"Dark Blue",value:"#236FA1"},{type:uT,text:"Light Gray",value:"#ECF0F1"},{type:uT,text:"Medium Gray",value:"#CED4D9"},{type:uT,text:"Gray",value:"#95A5A6"},{type:uT,text:"Dark Gray",value:"#7E8C8D"},{type:uT,text:"Navy Blue",value:"#34495E"},{type:uT,text:"Black",value:"#000000"},{type:uT,text:"White",value:"#ffffff"}],cT=oT(10),sT=function(n){var t=[],e=document.createElement("canvas");e.height=1,e.width=1;for(var r=e.getContext("2d"),o=function(n,t){var e=255,r=t/255,o=Math.round(n*r+e*(1-r));return("0"+o.toString(16)).slice(-2).toUpperCase()},i=function(n){if(/^[0-9A-Fa-f]{6}$/.test(n))return"#"+n.toUpperCase();r.clearRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.fillStyle=n,r.fillRect(0,0,1,1);var t=r.getImageData(0,0,1,1).data,i=t[0],u=t[1],a=t[2],c=t[3];return"#"+o(i,c)+o(u,c)+o(a,c)},u=0;u<n.length;u+=2)t.push({text:n[u+1],value:i(n[u]),type:"choiceitem"});return t},lT=function(n,t){return n.getParam("color_cols",t,"number")},fT=function(n){return!1!==n.getParam("custom_colors")},dT=function(n){return n.getParam("color_map")},mT=function(n){var t=dT(n);return void 0!==t?sT(t):aT},gT=function(){return G(cT.state(),(function(n){return{type:uT,text:n,value:n}}))},pT=function(n){cT.add(n)},vT=function(n,t){var e;return n.dom.getParents(n.selection.getStart(),(function(n){var r;(r=n.style["forecolor"===t?"color":"background-color"])&&(e=e||r)})),e},hT=function(n,t,e){n.undoManager.transact((function(){n.focus(),n.formatter.apply(t,{value:e}),n.nodeChanged()}))},bT=function(n,t){n.undoManager.transact((function(){n.focus(),n.formatter.remove(t,{value:null},null,!0),n.nodeChanged()}))},yT=function(n){n.addCommand("mceApplyTextcolor",(function(t,e){hT(n,t,e)})),n.addCommand("mceRemoveTextcolor",(function(t){bT(n,t)}))},xT=function(n){return Math.max(5,Math.ceil(Math.sqrt(n)))},wT=function(n){var t=mT(n),e=xT(t.length);return lT(n,e)},CT=function(n){var t="choiceitem",e={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},r={type:t,text:"Custom color",icon:"color-picker",value:"custom"};return n?[e,r]:[e]},ST=function(n,t,e,r){if("custom"===e){var o=AT(n);o((function(e){e.each((function(e){pT(e),n.execCommand("mceApplyTextcolor",t,e),r(e)}))}),"#000000")}else"remove"===e?(r(""),n.execCommand("mceRemoveTextcolor",t)):(r(e),n.execCommand("mceApplyTextcolor",t,e))},kT=function(n,t){return n.concat(gT().concat(CT(t)))},OT=function(n,t){return function(e){e(kT(n,t))}},TT=function(n,t,e){var r=function(t,e){n.setIconFill(t,e),n.setIconStroke(t,e)},o="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";r(o,e)},DT=function(n,e,r,o,i){n.ui.registry.addSplitButton(e,{tooltip:o,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(t){var e=w.from(vT(n,r));return e.bind((function(n){return XO(n).map((function(n){var e=PO(n).value;return gr(t.toLowerCase(),e)}))})).getOr(!1)},columns:wT(n),fetch:OT(mT(n),fT(n)),onAction:function(e){null!==i.get()&&ST(n,r,i.get(),t)},onItemAction:function(t,o){ST(n,r,o,(function(t){i.set(t),tT(n,{name:e,color:t})}))},onSetup:function(t){null!==i.get()&&TT(t,e,i.get());var r=function(n){n.name===e&&TT(t,n.name,n.color)};return n.on("TextColorChange",r),function(){n.off("TextColorChange",r)}}})},_T=function(n,e,r,o){n.ui.registry.addNestedMenuItem(e,{text:o,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){ST(n,r,e.value,t)}}]}})},AT=function(n){return function(e,r){var o=function(n){return function(t){var e=t.getData();n(w.from(e.colorpicker)),t.close()}},i=function(n,t){"hex-valid"===t.name&&(t.value?n.enable("ok"):n.disable("ok"))},u={colorpicker:r},a=o(e);n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onAction:i,onSubmit:a,onClose:t,onCancel:function(){e(w.none())}})}},ET=function(n){yT(n);var t=Ye(null),e=Ye(null);DT(n,"forecolor","forecolor","Text color",t),DT(n,"backcolor","hilitecolor","Background color",e),_T(n,"forecolor","forecolor","Text color"),_T(n,"backcolor","hilitecolor","Background color")},RT=function(n,t,e,r,o,i,u,a){var c=jC(t),s="color"!==o?"normal":"color",l=BT(t,e,r,s,i,u,a);return qC(n,c,l,r,o)},BT=function(n,t,e,r,o,i,u){return sv(G(n,(function(a){return"choiceitem"===a.type?rS(a).fold(WC,(function(c){return w.some(DO(c,1===e,r,t,i(a.value),o,u,jC(n)))})):w.none()})))},MT=function(n,t){var e=MC(t);if(1===n)return{mode:"menu",moveOnTab:!0};if("auto"===n)return{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}};var r="color"===t?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+r}},IT=function(n,t){return 1===n?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===n?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:"color"===t?"."+fC:"."+lC}}},NT=function(n,t){var e=kT(t.colorinput.getColors(),t.colorinput.hasCustomColors()),r=t.colorinput.getColorCols(),o="color",i=RT(Fu("menu-value"),e,(function(t){n.onAction({value:t})}),r,o,cC.CLOSE_ON_EXECUTE,l,t.shared.providers),u=m(m({},i),{markers:MC(o),movement:MT(r,o)});return{type:"widget",data:{value:Fu("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_O.widget(Cx.sketch(u))]}},PT=Fu("cell-over"),FT=Fu("cell-execute"),LT=function(n,t,e){var r,o=function(e){return fi(e,PT,{row:n,col:t})},i=function(e){return fi(e,FT,{row:n,col:t})},u=function(n,t){t.stop(),i(n)};return yc({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=e,r)},behaviours:zl([Sy("insert-table-picker-cell",[xi(Do(),By.focus),xi(jo(),i),xi(Io(),u),xi(Go(),u)]),Jy.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),By.config({onFocus:o})])})},HT=function(n,t,e){for(var r=[],o=0;o<t;o++){for(var i=[],u=0;u<e;u++)i.push(LT(o,u,n));r.push(i)}return r},zT=function(n,t,e,r,o){for(var i=0;i<r;i++)for(var u=0;u<o;u++)Jy.set(n[i][u],i<=t&&u<=e)},VT=function(n){return en(n,(function(n){return G(n,xc)}))},UT=function(n,t){return vc(t+1+"x"+(n+1))},jT=function(n){var t=10,e=10,r=Fu("size-label"),o=HT(r,t,e),i=Qx({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:r}},components:[vc("0x0")],behaviours:zl([wy.config({})])});return{type:"widget",data:{value:Fu("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_O.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:VT(o).concat(i.asSpec()),behaviours:zl([Sy("insert-table-picker",[Ti(PT,(function(n,r,u){var a=u.event.row,c=u.event.col;zT(o,a,c,t,e),wy.set(i.get(n),[UT(a,c)])})),Ti(FT,(function(t,e,r){n.onAction({numRows:r.event.row+1,numColumns:r.event.col+1}),li(t,Xo())}))]),fy.config({initSize:{numRows:t,numColumns:e},mode:"flatgrid",selector:'[role="button"]'})])})]}},WT={inserttable:jT,colorswatch:NT},GT=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)?w.some(n[t]):w.none()},qT=function(n,t){return GT(WT,n.fancytype).map((function(e){return e(n,t)}))},XT=function(n,e,r,o,i){void 0===o&&(o=!0),void 0===i&&(i=!1);var u=i?dO(r.icons):fO(r.icons),a=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},c=xO({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:w.none(),ariaLabel:n.text,caret:w.some(u),checkMark:w.none(),shortcutContent:n.shortcut},r,o);return tO({data:eO(n),getApi:a,disabled:n.disabled,onAction:t,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},c,e,r)},KT=function(n,t,e,r){void 0===r&&(r=!0);var o=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},i=xO({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:w.none(),ariaLabel:n.text,caret:w.none(),checkMark:w.none(),shortcutContent:n.shortcut},e,r);return tO({data:eO(n),getApi:o,disabled:n.disabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,t,e)},YT=function(n){var t=n.text.fold((function(){return{}}),(function(n){return{innerHtml:n}}));return{type:"separator",dom:m({tag:"div",classes:[lC,gC]},t),components:[]}},$T=function(n,t,e,r){void 0===r&&(r=!0);var o=function(n){return{setActive:function(t){Jy.set(n,t)},isActive:function(){return Jy.isOn(n)},isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},i=xO({iconContent:n.icon,textContent:n.text,htmlContent:w.none(),ariaLabel:n.text,checkMark:w.some(lO(e.icons)),caret:w.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},e,r);return Yn(tO({data:eO(n),disabled:n.disabled,getApi:o,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,t,e),{toggling:{toggleClass:mC,toggleOnExecute:!1,selected:n.active}})},JT=kO,QT=YT,ZT=KT,nD=XT,tD=$T,eD=qT,rD=TO;(function(n){n[n["ContentFocus"]=0]="ContentFocus",n[n["UiFocus"]=1]="UiFocus"})(iT||(iT={}));var oD=function(n,t,e,r,o){var i=e.shared.providers,u=function(n){return o?m(m({},n),{shortcut:w.none(),icon:n.text.isSome()?w.none():n.icon}):n};switch(n.type){case"menuitem":return cS(n).fold(WC,(function(n){return w.some(ZT(u(n),t,i,r))}));case"nestedmenuitem":return lS(n).fold(WC,(function(n){return w.some(nD(u(n),t,i,r,o))}));case"togglemenuitem":return dS(n).fold(WC,(function(n){return w.some(tD(u(n),t,i,r))}));case"separator":return Fw(n).fold(WC,(function(n){return w.some(QT(n))}));case"fancymenuitem":return uS(n).fold(WC,(function(n){return eD(u(n),e)}));default:return console.error("Unknown item in general menu",n),w.none()}},iD=function(n,t,e,r,o,i,u){var a=1===r,c=!a||jC(n);return sv(G(n,(function(n){switch(n.type){case"separator":return zw(n).fold(WC,(function(n){return w.some(QT(n))}));case"cardmenuitem":return tS(n).fold(WC,(function(n){return w.some(rD(m(m({},n),{onAction:function(t){n.onAction(t),e(n.value,n.meta)}}),o,i,{itemBehaviours:wO(n.meta,i),cardText:{matchText:t,highlightOn:u}}))}));case"autocompleteitem":default:return Vw(n).fold(WC,(function(n){return w.some(JT(n,t,a,"normal",e,o,i,c))}))}})))},uD=function(n,t,e,r,o){var i=jC(t),u=sv(G(t,(function(n){var t=function(n){return o?!n.hasOwnProperty("text"):i},u=function(n){return oD(n,e,r,t(n),o)};return"nestedmenuitem"===n.type&&n.getSubmenuItems().length<=0?u(m(m({},n),{disabled:!0})):u(n)}))),a=o?GC:qC;return a(n,i,u,1,"normal")},aD=function(n){return Ix.singleData(n.value,n)},cD=function(n,t,e,r){var o=e===iT.ContentFocus?ch():ah(),i=MT(t,r),u=MC(r);return{dom:n.dom,components:n.components,items:n.items,value:n.value,markers:{selectedItem:u.selectedItem,item:u.item},movement:i,fakeFocus:e===iT.ContentFocus,focusManager:o,menuBehaviours:vS.unnamedEvents("auto"!==t?[]:[Ei((function(n,t){mS(n,4,u.item).each((function(t){var e=t.numColumns,r=t.numRows;fy.setGridSize(n,r,e)}))}))])}},sD=function(n,t){var e=Ye(w.none()),r=Ye(!1),o=yc(Fx.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:zl([Sy("dismissAutocompleter",[xi(ei(),(function(){return c()}))])]),lazySink:t.getSink})),i=function(){return Fx.isOpen(o)},u=function(){return e.get().isSome()},a=function(){u()&&Fx.hide(o)},c=function(){if(u()){var t=e.get().map((function(n){return n.element}));pw(t.getOr(tr.fromDom(n.selection.getNode()))).each(hu),a(),e.set(w.none()),r.set(!1)}},s=Jn((function(){return uC(n)})),l=function(e,o){var i=mn(o,(function(n){return w.from(n.columns)})).getOr(1);return en(o,(function(o){var u=o.items;return iD(u,o.matchText,(function(t,i){var u=n.selection.getRng();Cw(n.dom,u,e).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(n){var e=n.range,u={hide:function(){c()},reload:function(n){a(),g(n)}};r.set(!0),o.onAction(u,e,t,i),r.set(!1)}))}),i,cC.BUBBLE_TO_SANDBOX,t,o.highlightOn)}))},f=function(t){if(!u()){var o=gw(n,t.range);e.set(w.some({triggerChar:t.triggerChar,element:o,matchLength:t.text.length})),r.set(!1)}},d=function(t,e,r,i){t.matchLength=e.text.length;var u=mn(r,(function(n){return w.from(n.columns)})).getOr(1);Fx.showAt(o,{anchor:"node",root:tr.fromDom(n.getBody()),node:w.from(t.element)},Cx.sketch(cD(qC("autocompleter-value",!0,i,u,"normal"),u,iT.ContentFocus,"normal"))),Fx.getContent(o).each(Hv.highlightFirst)},m=function(t){return e.get().map((function(e){return Cw(n.dom,n.selection.getRng(),e.triggerChar).bind((function(e){return Nw(n,s,e,t)}))})).getOrThunk((function(){return Iw(n,s)}))},g=function(n){m(n).fold(c,(function(n){f(n.context),n.lookupData.then((function(t){e.get().map((function(e){var r=n.context;if(e.triggerChar===r.triggerChar){var o=l(r.triggerChar,t);o.length>0?d(e,r,t,o):r.text.length-e.matchLength>=10?c():a()}}))}))}))},p=sw((function(n){27!==n.which&&g()}),50),v={onKeypress:p,cancelIfNecessary:c,isMenuOpen:i,isActive:u,isProcessingAction:r.get,getView:function(){return Fx.getContent(o)}};!1===n.hasPlugin("rtc")&&kw.setup(v,n)},lD={register:sD},fD=f,dD=function(n,t,e){return Vc(n,t,fD,e)},mD=function(n,t,e){return Uc(n,t,fD,e)},gD=Lc,pD=function(n,t,e){return ps(n,t,e).isSome()},vD=function(n,t){var e=null,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e=setTimeout((function(){n.apply(null,r),e=null}),t)},o=function(){null!==e&&(clearTimeout(e),e=null)};return{cancel:o,schedule:r}},hD=5,bD=400,yD=function(n){var t=n.raw;return void 0===t.touches||1!==t.touches.length?w.none():w.some(t.touches[0])},xD=function(n,t){var e=Math.abs(n.clientX-t.x),r=Math.abs(n.clientY-t.y);return e>hD||r>hD},wD=function(n){var t=Ye(w.none()),e=Ye(!1),r=vD((function(t){n.triggerEvent(qo(),t),e.set(!0)}),bD),o=function(n){return yD(n).each((function(o){r.cancel();var i={x:o.clientX,y:o.clientY,target:n.target};r.schedule(n),e.set(!1),t.set(w.some(i))})),w.none()},i=function(n){return r.cancel(),yD(n).each((function(n){t.get().each((function(e){xD(n,e)&&t.set(w.none())}))})),w.none()},u=function(o){r.cancel();var i=function(n){return oo(n.target,o.target)};return t.get().filter(i).map((function(t){return e.get()?(o.prevent(),!1):n.triggerEvent(Go(),o)}))},a=ft([{key:yo(),value:o},{key:xo(),value:i},{key:wo(),value:u}]),c=function(n,t){return zn(a,t).bind((function(t){return t(n)}))};return{fireIfReady:c}},CD=function(n){var t=n.raw;return t.which===zv[0]&&!V(["input","textarea"],Ii(n.target))&&!pD(n.target,'[contenteditable="true"]')},SD=function(){return Xr().browser.isFirefox()},kD=Lt([Oe("triggerEvent"),Le("stopBackspace",!0)]),OD=function(n,t){return SD()?mD(n,"focus",t):dD(n,"focusin",t)},TD=function(n,t){return SD()?mD(n,"blur",t):dD(n,"focusout",t)},DD=function(n,t){var e=ie("Getting GUI events settings",kD,t),r=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],o=wD(e),i=G(r.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(t){return dD(n,t,(function(n){o.fireIfReady(n,t).each((function(t){t&&n.kill()}));var r=e.triggerEvent(t,n);r&&n.kill()}))})),u=Ye(w.none()),a=dD(n,"paste",(function(n){o.fireIfReady(n,"paste").each((function(t){t&&n.kill()}));var t=e.triggerEvent("paste",n);t&&n.kill(),u.set(w.some(setTimeout((function(){e.triggerEvent(Vo(),n)}),0)))})),c=dD(n,"keydown",(function(n){var t=e.triggerEvent("keydown",n);t?n.kill():!0===e.stopBackspace&&CD(n)&&n.prevent()})),s=OD(n,(function(n){var t=e.triggerEvent("focusin",n);t&&n.kill()})),l=Ye(w.none()),f=TD(n,(function(n){var t=e.triggerEvent("focusout",n);t&&n.kill(),l.set(w.some(setTimeout((function(){e.triggerEvent(zo(),n)}),0)))})),d=function(){q(i,(function(n){n.unbind()})),c.unbind(),s.unbind(),f.unbind(),a.unbind(),u.get().each(clearTimeout),l.get().each(clearTimeout)};return{unbind:d}},_D=function(n,t){var e=zn(n,"target").getOr(t);return Ye(e)},AD=function(n,t){var e=Ye(!1),r=Ye(!1),o=function(){e.set(!0)},i=function(){r.set(!0)};return{stop:o,cut:i,isStopped:e.get,isCut:r.get,event:n,setSource:t.set,getSource:t.get}},ED=function(n){var e=Ye(!1),r=function(){e.set(!0)};return{stop:r,cut:t,isStopped:e.get,isCut:l,event:n,setSource:s("Cannot set source of a broadcasted event"),getSource:s("Cannot get source of a broadcasted event")}},RD=Wn.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),BD=function(n,t,e,r,o,i){var u=n(t,r),a=AD(e,o);return u.fold((function(){return i.logEventNoHandlers(t,r),RD.complete()}),(function(n){var e=n.descHandler,r=va(e);return r(a),a.isStopped()?(i.logEventStopped(t,n.element,e.purpose),RD.stopped()):a.isCut()?(i.logEventCut(t,n.element,e.purpose),RD.complete()):Gi(n.element).fold((function(){return i.logNoParent(t,n.element,e.purpose),RD.complete()}),(function(r){return i.logEventResponse(t,n.element,e.purpose),RD.resume(r)}))}))},MD=function(n,t,e,r,o,i){return BD(n,t,e,r,o,i).fold(f,(function(r){return MD(n,t,e,r,o,i)}),l)},ID=function(n,t,e,r,o){var i=_D(e,r);return BD(n,t,e,r,i,o)},ND=function(n,t,e){var r=ED(t);return q(n,(function(n){var t=n.descHandler,e=va(t);e(r)})),r.isStopped()},PD=function(n,t,e,r){return FD(n,t,e,e.target,r)},FD=function(n,t,e,r,o){var i=_D(e,r);return MD(n,t,e,r,i,o)},LD=function(n,t){return{element:n,descHandler:t}},HD=function(n,t){return{id:n,descHandler:t}},zD=function(){var n={},t=function(t,e,r){Rn(r,(function(r,o){var i=void 0!==n[o]?n[o]:{};i[e]=pa(r,t),n[o]=i}))},e=function(n,t){return Wu(t).fold((function(){return w.none()}),(function(e){return n.bind((function(n){return zn(n,e)})).map((function(n){return LD(t,n)}))}))},r=function(t){return zn(n,t).map((function(n){return Fn(n,(function(n,t){return HD(t,n)}))})).getOr([])},o=function(t,r,o){var i=zn(n,r);return lo(o,(function(n){return e(i,n)}),t)},i=function(t){Rn(n,(function(n,e){n.hasOwnProperty(t)&&delete n[t]}))};return{registerId:t,unregisterId:i,filterByType:r,find:o}},VD=function(){var n=zD(),t={},e=function(n){var t=n.element;return Wu(t).fold((function(){return Uu("uid-",n.element)}),(function(n){return n}))},r=function(n,e){var r=t[e];if(r!==n)throw new Error('The tagId "'+e+'" is already used by: '+Bu(r.element)+"\nCannot use it for: "+Bu(n.element)+"\nThe conflicting element is"+(Wa(r.element)?" ":" not ")+"already in the DOM");i(n)},o=function(o){var i=e(o);Un(t,i)&&r(o,i);var u=[o];n.registerId(u,i,o.events),t[i]=o},i=function(e){Wu(e.element).each((function(e){delete t[e],n.unregisterId(e)}))},u=function(t){return n.filterByType(t)},a=function(t,e,r){return n.find(t,e,r)},c=function(n){return zn(t,n)};return{find:a,filter:u,register:o,unregister:i,getById:c}},UD=function(n){var t=n.dom,e=t.attributes,r=g(t,["attributes"]);return{uid:n.uid,dom:m({tag:"div",attributes:m({role:"presentation"},e)},r),components:n.components,behaviours:Jg(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},jD=av({name:"Container",factory:UD,configFields:[Le("components",[]),$g("containerBehaviours",[]),Le("events",{}),Le("domModification",{}),Le("eventOrder",{})]}),WD=function(n){var e=function(t){return Gi(n.element).fold(f,(function(n){return oo(t,n)}))},r=VD(),o=function(n,t){return r.find(e,n,t)},u=DD(n.element,{triggerEvent:function(n,t){return _s(n,t.target,(function(e){return PD(o,n,t,e)}))}}),a={debugInfo:i("real"),triggerEvent:function(n,t,e){_s(n,t,(function(r){return FD(o,n,e,t,r)}))},triggerFocus:function(n,e){Wu(n).fold((function(){$l(n)}),(function(r){_s(Ho(),n,(function(r){return ID(o,Ho(),{originator:e,kill:t,prevent:t,target:n},n,r),!1}))}))},triggerEscape:function(n,t){a.triggerEvent("keydown",n.element,t.event)},getByUid:function(n){return b(n)},getByDom:function(n){return y(n)},build:yc,addToGui:function(n){l(n)},removeFromGui:function(n){d(n)},addToWorld:function(n){c(n)},removeFromWorld:function(n){s(n)},broadcast:function(n){p(n)},broadcastOn:function(n,t){v(n,t)},broadcastEvent:function(n,t){h(n,t)},isConnected:f},c=function(n){n.connect(a),Li(n.element)||(r.register(n),q(n.components(),c),a.triggerEvent(Yo(),n.element,{target:n.element}))},s=function(n){Li(n.element)||(q(n.components(),s),r.unregister(n)),n.disconnect()},l=function(t){Hm(n,t)},d=function(n){Um(n)},m=function(){u.unbind(),vu(n.element)},g=function(n){var t=r.filter(Uo());q(t,(function(t){var e=t.descHandler,r=va(e);r(n)}))},p=function(n){g({universal:!0,data:n})},v=function(n,t){g({universal:!1,channels:n,data:t})},h=function(n,t){var e=r.filter(n);return ND(e,t)},b=function(n){return r.getById(n).fold((function(){return hn.error(new Error('Could not find component with uid: "'+n+'" in system.'))}),hn.value)},y=function(n){var t=Wu(n).getOr("not found");return b(t)};return c(n),{root:n,element:n.element,destroy:m,add:l,remove:d,getByUid:b,getByDom:y,addToWorld:c,removeFromWorld:s,broadcast:p,broadcastOn:v,broadcastEvent:h}},GD=function(n,t){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:G(n.items,t.interpreter)}},qD=i([Le("prefix","form-field"),$g("fieldBehaviours",[yv,Yg])]),XD=i([Ep({schema:[ye("dom")],name:"label"}),Ep({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[ye("text")],name:"aria-descriptor"}),_p({factory:{sketch:function(n){var t=st(n,["factory"]);return n.factory.sketch(t)}},schema:[ye("factory")],name:"field"})]),KD=function(n,t,e,r){var o=Qg(n.fieldBehaviours,[yv.config({find:function(t){return jp(t,n,"field")}}),Yg.config({store:{mode:"manual",getValue:function(n){return yv.getCurrent(n).bind(Yg.getValue)},setValue:function(n,t){yv.getCurrent(n).each((function(n){Yg.setValue(n,t)}))}}})]),i=vi([Ei((function(t,e){var r=Gp(t,n,["label","field","aria-descriptor"]);r.field().each((function(t){var e=Fu(n.prefix);r.label().each((function(n){Su(n.element,"for",e),Su(t.element,"id",e)})),r["aria-descriptor"]().each((function(e){var r=Fu(n.prefix);Su(e.element,"id",r),Su(t.element,"aria-describedby",r)}))}))}))]),u={getField:function(t){return jp(t,n,"field")},getLabel:function(t){return jp(t,n,"label")}};return{uid:n.uid,dom:n.dom,components:t,behaviours:o,events:i,apis:u}},YD=cv({name:"FormField",configFields:qD(),partFields:XD(),factory:KD,apis:{getField:function(n,t){return n.getField(t)},getLabel:function(n,t){return n.getLabel(t)}}}),$D=function(n,t){return sa({attributes:ft([{key:t.tabAttr,value:"true"}])})},JD=Object.freeze({__proto__:null,exhibit:$D}),QD=[Le("tabAttr","data-alloy-tabstop")],ZD=Ul({fields:QD,name:"tabstopping",active:JD}),n_=tinymce.util.Tools.resolve("tinymce.html.Entities"),t_=function(n,t,e,r){var o=r_(n,t,e,r);return YD.sketch(o)},e_=function(n,t){return t_(n,t,[],[])},r_=function(n,t,e,r){return{dom:i_(e),components:n.toArray().concat([t]),fieldBehaviours:zl(r)}},o_=function(){return i_([])},i_=function(n){return{tag:"div",classes:["tox-form__group"].concat(n)}},u_=function(n,t){return YD.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(n)}})},a_=Fu("form-component-change"),c_=Fu("form-close"),s_=Fu("form-cancel"),l_=Fu("form-action"),f_=Fu("form-submit"),d_=Fu("form-block"),m_=Fu("form-unblock"),g_=Fu("form-tabchange"),p_=Fu("form-resize"),v_=function(n,t){var e,r=n.label.map((function(n){return u_(n,t)})),o=function(n){return function(t,e){ps(e.event.target,"[data-collection-item-value]").each((function(r){n(t,e,r,Ou(r,"data-collection-item-value"))}))}},i=function(e,r){var o=G(r,(function(e){var r=RS.translate(e.text),o=1===n.columns?'<div class="tox-collection__item-label">'+r+"</div>":"",i='<div class="tox-collection__item-icon">'+e.icon+"</div>",u={_:" "," - ":" ","-":" "},a=r.replace(/\_| \- |\-/g,(function(n){return u[n]})),c=t.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+c+'" tabindex="-1" data-collection-item-value="'+n_.encodeAllRaw(e.value)+'" title="'+a+'" aria-label="'+a+'">'+i+o+"</div>"})),i="auto"!==n.columns&&n.columns>1?W(o,n.columns):[o],u=G(i,(function(n){return'<div class="tox-collection__group">'+n.join("")+"</div>"}));xu(e.element,u.join(""))},a=o((function(e,r,o,i){r.stop(),t.isDisabled()||fi(e,l_,{name:n.name,value:i})})),c=[xi(Do(),o((function(n,t,e){$l(e)}))),xi(Io(),a),xi(Go(),a),xi(_o(),o((function(n,t,e){gs(n.element,"."+xC).each((function(n){Ha(n,xC)})),Fa(e,xC)}))),xi(Ao(),o((function(n){gs(n.element,"."+xC).each((function(n){Ha(n,xC)}))}))),Mi(o((function(t,e,r,o){fi(t,l_,{name:n.name,value:o})})))],s=function(n,t){return G(Jd(n.element,".tox-collection__item"),t)},l=YD.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==n.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:u},behaviours:zl([$S.config({disabled:t.isDisabled,onDisabled:function(n){s(n,(function(n){Fa(n,"tox-collection__item--state-disabled"),Su(n,"aria-disabled",!0)}))},onEnabled:function(n){s(n,(function(n){Ha(n,"tox-collection__item--state-disabled"),_u(n,"aria-disabled")}))}}),jk(),wy.config({}),Yg.config({store:{mode:"memory",initialValue:[]},onSetValue:function(t,e){i(t,e),"auto"===n.columns&&mS(t,5,"tox-collection__item").each((function(n){var e=n.numRows,r=n.numColumns;fy.setGridSize(t,e,r)})),li(t,p_)}}),ZD.config({}),fy.config(IT(n.columns,"normal")),Sy("collection-events",c)]),eventOrder:(e={},e[jo()]=["disabling","alloy.base.behaviour","collection-events"],e)}),f=["tox-form__group--collection"];return t_(r,l,f,[])},h_=i([Ee("data"),Le("inputAttributes",{}),Le("inputStyles",{}),Le("tag","input"),Le("inputClasses",[]),Ls("onSetValue"),Le("styles",{}),Le("eventOrder",{}),$g("inputBehaviours",[Yg,By]),Le("selectOnFocus",!0)]),b_=function(n){return zl([By.config({onFocus:n.selectOnFocus?function(n){var t=n.element,e=ic(t);t.dom.setSelectionRange(0,e.length)}:t})])},y_=function(n){return m(m({},b_(n)),Qg(n.inputBehaviours,[Yg.config({store:m(m({mode:"manual"},n.data.map((function(n){return{initialValue:n}})).getOr({})),{getValue:function(n){return ic(n.element)},setValue:function(n,t){var e=ic(n.element);e!==t&&uc(n.element,t)}}),onSetValue:n.onSetValue})]))},x_=function(n){return{tag:n.tag,attributes:m({type:"text"},n.inputAttributes),styles:n.inputStyles,classes:n.inputClasses}},w_=function(n,t){return{uid:n.uid,dom:x_(n),components:[],behaviours:y_(n),eventOrder:n.eventOrder}},C_=av({name:"Input",configFields:h_(),factory:w_}),S_={},k_={exports:S_};(function(t,e,r,o){(function(o){if("object"===typeof e&&"undefined"!==typeof r)r.exports=o();else if("function"===typeof t&&t.amd)t([],o);else{var i;i="undefined"!==typeof window?window:"undefined"!==typeof n?n:"undefined"!==typeof self?self:this,i.EphoxContactWrapper=o()}})((function(){return function(){function n(t,e,r){function i(a,c){if(!e[a]){if(!t[a]){var s="function"==typeof o&&o;if(!c&&s)return s(a,!0);if(u)return u(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[a]={exports:{}};t[a][0].call(f.exports,(function(n){var e=t[a][1][n];return i(e||n)}),f,f.exports,n,t,e,r)}return e[a].exports}for(var u="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}return n}()({1:[function(n,t,e){var r,o,i=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(n){if(r===setTimeout)return setTimeout(n,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}function s(n){if(o===clearTimeout)return clearTimeout(n);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{return o(n)}catch(t){try{return o.call(null,n)}catch(t){return o.call(this,n)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:u}catch(n){r=u}try{o="function"===typeof clearTimeout?clearTimeout:a}catch(n){o=a}})();var l,f=[],d=!1,m=-1;function g(){d&&l&&(d=!1,l.length?f=l.concat(f):m=-1,f.length&&p())}function p(){if(!d){var n=c(g);d=!0;var t=f.length;while(t){l=f,f=[];while(++m<t)l&&l[m].run();m=-1,t=f.length}l=null,d=!1,s(n)}}function v(n,t){this.fun=n,this.array=t}function h(){}i.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];f.push(new v(n,t)),1!==f.length||d||c(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(n,t,e){(function(n){(function(e){var r=setTimeout;function o(){}function i(n,t){return function(){n.apply(t,arguments)}}function u(n){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(n,this)}function a(n,t){while(3===n._state)n=n._value;0!==n._state?(n._handled=!0,u._immediateFn((function(){var e=1===n._state?t.onFulfilled:t.onRejected;if(null!==e){var r;try{r=e(n._value)}catch(o){return void s(t.promise,o)}c(t.promise,r)}else(1===n._state?c:s)(t.promise,n._value)}))):n._deferreds.push(t)}function c(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var e=t.then;if(t instanceof u)return n._state=3,n._value=t,void l(n);if("function"===typeof e)return void d(i(e,t),n)}n._state=1,n._value=t,l(n)}catch(r){s(n,r)}}function s(n,t){n._state=2,n._value=t,l(n)}function l(n){2===n._state&&0===n._deferreds.length&&u._immediateFn((function(){n._handled||u._unhandledRejectionFn(n._value)}));for(var t=0,e=n._deferreds.length;t<e;t++)a(n,n._deferreds[t]);n._deferreds=null}function f(n,t,e){this.onFulfilled="function"===typeof n?n:null,this.onRejected="function"===typeof t?t:null,this.promise=e}function d(n,t){var e=!1;try{n((function(n){e||(e=!0,c(t,n))}),(function(n){e||(e=!0,s(t,n))}))}catch(r){if(e)return;e=!0,s(t,r)}}u.prototype["catch"]=function(n){return this.then(null,n)},u.prototype.then=function(n,t){var e=new this.constructor(o);return a(this,new f(n,t,e)),e},u.all=function(n){var t=Array.prototype.slice.call(n);return new u((function(n,e){if(0===t.length)return n([]);var r=t.length;function o(i,u){try{if(u&&("object"===typeof u||"function"===typeof u)){var a=u.then;if("function"===typeof a)return void a.call(u,(function(n){o(i,n)}),e)}t[i]=u,0===--r&&n(t)}catch(c){e(c)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},u.resolve=function(n){return n&&"object"===typeof n&&n.constructor===u?n:new u((function(t){t(n)}))},u.reject=function(n){return new u((function(t,e){e(n)}))},u.race=function(n){return new u((function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)}))},u._immediateFn="function"===typeof n?function(t){n(t)}:function(n){r(n,0)},u._unhandledRejectionFn=function(n){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},u._setImmediateFn=function(n){u._immediateFn=n},u._setUnhandledRejectionFn=function(n){u._unhandledRejectionFn=n},"undefined"!==typeof t&&t.exports?t.exports=u:e.Promise||(e.Promise=u)})(this)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(n,t,e){(function(t,r){var o=n("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;function s(n,t){this._id=n,this._clearFn=t}e.setTimeout=function(){return new s(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new s(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(n){n.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},e.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},e._unrefActive=e.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout((function(){n._onTimeout&&n._onTimeout()}),t))},e.setImmediate="function"===typeof t?t:function(n){var t=c++,r=!(arguments.length<2)&&u.call(arguments,1);return a[t]=!0,o((function(){a[t]&&(r?n.apply(null,r):n.call(null),e.clearImmediate(t))})),t},e.clearImmediate="function"===typeof r?r:function(n){delete a[n]}}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,t,e){var r=n("promise-polyfill"),o=function(){return"undefined"!==typeof window?window:Function("return this;")()}();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))})(void 0,S_,k_,void 0);var O_,T_=k_.exports.boltExport,D_=function(n){var t=w.none(),e=[],r=function(n){return D_((function(t){o((function(e){t(n(e))}))}))},o=function(n){u()?c(n):e.push(n)},i=function(n){u()||(t=w.some(n),a(e),e=[])},u=function(){return t.isSome()},a=function(n){q(n,c)},c=function(n){t.each((function(t){setTimeout((function(){n(t)}),0)}))};return n(i),{get:o,map:r,isReady:u}},__=function(n){return D_((function(t){t(n)}))},A_={nu:D_,pure:__},E_=function(n){setTimeout((function(){throw n}),0)},R_=function(n){var t=function(t){n().then(t,E_)},e=function(t){return R_((function(){return n().then(t)}))},r=function(t){return R_((function(){return n().then((function(n){return t(n).toPromise()}))}))},o=function(t){return R_((function(){return n().then((function(){return t.toPromise()}))}))},i=function(){return A_.nu(t)},u=function(){var t=null;return R_((function(){return null===t&&(t=n()),t}))},a=n;return{map:e,bind:r,anonBind:o,toLazy:i,toCached:u,toPromise:a,get:t}},B_=function(n){return R_((function(){return new T_(n)}))},M_=function(n){return R_((function(){return T_.resolve(n)}))},I_={nu:B_,pure:M_},N_=["input","textarea"],P_=function(n){var t=Ii(n);return V(N_,t)},F_=function(n,t){var e=t.getRoot(n).getOr(n.element);Ha(e,t.invalidClass),t.notify.each((function(t){P_(n.element)&&Su(n.element,"aria-invalid",!1),t.getContainer(n).each((function(n){xu(n,t.validHtml)})),t.onValid(n)}))},L_=function(n,t,e,r){var o=t.getRoot(n).getOr(n.element);Fa(o,t.invalidClass),t.notify.each((function(t){P_(n.element)&&Su(n.element,"aria-invalid",!0),t.getContainer(n).each((function(n){xu(n,r)})),t.onInvalid(n,r)}))},H_=function(n,t,e){return t.validator.fold((function(){return I_.pure(hn.value(!0))}),(function(t){return t.validate(n)}))},z_=function(n,t,e){return t.notify.each((function(t){t.onValidate(n)})),H_(n,t).map((function(r){return n.getSystem().isConnected()?r.fold((function(r){return L_(n,t,e,r),hn.error(r)}),(function(e){return F_(n,t),hn.value(e)})):hn.error("No longer in system")}))},V_=function(n,t){var e=t.getRoot(n).getOr(n.element);return za(e,t.invalidClass)},U_=Object.freeze({__proto__:null,markValid:F_,markInvalid:L_,query:H_,run:z_,isInvalid:V_}),j_=function(n,e){return n.validator.map((function(r){return vi([xi(r.onEvent,(function(t){z_(t,n,e).get(u)}))].concat(r.validateOnLoad?[Ei((function(r){z_(r,n,e).get(t)}))]:[]))})).getOr({})},W_=Object.freeze({__proto__:null,events:j_}),G_=[ye("invalidClass"),Le("getRoot",w.none),Pe("notify",[Le("aria","alert"),Le("getContainer",w.none),Le("validHtml",""),Ls("onValid"),Ls("onInvalid"),Ls("onValidate")]),Pe("validator",[ye("validate"),Le("onEvent","input"),Le("validateOnLoad",!0)])],q_=Ul({fields:G_,name:"invalidating",active:W_,apis:U_,extra:{validation:function(n){return function(t){var e=Yg.getValue(t);return I_.pure(n(e))}}}}),X_=function(n,t,e,r){return e.getOrCreate(n,t,r)},K_=Object.freeze({__proto__:null,getCoupled:X_}),Y_=[xe("others",te(hn.value,le()))],$_=function(){var n={},t=function(t,e,r){var o=An(e.others);if(o)return zn(n,r).getOrThunk((function(){var o=zn(e.others,r).getOrDie("No information found for coupled component: "+r),i=o(t),u=t.getSystem().build(i);return n[r]=u,u}));throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(o,null,2))},e=i({});return oa({readState:e,getOrCreate:t})},J_=Object.freeze({__proto__:null,init:$_}),Q_=Ul({fields:Y_,name:"coupling",apis:K_,state:J_}),Z_=i("sink"),nA=i(Ep({name:Z_(),overrides:i({dom:{tag:"div"},behaviours:zl([Mm.config({useFixed:f})]),events:vi([Di(Eo()),Di(So()),Di(Io())])})}));(function(n){n[n["HighlightFirst"]=0]="HighlightFirst",n[n["HighlightNone"]=1]="HighlightNone"})(O_||(O_={}));var tA,eA=function(n,t){var e=n.getHotspot(t).getOr(t),r="hotspot",o=n.getAnchorOverrides();return n.layouts.fold((function(){return{anchor:r,hotspot:e,overrides:o}}),(function(n){return{anchor:r,hotspot:e,overrides:o,layouts:n}}))},rA=function(n,t,e){var r=n.fetch;return r(e).map(t)},oA=function(n,t,e,r,o,i,u){var a=rA(n,t,r),c=sA(r,n);return a.map((function(n){return n.bind((function(n){return w.from(Ix.sketch(m(m({},i.menu()),{uid:Gu(""),data:n,highlightImmediately:u===O_.HighlightFirst,onOpenMenu:function(n,t){var r=c().getOrDie();Mm.position(r,e,t),mg.decloak(o)},onOpenSubmenu:function(n,t,e){var r=c().getOrDie();Mm.position(r,{anchor:"submenu",item:t},e),mg.decloak(o)},onRepositionMenu:function(n,t,r){var o=c().getOrDie();Mm.position(o,e,t),q(r,(function(n){Mm.position(o,{anchor:"submenu",item:n.triggeringItem},n.triggeredMenu)}))},onEscape:function(){return By.focus(r),mg.close(o),w.some(!0)}})))}))}))},iA=function(n,t,e,r,o,i,u){var a=eA(n,e),c=oA(n,t,a,e,r,o,u);return c.map((function(n){return n.fold((function(){mg.isOpen(r)&&mg.close(r)}),(function(n){mg.cloak(r),mg.open(r,n),i(r)})),r}))},uA=function(n,t,e,r,o,i,u){return mg.close(r),I_.pure(r)},aA=function(n,t,e,r,o,i){var u=Q_.getCoupled(e,"sandbox"),a=mg.isOpen(u),c=a?uA:iA;return c(n,t,e,u,r,o,i)},cA=function(n,t,e){var r=yv.getCurrent(t).getOr(t),o=Ic(n.element);e?Ya(r.element,"min-width",o+"px"):Mc(r.element,o)},sA=function(n,t){return n.getSystem().getByUid(t.uid+"-"+Z_()).map((function(n){return function(){return hn.value(n)}})).getOrThunk((function(){return t.lazySink.fold((function(){return function(){return hn.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(t){return function(){return t(n)}}))}))},lA=function(n){mg.getState(n).each((function(n){Ix.repositionMenus(n)}))},fA=function(n,t,e){var r=hs(),o=function(o,i){var u=eA(n,t);r.link(t.element),n.matchWidth&&cA(u.hotspot,i,n.useMinWidth),n.onOpen(u,o,i),void 0!==e&&void 0!==e.onOpen&&e.onOpen(o,i)},i=function(n,o){r.unlink(t.element),void 0!==e&&void 0!==e.onClose&&e.onClose(n,o)},u=sA(t,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:r.id,role:"listbox"}},behaviours:Zg.augment(n.sandboxBehaviours,[Yg.config({store:{mode:"memory",initialValue:t}}),mg.config({onOpen:o,onClose:i,isPartOf:function(n,e,r){return ys(e,r)||ys(t,r)},getAttachPoint:function(){return u().getOrDie()}}),yv.config({find:function(n){return mg.getState(n).bind((function(n){return yv.getCurrent(n)}))}}),ql.config({channels:m(m({},bg({isExtraPart:l})),xg({doReposition:lA}))})])}},dA=function(n){var t=Q_.getCoupled(n,"sandbox");lA(t)},mA=function(){return[Le("sandboxClasses",[]),Zg.field("sandboxBehaviours",[yv,ql,mg,Yg])]},gA=i([ye("dom"),ye("fetch"),Ls("onOpen"),Hs("onExecute"),Le("getHotspot",w.some),Le("getAnchorOverrides",i({})),jf(),$g("dropdownBehaviours",[Jy,Q_,fy,By]),ye("toggleClass"),Le("eventOrder",{}),Ee("lazySink"),Le("matchWidth",!1),Le("useMinWidth",!1),Ee("role")].concat(mA())),pA=i([Ap({schema:[Ns()],name:"menu",defaults:function(n){return{onExecute:n.onExecute}}}),nA()]),vA=function(n,e,r,o){var i,u=function(t){return zn(n.dom,"attributes").bind((function(n){return zn(n,t)}))},a=function(n){mg.getState(n).each((function(n){Ix.highlightPrimary(n)}))},c=function(e){var r=a;aA(n,(function(n){return n}),e,o,r,O_.HighlightFirst).get(t)},s={expand:function(e){Jy.isOn(e)||aA(n,(function(n){return n}),e,o,t,O_.HighlightNone).get(t)},open:function(e){Jy.isOn(e)||aA(n,(function(n){return n}),e,o,t,O_.HighlightFirst).get(t)},isOpen:Jy.isOn,close:function(e){Jy.isOn(e)&&aA(n,(function(n){return n}),e,o,t,O_.HighlightFirst).get(t)},repositionMenus:function(n){Jy.isOn(n)&&dA(n)}},l=function(n,t){return di(n),w.some(!0)};return{uid:n.uid,dom:n.dom,components:e,behaviours:Qg(n.dropdownBehaviours,[Jy.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Q_.config({others:{sandbox:function(t){return fA(n,t,{onOpen:function(){return Jy.on(t)},onClose:function(){return Jy.off(t)}})}}}),fy.config({mode:"special",onSpace:l,onEnter:l,onDown:function(n,t){if(hA.isOpen(n)){var e=Q_.getCoupled(n,"sandbox");a(e)}else hA.open(n);return w.some(!0)},onEscape:function(n,t){return hA.isOpen(n)?(hA.close(n),w.some(!0)):w.none()}}),By.config({})]),events:Zy(w.some(c)),eventOrder:m(m({},n.eventOrder),(i={},i[jo()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:s,domModification:{attributes:m(m({"aria-haspopup":"true"},n.role.fold((function(){return{}}),(function(n){return{role:n}}))),"button"===n.dom.tag?{type:u("type").getOr("button")}:{})}}},hA=cv({name:"Dropdown",configFields:gA(),partFields:pA(),factory:vA,apis:{open:function(n,t){return n.open(t)},expand:function(n,t){return n.expand(t)},close:function(n,t){return n.close(t)},isOpen:function(n,t){return n.isOpen(t)},repositionMenus:function(n,t){return n.repositionMenus(t)}}}),bA=function(){return sa({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},yA=function(){return vi([hi(Po(),f)])},xA=Object.freeze({__proto__:null,events:yA,exhibit:bA}),wA=Ul({fields:[],name:"unselecting",active:xA}),CA=function(n,t){return hA.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:zl([Kk.button(t.providers.isDisabled),jk(),wA.config({}),ZD.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function(e){return I_.nu((function(t){return n.fetch(t)})).map((function(r){return w.from(aD(Yn(RT(Fu("menu-value"),r,(function(t){n.onItemAction(e,t)}),n.columns,n.presets,cC.CLOSE_ON_EXECUTE,l,t.providers),{movement:MT(n.columns,n.presets)})))}))},parts:{menu:PC(!1,1,n.presets)}})},SA=Fu("color-input-change"),kA=Fu("color-swatch-change"),OA=Fu("color-picker-cancel"),TA=function(n,e,r){var o=YD.parts.field({factory:C_,inputClasses:["tox-textfield"],onSetValue:function(n){return q_.run(n).get(t)},inputBehaviours:zl([$S.config({disabled:e.providers.isDisabled}),jk(),ZD.config({}),q_.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(n){return Gi(n.element)},notify:{onValid:function(n){var t=Yg.getValue(n);fi(n,SA,{color:t})}},validator:{validateOnLoad:!1,validate:function(n){var t=Yg.getValue(n);if(0===t.length)return I_.pure(hn.value(!0));var e=tr.fromTag("span");Ya(e,"background-color",t);var r=nc(e,"background-color").fold((function(){return hn.error("blah")}),(function(n){return hn.value(t)}));return I_.pure(r)}}})]),selectOnFocus:!1}),i=n.label.map((function(n){return u_(n,e.providers)})),u=function(n,t){fi(n,kA,{value:t})},a=function(n,t){c.getOpt(n).each((function(n){"custom"===t?r.colorPicker((function(t){t.fold((function(){return li(n,OA)}),(function(t){u(n,t),pT(t)}))}),"#ffffff"):u(n,"remove"===t?"":t)}))},c=Qx(CA({dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[vl,pl,xl]},onLtr:function(){return[pl,vl,xl]}},components:[],fetch:OT(r.getColors(),r.hasCustomColors()),columns:r.getColorCols(),presets:"color",onItemAction:a},e));return YD.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:i.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[o,c.asSpec()]}]),fieldBehaviours:zl([Sy("form-field-events",[xi(SA,(function(t,e){c.getOpt(t).each((function(n){Ya(n.element,"background-color",e.event.color)})),fi(t,a_,{name:n.name})})),xi(kA,(function(n,t){YD.getField(n).each((function(e){Yg.setValue(e,t.event.value),yv.getCurrent(n).each(By.focus)}))})),xi(OA,(function(n,t){YD.getField(n).each((function(t){yv.getCurrent(n).each(By.focus)}))}))])])})},DA=function(n,t,e){return{hue:n,saturation:t,value:e}},_A=function(n){var t=0,e=0,r=0,o=n.red/255,i=n.green/255,u=n.blue/255,a=Math.min(o,Math.min(i,u)),c=Math.max(o,Math.max(i,u));if(a===c)return r=a,DA(0,0,100*r);var s=o===a?i-u:u===a?o-i:u-o;return t=o===a?3:u===a?1:5,t=60*(t-s/(c-a)),e=(c-a)/c,r=c,DA(Math.round(t),Math.round(100*e),Math.round(100*r))},AA=function(n){var t=(100-n)/100*360,e=DA(t,100,100),r=WO(e);return PO(r)},EA=Fu("rgb-hex-update"),RA=Fu("slider-update"),BA=Fu("palette-update"),MA=Ep({schema:[ye("dom")],name:"label"}),IA=function(n){return Ep({name:n+"-edge",overrides:function(t){var e=t.model.manager.edgeActions[n];return e.fold((function(){return{}}),(function(n){return{events:vi([wi(yo(),(function(t,e,r){return n(t,r)}),[t]),wi(So(),(function(t,e,r){return n(t,r)}),[t]),wi(ko(),(function(t,e,r){r.mouseIsDown.get()&&n(t,r)}),[t])])}}))}})},NA=IA("top-left"),PA=IA("top"),FA=IA("top-right"),LA=IA("right"),HA=IA("bottom-right"),zA=IA("bottom"),VA=IA("bottom-left"),UA=IA("left"),jA=_p({name:"thumb",defaults:i({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:vi([Oi(yo(),n,"spectrum"),Oi(xo(),n,"spectrum"),Oi(wo(),n,"spectrum"),Oi(So(),n,"spectrum"),Oi(ko(),n,"spectrum"),Oi(To(),n,"spectrum")])}}}),WA=_p({schema:[Ke("mouseIsDown",(function(){return Ye(!1)}))],name:"spectrum",overrides:function(n){var t=n.model,e=t.manager,r=function(t,r){return e.getValueFromEvent(r).map((function(r){return e.setValueFrom(t,n,r)}))};return{behaviours:zl([fy.config({mode:"special",onLeft:function(t){return e.onLeft(t,n)},onRight:function(t){return e.onRight(t,n)},onUp:function(t){return e.onUp(t,n)},onDown:function(t){return e.onDown(t,n)}}),By.config({})]),events:vi([xi(yo(),r),xi(xo(),r),xi(So(),r),xi(ko(),(function(t,e){n.mouseIsDown.get()&&r(t,e)}))])}}}),GA=[MA,UA,LA,PA,zA,NA,FA,VA,HA,jA,WA],qA="slider.change.value",XA=i(qA),KA=function(n){return-1!==n.type.indexOf("touch")},YA=function(n){var t=n.event.raw;if(KA(t)){var e=t;return void 0!==e.touches&&1===e.touches.length?w.some(e.touches[0]).map((function(n){return Dc(n.clientX,n.clientY)})):w.none()}var r=t;return void 0!==r.clientX?w.some(r).map((function(n){return Dc(n.clientX,n.clientY)})):w.none()},$A="top",JA="right",QA="bottom",ZA="left",nE=function(n){return n.model.minX},tE=function(n){return n.model.minY},eE=function(n){return n.model.minX-1},rE=function(n){return n.model.minY-1},oE=function(n){return n.model.maxX},iE=function(n){return n.model.maxY},uE=function(n){return n.model.maxX+1},aE=function(n){return n.model.maxY+1},cE=function(n,t,e){return t(n)-e(n)},sE=function(n){return cE(n,oE,nE)},lE=function(n){return cE(n,iE,tE)},fE=function(n){return sE(n)/2},dE=function(n){return lE(n)/2},mE=function(n){return n.stepSize},gE=function(n){return n.snapToGrid},pE=function(n){return n.snapStart},vE=function(n){return n.rounded},hE=function(n,t){return void 0!==n[t+"-edge"]},bE=function(n){return hE(n,ZA)},yE=function(n){return hE(n,JA)},xE=function(n){return hE(n,$A)},wE=function(n){return hE(n,QA)},CE=function(n){return n.model.value.get()},SE=function(n){return{x:n}},kE=function(n){return{y:n}},OE=function(n,t){return{x:n,y:t}},TE=function(n,t){fi(n,XA(),{value:t})},DE=function(n,t){TE(n,OE(eE(t),rE(t)))},_E=function(n,t){TE(n,kE(rE(t)))},AE=function(n,t){TE(n,OE(fE(t),rE(t)))},EE=function(n,t){TE(n,OE(uE(t),rE(t)))},RE=function(n,t){TE(n,SE(uE(t)))},BE=function(n,t){TE(n,OE(uE(t),dE(t)))},ME=function(n,t){TE(n,OE(uE(t),aE(t)))},IE=function(n,t){TE(n,kE(aE(t)))},NE=function(n,t){TE(n,OE(fE(t),aE(t)))},PE=function(n,t){TE(n,OE(eE(t),aE(t)))},FE=function(n,t){TE(n,SE(eE(t)))},LE=function(n,t){TE(n,OE(eE(t),dE(t)))},HE=function(n,t,e,r){return n<t?n:n>e?e:n===t?t-1:Math.max(t,n-r)},zE=function(n,t,e,r){return n>e?n:n<t?t:n===e?e+1:Math.min(e,n+r)},VE=function(n,t,e){return Math.max(t,Math.min(e,n))},UE=function(n,t,e,r,o){return o.fold((function(){var o=n-t,i=Math.round(o/r)*r;return VE(t+i,t-1,e+1)}),(function(t){var o=(n-t)%r,i=Math.round(o/r),u=Math.floor((n-t)/r),a=Math.floor((e-t)/r),c=Math.min(a,u+i),s=t+c*r;return Math.max(t,s)}))},jE=function(n,t,e){return Math.min(e,Math.max(n,t))-t},WE=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.step,u=n.snap,a=n.snapStart,c=n.rounded,s=n.hasMinEdge,l=n.hasMaxEdge,f=n.minBound,d=n.maxBound,m=n.screenRange,g=s?t-1:t,p=l?e+1:e;if(o<f)return g;if(o>d)return p;var v=jE(o,f,d),h=VE(v/m*r+t,g,p);return u&&h>=t&&h<=e?UE(h,t,e,i,a):c?Math.round(h):h},GE=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,a=n.maxBound,c=n.maxOffset,s=n.centerMinEdge,l=n.centerMaxEdge;return o<t?i?0:s:o>e?u?a:l:(o-t)/r*c},qE="top",XE="right",KE="bottom",YE="left",$E="width",JE="height",QE=function(n){return n.element.dom.getBoundingClientRect()},ZE=function(n,t){return n[t]},nR=function(n){var t=QE(n);return ZE(t,YE)},tR=function(n){var t=QE(n);return ZE(t,XE)},eR=function(n){var t=QE(n);return ZE(t,qE)},rR=function(n){var t=QE(n);return ZE(t,KE)},oR=function(n){var t=QE(n);return ZE(t,$E)},iR=function(n){var t=QE(n);return ZE(t,JE)},uR=function(n,t,e){return(n+t)/2-e},aR=function(n,t){var e=QE(n),r=QE(t),o=ZE(e,YE),i=ZE(e,XE),u=ZE(r,YE);return uR(o,i,u)},cR=function(n,t){var e=QE(n),r=QE(t),o=ZE(e,qE),i=ZE(e,KE),u=ZE(r,qE);return uR(o,i,u)},sR=function(n,t){fi(n,XA(),{value:t})},lR=function(n){return{x:n}},fR=function(n,t,e){var r={min:nE(t),max:oE(t),range:sE(t),value:e,step:mE(t),snap:gE(t),snapStart:pE(t),rounded:vE(t),hasMinEdge:bE(t),hasMaxEdge:yE(t),minBound:nR(n),maxBound:tR(n),screenRange:oR(n)};return WE(r)},dR=function(n,t,e){var r=fR(n,t,e),o=lR(r);return sR(n,o),r},mR=function(n,t){var e=nE(t);sR(n,lR(e))},gR=function(n,t){var e=oE(t);sR(n,lR(e))},pR=function(n,t,e){var r=n>0?zE:HE,o=r(CE(e).x,nE(e),oE(e),mE(e));return sR(t,lR(o)),w.some(o)},vR=function(n){return function(t,e){return pR(n,t,e).map(f)}},hR=function(n){var t=YA(n);return t.map((function(n){return n.left}))},bR=function(n,t,e,r,o){var i=0,u=oR(n),a=r.bind((function(t){return w.some(aR(t,n))})).getOr(i),c=o.bind((function(t){return w.some(aR(t,n))})).getOr(u),s={min:nE(t),max:oE(t),range:sE(t),value:e,hasMinEdge:bE(t),hasMaxEdge:yE(t),minBound:nR(n),minOffset:i,maxBound:tR(n),maxOffset:u,centerMinEdge:a,centerMaxEdge:c};return GE(s)},yR=function(n,t,e,r,o,i){var u=bR(t,i,e,r,o);return nR(t)-nR(n)+u},xR=function(n,t,e,r){var o=CE(e),i=yR(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=Ic(t.element)/2;Ya(t.element,"left",i-u+"px")},wR=vR(-1),CR=vR(1),SR=w.none,kR=w.none,OR={"top-left":w.none(),top:w.none(),"top-right":w.none(),right:w.some(RE),"bottom-right":w.none(),bottom:w.none(),"bottom-left":w.none(),left:w.some(FE)},TR=Object.freeze({__proto__:null,setValueFrom:dR,setToMin:mR,setToMax:gR,findValueOfOffset:fR,getValueFromEvent:hR,findPositionOfValue:yR,setPositionFromValue:xR,onLeft:wR,onRight:CR,onUp:SR,onDown:kR,edgeActions:OR}),DR=function(n,t){fi(n,XA(),{value:t})},_R=function(n){return{y:n}},AR=function(n,t,e){var r={min:tE(t),max:iE(t),range:lE(t),value:e,step:mE(t),snap:gE(t),snapStart:pE(t),rounded:vE(t),hasMinEdge:xE(t),hasMaxEdge:wE(t),minBound:eR(n),maxBound:rR(n),screenRange:iR(n)};return WE(r)},ER=function(n,t,e){var r=AR(n,t,e),o=_R(r);return DR(n,o),r},RR=function(n,t){var e=tE(t);DR(n,_R(e))},BR=function(n,t){var e=iE(t);DR(n,_R(e))},MR=function(n,t,e){var r=n>0?zE:HE,o=r(CE(e).y,tE(e),iE(e),mE(e));return DR(t,_R(o)),w.some(o)},IR=function(n){return function(t,e){return MR(n,t,e).map(f)}},NR=function(n){var t=YA(n);return t.map((function(n){return n.top}))},PR=function(n,t,e,r,o){var i=0,u=iR(n),a=r.bind((function(t){return w.some(cR(t,n))})).getOr(i),c=o.bind((function(t){return w.some(cR(t,n))})).getOr(u),s={min:tE(t),max:iE(t),range:lE(t),value:e,hasMinEdge:xE(t),hasMaxEdge:wE(t),minBound:eR(n),minOffset:i,maxBound:rR(n),maxOffset:u,centerMinEdge:a,centerMaxEdge:c};return GE(s)},FR=function(n,t,e,r,o,i){var u=PR(t,i,e,r,o);return eR(t)-eR(n)+u},LR=function(n,t,e,r){var o=CE(e),i=FR(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),u=Sc(t.element)/2;Ya(t.element,"top",i-u+"px")},HR=w.none,zR=w.none,VR=IR(-1),UR=IR(1),jR={"top-left":w.none(),top:w.some(_E),"top-right":w.none(),right:w.none(),"bottom-right":w.none(),bottom:w.some(IE),"bottom-left":w.none(),left:w.none()},WR=Object.freeze({__proto__:null,setValueFrom:ER,setToMin:RR,setToMax:BR,findValueOfOffset:AR,getValueFromEvent:NR,findPositionOfValue:FR,setPositionFromValue:LR,onLeft:HR,onRight:zR,onUp:VR,onDown:UR,edgeActions:jR}),GR=function(n,t){fi(n,XA(),{value:t})},qR=function(n,t){return{x:n,y:t}},XR=function(n,t,e){var r=fR(n,t,e.left),o=AR(n,t,e.top),i=qR(r,o);return GR(n,i),i},KR=function(n,t,e,r){var o=n>0?zE:HE,i=t?CE(r).x:o(CE(r).x,nE(r),oE(r),mE(r)),u=t?o(CE(r).y,tE(r),iE(r),mE(r)):CE(r).y;return GR(e,qR(i,u)),w.some(i)},YR=function(n,t){return function(e,r){return KR(n,t,e,r).map(f)}},$R=function(n,t){var e=nE(t),r=tE(t);GR(n,qR(e,r))},JR=function(n,t){var e=oE(t),r=iE(t);GR(n,qR(e,r))},QR=function(n){return YA(n)},ZR=function(n,t,e,r){var o=CE(e),i=yR(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=FR(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),a=Ic(t.element)/2,c=Sc(t.element)/2;Ya(t.element,"left",i-a+"px"),Ya(t.element,"top",u-c+"px")},nB=YR(-1,!1),tB=YR(1,!1),eB=YR(-1,!0),rB=YR(1,!0),oB={"top-left":w.some(DE),top:w.some(AE),"top-right":w.some(EE),right:w.some(BE),"bottom-right":w.some(ME),bottom:w.some(NE),"bottom-left":w.some(PE),left:w.some(LE)},iB=Object.freeze({__proto__:null,setValueFrom:XR,setToMin:$R,setToMax:JR,getValueFromEvent:QR,setPositionFromValue:ZR,onLeft:nB,onRight:tB,onUp:eB,onDown:rB,edgeActions:oB}),uB=[Le("stepSize",1),Le("onChange",t),Le("onChoose",t),Le("onInit",t),Le("onDragStart",t),Le("onDragEnd",t),Le("snapToGrid",!1),Le("rounded",!0),Ee("snapStart"),xe("model",ce("mode",{x:[Le("minX",0),Le("maxX",100),Ke("value",(function(n){return Ye(n.mode.minX)})),ye("getInitialValue"),Us("manager",TR)],y:[Le("minY",0),Le("maxY",100),Ke("value",(function(n){return Ye(n.mode.minY)})),ye("getInitialValue"),Us("manager",WR)],xy:[Le("minX",0),Le("maxX",100),Le("minY",0),Le("maxY",100),Ke("value",(function(n){return Ye({x:n.mode.minX,y:n.mode.minY})})),ye("getInitialValue"),Us("manager",iB)]})),$g("sliderBehaviours",[fy,Yg]),Ke("mouseIsDown",(function(){return Ye(!1)}))],aB=function(n,t,e,r){var o,i=function(t){return Wp(t,n,"thumb")},u=function(t){return Wp(t,n,"spectrum")},a=function(t){return jp(t,n,"left-edge")},c=function(t){return jp(t,n,"right-edge")},s=function(t){return jp(t,n,"top-edge")},l=function(t){return jp(t,n,"bottom-edge")},d=n.model,m=d.manager,g=function(t,e){m.setPositionFromValue(t,e,n,{getLeftEdge:a,getRightEdge:c,getTopEdge:s,getBottomEdge:l,getSpectrum:u})},p=function(t,e){d.value.set(e);var r=i(t);return g(t,r),n.onChange(t,r,e),w.some(!0)},v=function(t){m.setToMin(t,n)},h=function(t){m.setToMax(t,n)},b=function(t){var e=function(){jp(t,n,"thumb").each((function(e){var r=d.value.get();n.onChoose(t,e,r)}))},r=n.mouseIsDown.get();n.mouseIsDown.set(!1),r&&e()},y=function(t,e){e.stop(),n.mouseIsDown.set(!0),n.onDragStart(t,i(t))},x=function(t,e){e.stop(),n.onDragEnd(t,i(t)),b(t)};return{uid:n.uid,dom:n.dom,components:t,behaviours:Qg(n.sliderBehaviours,[fy.config({mode:"special",focusIn:function(t){return jp(t,n,"spectrum").map(fy.focusIn).map(f)}}),Yg.config({store:{mode:"manual",getValue:function(n){return d.value.get()}}}),ql.config({channels:(o={},o[vg()]={onReceive:b},o)})]),events:vi([xi(XA(),(function(n,t){p(n,t.event.value)})),Ei((function(t,e){var r=d.getInitialValue();d.value.set(r);var o=i(t);g(t,o);var a=u(t);n.onInit(t,o,a,d.value.get())})),xi(yo(),y),xi(wo(),x),xi(So(),y),xi(To(),x)]),apis:{resetToMin:v,resetToMax:h,changeValue:p,refresh:g},domModification:{styles:{position:"relative"}}}},cB=cv({name:"Slider",configFields:uB,partFields:GA,factory:aB,apis:{resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),sB=function(n,t){var e=cB.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),r=cB.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return cB.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:i({y:0})},components:[e,r],sliderBehaviours:zl([By.config({})]),onChange:function(n,t,e){fi(n,RA,{value:e})}})},lB="form",fB=[$g("formBehaviours",[Yg])],dB=function(n){return"<alloy.field."+n+">"},mB=function(n){var t=function(){var n=[],t=function(t,e){return n.push(t),Lp(lB,dB(t),e)};return{field:t,record:function(){return n}}}(),e=n(t),r=t.record(),o=G(r,(function(n){return _p({name:n,pname:dB(n)})}));return tv(lB,fB,o,pB,e)},gB=function(n,t){return n.fold((function(){return hn.error(t)}),hn.value)},pB=function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:Qg(n.formBehaviours,[Yg.config({store:{mode:"manual",getValue:function(t){var e=qp(t,n);return Bn(e,(function(n,t){return n().bind((function(n){var e=yv.getCurrent(n);return gB(e,new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+Bu(n.element)))})).map(Yg.getValue)}))},setValue:function(t,e){Rn(e,(function(e,r){jp(t,n,r).each((function(n){yv.getCurrent(n).each((function(n){Yg.setValue(n,e)}))}))}))}}})]),apis:{getField:function(t,e){return jp(t,n,e).bind(yv.getCurrent)}}}},vB={getField:ea((function(n,t,e){return n.getField(t,e)})),sketch:mB},hB=Fu("valid-input"),bB=Fu("invalid-input"),yB=Fu("validating-input"),xB="colorcustom.rgb.",wB=function(n,e,r,o){var i=function(t,r){return q_.config({invalidClass:e("invalid"),notify:{onValidate:function(n){fi(n,yB,{type:t})},onValid:function(n){fi(n,hB,{type:t,value:Yg.getValue(n)})},onInvalid:function(n){fi(n,bB,{type:t,value:Yg.getValue(n)})}},validator:{validate:function(t){var e=Yg.getValue(t),o=r(e)?hn.value(!0):hn.error(n("aria.input.invalid"));return I_.pure(o)},validateOnLoad:!1}})},u=function(r,o,u,a,c){var s=n(xB+"range"),l=YD.parts.label({dom:{tag:"label",innerHtml:u,attributes:{"aria-label":a}}}),f=YD.parts.field({data:c,factory:C_,inputAttributes:m({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:zl([i(o,r),ZD.config({})]),onSetValue:function(n){if(q_.isInvalid(n)){var e=q_.run(n);e.get(t)}}}),d=[l,f],g="hex"!==o?[YD.parts["aria-descriptor"]({text:s})]:[],p=d.concat(g);return{dom:{tag:"div",attributes:{role:"presentation"}},components:p}},a=function(n,t){var e=PO(t);return vB.getField(n,"hex").each((function(t){By.isFocused(t)||Yg.setValue(n,{hex:e.value})})),e},c=function(n,t){var e=t.red,r=t.green,o=t.blue;Yg.setValue(n,{red:e,green:r,blue:o})},s=Qx({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=function(n,t){s.getOpt(n).each((function(n){Ya(n.element,"background-color","#"+t.value)}))},f=function(){var t={red:Ye(w.some(255)),green:Ye(w.some(255)),blue:Ye(w.some(255)),hex:Ye(w.some("ffffff"))},i=function(n,t){var e=GO(t);c(n,e),g(e)},f=function(n){return t[n].get()},d=function(n,e){t[n].set(e)},m=function(){return f("red").bind((function(n){return f("green").bind((function(t){return f("blue").map((function(e){return UO(n,t,e,1)}))}))}))},g=function(n){var t=n.red,e=n.green,r=n.blue;d("red",w.some(t)),d("green",w.some(e)),d("blue",w.some(r))},p=function(n,t){var e=t.event;"hex"!==e.type?d(e.type,w.none()):o(n)},v=function(n,t){r(n);var e=AO(t);d("hex",w.some(t));var o=GO(e);c(n,o),g(o),fi(n,EA,{hex:e}),l(n,e)},h=function(n,t,e){var r=parseInt(e,10);d(t,w.some(r)),m().each((function(t){var e=a(n,t);l(n,e)}))},b=function(n){return"hex"===n.type},y=function(n,t){var e=t.event;b(e)?v(n,e.value):h(n,e.type,e.value)},x=function(t){return{label:n(xB+t+".label"),description:n(xB+t+".description")}},C=x("red"),S=x("green"),k=x("blue"),O=x("hex");return Yn(vB.sketch((function(t){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[t.field("red",YD.sketch(u(jO,"red",C.label,C.description,255))),t.field("green",YD.sketch(u(jO,"green",S.label,S.description,255))),t.field("blue",YD.sketch(u(jO,"blue",k.label,k.description,255))),t.field("hex",YD.sketch(u(BO,"hex",O.label,O.description,"ffffff"))),s.asSpec()],formBehaviours:zl([q_.config({invalidClass:e("form-invalid")}),Sy("rgb-form-events",[xi(hB,y),xi(bB,p),xi(yB,p)])])}})),{apis:{updateHex:function(n,t){Yg.setValue(n,{hex:t.value}),i(n,t),l(n,t)}}})},d=av({factory:f,name:"RgbForm",configFields:[],apis:{updateHex:function(n,t,e){n.updateHex(t,e)}},extraApis:{}});return d},CB=function(n,t){var e=cB.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),r=cB.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class="+t("sv-palette-inner-thumb")+' role="presentation"></div>'}}),o=function(n,t){var e=n.width,r=n.height,o=n.getContext("2d");if(null!==o){o.fillStyle=t,o.fillRect(0,0,e,r);var i=o.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=i,o.fillRect(0,0,e,r);var u=o.createLinearGradient(0,0,0,r);u.addColorStop(0,"rgba(0,0,0,0)"),u.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=u,o.fillRect(0,0,e,r)}},u=function(n,t){var e=n.components()[0].element.dom;o(e,KO(t))},a=function(n){var u=i({x:0,y:0}),a=function(n,t,e){fi(n,BA,{value:e})},c=function(n,t,e,r){o(e.element.dom,KO(YO))},s=zl([yv.config({find:w.some}),By.config({})]);return cB.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:u},rounded:!1,components:[e,r],onChange:a,onInit:c,sliderBehaviours:s})},c=av({factory:a,name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(n,t,e){u(t,e)}},extraApis:{}});return c},SB=function(n,e){var r=function(t){var r=wB(n,e,t.onValidHex,t.onInvalidHex),o=CB(n,e),i={paletteRgba:Ye(YO)},u=Qx(o.sketch({})),a=Qx(r.sketch({})),c=function(n,t){u.getOpt(n).each((function(n){var e=GO(t);i.paletteRgba.set(e),o.setRgba(n,e)}))},s=function(n,t){a.getOpt(n).each((function(n){r.updateHex(n,t)}))},l=function(n,t,e){q(e,(function(e){e(n,t)}))},f=function(){var n=[s];return function(t,e){var r=e.event.value,o=i.paletteRgba.get(),u=_A(o),a=DA(u.hue,r.x,100-r.y),c=WO(a),s=PO(c);l(t,s,n)}},d=function(){var n=[c,s];return function(t,e){var r=e.event.value,o=AA(r.y);l(t,o,n)}};return{uid:t.uid,dom:t.dom,components:[u.asSpec(),sB(n,e),a.asSpec()],behaviours:zl([Sy("colour-picker-events",[xi(BA,f()),xi(RA,d())]),yv.config({find:function(n){return a.getOpt(n)}}),fy.config({mode:"acyclic"})])}},o=av({name:"ColourPicker",configFields:[ye("dom"),Le("onValidHex",t),Le("onInvalidHex",t)],factory:r});return o},kB=function(){return yv.config({find:w.some})},OB=function(n){return yv.config({find:n.getOpt})},TB=function(n){return yv.config({find:function(t){return $i(t.element,n).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))}})},DB={self:kB,memento:OB,childAt:TB},_B={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},AB=function(n){return _B[n]},EB=function(n){return AB(n)},RB=function(n){var t=function(n){return"tox-"+n},e=SB(EB,t),r=function(n){fi(n,l_,{name:"hex-valid",value:!0})},o=function(n){fi(n,l_,{name:"hex-valid",value:!1})},i=Qx(e.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:r,onInvalidHex:o}));return{dom:{tag:"div"},components:[i.asSpec()],behaviours:zl([Yg.config({store:{mode:"manual",getValue:function(n){var t=i.get(n),e=yv.getCurrent(t),r=e.bind((function(n){var t=Yg.getValue(n);return t.hex}));return r.map((function(n){return"#"+n})).getOr("")},setValue:function(n,t){var e=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,r=e.exec(t),o=i.get(n),u=yv.getCurrent(o);u.fold((function(){console.log("Can not find form")}),(function(n){Yg.setValue(n,{hex:w.from(r[1]).getOr("")}),vB.getField(n,"hex").each((function(n){li(n,Bo())}))}))}}}),DB.self()])}},BB=tinymce.util.Tools.resolve("tinymce.Resource"),MB=function(n){return Object.prototype.hasOwnProperty.call(n,"init")},IB=function(n){var t=Ye(w.none()),e=Qx({dom:{tag:n.tag}}),r=Ye(w.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:zl([Sy("custom-editor-events",[Ei((function(o){e.getOpt(o).each((function(e){(MB(n)?n.init(e.element.dom):BB.load(n.scriptId,n.scriptUrl).then((function(t){return t(e.element.dom,n.settings)}))).then((function(n){r.get().each((function(t){n.setValue(t)})),r.set(w.none()),t.set(w.some(n))}))}))}))]),Yg.config({store:{mode:"manual",getValue:function(){return t.get().fold((function(){return r.get().getOr("")}),(function(n){return n.getValue()}))},setValue:function(n,e){t.get().fold((function(){r.set(w.some(e))}),(function(n){return n.setValue(e)}))}}}),DB.self()]),components:[e.asSpec()]}},NB=tinymce.util.Tools.resolve("tinymce.util.Tools"),PB=Ht([Le("preprocess",u),Le("postprocess",u)]),FB=function(n,t){var e=ie("RepresentingConfigs.memento processors",PB,t);return Yg.config({store:{mode:"manual",getValue:function(t){var r=n.get(t),o=Yg.getValue(r);return e.postprocess(o)},setValue:function(t,r){var o=e.preprocess(r),i=n.get(t);Yg.setValue(i,o)}}})},LB=function(n,t,e){return Yg.config(Yn({store:{mode:"manual",getValue:t,setValue:e}},n.map((function(n){return{store:{initialValue:n}}})).getOr({})))},HB=function(n,t,e){return LB(n,(function(n){return t(n.element)}),(function(n,t){return e(n.element,t)}))},zB=function(n){return HB(n,ic,uc)},VB=function(n){return HB(n,yu,xu)},UB=function(n){return Yg.config({store:{mode:"memory",initialValue:n}})},jB={memento:FB,withElement:HB,withComp:LB,domValue:zB,domHtml:VB,memory:UB},WB="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",GB=function(n,t){var e=NB.explode(t.getSetting("images_file_types",WB,"string")),r=function(n){return U(e,(function(t){return pr(n.name.toLowerCase(),"."+t.toLowerCase())}))};return Y(dn(n),r)},qB=function(n,t){var e=function(n,t){t.stop()},r=function(n){return function(t,e){q(n,(function(n){n(t,e)}))}},o=function(n,t){if(!$S.isDisabled(n)){var e=t.event.raw;u(n,e.dataTransfer.files)}},i=function(n,t){var e=t.event.raw.target;u(n,e.files)},u=function(e,r){Yg.setValue(e,GB(r,t)),fi(e,a_,{name:n.name})},a=Qx({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:zl([Sy("input-file-events",[Di(Io()),Di(Go())])])}),c=function(n){return{uid:n.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:zl([jB.memory([]),DB.self(),$S.config({}),Jy.config({toggleClass:"dragenter",toggleOnExecute:!1}),Sy("dropzone-events",[xi("dragenter",r([e,Jy.toggle])),xi("dragleave",r([e,Jy.toggle])),xi("dragover",e),xi("drop",r([e,o])),xi(Mo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},Jx.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[a.asSpec()],action:function(n){var t=a.get(n);t.element.dom.click()},buttonBehaviours:zl([ZD.config({}),Kk.button(t.isDisabled),jk()])})]}]}},s=n.label.map((function(n){return u_(n,t)})),l=YD.parts.field({factory:{sketch:c}});return t_(s,l,["tox-form__group--stretched"],[])},XB=function(n,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:G(n.items,t.interpreter)}},KB=Fu("alloy-fake-before-tabstop"),YB=Fu("alloy-fake-after-tabstop"),$B=function(n){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:zl([By.config({ignore:!0}),ZD.config({})])}},JB=function(n){return{dom:{tag:"div",classes:["tox-navobj"]},components:[$B([KB]),n,$B([YB])],behaviours:zl([DB.childAt(1)])}},QB=function(n,t){fi(n,Eo(),{raw:{which:9,shiftKey:t}})},ZB=function(n,t){var e=t.element;za(e,KB)?QB(n,!0):za(e,YB)&&QB(n,!1)},nM=function(n){return pD(n,["."+KB,"."+YB].join(","),l)},tM=!(Xr().browser.isIE()||Xr().browser.isEdge()),eM=function(n){var t=Ye("");return{getValue:function(n){return t.get()},setValue:function(e,r){if(n)Su(e.element,"srcdoc",r);else{Su(e.element,"src","javascript:''");var o=e.element.dom.contentWindow.document;o.open(),o.write(r),o.close()}t.set(r)}}},rM=function(n,t){var e=tM&&n.sandboxed,r=m(m({},n.label.map((function(n){return{title:n}})).getOr({})),e?{sandbox:"allow-scripts allow-same-origin"}:{}),o=eM(e),i=n.label.map((function(n){return u_(n,t)})),u=function(n){return JB({uid:n.uid,dom:{tag:"iframe",attributes:r},behaviours:zl([ZD.config({}),By.config({}),jB.withComp(w.none(),o.getValue,o.setValue)])})},a=YD.parts.field({factory:{sketch:u}});return t_(i,a,["tox-form__group--stretched"],[])},oM=function(n,t){return aM(document.createElement("canvas"),n,t)},iM=function(n){var t=oM(n.width,n.height),e=uM(t);return e.drawImage(n,0,0),t},uM=function(n){return n.getContext("2d")},aM=function(n,t,e){return n.width=t,n.height=e,n},cM=function(n){return n.naturalWidth||n.width},sM=function(n){return n.naturalHeight||n.height},lM=function(){var n=function(n){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof n)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(n,r(u,this),r(a,this))},t=window,e=n.immediateFn||"function"===typeof t.setImmediate&&t.setImmediate||function(n){return setTimeout(n,1)},r=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.apply(t,e)}},o=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function i(n){var t=this;null!==this._state?e((function(){var e=t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(o){return void n.reject(o)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)})):this._deferreds.push(n)}function u(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===typeof n||"function"===typeof n)){var t=n.then;if("function"===typeof t)return void l(r(t,n),r(u,this),r(a,this))}this._state=!0,this._value=n,c.call(this)}catch(e){a.call(this,e)}}function a(n){this._state=!1,this._value=n,c.call(this)}function c(){for(var n=0,t=this._deferreds;n<t.length;n++){var e=t[n];i.call(this,e)}this._deferreds=[]}function s(n,t,e,r){this.onFulfilled="function"===typeof n?n:null,this.onRejected="function"===typeof t?t:null,this.resolve=e,this.reject=r}var l=function(n,t,e){var r=!1;try{n((function(n){r||(r=!0,t(n))}),(function(n){r||(r=!0,e(n))}))}catch(o){if(r)return;r=!0,e(o)}};return n.prototype.catch=function(n){return this.then(null,n)},n.prototype.then=function(t,e){var r=this;return new n((function(n,o){i.call(r,new s(t,e,n,o))}))},n.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Array.prototype.slice.call(1===t.length&&o(t[0])?t[0]:t);return new n((function(n,t){if(0===r.length)return n([]);for(var e=r.length,o=function(i,u){try{if(u&&("object"===typeof u||"function"===typeof u)){var a=u.then;if("function"===typeof a)return void a.call(u,(function(n){o(i,n)}),t)}r[i]=u,0===--e&&n(r)}catch(c){t(c)}},i=0;i<r.length;i++)o(i,r[i])}))},n.resolve=function(t){return t&&"object"===typeof t&&t.constructor===n?t:new n((function(n){n(t)}))},n.reject=function(t){return new n((function(n,e){e(t)}))},n.race=function(t){return new n((function(n,e){for(var r=0,o=t;r<o.length;r++){var i=o[r];i.then(n,e)}}))},n},fM=window.Promise?window.Promise:lM(),dM=function(n){return new fM((function(t,e){var r=URL.createObjectURL(n),o=new Image,i=function(){o.removeEventListener("load",u),o.removeEventListener("error",a)},u=function(){i(),t(o)},a=function(){i(),e("Unable to load data of type "+n.type+": "+r)};o.addEventListener("load",u),o.addEventListener("error",a),o.src=r,o.complete&&setTimeout(u,0)}))},mM=function(n){var t=n.split(","),e=/data:([^;]+)/.exec(t[0]);if(!e)return w.none();for(var r=e[1],o=t[1],i=1024,u=atob(o),a=u.length,c=Math.ceil(a/i),s=new Array(c),l=0;l<c;++l){for(var f=l*i,d=Math.min(f+i,a),m=new Array(d-f),g=f,p=0;g<d;++p,++g)m[p]=u[g].charCodeAt(0);s[l]=new Uint8Array(m)}return w.some(new Blob(s,{type:r}))},gM=function(n){return new fM((function(t,e){mM(n).fold((function(){e("uri is not base64: "+n)}),t)}))},pM=function(n,t,e){return t=t||"image/png",M(HTMLCanvasElement.prototype.toBlob)?new fM((function(r,o){n.toBlob((function(n){n?r(n):o()}),t,e)})):gM(n.toDataURL(t,e))},vM=function(n,t,e){return t=t||"image/png",n.toDataURL(t,e)},hM=function(n){return dM(n).then((function(n){yM(n);var t=oM(cM(n),sM(n)),e=uM(t);return e.drawImage(n,0,0),t}))},bM=function(n){return new fM((function(t){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)}))},yM=function(n){URL.revokeObjectURL(n.src)},xM=function(n,t,e){var r=t.type,o=i(r),u=function(){return fM.resolve(t)},a=i(e),c=function(){return e.split(",")[1]},s=function(t,e){return n.then((function(n){return pM(n,t,e)}))},l=function(t,e){return n.then((function(n){return vM(n,t,e)}))},f=function(n,t){return l(n,t).then((function(n){return n.split(",")[1]}))},d=function(){return n.then(iM)};return{getType:o,toBlob:u,toDataURL:a,toBase64:c,toAdjustedBlob:s,toAdjustedDataURL:l,toAdjustedBase64:f,toCanvas:d}},wM=function(n){return bM(n).then((function(t){return xM(hM(n),n,t)}))},CM=function(n,t){return pM(n,t).then((function(t){return xM(fM.resolve(n),t,n.toDataURL())}))},SM=function(n){return wM(n)},kM=function(n,t,e){var r="string"===typeof n?parseFloat(n):n;return r>e?r=e:r<t&&(r=t),r},OM=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},TM=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],DM=function(n,t){for(var e,r=[],o=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)r[u]=t[u+5*i];for(u=0;u<5;u++){e=0;for(var a=0;a<5;a++)e+=n[u+5*a]*r[a];o[u+5*i]=e}}return o},_M=function(n,t){var e;return t=kM(t,-1,1),t*=100,t<0?e=127+t/100*127:(e=t%1,e=0===e?TM[t]:TM[Math.floor(t)]*(1-e)+TM[Math.floor(t)+1]*e,e=127*e+127),DM(n,[e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])},AM=function(n,t){return t=kM(255*t,-255,255),DM(n,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},EM=function(n,t,e,r){return t=kM(t,0,2),e=kM(e,0,2),r=kM(r,0,2),DM(n,[t,0,0,0,0,0,e,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])},RM=function(n,t){return n.toCanvas().then((function(e){return BM(e,n.getType(),t)}))},BM=function(n,t,e){var r=uM(n),o=function(n,t){for(var e,r,o,i,u=n.data,a=t[0],c=t[1],s=t[2],l=t[3],f=t[4],d=t[5],m=t[6],g=t[7],p=t[8],v=t[9],h=t[10],b=t[11],y=t[12],x=t[13],w=t[14],C=t[15],S=t[16],k=t[17],O=t[18],T=t[19],D=0;D<u.length;D+=4)e=u[D],r=u[D+1],o=u[D+2],i=u[D+3],u[D]=e*a+r*c+o*s+i*l+f,u[D+1]=e*d+r*m+o*g+i*p+v,u[D+2]=e*h+r*b+o*y+i*x+w,u[D+3]=e*C+r*S+o*k+i*O+T;return n},i=o(r.getImageData(0,0,n.width,n.height),e);return r.putImageData(i,0,0),CM(n,t)},MM=function(n,t){return n.toCanvas().then((function(e){return IM(e,n.getType(),t)}))},IM=function(n,t,e){var r=uM(n),o=function(n,t,e){for(var r=function(n,t,e){return n>e?n=e:n<t&&(n=t),n},o=Math.round(Math.sqrt(e.length)),i=Math.floor(o/2),u=n.data,a=t.data,c=n.width,s=n.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<o;p++)for(var v=0;v<o;v++){var h=r(f+v-i,0,c-1),b=r(l+p-i,0,s-1),y=4*(b*c+h),x=e[p*o+v];d+=u[y]*x,m+=u[y+1]*x,g+=u[y+2]*x}var w=4*(l*c+f);a[w]=r(d,0,255),a[w+1]=r(m,0,255),a[w+2]=r(g,0,255)}return t},i=r.getImageData(0,0,n.width,n.height),u=r.getImageData(0,0,n.width,n.height);return u=o(i,u,e),r.putImageData(u,0,0),CM(n,t)},NM=function(n){var t=function(t,e,r){for(var o=uM(t),i=new Array(256),u=function(n,t){for(var e=n.data,r=0;r<e.length;r+=4)e[r]=t[e[r]],e[r+1]=t[e[r+1]],e[r+2]=t[e[r+2]];return n},a=0;a<i.length;a++)i[a]=n(a,r);var c=u(o.getImageData(0,0,t.width,t.height),i);return o.putImageData(c,0,0),CM(t,e)};return function(n,e){return n.toCanvas().then((function(r){return t(r,n.getType(),e)}))}},PM=function(n){return function(t,e){return RM(t,n(OM(),e))}},FM=function(n){return function(t){return RM(t,n)}},LM=function(n){return function(t){return MM(t,n)}},HM=FM([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),zM=PM(AM),VM=PM(_M),UM=function(n,t,e,r){return RM(n,EM(OM(),t,e,r))},jM=LM([0,-1,0,-1,5,-1,0,-1,0]),WM=NM((function(n,t){return 255*Math.pow(n/255,1-t)})),GM=function(n,t,e){var r=cM(n),o=sM(n),i=t/r,u=e/o,a=!1;(i<.5||i>2)&&(i=i<.5?.5:2,a=!0),(u<.5||u>2)&&(u=u<.5?.5:2,a=!0);var c=qM(n,i,u);return a?c.then((function(n){return GM(n,t,e)})):c},qM=function(n,t,e){return new fM((function(r){var o=cM(n),i=sM(n),u=Math.floor(o*t),a=Math.floor(i*e),c=oM(u,a),s=uM(c);s.drawImage(n,0,0,o,i,0,0,u,a),r(c)}))},XM=function(n,t){return n.toCanvas().then((function(e){return KM(e,n.getType(),t)}))},KM=function(n,t,e){var r=oM(n.width,n.height),o=uM(r),i=0,u=0;return e=e<0?360+e:e,90!==e&&270!==e||aM(r,r.height,r.width),90!==e&&180!==e||(i=r.width),270!==e&&180!==e||(u=r.height),o.translate(i,u),o.rotate(e*Math.PI/180),o.drawImage(n,0,0),CM(r,t)},YM=function(n,t){return n.toCanvas().then((function(e){return $M(e,n.getType(),t)}))},$M=function(n,t,e){var r=oM(n.width,n.height),o=uM(r);return"v"===e?(o.scale(1,-1),o.drawImage(n,0,-r.height)):(o.scale(-1,1),o.drawImage(n,-r.width,0)),CM(r,t)},JM=function(n,t,e,r,o){return n.toCanvas().then((function(i){return QM(i,n.getType(),t,e,r,o)}))},QM=function(n,t,e,r,o,i){var u=oM(o,i),a=uM(u);return a.drawImage(n,-e,-r),CM(u,t)},ZM=function(n,t,e){return n.toCanvas().then((function(r){return GM(r,t,e).then((function(t){return CM(t,n.getType())}))}))},nI=function(n){return HM(n)},tI=function(n){return jM(n)},eI=function(n,t){return WM(n,t)},rI=function(n,t,e,r){return UM(n,t,e,r)},oI=function(n,t){return zM(n,t)},iI=function(n,t){return VM(n,t)},uI=function(n,t){return YM(n,t)},aI=function(n,t,e,r,o){return JM(n,t,e,r,o)},cI=function(n,t,e){return ZM(n,t,e)},sI=function(n,t){return XM(n,t)},lI=function(n,t){return m({dom:{tag:"span",innerHtml:n,classes:["tox-icon","tox-tbtn__icon-wrap"]}},t)},fI=function(n,t){return lI(nw(n,t),{})},dI=function(n,t){return lI(nw(n,t),{behaviours:zl([wy.config({})])})},mI=function(n,t,e){return{dom:{tag:"span",innerHtml:e.translate(n),classes:[t+"__select-label"]},behaviours:zl([wy.config({})])}},gI=Fu("toolbar.button.execute"),pI=function(n){return Mi((function(t,e){Yk(n,t)((function(e){fi(t,gI,{buttonApi:e}),n.onAction(e)}))}))},vI=(tA={},tA[jo()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],tA),hI=Fu("update-menu-text"),bI=Fu("update-menu-icon"),yI=function(n,e,r){var o=Ye(t),i=n.text.map((function(n){return Qx(mI(n,e,r.providers))})),u=n.icon.map((function(n){return Qx(dI(n,r.providers.icons))})),c=function(n,t){var e=Yg.getValue(n);return By.focus(e),fi(e,"keydown",{raw:t.event.raw}),hA.close(e),w.some(!0)},s=n.role.fold((function(){return{}}),(function(n){return{role:n}})),l=n.tooltip.fold((function(){return{}}),(function(n){var t=r.providers.translate(n);return{title:t,"aria-label":t}})),f=Qx(hA.sketch(m(m(m({},n.uid?{uid:n.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat(G(n.classes,(function(n){return e+"--"+n}))),attributes:m({},l)},components:nO([u.map((function(n){return n.asSpec()})),i.map((function(n){return n.asSpec()})),w.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:nw("chevron-down",r.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:zl(p(n.dropdownBehaviours,[Kk.button((function(){return n.disabled||r.providers.isDisabled()})),jk(),wA.config({}),wy.config({}),Sy("dropdown-events",[$k(n,o),Jk(n,o)]),Sy("menubutton-update-display-text",[xi(hI,(function(n,t){i.bind((function(t){return t.getOpt(n)})).each((function(n){wy.set(n,[vc(r.providers.translate(t.event.text))])}))})),xi(bI,(function(n,t){u.bind((function(t){return t.getOpt(n)})).each((function(n){wy.set(n,[dI(t.event.icon,r.providers.icons)])}))}))])])),eventOrder:Yn(vI,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:zl([fy.config({mode:"special",onLeft:c,onRight:c})]),lazySink:r.getSink,toggleClass:e+"--active",parts:{menu:PC(!1,n.columns,n.presets)},fetch:function(t){return I_.nu(a(n.fetch,t))}})));return f.asSpec()},xI=function(n){return T(n)},wI=function(n){return"separator"===n.type},CI=function(n){return Vn(n,"getSubmenuItems")},SI={type:"separator"},kI=function(n,t){var e=J(n,(function(n,e){return xI(e)?""===e?n:"|"===e?n.length>0&&!wI(n[n.length-1])?n.concat([SI]):n:Vn(t,e.toLowerCase())?n.concat([t[e.toLowerCase()]]):n:n.concat([e])}),[]);return e.length>0&&wI(e[e.length-1])&&e.pop(),e},OI=function(n,t){var e=n.getSubmenuItems(),r=_I(e,t),o=Yn(r.menus,lt(n.value,r.items)),i=Yn(r.expansions,lt(n.value,n.value));return{item:n,menus:o,expansions:i}},TI=function(n,t){return CI(n)?OI(n,t):{item:n,menus:{},expansions:{}}},DI=function(n){if(wI(n))return n;var t=zn(n,"value").getOrThunk((function(){return Fu("generated-menu-item")}));return Yn({value:t},n)},_I=function(n,t){var e=kI(T(n)?n.split(" "):n,t);return $(e,(function(n,e){var r=DI(e),o=TI(r,t);return{menus:Yn(n.menus,o.menus),items:[o.item].concat(n.items),expansions:Yn(n.expansions,o.expansions)}}),{menus:{},expansions:{},items:[]})},AI=function(n,t,e,r){var o=Fu("primary-menu"),i=_I(n,e.shared.providers.menuItems());if(0===i.items.length)return w.none();var u=uD(o,i.items,t,e,r),a=Bn(i.menus,(function(n,r){return uD(r,n,t,e,!1)})),c=Yn(a,lt(o,u));return w.from(Ix.tieredData(o,c,i.expansions))},EI=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)},setActive:function(t){var e=n.element;t?(Fa(e,"tox-tbtn--enabled"),Su(e,"aria-pressed",!0)):(Ha(e,"tox-tbtn--enabled"),_u(e,"aria-pressed"))},isActive:function(){return za(n.element,"tox-tbtn--enabled")}}},RI=function(n,t,e,r){return yI({text:n.text,icon:n.icon,tooltip:n.tooltip,role:r,fetch:function(t,r){n.fetch((function(n){r(AI(n,cC.CLOSE_ON_EXECUTE,e,!1))}))},onSetup:n.onSetup,getApi:EI,columns:1,presets:"normal",classes:[],dropdownBehaviours:[ZD.config({})]},t,e.shared)},BI=function(n,t,e){var r=function(n){return function(r){var o=!r.isActive();r.setActive(o),n.storage.set(o),e.shared.getSink().each((function(e){t().getOpt(e).each((function(t){$l(t.element),fi(t,l_,{name:n.name,value:n.storage.get()})}))}))}},o=function(n){return function(t){t.setActive(n.storage.get())}};return function(t){t(G(n,(function(n){var t=n.text.fold((function(){return{}}),(function(n){return{text:n}}));return m(m({type:n.type,active:!1},t),{onAction:r(n),onSetup:o(n)})})))}},MI=function(n,t,e,r,o,i){void 0===e&&(e=[]);var u=t.fold((function(){return{}}),(function(n){return{action:n}})),a=m({buttonBehaviours:zl([Kk.button((function(){return n.disabled||i.isDisabled()})),jk(),ZD.config({}),Sy("button press",[yi("click"),yi("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),c=Yn(a,{dom:r});return Yn(c,{components:o})},II=function(n,t,e,r){void 0===r&&(r=[]);var o=n.tooltip.map((function(n){return{"aria-label":e.translate(n),title:e.translate(n)}})).getOr({}),i={tag:"button",classes:["tox-tbtn"],attributes:o},u=n.icon.map((function(n){return fI(n,e.icons)})),a=nO([u]);return MI(n,t,r,i,a,e)},NI=function(n,t,e,r){void 0===r&&(r=[]);var o=II(n,w.some(t),e,r);return Jx.sketch(o)},PI=function(n,t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=e.translate(n.text),u=n.icon?n.icon.map((function(n){return fI(n,e.icons)})):w.none(),a=u.isSome()?nO([u]):[],c=u.isSome()?{}:{innerHtml:i},s=p(n.primary||n.borderless?["tox-button"]:["tox-button","tox-button--secondary"],u.isSome()?["tox-button--icon"]:[],n.borderless?["tox-button--naked"]:[],o),l=m(m({tag:"button",classes:s},c),{attributes:{title:i}});return MI(n,t,r,l,a,e)},FI=function(n,t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=PI(n,w.some(t),e,r,o);return Jx.sketch(i)},LI=function(n,t){return function(e){"custom"===t?fi(e,l_,{name:n,value:{}}):"submit"===t?li(e,f_):"cancel"===t?li(e,s_):console.error("Unknown button type: ",t)}},HI=function(n,t){return"menu"===t},zI=function(n,t){return"custom"===t||"cancel"===t||"submit"===t},VI=function(n,e,r){if(HI(n,e)){var o=function(){return a},i=n,u=m(m({},n),{onSetup:function(e){return e.setDisabled(n.disabled),t},fetch:BI(i.items,o,r)}),a=Qx(RI(u,"tox-tbtn",r,w.none()));return a.asSpec()}if(zI(n,e)){var c=LI(n.name,e),s=m(m({},n),{borderless:!1});return FI(s,c,r.shared.providers,[])}console.error("Unknown footer button type: ",e)},UI=function(n,t){var e=LI(n.name,"custom");return e_(w.none(),YD.parts.field(m({factory:Jx},PI(n,w.some(e),t,[jB.memory(""),DB.self()]))))},jI=i([Le("field1Name","field1"),Le("field2Name","field2"),zs("onLockedChange"),Ps(["lockClass"]),Le("locked",!1),Zg.field("coupledFieldBehaviours",[yv,Yg])]),WI=function(n,t,e){return jp(n,t,e).bind(yv.getCurrent)},GI=function(n,t){return _p({factory:YD,name:n,overrides:function(n){return{fieldBehaviours:zl([Sy("coupled-input-behaviour",[xi(Bo(),(function(e){WI(e,n,t).each((function(t){jp(e,n,"lock").each((function(r){Jy.isOn(r)&&n.onLockedChange(e,t,r)}))}))}))])])}}})},qI=i([GI("field1","field2"),GI("field2","field1"),_p({factory:Jx,schema:[ye("dom")],name:"lock",overrides:function(n){return{buttonBehaviours:zl([Jy.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])}}})]),XI=function(n,t,e,r){return{uid:n.uid,dom:n.dom,components:t,behaviours:Zg.augment(n.coupledFieldBehaviours,[yv.config({find:w.some}),Yg.config({store:{mode:"manual",getValue:function(t){var e,r=Kp(t,n,["field1","field2"]);return e={},e[n.field1Name]=Yg.getValue(r.field1()),e[n.field2Name]=Yg.getValue(r.field2()),e},setValue:function(t,e){var r=Kp(t,n,["field1","field2"]);Un(e,n.field1Name)&&Yg.setValue(r.field1(),e[n.field1Name]),Un(e,n.field2Name)&&Yg.setValue(r.field2(),e[n.field2Name])}}})]),apis:{getField1:function(t){return jp(t,n,"field1")},getField2:function(t){return jp(t,n,"field2")},getLock:function(t){return jp(t,n,"lock")}}}},KI=cv({name:"FormCoupledInputs",configFields:jI(),partFields:qI(),factory:XI,apis:{getField1:function(n,t){return n.getField1(t)},getField2:function(n,t){return n.getField2(t)},getLock:function(n,t){return n.getLock(t)}}}),YI=function(n){var t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},e=function(n){return n in t?t[n]:1},r=n.value.toFixed(e(n.unit));return-1!==r.indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+n.unit},$I=function(n){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,e=t.exec(n);if(null!==e){var r=parseFloat(e[1]),o=e[2];return hn.value({value:r,unit:o})}return hn.error(n)},JI=function(n,t){var e={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=function(n){return Object.prototype.hasOwnProperty.call(e,n)};return n.unit===t?w.some(n.value):r(n.unit)&&r(t)?e[n.unit]===e[t]?w.some(n.value):w.some(n.value/e[n.unit]*e[t]):w.none()},QI=function(n){return w.none()},ZI=function(n,t){return function(e){return JI(e,t).map((function(e){return{value:e*n,unit:t}}))}},nN=function(n,t){var e=$I(n).toOptional(),r=$I(t).toOptional();return fv(e,r,(function(n,t){return JI(n,t.unit).map((function(n){return t.value/n})).map((function(n){return ZI(n,t.unit)})).getOr(QI)})).getOr(QI)},tN=function(n,t){var e=QI,r=Fu("ratio-event"),o=KI.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(n.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:nw("lock",t.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:nw("unlock",t.icons)}}],buttonBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()}}),jk(),ZD.config({})])}),i=function(n){return{dom:{tag:"div",classes:["tox-form__group"]},components:n}},u=function(e){return YD.parts.field({factory:C_,inputClasses:["tox-textfield"],inputBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()}}),jk(),ZD.config({}),Sy("size-input-events",[xi(_o(),(function(n,t){fi(n,r,{isField1:e})})),xi(Mo(),(function(t,e){fi(t,a_,{name:n.name})}))])]),selectOnFocus:!1})},a=function(n){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(n)}}},c=KI.parts.field1(i([YD.parts.label(a("Width")),u(!0)])),s=KI.parts.field2(i([YD.parts.label(a("Height")),u(!1)]));return KI.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,i([a("&nbsp;"),o])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(n,t,r){$I(Yg.getValue(n)).each((function(n){e(n).each((function(n){Yg.setValue(t,YI(n))}))}))},coupledFieldBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()},onDisabled:function(n){KI.getField1(n).bind(YD.getField).each($S.disable),KI.getField2(n).bind(YD.getField).each($S.disable),KI.getLock(n).each($S.disable)},onEnabled:function(n){KI.getField1(n).bind(YD.getField).each($S.enable),KI.getField2(n).bind(YD.getField).each($S.enable),KI.getLock(n).each($S.enable)}}),jk(),Sy("size-input-events2",[xi(r,(function(n,t){var r=t.event.isField1,o=r?KI.getField1(n):KI.getField2(n),i=r?KI.getField2(n):KI.getField1(n),u=o.map(Yg.getValue).getOr(""),a=i.map(Yg.getValue).getOr("");e=nN(u,a)}))])])})},eN=i(Fu("undo")),rN=i(Fu("redo")),oN=i(Fu("zoom")),iN=i(Fu("back")),uN=i(Fu("apply")),aN=i(Fu("swap")),cN=i(Fu("transform")),sN=i(Fu("temp-transform")),lN=i(Fu("transform-apply")),fN={undo:eN,redo:rN,zoom:oN,back:iN,apply:uN,swap:aN,transform:cN,tempTransform:sN,transformApply:lN},dN=i("save-state"),mN=i("disable"),gN=i("enable"),pN={formActionEvent:l_,saveState:dN,disable:mN,enable:gN},vN=function(n,e){var r=function(n,t,r,o){return Qx(FI({name:n,text:n,disabled:r,primary:o,icon:w.none(),borderless:!1},t,e))},o=function(n,t,r,o){return Qx(NI({name:n,icon:w.some(n),tooltip:w.some(t),disabled:o,primary:!1,borderless:!1},r,e))},u=function(n,t){n.map((function(n){var e=n.get(t);e.hasConfigured($S)&&$S.disable(e)}))},a=function(n,t){n.map((function(n){var e=n.get(t);e.hasConfigured($S)&&$S.enable(e)}))},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},s=t,l=function(n,t,e){fi(n,t,e)},f=function(n){return li(n,pN.disable())},d=function(n){return li(n,pN.enable())},m=function(n,t){f(n),l(n,fN.transform(),{transform:t}),d(n)},g=function(n,t){f(n),l(n,fN.tempTransform(),{transform:t}),d(n)},p=function(n){return function(){an.getOpt(n).each((function(n){wy.set(n,[on])}))}},v=function(n,t){f(n),l(n,fN.transformApply(),{transform:t,swap:p(n)}),d(n)},h=function(){return r("Back",(function(n){return l(n,fN.back(),{swap:p(n)})}),!1,!1)},b=function(){return Qx({dom:{tag:"div",classes:["tox-spacer"]},behaviours:zl([$S.config({})])})},y=function(){return r("Apply",(function(n){return l(n,fN.apply(),{swap:p(n)})}),!0,!0)},x=function(){return function(t){var e=n.getRect();return aI(t,e.x,e.y,e.w,e.h)}},C=[h(),b(),r("Apply",(function(t){var e=x();v(t,e),n.hideCrop()}),!1,!0)],S=jD.sketch({dom:c,components:C.map((function(n){return n.asSpec()})),containerBehaviours:zl([Sy("image-tools-crop-buttons-events",[xi(pN.disable(),(function(n,t){u(C,n)})),xi(pN.enable(),(function(n,t){a(C,n)}))])])}),k=Qx(tN({name:"size",label:w.none(),constrain:!0,disabled:!1},e)),O=function(n,t){return function(e){return cI(e,n,t)}},T=[h(),b(),k,b(),r("Apply",(function(n){k.getOpt(n).each((function(t){var e=Yg.getValue(t),r=parseInt(e.width,10),o=parseInt(e.height,10),i=O(r,o);v(n,i)}))}),!1,!0)],D=jD.sketch({dom:c,components:T.map((function(n){return n.asSpec()})),containerBehaviours:zl([Sy("image-tools-resize-buttons-events",[xi(pN.disable(),(function(n,t){u(T,n)})),xi(pN.enable(),(function(n,t){a(T,n)}))])])}),_=function(n,t){return function(e){return n(e,t)}},A=_(uI,"h"),E=_(uI,"v"),R=_(sI,-90),B=_(sI,90),M=function(n,t){g(n,t)},I=[h(),b(),o("flip-horizontally","Flip horizontally",(function(n){M(n,A)}),!1),o("flip-vertically","Flip vertically",(function(n){M(n,E)}),!1),o("rotate-left","Rotate counterclockwise",(function(n){M(n,R)}),!1),o("rotate-right","Rotate clockwise",(function(n){M(n,B)}),!1),b(),y()],N=jD.sketch({dom:c,components:I.map((function(n){return n.asSpec()})),containerBehaviours:zl([Sy("image-tools-fliprotate-buttons-events",[xi(pN.disable(),(function(n,t){u(I,n)})),xi(pN.enable(),(function(n,t){a(I,n)}))])])}),P=function(n,t,r,o,u){var a=cB.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(n)}}),c=cB.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=cB.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Qx(cB.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:r,maxX:u,getInitialValue:i({x:o})},components:[a,c,s],sliderBehaviours:zl([By.config({})]),onChoose:t}))},F=function(n,t,e,r,o){var i=function(n,e,r){var o=_(t,r.x/100);m(n,o)};return P(n,i,e,r,o)},L=function(n,t,e,r,o){return[h(),F(n,t,e,r,o),y()]},H=function(n,t,e,r,o){var i=L(n,t,e,r,o);return jD.sketch({dom:c,components:i.map((function(n){return n.asSpec()})),containerBehaviours:zl([Sy("image-tools-filter-panel-buttons-events",[xi(pN.disable(),(function(n,t){u(i,n)})),xi(pN.enable(),(function(n,t){a(i,n)}))])])})},z=[h(),b(),y()],V=jD.sketch({dom:c,components:z.map((function(n){return n.asSpec()}))}),U=H("Brightness",oI,-100,0,100),j=H("Contrast",iI,-100,0,100),W=H("Gamma",eI,-100,0,100),G=function(n,t,e){return function(r){return rI(r,n,t,e)}},q=function(n){var t=function(n,t,e){var r=X.getOpt(n),o=Y.getOpt(n),i=K.getOpt(n);r.each((function(t){o.each((function(e){i.each((function(r){var o=Yg.getValue(t).x/100,i=Yg.getValue(r).x/100,u=Yg.getValue(e).x/100,a=G(o,i,u);m(n,a)}))}))}))};return P(n,t,0,100,200)},X=q("R"),K=q("G"),Y=q("B"),$=[h(),X,K,Y,y()],J=jD.sketch({dom:c,components:$.map((function(n){return n.asSpec()}))}),Q=function(n,t,e){return function(r){var o=function(){an.getOpt(r).each((function(t){wy.set(t,[n]),e(t)}))};l(r,fN.swap(),{transform:t,swap:o})}},Z=function(t){n.showCrop()},nn=function(t){k.getOpt(t).each((function(t){var e=n.getMeasurements(),r=e.width,o=e.height;Yg.setValue(t,{width:r,height:o})}))},tn=w.some(tI),en=w.some(nI),rn=[o("crop","Crop",Q(S,w.none(),Z),!1),o("resize","Resize",Q(D,w.none(),nn),!1),o("orientation","Orientation",Q(N,w.none(),s),!1),o("brightness","Brightness",Q(U,w.none(),s),!1),o("sharpen","Sharpen",Q(V,tn,s),!1),o("contrast","Contrast",Q(j,w.none(),s),!1),o("color-levels","Color levels",Q(J,w.none(),s),!1),o("gamma","Gamma",Q(W,w.none(),s),!1),o("invert","Invert",Q(V,en,s),!1)],on=jD.sketch({dom:c,components:rn.map((function(n){return n.asSpec()}))}),un=jD.sketch({dom:{tag:"div"},components:[on],containerBehaviours:zl([wy.config({})])}),an=Qx(un),cn=function(n){return an.getOpt(n).map((function(n){var t=n.components()[0];return t.components()[t.components().length-1]}))};return{memContainer:an,getApplyButton:cn}},hN=tinymce.util.Tools.resolve("tinymce.geom.Rect"),bN=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),yN=tinymce.util.Tools.resolve("tinymce.util.Observable"),xN=tinymce.util.Tools.resolve("tinymce.util.VK"),wN=function(n){var t=Math.max,e=n.documentElement,r=n.body,o=t(e.scrollWidth,r.scrollWidth),i=t(e.clientWidth,r.clientWidth),u=t(e.offsetWidth,r.offsetWidth),a=t(e.scrollHeight,r.scrollHeight),c=t(e.clientHeight,r.clientHeight),s=t(e.offsetHeight,r.offsetHeight);return{width:o<u?i:o,height:a<s?c:a}},CN=function(n){var t,e;if(n.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<t.length;e++)n[t[e]]=n.changedTouches[0][t[e]]};function SN(n,t){var e,r,o,i,u=t.document||document,a=u.getElementById(t.handle||n),c=function(n){var c,f=wN(u);CN(n),n.preventDefault(),r=n.button;var d=a;o=n.screenX,i=n.screenY,c=window.getComputedStyle?window.getComputedStyle(d,null).getPropertyValue("cursor"):d.runtimeStyle.cursor,e=bN("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:c}).appendTo(u.body),bN(u).on("mousemove touchmove",s).on("mouseup touchend",l),t.start(n)},s=function(n){if(CN(n),n.button!==r)return l(n);n.deltaX=n.screenX-o,n.deltaY=n.screenY-i,n.preventDefault(),t.drag(n)},l=function(n){CN(n),bN(u).off("mousemove touchmove",s).off("mouseup touchend",l),e.remove(),t.stop&&t.stop(n)},f=function(){bN(a).off()};return bN(a).on("mousedown touchstart",c),{destroy:f}}var kN=0,ON=function(n,t,e,r,o){var i,u="tox-",a=u+"crid-"+kN++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],l=function(n,t){return{x:t.x+n.x,y:t.y+n.y,w:t.w,h:t.h}},f=function(n,t){return{x:t.x-n.x,y:t.y-n.y,w:t.w,h:t.h}},d=function(){return f(e,n)},m=function(t,r,o,i){var u,a,c,s,l;u=r.x,a=r.y,c=r.w,s=r.h,u+=o*t.deltaX,a+=i*t.deltaY,c+=o*t.deltaW,s+=i*t.deltaH,c<20&&(c=20),s<20&&(s=20),l=n=hN.clamp({x:u,y:a,w:c,h:s},e,"move"===t.name),l=f(e,l),C.fire("updateRect",{rect:l}),y(l)},g=function(){var t=function(t){var e;return SN(a,{document:r.ownerDocument,handle:a+"-"+t.name,start:function(){e=n},drag:function(n){m(t,e,n.deltaX,n.deltaY)}})};bN('<div id="'+a+'" class="'+u+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),NB.each(s,(function(n){bN("#"+a,r).append('<div id="'+a+"-"+n+'"class="'+u+'croprect-block" style="display: none" data-mce-bogus="all">')})),NB.each(c,(function(n){bN("#"+a,r).append('<div id="'+a+"-"+n.name+'" class="'+u+"croprect-handle "+u+"croprect-handle-"+n.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+n.label+'" aria-grabbed="false" title="'+n.label+'">')})),i=NB.map(c,t),v(n),bN(r).on("focusin focusout",(function(n){bN(n.target).attr("aria-grabbed","focus"===n.type?"true":"false")})),bN(r).on("keydown",(function(t){var e;NB.each(c,(function(n){if(t.target.id===a+"-"+n.name)return e=n,!1}));var r=function(n,t,r,o,i){n.stopPropagation(),n.preventDefault(),m(e,r,o,i)};switch(t.keyCode){case xN.LEFT:r(t,e,n,-10,0);break;case xN.RIGHT:r(t,e,n,10,0);break;case xN.UP:r(t,e,n,0,-10);break;case xN.DOWN:r(t,e,n,0,10);break;case xN.ENTER:case xN.SPACEBAR:t.preventDefault(),o();break}}))},p=function(n){var t=NB.map(c,(function(n){return"#"+a+"-"+n.name})).concat(NB.map(s,(function(n){return"#"+a+"-"+n}))).join(",");n?bN(t,r).show():bN(t,r).hide()},v=function(n){var e=function(n,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),bN("#"+a+"-"+n,r).css({left:t.x,top:t.y,width:t.w,height:t.h})};NB.each(c,(function(t){bN("#"+a+"-"+t.name,r).css({left:n.w*t.xMul+n.x,top:n.h*t.yMul+n.y})})),e("top",{x:t.x,y:t.y,w:t.w,h:n.y-t.y}),e("right",{x:n.x+n.w,y:n.y,w:t.w-n.x-n.w+t.x,h:n.h}),e("bottom",{x:t.x,y:n.y+n.h,w:t.w,h:t.h-n.y-n.h+t.y}),e("left",{x:t.x,y:n.y,w:n.x-t.x,h:n.h}),e("move",n)},h=function(t){n=t,v(n)},b=function(e){t=e,v(n)},y=function(n){h(l(e,n))},x=function(t){e=t,v(n)},w=function(){NB.each(i,(function(n){n.destroy()})),i=[]};g();var C=NB.extend({toggleVisibility:p,setClampRect:x,setRect:h,getInnerRect:d,setInnerRect:y,setViewPortRect:b,destroy:w},yN);return C},TN={create:ON},DN=function(n){return new Ow((function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)}))},_N=function(n){var e=Qx({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),r=Ye(1),o=Ye(w.none()),i=Ye({x:0,y:0,w:1,h:1}),u=Ye({x:0,y:0,w:1,h:1}),a=function(n,t){p.getOpt(n).each((function(n){var u=r.get(),a=Ic(n.element),c=Sc(n.element),s=t.dom.naturalWidth*u,l=t.dom.naturalHeight*u,f=Math.max(0,a/2-s/2),d=Math.max(0,c/2-l/2),m={left:f.toString()+"px",top:d.toString()+"px",width:s.toString()+"px",height:l.toString()+"px",position:"absolute"};$a(t,m),e.getOpt(n).each((function(n){$a(n.element,m)})),o.get().each((function(n){var t=i.get();n.setRect({x:t.x*u+f,y:t.y*u+d,w:t.w*u,h:t.h*u}),n.setClampRect({x:f,y:d,w:s,h:l}),n.setViewPortRect({x:0,y:0,w:a,h:c})}))}))},c=function(n,t){p.getOpt(n).each((function(n){var e=Ic(n.element),o=Sc(n.element),i=t.dom.naturalWidth,u=t.dom.naturalHeight,a=Math.min(e/i,o/u);a>=1?r.set(1):r.set(a)}))},s=function(n,t){var e=tr.fromTag("img");return Su(e,"src",t),DN(e.dom).then((function(){return p.getOpt(n).map((function(n){var t=hc({element:e});wy.replaceAt(n,1,w.some(t));var r=u.get(),o={x:0,y:0,w:e.dom.naturalWidth,h:e.dom.naturalHeight};u.set(o);var s=hN.inflate(o,-20,-20);return i.set(s),r.w===o.w&&r.h===o.h||c(n,e),a(n,e),e}))}))},l=function(n,t){var e=r.get(),o=t>0?Math.min(2,e+.1):Math.max(.1,e-.1);r.set(o),p.getOpt(n).each((function(n){var t=n.components()[1].element;a(n,t)}))},f=function(){o.get().each((function(n){n.toggleVisibility(!0)}))},d=function(){o.get().each((function(n){n.toggleVisibility(!1)}))},m=function(){return i.get()},g=jD.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:n}}},{dom:{tag:"div"},behaviours:zl([Sy("image-panel-crop-events",[Ei((function(n){p.getOpt(n).each((function(n){var e=n.element.dom,u=TN.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,t);u.toggleVisibility(!1),u.on("updateRect",(function(n){var t=n.rect,e=r.get(),o={x:Math.round(t.x/e),y:Math.round(t.y/e),w:Math.round(t.w/e),h:Math.round(t.h/e)};i.set(o)})),o.set(w.some(u))}))}))])])}],containerBehaviours:zl([wy.config({}),Sy("image-panel-events",[Ei((function(t){s(t,n)}))])])}),p=Qx(g),v=function(){var n=u.get();return{width:n.w,height:n.h}};return{memContainer:p,updateSrc:s,zoom:l,showCrop:f,hideCrop:d,getRect:m,getMeasurements:v}},AN=function(n,t,e,r,o){return NI({name:n,icon:w.some(t),disabled:e,tooltip:w.some(n),primary:!1,borderless:!1},r,o)},EN=function(n,t){t?$S.enable(n):$S.disable(n)},RN=function(n){var t=function(n,t,o){e.getOpt(n).each((function(n){EN(n,t)})),r.getOpt(n).each((function(n){EN(n,o)}))},e=Qx(AN("Undo","undo",!0,(function(n){fi(n,fN.undo(),{direction:1})}),n)),r=Qx(AN("Redo","redo",!0,(function(n){fi(n,fN.redo(),{direction:1})}),n)),o=jD.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[e.asSpec(),r.asSpec(),AN("Zoom in","zoom-in",!1,(function(n){fi(n,fN.zoom(),{direction:1})}),n),AN("Zoom out","zoom-out",!1,(function(n){fi(n,fN.zoom(),{direction:-1})}),n)]});return{container:o,updateButtonUndoStates:t}};function BN(){var n=[],t=-1,e=function(e){var r=n.splice(++t);return n.push(e),{state:e,removed:r}},r=function(){if(i())return n[--t]},o=function(){if(u())return n[++t]},i=function(){return t>0},u=function(){return-1!==t&&t<n.length-1};return{data:n,add:e,undo:r,redo:o,canUndo:i,canRedo:u}}var MN,IN=function(n){var e=Ye(n),r=Ye(w.none()),o=BN();o.add(n);var i=function(){return e.get()},u=function(n){e.set(n)},a=function(){return r.get().fold((function(){return e.get()}),(function(n){return n}))},c=function(n){var t=s(n);return d(),r.set(w.some(t)),t.url},s=function(n){return{blob:n,url:URL.createObjectURL(n)}},l=function(n){URL.revokeObjectURL(n.url)},f=function(n){NB.each(n,l)},d=function(){r.get().each(l),r.set(w.none())},m=function(n){var t=s(n);u(t);var e=o.add(t).removed;return f(e),t.url},g=function(n){var t=s(n);return r.set(w.some(t)),t.url},p=function(n){return r.get().fold(t,(function(t){m(t.blob),n()}))},v=function(){var n=o.undo();return u(n),n.url},h=function(){var n=o.redo();return u(n),n.url},b=function(){var n=o.canUndo(),t=o.canRedo();return{undoEnabled:n,redoEnabled:t}};return{getBlobState:i,setBlobState:u,addBlobState:m,getTempState:a,updateTempState:c,addTempState:g,applyTempState:p,destroyTempState:d,undo:v,redo:h,getHistoryStates:b}},NN=function(n,e){var r=IN(n.currentState),o=function(n,t){var e=t.event.direction;k.zoom(n,e)},i=function(n){var t=r.getHistoryStates();O.updateButtonUndoStates(n,t.undoEnabled,t.redoEnabled),fi(n,pN.formActionEvent,{name:pN.saveState(),value:t.undoEnabled})},u=function(n){O.updateButtonUndoStates(n,!1,!1)},a=function(n,t){var e=r.undo();d(n,e).then((function(t){f(n),i(n)}))},c=function(n,t){var e=r.redo();d(n,e).then((function(t){f(n),i(n)}))},s=function(n){return n.toBlob()},l=function(n){fi(n,pN.formActionEvent,{name:pN.disable(),value:{}})},f=function(n){T.getApplyButton(n).each((function(n){$S.enable(n)})),fi(n,pN.formActionEvent,{name:pN.enable(),value:{}})},d=function(n,t){return l(n),k.updateSrc(n,t)},m=function(n,t,e,r,o){return l(n),SM(t).then(e).then(s).then(r).then((function(t){return d(n,t).then((function(t){return i(n),o(),f(n),t}))})).catch((function(t){return console.log(t),f(n),t}))},g=function(n,t,e){var o=r.getBlobState().blob,i=function(n){return r.updateTempState(n)};m(n,o,t,i,e)},p=function(n,e){var o=r.getTempState().blob,i=function(n){return r.addTempState(n)};m(n,o,e,i,t)},v=function(n,t,e){var o=r.getBlobState().blob,i=function(t){var e=r.addBlobState(t);return b(n),e};m(n,o,t,i,e)},h=function(n,t){var e=function(){b(n);var e=t.event.swap;e()};r.applyTempState(e)},b=function(n){var t=r.getBlobState().url;return r.destroyTempState(),i(n),t},y=function(n){var t=b(n);d(n,t).then((function(t){f(n)}))},x=function(n,t){y(n);var e=t.event.swap;e(),k.hideCrop()},w=function(n,e){return g(n,e.event.transform,t)},C=function(n,t){return p(n,t.event.transform)},S=function(n,t){return v(n,t.event.transform,t.event.swap)},k=_N(n.currentState.url),O=RN(e),T=vN(k,e),D=function(n,t){u(n);var e=t.event.transform,r=t.event.swap;e.fold((function(){r()}),(function(t){g(n,t,r)}))};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[T.memContainer.asSpec(),k.memContainer.asSpec(),O.container],behaviours:zl([Yg.config({store:{mode:"manual",getValue:function(){return r.getBlobState()}}}),Sy("image-tools-events",[xi(fN.undo(),a),xi(fN.redo(),c),xi(fN.zoom(),o),xi(fN.back(),x),xi(fN.apply(),h),xi(fN.transform(),w),xi(fN.tempTransform(),C),xi(fN.transformApply(),S),xi(fN.swap(),D)]),DB.self()])}},PN=function(n,t){var e={dom:{tag:"label",innerHtml:t.providers.translate(n.label),classes:["tox-label"]}},r=G(n.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[e].concat(r),behaviours:zl([DB.self(),wy.config({}),jB.domHtml(w.none()),fy.config({mode:"acyclic"})])}},FN=function(n){return!Vn(n,"items")},LN="data-value",HN=function(n,t,e,r){return G(e,(function(e){return FN(e)?{type:"togglemenuitem",text:e.text,value:e.value,active:e.value===r,onAction:function(){Yg.setValue(n,e.value),fi(n,a_,{name:t}),By.focus(n)}}:{type:"nestedmenuitem",text:e.text,getSubmenuItems:function(){return HN(n,t,e.items,r)}}}))},zN=function(n,t){return mn(n,(function(n){return FN(n)?gv(n.value===t,n):zN(n.items,t)}))},VN=function(n,e){var r=e.shared.providers,o=ln(n.items).filter(FN),u=n.label.map((function(n){return u_(n,r)})),a=YD.parts.field({dom:{},factory:{sketch:function(r){return yI({uid:r.uid,text:o.map((function(n){return n.text})),icon:w.none(),tooltip:n.label,role:w.none(),fetch:function(t,r){var o=HN(t,n.name,n.items,Yg.getValue(t));r(AI(o,cC.CLOSE_ON_EXECUTE,e,!1))},onSetup:i(t),getApi:i({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ZD.config({}),Yg.config({store:{mode:"manual",initialValue:o.map((function(n){return n.value})).getOr(""),getValue:function(n){return Ou(n.element,LN)},setValue:function(t,e){zN(n.items,e).each((function(n){Su(t.element,LN,n.value),fi(t,hI,{text:n.text})}))}}})]},"tox-listbox",e.shared)}}}),c={dom:{tag:"div",classes:["tox-listboxfield"]},components:[a]};return YD.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([u.toArray(),[c]]),fieldBehaviours:zl([$S.config({disabled:i(n.disabled),onDisabled:function(n){YD.getField(n).each($S.disable)},onEnabled:function(n){YD.getField(n).each($S.enable)}})])})},UN=function(n,t){return{dom:{tag:"div",classes:n.classes},components:G(n.items,t.shared.interpreter)}},jN=function(n,t){var e=G(n.options,(function(n){return{dom:{tag:"option",value:n.value,innerHtml:n.text}}})),r=n.data.map((function(n){return lt("initialValue",n)})).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:e,behaviours:Qg(n.selectBehaviours,[By.config({}),Yg.config({store:m({mode:"manual",getValue:function(n){return ic(n.element)},setValue:function(t,e){var r=Z(n.options,(function(n){return n.value===e}));r.isSome()&&uc(t.element,e)}},r)})])}},WN=av({name:"HtmlSelect",configFields:[ye("options"),$g("selectBehaviours",[By,Yg]),Le("selectClasses",[]),Le("selectAttributes",{}),Ee("data")],factory:jN}),GN=function(n,t){var e=G(n.items,(function(n){return{text:t.translate(n.text),value:n.value}})),r=n.label.map((function(n){return u_(n,t)})),o=YD.parts.field({dom:{},selectAttributes:{size:n.size},options:e,factory:WN,selectBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()}}),ZD.config({}),Sy("selectbox-change",[xi(Mo(),(function(t,e){fi(t,a_,{name:n.name})}))])])}),i=n.size>1?w.none():w.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:nw("chevron-down",t.icons)}}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:tn([[o],i.toArray()])};return YD.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([r.toArray(),[u]]),fieldBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()},onDisabled:function(n){YD.getField(n).each($S.disable)},onEnabled:function(n){YD.getField(n).each($S.enable)}}),jk()])})},qN=function(n,t){var e=function(n){return{dom:{tag:"th",innerHtml:t.translate(n)}}},r=function(n){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:G(n,e)}]}},o=function(n){return{dom:{tag:"td",innerHtml:t.translate(n)}}},i=function(n){return{dom:{tag:"tr"},components:G(n,o)}},u=function(n){return{dom:{tag:"tbody"},components:G(n,i)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[r(n.header),u(n.cells)],behaviours:zl([ZD.config({}),By.config({})])}},XN=function(n,t){var e=n.label.map((function(n){return u_(n,t)})),r=[$S.config({disabled:function(){return n.disabled||t.isDisabled()}}),jk(),fy.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(n){return li(n,f_),w.some(!0)}}),Sy("textfield-change",[xi(Bo(),(function(t,e){fi(t,a_,{name:n.name})})),xi(Vo(),(function(t,e){fi(t,a_,{name:n.name})}))]),ZD.config({})],o=n.validation.map((function(n){return q_.config({getRoot:function(n){return Gi(n.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var e=Yg.getValue(t),r=n.validator(e);return I_.pure(!0===r?hn.value(e):hn.error(r))},validateOnLoad:n.validateOnLoad}})})).toArray(),u=n.placeholder.fold(i({}),(function(n){return{placeholder:t.translate(n)}})),a=n.inputMode.fold(i({}),(function(n){return{inputmode:n}})),c=m(m({},u),a),s=YD.parts.field({tag:!0===n.multiline?"textarea":"input",inputAttributes:c,inputClasses:[n.classname],inputBehaviours:zl(tn([r,o])),selectOnFocus:!1,factory:C_}),l=n.flex?["tox-form__group--stretched"]:[],f=l.concat(n.maximized?["tox-form-group--maximize"]:[]),d=[$S.config({disabled:function(){return n.disabled||t.isDisabled()},onDisabled:function(n){YD.getField(n).each($S.disable)},onEnabled:function(n){YD.getField(n).each($S.enable)}}),jk()];return t_(e,s,f,d)},KN=function(n,t){return XN({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:w.none(),maximized:n.maximized},t)},YN=function(n,t){return XN({name:n.name,multiline:!0,label:n.label,inputMode:w.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:w.none(),maximized:n.maximized},t)},$N=function(n,t){var e=n.stream.streams,r=e.setup(n,t);return vi([xi(n.event,r),Ri((function(){return t.cancel()}))].concat(n.cancelEvent.map((function(n){return[xi(n,(function(){return t.cancel()}))]})).getOr([])))},JN=Object.freeze({__proto__:null,events:$N}),QN=function(n){var t=Ye(null),e=function(){return{timer:null!==t.get()?"set":"unset"}},r=function(n){t.set(n)},o=function(){var n=t.get();null!==n&&n.cancel()};return oa({readState:e,setTimer:r,cancel:o})},ZN=function(n){return n.stream.streams.state(n)},nP=Object.freeze({__proto__:null,throttle:QN,init:ZN}),tP=function(n,t){var e=n.stream,r=sw(n.onStream,e.delay);return t.setTimer(r),function(n,t){r.throttle(n,t),e.stopEvent&&t.stop()}},eP=[xe("stream",ce("mode",{throttle:[ye("delay"),Le("stopEvent",!0),Us("streams",{setup:tP,state:QN})]})),Le("event","input"),Ee("cancelEvent"),zs("onStream")],rP=Ul({fields:eP,name:"streaming",active:JN,state:nP}),oP=function(n,t,e){var r=Yg.getValue(e);Yg.setValue(t,r),uP(t)},iP=function(n,t){var e=n.element,r=ic(e),o=e.dom;"number"!==Ou(e,"type")&&t(o,r)},uP=function(n){iP(n,(function(n,t){return n.setSelectionRange(t.length,t.length)}))},aP=function(n,t){iP(n,(function(n,e){return n.setSelectionRange(t,e.length)}))},cP=function(n,t,e){if(n.selectsOver){var r=Yg.getValue(t),o=n.getDisplayText(r),i=Yg.getValue(e),u=n.getDisplayText(i);return 0===u.indexOf(o)?w.some((function(){oP(n,t,e),aP(t,o.length)})):w.none()}return w.none()},sP=i("alloy.typeahead.itemexecute"),lP=function(n,e,r,o){var i=function(e,r,i){n.previewing.set(!1);var u=Q_.getCoupled(e,"sandbox");if(mg.isOpen(u))yv.getCurrent(u).each((function(n){Hv.getHighlighted(n).fold((function(){i(n)}),(function(){pi(u,n.element,"keydown",r)}))}));else{var c=function(n){yv.getCurrent(n).each(i)};iA(n,a(e),e,u,o,c,O_.HighlightFirst).get(t)}},u=b_(n),a=function(n){return function(t){return t.map((function(t){var e=Hn(t.menus),r=en(e,(function(n){return Y(n.items,(function(n){return"item"===n.type}))})),o=Yg.getState(n);return o.update(G(r,(function(n){return n.data}))),t}))}},c=[By.config({}),Yg.config({onSetValue:n.onSetValue,store:m({mode:"dataset",getDataKey:function(n){return ic(n.element)},getFallbackEntry:function(n){return{value:n,meta:{}}},setValue:function(t,e){uc(t.element,n.model.getDisplayText(e))}},n.initialData.map((function(n){return lt("initialValue",n)})).getOr({}))}),rP.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:function(e,r){var i=Q_.getCoupled(e,"sandbox"),u=By.isFocused(e);if(u&&ic(e.element).length>=n.minChars){var c=yv.getCurrent(i).bind((function(n){return Hv.getHighlighted(n).map(Yg.getValue)}));n.previewing.set(!0);var s=function(t){yv.getCurrent(i).each((function(t){c.fold((function(){n.model.selectsOver&&Hv.highlightFirst(t)}),(function(n){Hv.highlightBy(t,(function(t){var e=Yg.getValue(t);return e.value===n.value})),Hv.getHighlighted(t).orThunk((function(){return Hv.highlightFirst(t),w.none()}))}))}))};iA(n,a(e),e,i,o,s,O_.HighlightFirst).get(t)}},cancelEvent:Ko()}),fy.config({mode:"special",onDown:function(n,t){return i(n,t,Hv.highlightFirst),w.some(!0)},onEscape:function(n){var t=Q_.getCoupled(n,"sandbox");return mg.isOpen(t)?(mg.close(t),w.some(!0)):w.none()},onUp:function(n,t){return i(n,t,Hv.highlightLast),w.some(!0)},onEnter:function(t){var e=Q_.getCoupled(t,"sandbox"),r=mg.isOpen(e);if(r&&!n.previewing.get())return yv.getCurrent(e).bind((function(n){return Hv.getHighlighted(n)})).map((function(n){return fi(t,sP(),{item:n}),!0}));var o=Yg.getValue(t);return li(t,Ko()),n.onExecute(e,t,o),r&&mg.close(e),w.some(!0)}}),Jy.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Q_.config({others:{sandbox:function(t){return fA(n,t,{onOpen:function(){return Jy.on(t)},onClose:function(){return Jy.off(t)}})}}}),Sy("typeaheadevents",[Mi((function(e){var r=t;aA(n,a(e),e,o,r,O_.HighlightFirst).get(t)})),xi(sP(),(function(t,e){var r=Q_.getCoupled(t,"sandbox");oP(n.model,t,e.event.item),li(t,Ko()),n.onItemExecute(t,r,e.event.item,Yg.getValue(t)),mg.close(r),uP(t)}))].concat(n.dismissOnBlur?[xi(zo(),(function(n){var t=Q_.getCoupled(n,"sandbox");nf(t.element).isNone()&&mg.close(t)}))]:[]))];return{uid:n.uid,dom:x_(Yn(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:m(m({},u),Qg(n.typeaheadBehaviours,c)),eventOrder:n.eventOrder}},fP=i([Ee("lazySink"),ye("fetch"),Le("minChars",5),Le("responseTime",1e3),Ls("onOpen"),Le("getHotspot",w.some),Le("getAnchorOverrides",i({})),Le("layouts",w.none()),Le("eventOrder",{}),Xe("model",{},[Le("getDisplayText",(function(n){return void 0!==n.meta&&void 0!==n.meta.text?n.meta.text:n.value})),Le("selectsOver",!0),Le("populateFromBrowse",!0)]),Ls("onSetValue"),Hs("onExecute"),Ls("onItemExecute"),Le("inputClasses",[]),Le("inputAttributes",{}),Le("inputStyles",{}),Le("matchWidth",!0),Le("useMinWidth",!1),Le("dismissOnBlur",!0),Ps(["openClass"]),Ee("initialData"),$g("typeaheadBehaviours",[By,Yg,rP,fy,Jy,Q_]),Ke("previewing",(function(){return Ye(!0)}))].concat(h_()).concat(mA())),dP=i([Ap({schema:[Ns()],name:"menu",overrides:function(n){return{fakeFocus:!0,onHighlight:function(t,e){n.previewing.get()?t.getSystem().getByUid(n.uid).each((function(r){cP(n.model,r,e).fold((function(){return Hv.dehighlight(t,e)}),(function(n){return n()}))})):t.getSystem().getByUid(n.uid).each((function(t){n.model.populateFromBrowse&&oP(n.model,t,e)})),n.previewing.set(!1)},onExecute:function(t,e){return t.getSystem().getByUid(n.uid).toOptional().map((function(n){return fi(n,sP(),{item:e}),!0}))},onHover:function(t,e){n.previewing.set(!1),t.getSystem().getByUid(n.uid).each((function(t){n.model.populateFromBrowse&&oP(n.model,t,e)}))}}}})]),mP=cv({name:"Typeahead",configFields:fP(),partFields:dP(),factory:lP}),gP=function(n){var t=function(){return gP(n.toCached())},e=function(t){return gP(n.bind((function(n){return n.fold((function(n){return I_.pure(hn.error(n))}),(function(n){return t(n)}))})))},r=function(t){return gP(n.map((function(n){return n.bind(t)})))},o=function(t){return gP(n.map((function(n){return n.map(t)})))},i=function(t){return gP(n.map((function(n){return n.mapError(t)})))},u=function(t,e){return n.map((function(n){return n.fold(t,e)}))},a=function(t,e){return gP(I_.nu((function(r){var o=!1,i=setTimeout((function(){o=!0,r(hn.error(e()))}),t);n.get((function(n){o||(clearTimeout(i),r(n))}))})))};return m(m({},n),{toCached:t,bindFuture:e,bindResult:r,mapResult:o,mapError:i,foldResult:u,withTimeout:a})},pP=function(n){return gP(I_.nu(n))},vP=function(n){return gP(I_.pure(hn.value(n)))},hP=function(n){return gP(I_.pure(hn.error(n)))},bP=function(n){return gP(I_.pure(n))},yP=function(n){return gP(n.map(hn.value))},xP=function(n){return pP((function(t){n.then((function(n){t(hn.value(n))}),(function(n){t(hn.error(n))}))}))},wP={nu:pP,wrap:gP,pure:vP,value:vP,error:hP,fromResult:bP,fromFuture:yP,fromPromise:xP},CP={type:"separator"},SP=function(n){return{type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:t}},kP=function(n,e){return{type:"menuitem",value:e,text:n,meta:{attach:void 0},onAction:t}},OP=function(n){return G(n,SP)},TP=function(n,t){return Y(t,(function(t){return t.type===n}))},DP=function(n,t){return OP(TP(n,t))},_P=function(n){return DP("header",n.targets)},AP=function(n){return DP("anchor",n.targets)},EP=function(n){return w.from(n.anchorTop).map((function(n){return kP("<top>",n)})).toArray()},RP=function(n){return w.from(n.anchorBottom).map((function(n){return kP("<bottom>",n)})).toArray()},BP=function(n){return G(n,(function(n){return kP(n,n)}))},MP=function(n){return J(n,(function(n,t){var e=0===n.length||0===t.length;return e?n.concat(t):n.concat(CP,t)}),[])},IP=function(n,t){var e=n.toLowerCase();return Y(t,(function(n){var t=void 0!==n.meta&&void 0!==n.meta.text?n.meta.text:n.text;return gr(t.toLowerCase(),e)||gr(n.value.toLowerCase(),e)}))},NP=function(n,t,e){var r=Yg.getValue(t),o=void 0!==r.meta.text?r.meta.text:r.value,i=e.getLinkInformation();return i.fold((function(){return[]}),(function(t){var r=IP(o,BP(e.getHistory(n)));return"file"===n?MP([r,IP(o,_P(t)),IP(o,tn([EP(t),AP(t),RP(t)]))]):r}))},PP=Fu("aria-invalid"),FP=function(n,e,r){var o,i=e.shared.providers,u=function(t){var e=Yg.getValue(t);r.addToHistory(e.value,n.filetype)},a=YD.parts.field({factory:mP,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":PP,type:"url"},minChars:0,responseTime:0,fetch:function(t){var o=NP(n.filetype,t,r),i=AI(o,cC.BUBBLE_TO_SANDBOX,e,!1);return I_.pure(i)},getHotspot:function(n){return p.getOpt(n)},onSetValue:function(n,e){n.hasConfigured(q_)&&q_.run(n).get(t)},typeaheadBehaviours:zl(tn([r.getValidationHandler().map((function(t){return q_.config({getRoot:function(n){return Gi(n.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(n,t){l.getOpt(n).each((function(n){Su(n.element,"title",i.translate(t))}))}},validator:{validate:function(e){var r=Yg.getValue(e);return wP.nu((function(e){t({type:n.filetype,url:r.value},(function(n){if("invalid"===n.status){var t=hn.error(n.message);e(t)}else{var r=hn.value(n.message);e(r)}}))}))},validateOnLoad:!1}})})).toArray(),[$S.config({disabled:function(){return n.disabled||i.isDisabled()}}),ZD.config({}),Sy("urlinput-events",tn(["file"===n.filetype?[xi(Bo(),(function(t){fi(t,a_,{name:n.name})}))]:[],[xi(Mo(),(function(t){fi(t,a_,{name:n.name}),u(t)})),xi(Vo(),(function(t){fi(t,a_,{name:n.name}),u(t)}))]]))]])),eventOrder:(o={},o[Bo()]=["streaming","urlinput-events","invalidating"],o),model:{getDisplayText:function(n){return n.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:PC(!1,1,"normal")},onExecute:function(n,t,e){fi(t,f_,{})},onItemExecute:function(t,e,r,o){u(t),fi(t,a_,{name:n.name})}}),c=n.label.map((function(n){return u_(n,i)})),s=function(n,t,e,r){return void 0===e&&(e=n),void 0===r&&(r=n),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+n],innerHtml:nw(e,i.icons),attributes:m({title:i.translate(r),"aria-live":"polite"},t.fold((function(){return{}}),(function(n){return{id:n}})))}}},l=Qx(s("invalid",w.some(PP),"warning")),f=Qx({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),d=r.getUrlPicker(n.filetype),g=Fu("browser.url.event"),p=Qx({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,f.asSpec()],behaviours:zl([$S.config({disabled:function(){return n.disabled||i.isDisabled()}})])}),v=Qx(FI({name:n.name,icon:w.some("browse"),text:n.label.getOr(""),disabled:n.disabled,primary:!1,borderless:!0},(function(n){return li(n,g)}),i,[],["tox-browse-url"])),h=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:tn([[p.asSpec()],d.map((function(){return v.asSpec()})).toArray()])}},b=function(t){yv.getCurrent(t).each((function(e){var r=Yg.getValue(e),o=m({fieldname:n.name},r);d.each((function(r){r(o).get((function(r){Yg.setValue(e,r),fi(t,a_,{name:n.name})}))}))}))};return YD.sketch({dom:o_(),components:c.toArray().concat([h()]),fieldBehaviours:zl([$S.config({disabled:function(){return n.disabled||i.isDisabled()},onDisabled:function(n){YD.getField(n).each($S.disable),v.getOpt(n).each($S.disable)},onEnabled:function(n){YD.getField(n).each($S.enable),v.getOpt(n).each($S.enable)}}),jk(),Sy("url-input-events",[xi(g,b)])])})},LP=function(n,t){return jD.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Jx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:nw(n.icon,t.icons),attributes:{title:t.translate(n.iconTooltip)}},action:function(t){fi(t,l_,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(n.text)}}]})},HP=function(n,t){var e=Yg.config({store:{mode:"manual",getValue:function(n){var t=n.element.dom;return t.checked},setValue:function(n,t){var e=n.element.dom;e.checked=t}}}),r=function(n){return n.element.dom.click(),w.some(!0)},o=YD.parts.field({factory:{sketch:u},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:zl([DB.self(),$S.config({disabled:function(){return n.disabled||t.isDisabled()}}),ZD.config({}),By.config({}),e,fy.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),Sy("checkbox-events",[xi(Mo(),(function(t,e){fi(t,a_,{name:n.name})}))])])}),i=YD.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(n.label)},behaviours:zl([wA.config({})])}),a=function(n){var e="checked"===n?"selected":"unselected";return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+n],innerHtml:nw(e,t.icons)}}},c=Qx({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return YD.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,c.asSpec(),i],fieldBehaviours:zl([$S.config({disabled:function(){return n.disabled||t.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(n){YD.getField(n).each($S.disable)},onEnabled:function(n){YD.getField(n).each($S.enable)}}),jk()])})},zP=function(n){return"presentation"===n.presets?jD.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html}}):jD.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:zl([ZD.config({}),By.config({})])})},VP=function(n){return function(t,e,r){return zn(e,"name").fold((function(){return n(e,r)}),(function(o){return t.field(o,n(e,r))}))}},UP=function(n){return function(t,e,r){var o=Yn(e,{source:"dynamic"});return VP(n)(t,o,r)}},jP={bar:VP((function(n,t){return GD(n,t.shared)})),collection:VP((function(n,t){return v_(n,t.shared.providers)})),alertbanner:VP((function(n,t){return LP(n,t.shared.providers)})),input:VP((function(n,t){return KN(n,t.shared.providers)})),textarea:VP((function(n,t){return YN(n,t.shared.providers)})),label:VP((function(n,t){return PN(n,t.shared)})),iframe:UP((function(n,t){return rM(n,t.shared.providers)})),button:VP((function(n,t){return UI(n,t.shared.providers)})),checkbox:VP((function(n,t){return HP(n,t.shared.providers)})),colorinput:VP((function(n,t){return TA(n,t.shared,t.colorinput)})),colorpicker:VP(RB),dropzone:VP((function(n,t){return qB(n,t.shared.providers)})),grid:VP((function(n,t){return XB(n,t.shared)})),listbox:VP((function(n,t){return VN(n,t)})),selectbox:VP((function(n,t){return GN(n,t.shared.providers)})),sizeinput:VP((function(n,t){return tN(n,t.shared.providers)})),urlinput:VP((function(n,t){return FP(n,t,t.urlinput)})),customeditor:VP(IB),htmlpanel:VP(zP),imagetools:VP((function(n,t){return NN(n,t.shared.providers)})),table:VP((function(n,t){return qN(n,t.shared.providers)})),panel:VP((function(n,t){return UN(n,t)}))},WP={field:function(n,t){return t}},GP=function(n,t,e){var r=Yn(e,{shared:{interpreter:function(t){return qP(n,t,r)}}});return qP(n,t,r)},qP=function(n,t,e){return zn(jP,t.type).fold((function(){return console.error('Unknown factory type "'+t.type+'", defaulting to container: ',t),t}),(function(r){return r(n,t,e)}))},XP=function(n,t){var e=WP;return qP(e,n,t)},KP={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},YP=function(n,t,e){var r=Nf(-12,12,KP),o={maxHeightFunction:Ef()},i=function(){return{anchor:"node",root:eu(n()),node:w.from(n()),bubble:r,layouts:{onRtl:function(){return[qx]},onLtr:function(){return[Gx]}},overrides:o}},u=function(){return{anchor:"hotspot",hotspot:t(),bubble:r,layouts:{onRtl:function(){return[pl]},onLtr:function(){return[vl]}},overrides:o}};return function(){return e()?i():u()}},$P=function(n,t,e){var r=function(){return{anchor:"node",root:eu(n()),node:w.from(n()),layouts:{onRtl:function(){return[Xx]},onLtr:function(){return[Xx]}}}},o=function(){return{anchor:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[xl]},onLtr:function(){return[xl]}}}};return function(){return e()?r():o()}},JP=function(n,t){return function(){return{anchor:"selection",root:t(),getSelection:function(){var t=n.selection.getRng();return w.some(_d.range(tr.fromDom(t.startContainer),t.startOffset,tr.fromDom(t.endContainer),t.endOffset))}}}},QP=function(n){return function(t){return{anchor:"node",root:n(),node:t}}},ZP=function(n,t,e){var r=kk(n),o=function(){return tr.fromDom(n.getBody())},i=function(){return tr.fromDom(n.getContentAreaContainer())},u=function(){return r||!e()};return{inlineDialog:YP(i,t,u),banner:$P(i,t,u),cursor:JP(n,o),node:QP(o)}},nF=function(n){return function(t,e){var r=AT(n);r(t,e)}},tF=function(n){return function(){return fT(n)}},eF=function(n){return function(){return mT(n)}},rF=function(n){return function(){return wT(n)}},oF=function(n){return{colorPicker:nF(n),hasCustomColors:tF(n),getColors:eF(n),getColorCols:rF(n)}},iF=function(n){return function(){return _k(n)}},uF=function(n){return{isDraggableModal:iF(n)}},aF=function(n){var t=Ye(xk(n)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===t.get()},getDockingMode:t.get,setDockingMode:t.set}},cF=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],sF=function(n){return Vn(n,"items")},lF=function(n){return Vn(n,"block")},fF=function(n){return Vn(n,"inline")},dF=function(n){return Vn(n,"selector")},mF=function(n){return J(n,(function(n,t){if(sF(t)){var e=mF(t.items);return{customFormats:n.customFormats.concat(e.customFormats),formats:n.formats.concat([{title:t.title,items:e.formats}])}}if(fF(t)||lF(t)||dF(t)){var r=T(t.name)?t.name:t.title.toLowerCase(),o="custom-"+r;return{customFormats:n.customFormats.concat([{name:o,format:t}]),formats:n.formats.concat([{title:t.title,format:o,icon:t.icon}])}}return m(m({},n),{formats:n.formats.concat(t)})}),{customFormats:[],formats:[]})},gF=function(n,t){var e=mF(t),r=function(t){q(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))};return n.formatter?r(e.customFormats):n.on("init",(function(){r(e.customFormats)})),e.formats},pF=function(n){return ak(n).map((function(t){var e=gF(n,t);return ck(n)?cF.concat(e):e})).getOr(cF)},vF=function(n,t,e){var r={type:"formatter",isSelected:t(n.format),getStylePreview:e(n.format)};return Yn(n,r)},hF=function(n,t,e,r){var o=function(n){return vF(n,e,r)},i=function(n){var t={type:"submenu"};return Yn(n,t)},u=function(t){var o=T(t.name)?t.name:Fu(t.title),i="custom-"+o,u={type:"formatter",format:i,isSelected:e(i),getStylePreview:r(i)},a=Yn(t,u);return n.formatter.register(o,a),a},a=function(n){return G(n,(function(n){var t=An(n);if(Un(n,"items")){var e=a(n.items);return Yn(i(n),{getStyleItems:function(){return e}})}return Un(n,"format")?o(n):1===t.length&&V(t,"title")?Yn(n,{type:"separator"}):u(n)}))};return a(t)},bF=function(n){var t=function(t){return function(){return n.formatter.match(t)}},e=function(t){return function(){var e=n.formatter.get(t);return void 0!==e?w.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(t))}):w.none()}},r=function(n){var t=n.items;return void 0!==t&&t.length>0?en(t,r):[n.format]},o=Ye([]),i=Ye([]),u=Ye([]),a=Ye([]),c=Ye(!1);n.on("PreInit",(function(u){var a=pF(n),c=hF(n,a,t,e);o.set(c),i.set(en(c,r))})),n.on("addStyleModifications",(function(o){var i=hF(n,o.items,t,e);u.set(i),c.set(o.replace),a.set(en(i,r))}));var s=function(){var n=c.get()?[]:o.get(),t=u.get();return n.concat(t)},l=function(){var n=c.get()?[]:i.get(),t=a.get();return n.concat(t)};return{getData:s,getFlattenedKeys:l}},yF=function(n){return B(n)&&1===n.nodeType},xF=NB.trim,wF=function(n){return function(t){if(yF(t)){if(t.contentEditable===n)return!0;if(t.getAttribute("data-mce-contenteditable")===n)return!0}return!1}},CF=wF("true"),SF=wF("false"),kF=function(n,t,e,r,o){return{type:n,title:t,url:e,level:r,attach:o}},OF=function(n){while(n=n.parentNode){var t=n.contentEditable;if(t&&"inherit"!==t)return CF(n)}return!1},TF=function(n,t){return G(Jd(tr.fromDom(t),n),(function(n){return n.dom}))},DF=function(n){return n.innerText||n.textContent},_F=function(n){return n.id?n.id:Fu("h")},AF=function(n){return n&&"A"===n.nodeName&&void 0!==(n.id||n.name)},EF=function(n){return AF(n)&&BF(n)},RF=function(n){return n&&/^(H[1-6])$/.test(n.nodeName)},BF=function(n){return OF(n)&&!SF(n)},MF=function(n){return RF(n)&&BF(n)},IF=function(n){return RF(n)?parseInt(n.nodeName.substr(1),10):0},NF=function(n){var t=_F(n),e=function(){n.id=t};return kF("header",DF(n),"#"+t,IF(n),e)},PF=function(n){var e=n.id||n.name,r=DF(n);return kF("anchor",r||"#"+e,"#"+e,0,t)},FF=function(n){return G(Y(n,MF),NF)},LF=function(n){return G(Y(n,EF),PF)},HF=function(n){var t=TF("h1,h2,h3,h4,h5,h6,a:not([href])",n);return t},zF=function(n){return xF(n.title).length>0},VF=function(n){var t=HF(n);return Y(FF(t).concat(LF(t)),zF)},UF={find:VF},jF="tinymce-url-history",WF=5,GF=function(n){return T(n)&&/^https?/.test(n)},qF=function(n){return _(n)&&n.length<=WF&&rn(n,GF)},XF=function(n){return D(n)&&Ln(n,(function(n){return!qF(n)})).isNone()},KF=function(){var n,t=eT.getItem(jF);if(null===t)return{};try{n=JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+jF+" was not valid JSON",e),{};throw e}return XF(n)?n:(console.log("Local storage "+jF+" was not valid format",n),{})},YF=function(n){if(!XF(n))throw new Error("Bad format for history:\n"+JSON.stringify(n));eT.setItem(jF,JSON.stringify(n))},$F=function(n){var t=KF();return Object.prototype.hasOwnProperty.call(t,n)?t[n]:[]},JF=function(n,t){if(GF(n)){var e=KF(),r=Object.prototype.hasOwnProperty.call(e,t)?e[t]:[],o=Y(r,(function(t){return t!==n}));e[t]=[n].concat(o).slice(0,WF),YF(e)}},QF=function(n){return!!n},ZF=function(n){return Bn(NB.makeMap(n,/[, ]/),QF)},nL=function(n){return w.from(Bk(n)).filter(M)},tL=function(n){var t=w.some(Mk(n)).filter(QF),e=w.some(Ik(n)).filter(QF),r=t.or(e).map(ZF);return nL(n).fold(l,(function(n){return r.fold(f,(function(n){return An(n).length>0&&n}))}))},eL=function(n,t){var e=tL(n);return A(e)?e?nL(n):w.none():e[t]?nL(n):w.none()},rL=function(n,t){return eL(n,t).map((function(e){return function(r){return I_.nu((function(o){var i=function(n,t){if(!T(n))throw new Error("Expected value to be string");if(void 0!==t&&!D(t))throw new Error("Expected meta to be a object");var e={value:n,meta:t};o(e)},u=m({filetype:t,fieldname:r.fieldname},w.from(r.meta).getOr({}));e.call(n,i,r.value,u)}))}}))},oL=function(n){return w.from(n).filter(T).getOrUndefined()},iL=function(n){return Nk(n)?w.none():w.some({targets:UF.find(n.getBody()),anchorTop:oL(Pk(n)),anchorBottom:oL(Fk(n))})},uL=function(n){return w.from(Lk(n))},aL=function(n){return{getHistory:$F,addToHistory:JF,getLinkInformation:function(){return iL(n)},getValidationHandler:function(){return uL(n)},getUrlPicker:function(t){return rL(n,t)}}},cL=function(n,t,e){var r=Ye(!1),o=aF(t),i={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:RS.translate,isDisabled:function(){return t.mode.isReadOnly()||t.ui.isDisabled()},getSetting:t.getParam.bind(t)},interpreter:function(n){return XP(n,i)},anchors:ZP(t,e,o.isPositionedAtTop),header:o,getSink:function(){return hn.value(n)}},urlinput:aL(t),styleselect:bF(t),colorinput:oF(t),dialog:uF(t),isContextMenuOpen:function(){return r.get()},setContextMenuState:function(n){return r.set(n)}};return i},sL=i((function(n,t){Pc(n,Math.floor(t))})),lL="contexttoolbar-show",fL="contexttoolbar-hide",dL=i([ye("dom"),Le("shell",!0),$g("toolbarBehaviours",[wy])]),mL=function(){return{behaviours:zl([wy.config({})])}},gL=i([Ep({name:"groups",overrides:mL})]),pL=function(n,t,e,r){var o=function(n,t){i(n).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(n){wy.set(n,t)}))},i=function(t){return n.shell?w.some(t):jp(t,n,"groups")},u=n.shell?{behaviours:[wy.config({})],components:[]}:{behaviours:[],components:t};return{uid:n.uid,dom:n.dom,components:u.components,behaviours:Qg(n.toolbarBehaviours,u.behaviours),apis:{setGroups:o},domModification:{attributes:{role:"group"}}}},vL=cv({name:"Toolbar",configFields:dL(),partFields:gL(),factory:pL,apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}}),hL=function(n,t){var e={len:0,list:[]},r=J(n,(function(n,e){var r=t(e,n.len);return r.fold(i(n),(function(t){return{len:t.finish,list:n.list.concat([t])}}))}),e);return r.list},bL=function(n,t,e){return{within:n,extra:t,withinWidth:e}},yL=function(n,t,e){var r=hL(n,(function(n,t){var r=e(n);return w.some({element:n,start:t,finish:t+r,width:r})})),o=Y(r,(function(n){return n.finish<=t})),i=$(o,(function(n,t){return n+t.width}),0),u=r.slice(o.length);return{within:o,extra:u,withinWidth:i}},xL=function(n){return G(n,(function(n){return n.element}))},wL=function(n,t,e){var r=xL(n.concat(t));return bL(r,[],e)},CL=function(n,t,e,r){var o=xL(n).concat([e]);return bL(o,xL(t),r)},SL=function(n,t,e){return bL(xL(n),[],e)},kL=function(n,t,e){var r=yL(t,n,e);return 0===r.extra.length?w.some(r):w.none()},OL=function(n,t,e,r){var o=kL(n,t,e).getOrThunk((function(){return yL(t,n-e(r),e)})),i=o.within,u=o.extra,a=o.withinWidth;return 1===u.length&&u[0].width<=e(r)?wL(i,u,a):u.length>=1?CL(i,u,r,a):SL(i,u,a)},TL=function(n,t){var e=G(t,(function(n){return xc(n)}));vL.setGroups(n,e)},DL=function(n){return mn(n,(function(n){return nf(n.element).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))}))},_L=function(n,t,e){var r=Wp(n,t,"primary"),o=Q_.getCoupled(n,"overflowGroup");Ya(r.element,"visibility","hidden");var i=t.builtGroups.get().concat([o]),u=DL(i);e([]),TL(r,i);var a=Ic(r.element),c=OL(a,t.builtGroups.get(),(function(n){return Ic(n.element)}),o);0===c.extra.length?(wy.remove(r,o),e([])):(TL(r,c.within),e(c.extra)),rc(r.element,"visibility"),oc(r.element),u.each(By.focus)},AL=i([$g("splitToolbarBehaviours",[Q_]),Ke("builtGroups",(function(){return Ye([])}))]),EL=i([Ps(["overflowToggledClass"]),Ie("getOverflowBounds"),ye("lazySink"),Ke("overflowGroups",(function(){return Ye([])}))].concat(AL())),RL=i([_p({factory:vL,schema:dL(),name:"primary"}),Ap({schema:dL(),name:"overflow"}),Ap({name:"overflow-button"}),Ap({name:"overflow-group"})]),BL=i([Ps(["toggledClass"]),ye("lazySink"),Oe("fetch"),Ie("getBounds"),Pe("fireDismissalEventInstead",[Le("event",ei())]),jf()]),ML=i([Ap({name:"button",overrides:function(n){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:zl([Jy.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Ap({factory:vL,schema:dL(),name:"toolbar",overrides:function(n){return{toolbarBehaviours:zl([fy.config({mode:"cyclic",onEscape:function(t){return jp(t,n,"button").each(By.focus),w.none()}})])}}})]),IL=function(n,t){var e=Q_.getCoupled(n,"toolbarSandbox");mg.isOpen(e)?mg.close(e):mg.open(e,t.toolbar())},NL=function(n,t,e,r){var o=e.getBounds.map((function(n){return n()})),i=e.lazySink(n).getOrDie();Mm.positionWithinBounds(i,{anchor:"hotspot",hotspot:n,layouts:r,overrides:{maxWidthFunction:sL()}},t,o)},PL=function(n,t,e,r,o){vL.setGroups(t,o),NL(n,t,e,r),Jy.on(n)},FL=function(n,t,e){var r=hs(),o=function(o,i){e.fetch().get((function(o){PL(n,i,e,t.layouts,o),r.link(n.element),fy.focusIn(i)}))},i=function(){Jy.off(n),By.focus(n),r.unlink(n.element)};return{dom:{tag:"div",attributes:{id:r.id}},behaviours:zl([fy.config({mode:"special",onEscape:function(n){return mg.close(n),w.some(!0)}}),mg.config({onOpen:o,onClose:i,isPartOf:function(t,e,r){return ys(e,r)||ys(n,r)},getAttachPoint:function(){return e.lazySink(n).getOrDie()}}),ql.config({channels:m(m({},bg(m({isExtraPart:l},e.fireDismissalEventInstead.map((function(n){return{fireEventInstead:{event:n.event}}})).getOr({})))),xg({doReposition:function(){mg.getState(Q_.getCoupled(n,"toolbarSandbox")).each((function(r){NL(n,r,e,t.layouts)}))}}))})])}},LL=function(n,t,e,r){return m(m({},Jx.sketch(m(m({},r.button()),{action:function(n){IL(n,r)},buttonBehaviours:Zg.augment({dump:r.button().buttonBehaviours},[Q_.config({others:{toolbarSandbox:function(t){return FL(t,e,n)}}})])}))),{apis:{setGroups:function(t,r){mg.getState(Q_.getCoupled(t,"toolbarSandbox")).each((function(o){PL(t,o,n,e.layouts,r)}))},reposition:function(t){mg.getState(Q_.getCoupled(t,"toolbarSandbox")).each((function(r){NL(t,r,n,e.layouts)}))},toggle:function(n){IL(n,r)},getToolbar:function(n){return mg.getState(Q_.getCoupled(n,"toolbarSandbox"))},isOpen:function(n){return mg.isOpen(Q_.getCoupled(n,"toolbarSandbox"))}}})},HL=cv({name:"FloatingToolbarButton",factory:LL,configFields:BL(),partFields:ML(),apis:{setGroups:function(n,t,e){n.setGroups(t,e)},reposition:function(n,t){n.reposition(t)},toggle:function(n,t){n.toggle(t)},getToolbar:function(n,t){return n.getToolbar(t)},isOpen:function(n,t){return n.isOpen(t)}}}),zL=i([ye("items"),Ps(["itemSelector"]),$g("tgroupBehaviours",[fy])]),VL=i([Rp({name:"items",unit:"item"})]),UL=function(n,t,e,r){return{uid:n.uid,dom:n.dom,components:t,behaviours:Qg(n.tgroupBehaviours,[fy.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},jL=cv({name:"ToolbarGroup",configFields:zL(),partFields:VL(),factory:UL}),WL=function(n){return G(n,(function(n){return xc(n)}))},GL=function(n,t,e){_L(n,e,(function(r){e.overflowGroups.set(r),t.getOpt(n).each((function(n){HL.setGroups(n,WL(r))}))}))},qL=function(n,t,e,r){var o=Qx(HL.sketch({fetch:function(){return I_.nu((function(t){t(WL(n.overflowGroups.get()))}))},layouts:{onLtr:function(){return[vl,pl]},onRtl:function(){return[pl,vl]},onBottomLtr:function(){return[bl,hl]},onBottomRtl:function(){return[hl,bl]}},getBounds:e.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:n.uid,dom:n.dom,components:t,behaviours:Qg(n.splitToolbarBehaviours,[Q_.config({others:{overflowGroup:function(){return jL.sketch(m(m({},r["overflow-group"]()),{items:[o.asSpec()]}))}}})]),apis:{setGroups:function(t,e){n.builtGroups.set(G(e,t.getSystem().build)),GL(t,o,n)},refresh:function(t){return GL(t,o,n)},toggle:function(n){o.getOpt(n).each((function(n){HL.toggle(n)}))},isOpen:function(n){return o.getOpt(n).map(HL.isOpen).getOr(!1)},reposition:function(n){o.getOpt(n).each((function(n){HL.reposition(n)}))},getOverflow:function(n){return o.getOpt(n).bind(HL.getToolbar)}},domModification:{attributes:{role:"group"}}}},XL=cv({name:"SplitFloatingToolbar",configFields:EL(),partFields:RL(),factory:qL,apis:{setGroups:function(n,t,e){n.setGroups(t,e)},refresh:function(n,t){n.refresh(t)},reposition:function(n,t){n.reposition(t)},toggle:function(n,t){n.toggle(t)},isOpen:function(n,t){return n.isOpen(t)},getOverflow:function(n,t){return n.getOverflow(t)}}}),KL=function(n,t){return t.getAnimationRoot.fold((function(){return n.element}),(function(t){return t(n)}))},YL=function(n){return n.dimension.property},$L=function(n,t){return n.dimension.getDimension(t)},JL=function(n,t){var e=KL(n,t);Ua(e,[t.shrinkingClass,t.growingClass])},QL=function(n,t){Ha(n.element,t.openClass),Fa(n.element,t.closedClass),Ya(n.element,YL(t),"0px"),oc(n.element)},ZL=function(n,t){Ha(n.element,t.closedClass),Fa(n.element,t.openClass),rc(n.element,YL(t))},nH=function(n,t,e,r){e.setCollapsed(),Ya(n.element,YL(t),$L(t,n.element)),oc(n.element),JL(n,t),QL(n,t),t.onStartShrink(n),t.onShrunk(n)},tH=function(n,t,e,r){var o=r.getOrThunk((function(){return $L(t,n.element)}));e.setCollapsed(),Ya(n.element,YL(t),o),oc(n.element);var i=KL(n,t);Ha(i,t.growingClass),Fa(i,t.shrinkingClass),QL(n,t),t.onStartShrink(n)},eH=function(n,t,e){var r=$L(t,n.element),o="0px"===r?nH:tH;o(n,t,e,w.some(r))},rH=function(n,t,e){var r=KL(n,t),o=za(r,t.shrinkingClass),i=$L(t,n.element);ZL(n,t);var u=$L(t,n.element),a=function(){Ya(n.element,YL(t),i),oc(n.element)},c=function(){QL(n,t)},s=o?a:c;s(),Ha(r,t.shrinkingClass),Fa(r,t.growingClass),ZL(n,t),Ya(n.element,YL(t),u),e.setExpanded(),t.onStartGrow(n)},oH=function(n,t,e){if(e.isExpanded()){rc(n.element,YL(t));var r=$L(t,n.element);Ya(n.element,YL(t),r)}},iH=function(n,t,e){e.isExpanded()||rH(n,t,e)},uH=function(n,t,e){e.isExpanded()&&eH(n,t,e)},aH=function(n,t,e){e.isExpanded()&&nH(n,t,e,w.none())},cH=function(n,t,e){return e.isExpanded()},sH=function(n,t,e){return e.isCollapsed()},lH=function(n,t,e){var r=KL(n,t);return!0===za(r,t.growingClass)},fH=function(n,t,e){var r=KL(n,t);return!0===za(r,t.shrinkingClass)},dH=function(n,t,e){return lH(n,t)||fH(n,t)},mH=function(n,t,e){var r=e.isExpanded()?eH:rH;r(n,t,e)},gH=Object.freeze({__proto__:null,refresh:oH,grow:iH,shrink:uH,immediateShrink:aH,hasGrown:cH,hasShrunk:sH,isGrowing:lH,isShrinking:fH,isTransitioning:dH,toggleGrow:mH,disableTransitions:JL}),pH=function(n,t,e){var r=t.expanded;return sa(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:lt(t.dimension.property,"0px")})},vH=function(n,t){return vi([Ai(No(),(function(e,r){var o=r.event.raw;if(o.propertyName===n.dimension.property){JL(e,n),t.isExpanded()&&rc(e.element,n.dimension.property);var i=t.isExpanded()?n.onGrown:n.onShrunk;i(e)}}))])},hH=Object.freeze({__proto__:null,exhibit:pH,events:vH}),bH=[ye("closedClass"),ye("openClass"),ye("shrinkingClass"),ye("growingClass"),Ee("getAnimationRoot"),Ls("onShrunk"),Ls("onStartShrink"),Ls("onGrown"),Ls("onStartGrow"),Le("expanded",!1),xe("dimension",ce("property",{width:[Us("property","width"),Us("getDimension",(function(n){return Ic(n)+"px"}))],height:[Us("property","height"),Us("getDimension",(function(n){return Sc(n)+"px"}))]}))],yH=function(n){var t=Ye(n.expanded),e=function(){return"expanded: "+t.get()};return oa({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:a(t.set,!1),setExpanded:a(t.set,!0),readState:e})},xH=Object.freeze({__proto__:null,init:yH}),wH=Ul({fields:bH,name:"sliding",active:hH,apis:gH,state:xH}),CH=i([Ps(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ls("onOpened"),Ls("onClosed")].concat(AL())),SH=i([_p({factory:vL,schema:dL(),name:"primary"}),_p({factory:vL,schema:dL(),name:"overflow",overrides:function(n){return{toolbarBehaviours:zl([wH.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:function(t){jp(t,n,"overflow-button").each((function(n){Jy.off(n),By.focus(n)})),n.onClosed(t)},onGrown:function(t){fy.focusIn(t),n.onOpened(t)},onStartGrow:function(t){jp(t,n,"overflow-button").each(Jy.on)}}),fy.config({mode:"acyclic",onEscape:function(t){return jp(t,n,"overflow-button").each(By.focus),w.some(!0)}})])}}}),Ap({name:"overflow-button",overrides:function(n){return{buttonBehaviours:zl([Jy.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Ap({name:"overflow-group"})]),kH=function(n,t){return jp(n,t,"overflow").map(wH.hasGrown).getOr(!1)},OH=function(n,t){jp(n,t,"overflow-button").bind((function(){return jp(n,t,"overflow")})).each((function(e){TH(n,t),wH.toggleGrow(e)}))},TH=function(n,t){jp(n,t,"overflow").each((function(e){_L(n,t,(function(n){var t=G(n,(function(n){return xc(n)}));vL.setGroups(e,t)})),jp(n,t,"overflow-button").each((function(n){wH.hasGrown(e)&&Jy.on(n)})),wH.refresh(e)}))},DH=function(n,t,e,r){var o="alloy.toolbar.toggle",i=function(t,e){var r=G(e,t.getSystem().build);n.builtGroups.set(r)};return{uid:n.uid,dom:n.dom,components:t,behaviours:Qg(n.splitToolbarBehaviours,[Q_.config({others:{overflowGroup:function(n){return jL.sketch(m(m({},r["overflow-group"]()),{items:[Jx.sketch(m(m({},r["overflow-button"]()),{action:function(t){li(n,o)}}))]}))}}}),Sy("toolbar-toggle-events",[xi(o,(function(t){OH(t,n)}))])]),apis:{setGroups:function(t,e){i(t,e),TH(t,n)},refresh:function(t){return TH(t,n)},toggle:function(t){return OH(t,n)},isOpen:function(t){return kH(t,n)}},domModification:{attributes:{role:"group"}}}},_H=cv({name:"SplitSlidingToolbar",configFields:CH(),partFields:SH(),factory:DH,apis:{setGroups:function(n,t,e){n.setGroups(t,e)},refresh:function(n,t){n.refresh(t)},toggle:function(n,t){n.toggle(t)},isOpen:function(n,t){return n.isOpen(t)}}}),AH=i(Fu("toolbar-height-change")),EH=function(n){var t=n.title.fold((function(){return{}}),(function(n){return{attributes:{title:n}}}));return{dom:m({tag:"div",classes:["tox-toolbar__group"]},t),components:[jL.parts.items({})],items:n.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:zl([ZD.config({}),By.config({})])}},RH=function(n){return jL.sketch(EH(n))},BH=function(n,t){var e=Ei((function(t){var e=G(n.initGroups,RH);vL.setGroups(t,e)}));return zl([Kk.toolbarButton(n.providers.isDisabled),jk(),fy.config({mode:t,onEscape:n.onEscape,selector:".tox-toolbar__group"}),Sy("toolbar-events",[e])])},MH=function(n){var t=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":EH({title:w.none(),items:[]}),"overflow-button":II({name:"more",icon:w.some("more-drawer"),disabled:!1,tooltip:w.some("More..."),primary:!1,borderless:!1},w.none(),n.providers)},splitToolbarBehaviours:BH(n,t)}},IH=function(n){var t=MH(n),e=4,r=XL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return XL.sketch(m(m({},t),{lazySink:n.getSink,getOverflowBounds:function(){var t=n.moreDrawerData.lazyHeader().element,r=is(t),o=ji(t),i=is(o),u=Math.max(o.dom.scrollHeight,i.height);return rs(r.x+e,i.y,r.width-2*e,u)},parts:m(m({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}}),components:[r],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},NH=function(n){var t=_H.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=_H.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=MH(n);return _H.sketch(m(m({},r),{components:[t,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(n){n.getSystem().broadcastOn([AH()],{type:"opened"})},onClosed:function(n){n.getSystem().broadcastOn([AH()],{type:"closed"})}}))},PH=function(n){var t=n.cyclicKeying?"cyclic":"acyclic";return vL.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===aC.scrolling?["tox-toolbar--scrolling"]:[])},components:[vL.parts.groups({})],toolbarBehaviours:BH(n,t)})},FH=Ht([Ce("type"),xe("items",Vt([Jt([Ce("name"),Ae("items",me)]),me]))].concat(jw)),LH=function(n){return re("GroupToolbarButton",FH,n)},HH=[Me("text"),Me("tooltip"),Me("icon"),Oe("fetch"),We("onSetup",(function(){return t}))],zH=Ht(p([Ce("type")],HH)),VH=function(n){return re("menubutton",zH,n)},UH=Ht([Ce("type"),Me("tooltip"),Me("icon"),Me("text"),Ie("select"),Oe("fetch"),We("onSetup",(function(){return t})),Ue("presets","normal",["normal","color","listpreview"]),Le("columns",1),Oe("onAction"),Oe("onItemAction")]),jH=function(n){return re("SplitButton",UH,n)},WH=function(n,t){var e=function(e,r){n.updateState.each((function(n){var o=n(e,r);t.set(o)})),n.renderComponents.each((function(n){var o=n(r,t.get()),i=G(o,e.getSystem().build);Lm(e,i)}))};return vi([xi(Uo(),(function(t,r){var o=r;if(!o.universal){var i=n.channel;V(o.channels,i)&&e(t,o.data)}})),Ei((function(t,r){n.initialData.each((function(n){e(t,n)}))}))])},GH=Object.freeze({__proto__:null,events:WH}),qH=function(n,t,e){return e},XH=Object.freeze({__proto__:null,getState:qH}),KH=[ye("channel"),Ee("renderComponents"),Ee("updateState"),Ee("initialData")],YH=function(){var n=Ye(w.none()),t=function(t){return n.set(t)},e=function(){return n.set(w.none())},r=function(){return n.get()},o=function(){return n.get().fold((function(){return"none"}),(function(n){return n}))};return{readState:o,get:r,set:t,clear:e}},$H=Object.freeze({__proto__:null,init:YH}),JH=Ul({fields:KH,name:"reflecting",active:GH,apis:XH,state:$H}),QH=i([ye("toggleClass"),ye("fetch"),zs("onExecute"),Le("getHotspot",w.some),Le("getAnchorOverrides",i({})),jf(),zs("onItemExecute"),Ee("lazySink"),ye("dom"),Ls("onOpen"),$g("splitDropdownBehaviours",[Q_,fy,By]),Le("matchWidth",!1),Le("useMinWidth",!1),Le("eventOrder",{}),Ee("role")].concat(mA())),ZH=_p({factory:Jx,schema:[ye("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:zl([By.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(di)},buttonBehaviours:zl([Jy.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),nz=_p({factory:Jx,schema:[ye("dom")],name:"button",defaults:function(){return{buttonBehaviours:zl([By.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each((function(e){n.onExecute(e,t)}))}}}}),tz=i([ZH,nz,Ep({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[ye("text")],name:"aria-descriptor"}),Ap({schema:[Ns()],name:"menu",defaults:function(n){return{onExecute:function(t,e){t.getSystem().getByUid(n.uid).each((function(r){n.onItemExecute(r,t,e)}))}}}}),nA()]),ez=function(n,e,r,o){var i,u=function(n){yv.getCurrent(n).each((function(n){Hv.highlightFirst(n),fy.focusIn(n)}))},a=function(e){var r=u;aA(n,(function(n){return n}),e,o,r,O_.HighlightFirst).get(t)},c=function(n){return a(n),w.some(!0)},s=function(t){var e=Wp(t,n,"button");return di(e),w.some(!0)},l=m(m({},vi([Ei((function(t,e){var r=jp(t,n,"aria-descriptor");r.each((function(n){var e=Fu("aria");Su(n.element,"id",e),Su(t.element,"aria-describedby",e)}))}))])),Zy(w.some(a))),f={repositionMenus:function(n){Jy.isOn(n)&&dA(n)}};return{uid:n.uid,dom:n.dom,components:e,apis:f,eventOrder:m(m({},n.eventOrder),(i={},i[jo()]=["disabling","toggling","alloy.base.behaviour"],i)),events:l,behaviours:Qg(n.splitDropdownBehaviours,[Q_.config({others:{sandbox:function(t){var e=Wp(t,n,"arrow"),r={onOpen:function(){Jy.on(e),Jy.on(t)},onClose:function(){Jy.off(e),Jy.off(t)}};return fA(n,t,r)}}}),fy.config({mode:"special",onSpace:s,onEnter:s,onDown:c}),By.config({}),Jy.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:n.role.getOr("button"),"aria-haspopup":!0}}}},rz=cv({name:"SplitDropdown",configFields:QH(),partFields:tz(),factory:ez,apis:{repositionMenus:function(n,t){return n.repositionMenus(t)}}}),oz=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},iz=function(n){return{setActive:function(t){Jy.set(n,t)},isActive:function(){return Jy.isOn(n)},isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)}}},uz=function(n,t){return n.map((function(n){return{"aria-label":t.translate(n),title:t.translate(n)}})).getOr({})},az=Fu("focus-button"),cz=["checklist","ordered-list"],sz=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],lz=function(n,t,e,r,o,i){var u,a=function(n){return RS.isRtl()&&V(cz,n)?n+"-rtl":n},c=RS.isRtl()&&n.exists((function(n){return V(sz,n)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:uz(e,i)},components:nO([n.map((function(n){return fI(a(n),i.icons)})),t.map((function(n){return mI(n,"tox-tbtn",i)}))]),eventOrder:(u={},u[So()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:zl([Kk.toolbarButton(i.isDisabled),jk(),Sy("common-button-display-events",[xi(So(),(function(n,t){t.event.prevent(),li(n,az)}))])].concat(r.map((function(e){return JH.config({channel:e,initialData:{icon:n,text:t},renderComponents:function(n,t){return nO([n.icon.map((function(n){return fI(a(n),i.icons)})),n.text.map((function(n){return mI(n,"tox-tbtn",i)}))])}})})).toArray()).concat(o.getOr([])))}},fz=function(n,t,e,r){var o=t.shared;return HL.sketch({lazySink:o.getSink,fetch:function(){return I_.nu((function(t){t(G(e(n.items),RH))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:lz(n.icon,n.text,n.tooltip,w.none(),w.none(),o.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})},dz=function(n,e,r){var o=Ye(t),i=lz(n.icon,n.text,n.tooltip,w.none(),w.none(),r);return Jx.sketch({dom:i.dom,components:i.components,eventOrder:vI,buttonBehaviours:zl([Sy("toolbar-button-events",[pI({onAction:n.onAction,getApi:e.getApi}),$k(e,o),Jk(e,o)]),Kk.toolbarButton((function(){return n.disabled||r.isDisabled()})),jk()].concat(e.toolbarButtonBehaviours))})},mz=function(n,t){return gz(n,t,[])},gz=function(n,t,e){return dz(n,{toolbarButtonBehaviours:[].concat(e.length>0?[Sy("toolbarButtonWith",e)]:[]),getApi:oz,onSetup:n.onSetup},t)},pz=function(n,t){return vz(n,t,[])},vz=function(n,t,e){return Yn(dz(n,{toolbarButtonBehaviours:[wy.config({}),Jy.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(e.length>0?[Sy("toolbarToggleButtonWith",e)]:[]),getApi:iz,onSetup:n.onSetup},t))},hz=function(n,t,e){return function(r){return I_.nu((function(n){return t.fetch(n)})).map((function(o){return w.from(aD(Yn(RT(Fu("menu-value"),o,(function(e){t.onItemAction(n(r),e)}),t.columns,t.presets,cC.CLOSE_ON_EXECUTE,t.select.getOr(l),e),{movement:MT(t.columns,t.presets),menuBehaviours:vS.unnamedEvents("auto"!==t.columns?[]:[Ei((function(n,e){mS(n,4,EC(t.presets)).each((function(t){var e=t.numRows,r=t.numColumns;fy.setGridSize(n,e,r)}))}))])})))}))}},bz=function(n,e){var r,o=Fu("channel-update-split-dropdown-display"),i=function(n){return{isDisabled:function(){return $S.isDisabled(n)},setDisabled:function(t){return $S.set(n,t)},setIconFill:function(t,e){gs(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((function(n){Su(n,"fill",e)}))},setIconStroke:function(t,e){gs(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((function(n){Su(n,"stroke",e)}))},setActive:function(t){Su(n.element,"aria-pressed",t),gs(n.element,"span").each((function(e){n.getSystem().getByDom(e).each((function(n){return Jy.set(n,t)}))}))},isActive:function(){return gs(n.element,"span").exists((function(t){return n.getSystem().getByDom(t).exists(Jy.isOn)}))}}},u=Ye(t),a={getApi:i,onSetup:n.onSetup};return rz.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:m({"aria-pressed":!1},uz(n.tooltip,e.providers))},onExecute:function(t){n.onAction(i(t))},onItemExecute:function(n,t,e){},splitDropdownBehaviours:zl([Kk.splitButton(e.providers.isDisabled),jk(),Sy("split-dropdown-events",[xi(az,By.focus),$k(a,u),Jk(a,u)]),wA.config({})]),eventOrder:(r={},r[ni()]=["alloy.base.behaviour","split-dropdown-events"],r),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:hz(i,n,e.providers),parts:{menu:PC(!1,n.columns,n.presets)},components:[rz.parts.button(lz(n.icon,n.text,w.none(),w.some(o),w.some([Jy.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),rz.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:nw("chevron-down",e.providers.icons)},buttonBehaviours:zl([Kk.splitButton(e.providers.isDisabled),jk()])}),rz.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},yz=function(n){return{hide:function(){return li(n,Xo())},getValue:function(){return Yg.getValue(n)}}},xz=function(n,t){return xi(gI,(function(e,r){var o=n.get(e),i=yz(o);t.onAction(i,r.event.buttonApi)}))},wz=function(n,e,r){var o=e.original,i=(o.primary,g(o,["primary"])),u=oe(Gw(m(m({},i),{type:"button",onAction:t})));return gz(u,r.backstage.shared.providers,[xz(n,e)])},Cz=function(n,e,r){var o=e.original,i=(o.primary,g(o,["primary"])),u=oe(Kw(m(m({},i),{type:"togglebutton",onAction:t})));return vz(u,r.backstage.shared.providers,[xz(n,e)])},Sz=function(n,t,e){var r={backstage:{shared:{providers:e}}};return"contextformtogglebutton"===t.type?Cz(n,t,r):wz(n,t,r)},kz=function(n,t,e){var r=G(t,(function(t){return Qx(Sz(n,t,e))})),o=function(){return G(r,(function(n){return n.asSpec()}))},i=function(n){return mn(t,(function(t,e){return t.primary?w.from(r[e]).bind((function(t){return t.getOpt(n)})).filter(c($S.isDisabled)):w.none()}))};return{asSpecs:o,findPrimary:i}},Oz=function(n,t){var e=n.label.fold((function(){return{}}),(function(n){return{"aria-label":n}})),r=Qx(C_.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:e,selectOnFocus:!0,inputBehaviours:zl([fy.config({mode:"special",onEnter:function(n){return o.findPrimary(n).map((function(n){return di(n),!0}))},onLeft:function(n,t){return t.cut(),w.none()},onRight:function(n,t){return t.cut(),w.none()}})])})),o=kz(r,n.commands,t);return[{title:w.none(),items:[r.asSpec()]},{title:w.none(),items:o.asSpecs()}]},Tz=function(n,t,e){return PH({type:n,uid:Fu("context-toolbar"),initGroups:Oz(t,e),onEscape:w.none,cyclicKeying:!0,providers:e})},Dz={renderContextForm:Tz,buildInitGroups:Oz},_z=function(n,t){var e=Math.max(t.x,n.x),r=n.right-e,o=t.width-(e-t.x),i=Math.min(r,o);return{x:e,width:i}},Az=function(n,t,e,r){var o=tr.fromDom(n.getContainer()),i=gs(o,".tox-editor-header").getOr(o),u=os(i),a=u.y>=t.bottom,c=r&&!a;if(n.inline&&c)return{y:Math.max(u.bottom,e.y),bottom:e.bottom};if(n.inline&&!c)return{y:e.y,bottom:Math.min(u.y,e.bottom)};var s=os(o);return c?{y:Math.max(u.bottom,e.y),bottom:Math.min(s.bottom,e.bottom)}:{y:Math.max(s.y,e.y),bottom:Math.min(u.y,e.bottom)}},Ez=function(n,t){var e=Kc(window),r=os(tr.fromDom(n.getContentAreaContainer())),o=fk(n)||dk(n)||gk(n),i=_z(r,e),u=i.x,a=i.width;if(n.inline&&!o)return rs(u,e.y,a,e.height);var c=t.header.isPositionedAtTop(),s=Az(n,r,e,c),l=s.y,f=s.bottom;return rs(u,l,a,f-l)},Rz=function(n,t){var e=Y(t,(function(t){return t.predicate(n.dom)})),r=K(e,(function(n){return"contexttoolbar"===n.type})),o=r.pass,i=r.fail;return{contextToolbars:o,contextForms:i}},Bz=function(n){if(n.length<=1)return n;var t=function(t){return U(n,(function(n){return n.position===t}))},e=function(t){return Y(n,(function(n){return n.position===t}))},r=t("selection"),o=t("node");if(r||o){if(o&&r){var i=e("node"),u=G(e("selection"),(function(n){return m(m({},n),{position:"node"})}));return i.concat(u)}return e(r?"selection":"node")}return e("line")},Mz=function(n){if(n.length<=1)return n;var t=function(t){return Z(n,(function(n){return n.position===t}))},e=t("selection").orThunk((function(){return t("node")})).orThunk((function(){return t("line")})).map((function(n){return n.position}));return e.fold((function(){return[]}),(function(t){return Y(n,(function(n){return n.position===t}))}))},Iz=function(n,t,e){var r=Rz(n,t);if(r.contextForms.length>0)return w.some({elem:n,toolbars:[r.contextForms[0]]});var o=Rz(n,e);if(o.contextForms.length>0)return w.some({elem:n,toolbars:[o.contextForms[0]]});if(r.contextToolbars.length>0||o.contextToolbars.length>0){var i=Bz(r.contextToolbars.concat(o.contextToolbars));return w.some({elem:n,toolbars:i})}return w.none()},Nz=function(n,t,e){return n(t)?w.none():so(t,(function(n){var t=Rz(n,e.inNodeScope),r=t.contextToolbars,o=t.contextForms,i=o.length>0?o:Mz(r);return i.length>0?w.some({elem:n,toolbars:i}):w.none()}),n)},Pz=function(n,t){var e=tr.fromDom(t.getBody()),r=function(n){return oo(n,e)},o=function(n){return!r(n)&&!ao(e,n)},i=tr.fromDom(t.selection.getNode());return o(i)?w.none():Iz(i,n.inNodeScope,n.inEditorScope).orThunk((function(){return Nz(r,i,n)}))},Fz=function(n,t){var e={},r=[],o=[],i={},u={},a=function(n,a){var c=oe(eC(a));e[n]=c,c.launch.map((function(e){i["form:"+n]=m(m({},a.launch),{type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:function(){t(c)}})})),"editor"===c.scope?o.push(c):r.push(c),u[n]=c},c=function(n,t){oC(t).each((function(e){"editor"===t.scope?o.push(e):r.push(e),u[n]=e}))},s=An(n);return q(s,(function(t){var e=n[t];"contextform"===e.type?a(t,e):"contexttoolbar"===e.type&&c(t,e)})),{forms:e,inNodeScope:r,inEditorScope:o,lookupTable:u,formNavigators:i}},Lz=Fu("forward-slide"),Hz=Fu("backward-slide"),zz=Fu("change-slide-event"),Vz="tox-pop--resizing",Uz=function(n){var t=Ye([]);return Fx.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(n){t.set([]),Fx.getContent(n).each((function(n){rc(n.element,"visibility")})),Ha(n.element,Vz),rc(n.element,"width")},inlineBehaviours:zl([Sy("context-toolbar-events",[Ai(No(),(function(n,t){Ha(n.element,Vz),rc(n.element,"width")})),xi(zz,(function(n,t){var e=n.element;rc(e,"width");var r=Ic(e);Fx.setContent(n,t.event.contents),Fa(e,Vz);var o=Ic(e);Ya(e,"width",r+"px"),Fx.getContent(n).each((function(n){t.event.focus.bind((function(n){return $l(n),nf(e)})).orThunk((function(){return fy.focusIn(n),Zl(tu(e))}))})),Yx.setTimeout((function(){Ya(n.element,"width",o+"px")}),0)})),xi(Lz,(function(n,e){Fx.getContent(n).each((function(e){t.set(t.get().concat([{bar:e,focus:Zl(tu(n.element))}]))})),fi(n,zz,{contents:e.event.forwardContents,focus:w.none()})})),xi(Hz,(function(n,e){fn(t.get()).each((function(e){t.set(t.get().slice(0,t.get().length-1)),fi(n,zz,{contents:xc(e.bar),focus:e.focus})}))}))]),fy.config({mode:"special",onEscape:function(e){return fn(t.get()).fold((function(){return n.onEscape()}),(function(n){return li(e,Hz),w.some(!0)}))}})]),lazySink:function(){return hn.value(n.sink)}})},jz=function(n,t,e){var r=function(n,r,i,u){var a=t.shared.providers.translate(n.title);if("separator"===n.type)return w.some({type:"separator",text:a});if("submenu"===n.type){var c=en(n.getStyleItems(),(function(n){return o(n,r,u)}));return 0===r&&c.length<=0?w.none():w.some({type:"nestedmenuitem",text:a,disabled:c.length<=0,getSubmenuItems:function(){return en(n.getStyleItems(),(function(n){return o(n,r,u)}))}})}return w.some(m({type:"togglemenuitem",text:a,icon:n.icon,active:n.isSelected(u),disabled:i,onAction:e.onAction(n)},n.getStylePreview().fold((function(){return{}}),(function(n){return{meta:{style:n}}}))))},o=function(n,t,o){var i="formatter"===n.type&&e.isInvalid(n);return 0===t?i?[]:r(n,t,!1,o).toArray():r(n,t,i,o).toArray()},i=function(n){var t=e.getCurrentValue(),r=e.shouldHide?0:1;return en(n,(function(n){return o(n,r,t)}))},u=function(n,t){return function(e,r){var o=t(),u=i(o),a=AI(u,cC.CLOSE_ON_EXECUTE,n,!1);r(a)}};return{validateItems:i,getFetch:u}},Wz=function(n,t,e){var r=e.dataset,o="basic"===r.type?function(){return G(r.data,(function(n){return vF(n,e.isSelectedFor,e.getPreviewFor)}))}:r.getData;return{items:jz(n,t,e),getStyleItems:o}},Gz=function(n,e,r){var o=Wz(n,e,r),i=o.items,u=o.getStyleItems,a=function(n){return{getComponent:function(){return n}}},c=function(e){return r.setInitialValue.each((function(n){return n(e.getComponent())})),r.nodeChangeHandler.map((function(t){var r=t(e.getComponent());return n.on("NodeChange",r),function(){n.off("NodeChange",r)}})).getOr(t)};return yI({text:r.icon.isSome()?w.none():w.some(""),icon:r.icon,tooltip:w.from(r.tooltip),role:w.none(),fetch:i.getFetch(e,u),onSetup:c,getApi:a,columns:1,presets:"normal",classes:r.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)},qz=function(n){return G(n,(function(n){var t=n,e=n,r=n.split("=");return r.length>1&&(t=r[0],e=r[1]),{title:t,format:e}}))},Xz=function(n){return{type:"basic",data:n}};(function(n){n[n["SemiColon"]=0]="SemiColon",n[n["Space"]=1]="Space"})(MN||(MN={}));var Kz,Yz=function(n,t){return t===MN.SemiColon?n.replace(/;$/,"").split(";"):n.split(" ")},$z=function(n,t,e,r){var o=n.getParam(t,e,"string"),i=qz(Yz(o,r));return{type:"basic",data:i}},Jz=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Qz=function(n){var t=function(){return Z(Jz,(function(t){return n.formatter.match(t.format)}))},e=function(t){return function(){return n.formatter.match(t)}},r=function(n){return function(){return w.none()}},o=function(n){var e=t(),r=e.fold((function(){return"left"}),(function(n){return n.title.toLowerCase()}));fi(n,bI,{icon:"align-"+r})},i=w.some((function(n){return function(){return o(n)}})),u=w.some((function(n){return o(n)})),a=Xz(Jz),c=function(t){return function(){return Z(Jz,(function(n){return n.format===t.format})).each((function(t){return n.execCommand(t.command)}))}};return{tooltip:"Align",icon:w.some("align-left"),isSelectedFor:e,getCurrentValue:w.none,getPreviewFor:r,onAction:c,setInitialValue:u,nodeChangeHandler:i,dataset:a,shouldHide:!1,isInvalid:function(t){return!n.formatter.canApply(t.format)}}},Zz=function(n,t){return Gz(n,t,Qz(n))},nV=function(n,t){var e=Wz(n,t,Qz(n));n.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})},tV="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",eV=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],rV=function(n){var t=n.split(/\s*,\s*/);return G(t,(function(n){return n.replace(/^['"]+|['"]+$/g,"")}))},oV=function(n){var t=function(){var t=rV(n.toLowerCase());return rn(eV,(function(n){return t.indexOf(n.toLowerCase())>-1}))};return 0===n.indexOf("-apple-system")&&t()},iV=function(n){var t=function(){var t=function(n){return n?rV(n)[0]:""},e=n.queryCommandValue("FontName"),r=s.data,o=e?e.toLowerCase():"",i=Z(r,(function(n){var e=n.format;return e.toLowerCase()===o||t(e).toLowerCase()===t(o).toLowerCase()})).orThunk((function(){return oV(o)?w.from({title:"System Font",format:o}):w.none()}));return{matchOpt:i,font:e}},e=function(n){return function(t){return t.exists((function(t){return t.format===n}))}},r=function(){var n=t().matchOpt;return n},o=function(n){return function(){return w.some({tag:"div",styles:-1===n.indexOf("dings")?{"font-family":n}:{}})}},i=function(t){return function(){n.undoManager.transact((function(){n.focus(),n.execCommand("FontName",!1,t.format)}))}},u=function(n){var e=t(),r=e.matchOpt,o=e.font,i=r.fold((function(){return o}),(function(n){return n.title}));fi(n,hI,{text:i})},a=w.some((function(n){return function(){return u(n)}})),c=w.some((function(n){return u(n)})),s=$z(n,"font_formats",tV,MN.SemiColon);return{tooltip:"Fonts",icon:w.none(),isSelectedFor:e,getCurrentValue:r,getPreviewFor:o,onAction:i,setInitialValue:c,nodeChangeHandler:a,dataset:s,shouldHide:!1,isInvalid:l}},uV=function(n,t){return Gz(n,t,iV(n))},aV=function(n,t){var e=Wz(n,t,iV(n));n.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})},cV="8pt 10pt 12pt 14pt 18pt 24pt 36pt",sV={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},lV={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},fV=function(n,t){var e=Math.pow(10,t);return Math.round(n*e)/e},dV=function(n,t){return/[0-9.]+px$/.test(n)?fV(72*parseInt(n,10)/96,t||0)+"pt":zn(lV,n).getOr(n)},mV=function(n){return zn(sV,n).getOr("")},gV=function(n){var t=function(){var t=w.none(),e=f.data,r=n.queryCommandValue("FontSize");if(r)for(var o=function(n){var o=dV(r,n),i=mV(o);t=Z(e,(function(n){return n.format===r||n.format===o||n.format===i}))},i=3;t.isNone()&&i>=0;i--)o(i);return{matchOpt:t,size:r}},e=function(n){return function(t){return t.exists((function(t){return t.format===n}))}},r=function(){var n=t().matchOpt;return n},o=i(w.none),u=function(t){return function(){n.undoManager.transact((function(){n.focus(),n.execCommand("FontSize",!1,t.format)}))}},a=function(n){var e=t(),r=e.matchOpt,o=e.size,i=r.fold((function(){return o}),(function(n){return n.title}));fi(n,hI,{text:i})},c=w.some((function(n){return function(){return a(n)}})),s=w.some((function(n){return a(n)})),f=$z(n,"fontsize_formats",cV,MN.Space);return{tooltip:"Font sizes",icon:w.none(),isSelectedFor:e,getPreviewFor:o,getCurrentValue:r,onAction:u,setInitialValue:s,nodeChangeHandler:c,dataset:f,shouldHide:!1,isInvalid:l}},pV=function(n,t){return Gz(n,t,gV(n))},vV=function(n,t){var e=Wz(n,t,gV(n));n.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})},hV=function(n,t){var e=t(),r=G(e,(function(n){return n.format}));return w.from(n.formatter.closest(r)).bind((function(n){return Z(e,(function(t){return t.format===n}))})).orThunk((function(){return gv(n.formatter.match("p"),{title:"Paragraph",format:"p"})}))},bV=function(n){var t=Ye(w.none()),e=function(){return t.get().each(n)},r=function(){e(),t.set(w.none())},o=function(){return t.get().isSome()},i=function(n){e(),t.set(w.some(n))};return{clear:r,isSet:o,set:i}},yV=function(){return bV((function(n){return n.destroy()}))},xV=function(){return bV((function(n){return n.unbind()}))},wV=function(){var n=Ye(w.none()),t=function(){return n.set(w.none())},e=function(t){return n.set(w.some(t))},r=function(){return n.get().isSome()},o=function(t){return n.get().each(t)};return{clear:t,set:e,isSet:r,on:o}},CV=function(n,t){return function(e){var r=xV(),o=function(){e.setActive(n.formatter.match(t));var o=n.formatter.formatChanged(t,e.setActive);r.set(o)};return n.initialized?o():n.on("init",o),r.clear}},SV=function(n){return function(t){return function(){n.undoManager.transact((function(){n.focus(),n.execCommand("mceToggleFormat",!1,t.format)}))}}},kV="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",OV=function(n){var t=function(t){return function(){return n.formatter.match(t)}},e=function(t){return function(){var e=n.formatter.get(t);return w.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(t))})}},r=function(t){var e=hV(n,(function(){return u.data})),r=e.fold((function(){return"Paragraph"}),(function(n){return n.title}));fi(t,hI,{text:r})},o=w.some((function(n){return function(){return r(n)}})),i=w.some((function(n){return r(n)})),u=$z(n,"block_formats",kV,MN.SemiColon);return{tooltip:"Blocks",icon:w.none(),isSelectedFor:t,getCurrentValue:w.none,getPreviewFor:e,onAction:SV(n),setInitialValue:i,nodeChangeHandler:o,dataset:u,shouldHide:!1,isInvalid:function(t){return!n.formatter.canApply(t.format)}}},TV=function(n,t){return Gz(n,t,OV(n))},DV=function(n,t){var e=Wz(n,t,OV(n));n.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})},_V=function(n,t){var e=function(t){return function(){return n.formatter.match(t)}},r=function(t){return function(){var e=n.formatter.get(t);return void 0!==e?w.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(t))}):w.none()}},o=function(t){var e=function(n){var t=n.items;return void 0!==t&&t.length>0?en(t,e):[{title:n.title,format:n.format}]},r=en(pF(n),e),o=hV(n,(function(){return r})),i=o.fold((function(){return"Paragraph"}),(function(n){return n.title}));fi(t,hI,{text:i})},i=w.some((function(n){return function(){return o(n)}})),u=w.some((function(n){return o(n)}));return{tooltip:"Formats",icon:w.none(),isSelectedFor:e,getCurrentValue:w.none,getPreviewFor:r,onAction:SV(n),setInitialValue:u,nodeChangeHandler:i,shouldHide:n.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!n.formatter.canApply(t.format)},dataset:t}},AV=function(n,t){var e=m({type:"advanced"},t.styleselect);return Gz(n,t,_V(n,e))},EV=function(n,t){var e=m({type:"advanced"},t.styleselect),r=Wz(n,t,_V(n,e));n.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})},RV=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],BV=function(n,t){return function(e,r,o){var i=n(e).mapError((function(n){return ue(n)})).getOrDie();return t(i,r,o)}},MV={button:BV(Gw,(function(n,t){return mz(n,t.backstage.shared.providers)})),togglebutton:BV(Kw,(function(n,t){return pz(n,t.backstage.shared.providers)})),menubutton:BV(VH,(function(n,t){return RI(n,"tox-tbtn",t.backstage,w.none())})),splitbutton:BV(jH,(function(n,t){return bz(n,t.backstage.shared)})),grouptoolbarbutton:BV(LH,(function(n,t,e){var r,o=e.ui.registry.getAll().buttons,i=function(n){return VV(e,{buttons:o,toolbar:n,allowToolbarGroups:!1},t,w.none())},u=(r={},r[Vf]=t.backstage.shared.header.isPositionedAtTop()?ws.TopToBottom:ws.BottomToTop,r);switch(vk(e)){case aC.floating:return fz(n,t.backstage,i,u);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(n,t){return AV(n,t.backstage)},fontsizeSelectButton:function(n,t){return pV(n,t.backstage)},fontSelectButton:function(n,t){return uV(n,t.backstage)},formatButton:function(n,t){return TV(n,t.backstage)},alignMenuButton:function(n,t){return Zz(n,t.backstage)}},IV=function(n,t,e){return zn(MV,n.type).fold((function(){return console.error("skipping button defined by",n),w.none()}),(function(r){return w.some(r(n,t,e))}))},NV={styleselect:MV.styleSelectButton,fontsizeselect:MV.fontsizeSelectButton,fontselect:MV.fontSelectButton,formatselect:MV.formatButton,align:MV.alignMenuButton},PV=function(n){var t=G(RV,(function(t){var e=Y(t.items,(function(t){return Vn(n,t)||Vn(NV,t)}));return{name:t.name,items:e}}));return Y(t,(function(n){return n.items.length>0}))},FV=function(n){var t=n.split("|");return G(t,(function(n){return{items:n.trim().split(" ")}}))},LV=function(n){return N(n,(function(n){return Vn(n,"name")&&Vn(n,"items")}))},HV=function(n){var t=n.toolbar,e=n.buttons;return!1===t?[]:void 0===t||!0===t?PV(e):T(t)?FV(t):LV(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},zV=function(n,t,e,r,o,i){return zn(t,e.toLowerCase()).orThunk((function(){return i.bind((function(n){return mn(n,(function(n){return zn(t,n+e.toLowerCase())}))}))})).fold((function(){return zn(NV,e.toLowerCase()).map((function(t){return t(n,o)})).orThunk((function(){return w.none()}))}),(function(t){return"grouptoolbarbutton"!==t.type||r?IV(t,o,n):(console.warn("Ignoring the '"+e+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),w.none())}))},VV=function(n,t,e,r){var o=HV(t),i=G(o,(function(o){var i=en(o.items,(function(o){return 0===o.trim().length?[]:zV(n,t.buttons,o,t.allowToolbarGroups,e,r).toArray()}));return{title:w.from(n.translate(o.name)),items:i}}));return Y(i,(function(n){return n.items.length>0}))},UV=12,jV={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},WV={maxHeightFunction:Ef(),maxWidthFunction:sL()},GV={onLtr:function(){return[yl,xl,hl,pl,bl,vl,Xx,Kx,Gx,jx,qx,Wx]},onRtl:function(){return[yl,xl,bl,vl,hl,pl,Xx,Kx,qx,Wx,Gx,jx]}},qV={onLtr:function(){return[xl,pl,vl,hl,bl,yl,Xx,Kx,Gx,jx,qx,Wx]},onRtl:function(){return[xl,vl,pl,bl,hl,yl,Xx,Kx,qx,Wx,Gx,jx]}},XV=function(n,t){return"line"===n?{bubble:Nf(UV,0,jV),layouts:{onLtr:function(){return[wl]},onRtl:function(){return[Cl]}},overrides:WV}:{bubble:Nf(0,UV,jV),layouts:t?qV:GV,overrides:WV}},KV=function(n,e,r,o){var i=Xr().deviceType.isTouch,u=yc(Uz({sink:r,onEscape:function(){return n.focus(),w.some(!0)}})),a=function(){return Ez(n,o.backstage.shared)},c=function(n,t,e,r){return Math.max(n,e)<=Math.min(t,r)},s=function(){var t=v.get().filter((function(n){return Wa(tr.fromDom(n))})).map((function(n){return n.getBoundingClientRect()})).getOrThunk((function(){return n.selection.getRng().getBoundingClientRect()})),e=n.inline?Wc().top:is(tr.fromDom(n.getBody())).y;return{y:t.top+e,bottom:t.bottom+e}},l=function(){if(i()&&o.backstage.isContextMenuOpen())return!0;var n=s(),t=a();return!c(n.y,n.bottom,t.y,t.bottom)},f=function(){p.set(w.none()),Fx.hide(u)},d=function(){Fx.hide(u)},g=function(){p.get().each((function(n){var t=u.element;rc(t,"display"),l()?Ya(t,"display","none"):Mm.positionWithinBounds(r,n,u,w.some(a()))}))},p=Ye(w.none()),v=Ye(w.none()),h=Ye(null),b=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:zl([fy.config({mode:"acyclic"}),Sy("pop-dialog-wrap-events",[Ei((function(t){n.shortcuts.add("ctrl+F9","focus statusbar",(function(){return fy.focusIn(t)}))})),Ri((function(t){n.shortcuts.remove("ctrl+F9")}))])])}},y=Jn((function(){return Fz(e,(function(n){var t=S([n]);fi(u,Lz,{forwardContents:b(t)})}))})),x=function(t,e){return VV(n,{buttons:t,toolbar:e.items,allowToolbarGroups:!1},o,w.some(["form:"]))},C=function(n,t){return Dz.buildInitGroups(n,t)},S=function(t){var e=n.ui.registry.getAll().buttons,r=y(),i=m(m({},e),r.formNavigators),u=vk(n)===aC.scrolling?aC.scrolling:aC.default,a=tn(G(t,(function(n){return"contexttoolbar"===n.type?x(i,n):C(n,o.backstage.shared.providers)})));return PH({type:u,uid:Fu("context-toolbar"),initGroups:a,onEscape:w.none,cyclicKeying:!0,providers:o.backstage.shared.providers})};n.on(lL,(function(t){var e=y();zn(e.lookupTable,t.toolbarKey).each((function(e){O([e],t.target===n?w.none():w.some(t)),Fx.getContent(u).each(fy.focusIn)}))}));var k=function(n,t){var e="node"===n?o.backstage.shared.anchors.node(t):o.backstage.shared.anchors.cursor();return Yn(e,XV(n,i()))},O=function(n,t){if(D(),!i()||!o.backstage.isContextMenuOpen()){var e=S(n),r=t.map(tr.fromDom),c=k(n[0].position,r);p.set(w.some(c)),v.set(t);var s=u.element;rc(s,"display"),Fx.showWithinBounds(u,c,b(e),(function(){return w.some(a())})),l()&&Ya(s,"display","none")}},T=function(){if(n.hasFocus()){var t=y();Pz(t,n).fold(f,(function(n){O(n.toolbars,w.some(n.elem.dom))}))}},D=function(){var n=h.get();null!==n&&(Yx.clearTimeout(n),h.set(null))},_=function(){D(),h.set(Yx.setEditorTimeout(n,T,0))};n.on("init",(function(){n.on(fL,d),n.on("ScrollContent ScrollWindow longpress",g),n.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){_()})),n.on("focusout",(function(t){Yx.setEditorTimeout(n,(function(){nf(r.element).isNone()&&nf(u.element).isNone()&&f()}),0)})),n.on("SwitchMode",(function(){n.mode.isReadOnly()&&f()})),n.on("AfterProgressState",(function(t){t.state?f():n.hasFocus()&&_()})),n.on("NodeChange",(function(n){nf(u.element).fold(_,t)}))}))},YV=function(n,t,e){var r=function(n,r){q([t,e],(function(t){t.broadcastEvent(n,r)}))},o=function(n,r){q([t,e],(function(t){t.broadcastOn([n],r)}))},i=function(n){return o(gg(),{target:n.target})},u=dD(tr.fromDom(document),"touchstart",i),a=dD(tr.fromDom(document),"touchmove",(function(n){return r($o(),n)})),c=dD(tr.fromDom(document),"touchend",(function(n){return r(Jo(),n)})),s=dD(tr.fromDom(document),"mousedown",i),l=dD(tr.fromDom(document),"mouseup",(function(n){0===n.raw.button&&o(vg(),{target:n.target})})),f=function(n){return o(gg(),{target:tr.fromDom(n.target)})},d=function(n){0===n.button&&o(vg(),{target:tr.fromDom(n.target)})},m=function(n){return r(Qo(),gD(n))},g=function(n){o(pg(),{}),r(Zo(),gD(n))},p=function(){return o(pg(),{})},v=function(t){t.state&&o(gg(),{target:tr.fromDom(n.getContainer())})};n.on("PostRender",(function(){n.on("click",f),n.on("tap",f),n.on("mouseup",d),n.on("ScrollWindow",m),n.on("ResizeWindow",g),n.on("ResizeEditor",p),n.on("AfterProgressState",v)})),n.on("remove",(function(){n.off("click",f),n.off("tap",f),n.off("mouseup",d),n.off("ScrollWindow",m),n.off("ResizeWindow",g),n.off("ResizeEditor",p),n.off("AfterProgressState",v),s.unbind(),u.unbind(),a.unbind(),c.unbind(),l.unbind()})),n.on("detach",(function(){Xm(t),Xm(e),t.destroy(),e.destroy()}))},$V=Jp,JV=Mp,QV=i([Le("shell",!1),ye("makeItem"),Le("setupItem",t),Zg.field("listBehaviours",[wy])]),ZV=function(){return{behaviours:zl([wy.config({})])}},nU=Ep({name:"items",overrides:ZV}),tU=i([nU]),eU=i("CustomList"),rU=function(n,t,e,r){var o=function(t,e){u(t).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(r){var o=wy.contents(r),i=e.length,u=i-o.length,a=u>0?j(u,(function(){return n.makeItem()})):[],c=o.slice(i);q(c,(function(n){return wy.remove(r,n)})),q(a,(function(n){return wy.append(r,n)}));var s=wy.contents(r);q(s,(function(r,o){n.setupItem(t,r,e[o],o)}))}))},i=n.shell?{behaviours:[wy.config({})],components:[]}:{behaviours:[],components:t},u=function(t){return n.shell?w.some(t):jp(t,n,"items")};return{uid:n.uid,dom:n.dom,components:i.components,behaviours:Qg(n.listBehaviours,i.behaviours),apis:{setItems:o}}},oU=cv({name:eU(),configFields:QV(),partFields:tU(),factory:rU,apis:{setItems:function(n,t,e){n.setItems(t,e)}}}),iU=t,uU=l,aU=i([]),cU=Object.freeze({__proto__:null,setup:iU,isDocked:uU,getBehaviours:aU}),sU=function(n){var t=nc(n,"position").is("fixed"),e=t?w.none():Xi(n);return e.orThunk((function(){var t=tr.fromTag("span");return Gi(n).bind((function(n){fu(n,t);var e=Xi(t);return vu(t),e}))}))},lU=function(n){return sU(n).map(Ec).getOrThunk((function(){return Dc(0,0)}))},fU=Wn.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),dU=function(n,t){var e=n.element;Fa(e,t.transitionClass),Ha(e,t.fadeOutClass),Fa(e,t.fadeInClass),t.onShow(n)},mU=function(n,t){var e=n.element;Fa(e,t.transitionClass),Ha(e,t.fadeInClass),Fa(e,t.fadeOutClass),t.onHide(n)},gU=function(n,t){return n.y<t.bottom&&n.bottom>t.y},pU=function(n,t){return n.y>=t.y},vU=function(n,t){return n.bottom<=t.bottom},hU=function(n,t,e){return rn(n,(function(n){switch(n){case"bottom":return vU(t,e);case"top":return pU(t,e)}}))},bU=function(n,t){return t.getInitialPosition().map((function(t){return rs(t.bounds.x,t.bounds.y,Ic(n),Sc(n))}))},yU=function(n,t,e){e.setInitialPosition(w.some({style:tc(n),position:Qa(n,"position")||"static",bounds:t}))},xU=function(n,t,e){return e.getInitialPosition().bind((function(r){switch(e.setInitialPosition(w.none()),r.position){case"static":return w.some(fU.static());case"absolute":var o=sU(n).map(os).getOrThunk((function(){return os(Ga())}));return w.some(fU.absolute(ef("absolute",zn(r.style,"left").map((function(n){return t.x-o.x})),zn(r.style,"top").map((function(n){return t.y-o.y})),zn(r.style,"right").map((function(n){return o.right-t.right})),zn(r.style,"bottom").map((function(n){return o.bottom-t.bottom})))));default:return w.none()}}))},wU=function(n,t,e){return bU(n,e).filter((function(n){return hU(e.getModes(),n,t)})).bind((function(t){return xU(n,t,e)}))},CU=function(n,t,e){var r=os(n);if(hU(e.getModes(),r,t))return w.none();yU(n,r,e);var o=us(),i=r.x-o.x,u=t.y-o.y,a=o.bottom-t.bottom,c=r.y<=t.y;return w.some(fU.fixed(ef("fixed",w.some(i),c?w.some(u):w.none(),w.none(),c?w.none():w.some(a))))},SU=function(n,t,e){var r=n.element,o=nc(r,"position").is("fixed");return o?wU(r,t,e):CU(r,t,e)},kU=function(n,t){var e=n.element;return bU(e,t).bind((function(n){return xU(e,n,t)}))},OU=function(n,t){q(["left","right","top","bottom","position"],(function(t){return rc(n.element,t)})),t.onUndocked(n)},TU=function(n,t,e){rf(n.element,e);var r="fixed"===e.position?t.onDocked:t.onUndocked;r(n)},DU=function(n,t,e,r,o){void 0===o&&(o=!1),t.contextual.each((function(t){t.lazyContext(n).each((function(i){var u=gU(i,r);if(u!==e.isVisible())if(e.setVisible(u),o&&!u)Va(n.element,[t.fadeOutClass]),t.onHide(n);else{var a=u?dU:mU;a(n,t)}}))}))},_U=function(n,t,e){var r=t.lazyViewport(n),o=e.isDocked();o&&DU(n,t,e,r),SU(n,r,e).each((function(i){e.setDocked(!o),i.fold((function(){return OU(n,t)}),(function(e){return TU(n,t,e)}),(function(o){DU(n,t,e,r,!0),TU(n,t,o)}))}))},AU=function(n,e,r){var o=n.element;r.setDocked(!1),kU(n,r).each((function(r){r.fold((function(){return OU(n,e)}),(function(t){return TU(n,e,t)}),t)})),r.setVisible(!0),e.contextual.each((function(t){Ua(o,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(n)})),EU(n,e,r)},EU=function(n,t,e){n.getSystem().isConnected()&&_U(n,t,e)},RU=function(n,t,e){e.isDocked()&&AU(n,t,e)},BU=function(n,t,e){return e.isDocked()},MU=function(n,t,e,r){return e.setModes(r)},IU=function(n,t,e){return e.getModes()},NU=Object.freeze({__proto__:null,refresh:EU,reset:RU,isDocked:BU,getModes:IU,setModes:MU}),PU=function(n,t){return vi([Ai(No(),(function(e,r){n.contextual.each((function(n){if(za(e.element,n.transitionClass)){Ua(e.element,[n.transitionClass,n.fadeInClass]);var o=t.isVisible()?n.onShown:n.onHidden;o(e)}r.stop()}))})),xi(Qo(),(function(e,r){EU(e,n,t)})),xi(Zo(),(function(e,r){RU(e,n,t)}))])},FU=Object.freeze({__proto__:null,events:PU}),LU=[Pe("contextual",[Ce("fadeInClass"),Ce("fadeOutClass"),Ce("transitionClass"),Oe("lazyContext"),Ls("onShow"),Ls("onShown"),Ls("onHide"),Ls("onHidden")]),We("lazyViewport",us),qe("modes",["top","bottom"],me),Ls("onDocked"),Ls("onUndocked")],HU=function(n){var t=Ye(!1),e=Ye(!0),r=Ye(w.none()),o=Ye(n.modes),i=function(){return"docked:  "+t.get()+", visible: "+e.get()+", modes: "+o.get().join(",")};return oa({isDocked:t.get,setDocked:t.set,getInitialPosition:r.get,setInitialPosition:r.set,isVisible:e.get,setVisible:e.set,getModes:o.get,setModes:o.set,readState:i})},zU=Object.freeze({__proto__:null,init:HU}),VU=Ul({fields:LU,name:"docking",active:FU,apis:NU,state:zU}),UU={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},jU="tox-tinymce--toolbar-sticky-on",WU="tox-tinymce--toolbar-sticky-off",GU=function(n,t){var e=Vi(t),r=e.dom.defaultView.innerHeight,o=Wc(e),i=tr.fromDom(n.elm),u=is(i),a=Sc(i),c=u.y,s=c+a,l=Ec(t),f=Sc(t),d=l.top,m=d+f,g=Math.abs(d-o.top)<2,p=Math.abs(m-(o.top+r))<2;if(g&&c<m)Gc(o.left,c-f,e);else if(p&&s>d){var v=c-r+a+f;Gc(o.left,v,e)}},qU=function(n,t){return V(VU.getModes(n),t)},XU=function(n){var t=function(n){return kc(n)+(parseInt(Qa(n,"margin-top"),10)||0)+(parseInt(Qa(n,"margin-bottom"),10)||0)},e=n.element;Gi(e).each((function(r){var o="padding-"+VU.getModes(n)[0];if(VU.isDocked(n)){var i=Ic(r);Ya(e,"width",i+"px"),Ya(r,o,t(e)+"px")}else rc(e,"width"),rc(r,o)}))},KU=function(n,t){t?(Ha(n,UU.fadeOutClass),Va(n,[UU.transitionClass,UU.fadeInClass])):(Ha(n,UU.fadeInClass),Va(n,[UU.fadeOutClass,UU.transitionClass]))},YU=function(n,t){var e=tr.fromDom(n.getContainer());t?(Fa(e,jU),Ha(e,WU)):(Fa(e,WU),Ha(e,jU))},$U=function(n,t){var e=Vi(t);Zl(e).filter((function(n){return!oo(t,n)})).filter((function(t){return oo(t,tr.fromDom(e.dom.body))||ao(n,t)})).each((function(){return $l(t)}))},JU=function(n,t){return nf(n).orThunk((function(){return t().toOptional().bind((function(n){return nf(n.element)}))}))},QU=function(n,t,e){n.inline||(t.header.isPositionedAtTop()||n.on("ResizeEditor",(function(){e().each(VU.reset)})),n.on("ResizeWindow ResizeEditor",(function(){e().each(XU)})),n.on("SkinLoaded",(function(){e().each((function(n){VU.isDocked(n)?VU.reset(n):VU.refresh(n)}))})),n.on("FullscreenStateChanged",(function(){e().each(VU.reset)}))),n.on("AfterScrollIntoView",(function(n){e().each((function(t){VU.refresh(t);var e=t.element;Mh(e)&&GU(n,e)}))})),n.on("PostRender",(function(){YU(n,!1)}))},ZU=function(n){return n().map(VU.isDocked).getOr(!1)},nj=function(){var n;return[ql.config({channels:(n={},n[AH()]={onReceive:XU},n)})]},tj=function(n,t){var e=Ye(w.none()),r=t.getSink,o=function(n){r().each((function(t){return n(t.element)}))},i=function(t){n.inline||XU(t),YU(n,VU.isDocked(t)),t.getSystem().broadcastOn([pg()],{}),r().each((function(n){return n.getSystem().broadcastOn([pg()],{})}))},u=n.inline?[]:nj();return p([By.config({}),VU.config({contextual:m({lazyContext:function(t){var e=kc(t.element),r=n.inline?n.getContentAreaContainer():n.getContainer(),o=os(tr.fromDom(r)),i=o.height-e,u=o.y+(qU(t,"top")?0:e);return w.some(rs(o.x,u,o.width,i))},onShow:function(){o((function(n){return KU(n,!0)}))},onShown:function(n){o((function(n){return Ua(n,[UU.transitionClass,UU.fadeInClass])})),e.get().each((function(t){$U(n.element,t),e.set(w.none())}))},onHide:function(n){e.set(JU(n.element,r)),o((function(n){return KU(n,!1)}))},onHidden:function(){o((function(n){return Ua(n,[UU.transitionClass])}))}},UU),modes:[t.header.getDockingMode()],onDocked:i,onUndocked:i})],u)},ej=Object.freeze({__proto__:null,setup:QU,isDocked:ZU,getBehaviours:tj}),rj=function(n){var t=n.editor,e=n.sticky?tj:aU;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:zl(e(t,n.sharedBackstage))}},oj=function(n,t){var e=function(n,e){var r=G(e,(function(n){var e={type:"menubutton",text:n.text,fetch:function(t){t(n.getItems())}},r=VH(e).mapError((function(n){return ue(n)})).getOrDie();return RI(r,"tox-mbtn",t.backstage,w.some("menuitem"))}));wy.set(n,r)},r={focus:fy.focusIn,setMenus:e};return{uid:n.uid,dom:n.dom,components:[],behaviours:zl([wy.config({}),Sy("menubar-events",[Ei((function(t){n.onSetup(t)})),xi(Do(),(function(n,t){gs(n.element,".tox-mbtn--active").each((function(e){ps(t.event.target,".tox-mbtn").each((function(t){oo(e,t)||n.getSystem().getByDom(e).each((function(e){n.getSystem().getByDom(t).each((function(n){hA.expand(n),hA.close(e),By.focus(n)}))}))}))}))})),xi(oi(),(function(n,t){t.event.prevFocus.bind((function(t){return n.getSystem().getByDom(t).toOptional()})).each((function(e){t.event.newFocus.bind((function(t){return n.getSystem().getByDom(t).toOptional()})).each((function(n){hA.isOpen(e)&&(hA.expand(n),hA.close(e))}))}))}))]),fy.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return n.onEscape(t),w.some(!0)}}),ZD.config({})]),apis:r,domModification:{attributes:{role:"menubar"}}}},ij=av({factory:oj,name:"silver.Menubar",configFields:[ye("dom"),ye("uid"),ye("onEscape"),ye("backstage"),Le("onSetup",t)],apis:{focus:function(n,t){n.focus(t)},setMenus:function(n,t,e){n.setMenus(t,e)}}}),uj="container",aj=[$g("slotBehaviours",[])],cj=function(n){return"<alloy.field."+n+">"},sj=function(n){var t=function(){var n=[],t=function(t,e){return n.push(t),Lp(uj,cj(t),e)};return{slot:t,record:function(){return n}}}(),e=n(t),r=t.record(),o=G(r,(function(n){return _p({name:n,pname:cj(n)})}));return tv(uj,aj,o,lj,e)},lj=function(n,t){var e=function(t){return Xp(n)},r=function(t,e){return jp(t,n,e)},o=function(t,e){return function(r,o){return jp(r,n,o).map((function(n){return t(n,o)})).getOr(e)}},i=function(n){return function(t,e){q(e,(function(e){return n(t,e)}))}},u=function(n,t){return"true"!==Ou(n.element,"aria-hidden")},a=function(n,t){if(!u(n)){var e=n.element;rc(e,"display"),_u(e,"aria-hidden"),fi(n,ii(),{name:t,visible:!0})}},c=function(n,t){if(u(n)){var e=n.element;Ya(e,"display","none"),Su(e,"aria-hidden","true"),fi(n,ii(),{name:t,visible:!1})}},s=o(u,!1),l=o(c),f=i(l),d=function(n){return f(n,e())},m=o(a),g={getSlotNames:e,getSlot:r,isShowing:s,hideSlot:l,hideAllSlots:d,showSlot:m};return{uid:n.uid,dom:n.dom,components:t,behaviours:Jg(n.slotBehaviours),apis:g}},fj=Bn({getSlotNames:function(n,t){return n.getSlotNames(t)},getSlot:function(n,t,e){return n.getSlot(t,e)},isShowing:function(n,t,e){return n.isShowing(t,e)},hideSlot:function(n,t,e){return n.hideSlot(t,e)},hideAllSlots:function(n,t){return n.hideAllSlots(t)},showSlot:function(n,t,e){return n.showSlot(t,e)}},(function(n){return ea(n)})),dj=m(m({},fj),{sketch:sj}),mj=Ht([Me("icon"),Me("tooltip"),We("onShow",t),We("onHide",t),We("onSetup",(function(){return t}))]),gj=function(n){return re("sidebar",mj,n)},pj=function(n){var t=n.ui.registry.getAll().sidebars;q(An(t),(function(e){var r=t[e],o=function(){return w.from(n.queryCommandValue("ToggleSidebar")).is(e)};n.ui.registry.addToggleButton(e,{icon:r.icon,tooltip:r.tooltip,onAction:function(t){n.execCommand("ToggleSidebar",!1,e),t.setActive(o())},onSetup:function(t){var e=function(){return t.setActive(o())};return n.on("ToggleSidebar",e),function(){n.off("ToggleSidebar",e)}}})}))},vj=function(n){return{element:function(){return n.element.dom}}},hj=function(n,e){var r=G(An(e),(function(n){var t=e[n],r=oe(gj(t));return{name:n,getApi:vj,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}}));return G(r,(function(e){var o=Ye(t);return n.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:vS.unnamedEvents([$k(e,o),Jk(e,o),xi(ii(),(function(n,t){var e=t.event,o=Z(r,(function(n){return n.name===e.name}));o.each((function(t){var r=e.visible?t.onShow:t.onHide;r(t.getApi(n))}))}))])})}))},bj=function(n){return dj.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:hj(t,n),slotBehaviours:vS.unnamedEvents([Ei((function(n){return dj.hideAllSlots(n)}))])}}))},yj=function(n,t){var e=yv.getCurrent(n);e.each((function(n){return wy.set(n,[bj(t)])}))},xj=function(n,t){var e=yv.getCurrent(n);e.each((function(n){var e=yv.getCurrent(n);e.each((function(e){wH.hasGrown(n)?dj.isShowing(e,t)?wH.shrink(n):(dj.hideAllSlots(e),dj.showSlot(e,t)):(dj.hideAllSlots(e),dj.showSlot(e,t),wH.grow(n))}))}))},wj=function(n){var t=yv.getCurrent(n);return t.bind((function(n){var t=wH.isGrowing(n)||wH.hasGrown(n);if(t){var e=yv.getCurrent(n);return e.bind((function(n){return Z(dj.getSlotNames(n),(function(t){return dj.isShowing(n,t)}))}))}return w.none()}))},Cj=Fu("FixSizeEvent"),Sj=Fu("AutoSizeEvent"),kj=function(n){return{uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:zl([ZD.config({}),By.config({}),wH.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(n){var t=yv.getCurrent(n);t.each(dj.hideAllSlots),li(n,Sj)},onGrown:function(n){li(n,Sj)},onStartGrow:function(n){fi(n,Cj,{width:nc(n.element,"width").getOr("")})},onStartShrink:function(n){fi(n,Cj,{width:Ic(n.element)+"px"})}}),wy.config({}),yv.config({find:function(n){var t=wy.contents(n);return ln(t)}})])}],behaviours:zl([DB.childAt(0),Sy("sidebar-sliding-events",[xi(Cj,(function(n,t){Ya(n.element,"width",t.event.width)})),xi(Sj,(function(n,t){rc(n.element,"width")}))])])}},Oj=function(n){var t=void 0!==n.dom.attributes?n.dom.attributes:[];return J(t,(function(n,t){var e;return"class"===t.name?n:m(m({},n),(e={},e[t.name]=t.value,e))}),{})},Tj=function(n){return Array.prototype.slice.call(n.dom.classList,0)},Dj=function(n){var t=tr.fromHtml(n),e=Yi(t),r=Oj(t),o=Tj(t),i=0===e.length?{}:{innerHtml:yu(t)};return m({tag:Ii(t),classes:o,attributes:r},i)},_j=function(n){return{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:Dj('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:zl([fy.config({mode:"special",onTab:function(){return w.some(!0)},onShiftTab:function(){return w.some(!0)}}),By.config({})])}},Aj=function(n,t,e){var r=n.element;!0===t?(wy.set(n,[_j(e)]),rc(r,"display"),_u(r,"aria-hidden")):(wy.set(n,[]),Ya(r,"display","none"),Su(r,"aria-hidden","true"))},Ej=function(n){return{uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:zl([wy.config({})]),components:[]}},Rj=function(n,t,e){var r=Ye(!1),o=Ye(w.none()),i=function(o){o!==r.get()&&(Aj(t(),o,e.providers),r.set(o),n.fire("AfterProgressState",{state:o}))};n.on("ProgressState",(function(t){if(o.get().each(Yx.clearTimeout),I(t.time)){var e=Yx.setEditorTimeout(n,(function(){return i(t.state)}),t.time);o.set(w.some(e))}else i(t.state),o.set(w.none())}))},Bj=function(n,t,e){var r={getSocket:function(t){return $V.getPart(t,n,"socket")},setSidebar:function(t,e){$V.getPart(t,n,"sidebar").each((function(n){return yj(n,e)}))},toggleSidebar:function(t,e){$V.getPart(t,n,"sidebar").each((function(n){return xj(n,e)}))},whichSidebar:function(t){return $V.getPart(t,n,"sidebar").bind(wj).getOrNull()},getHeader:function(t){return $V.getPart(t,n,"header")},getToolbar:function(t){return $V.getPart(t,n,"toolbar")},setToolbar:function(t,e){$V.getPart(t,n,"toolbar").each((function(n){n.getApis().setGroups(n,e)}))},setToolbars:function(t,e){$V.getPart(t,n,"multiple-toolbar").each((function(n){oU.setItems(n,e)}))},refreshToolbar:function(t){var e=$V.getPart(t,n,"toolbar");e.each((function(n){return n.getApis().refresh(n)}))},toggleToolbarDrawer:function(t){$V.getPart(t,n,"toolbar").each((function(n){mv(n.getApis().toggle,(function(t){return t(n)}))}))},isToolbarDrawerToggled:function(t){return $V.getPart(t,n,"toolbar").bind((function(n){return w.from(n.getApis().isOpen).map((function(t){return t(n)}))})).getOr(!1)},getThrobber:function(t){return $V.getPart(t,n,"throbber")},focusToolbar:function(t){var e=$V.getPart(t,n,"toolbar").orThunk((function(){return $V.getPart(t,n,"multiple-toolbar")}));e.each((function(n){fy.focusIn(n)}))},setMenubar:function(t,e){$V.getPart(t,n,"menubar").each((function(n){ij.setMenus(n,e)}))},focusMenubar:function(t){$V.getPart(t,n,"menubar").each((function(n){ij.focus(n)}))}};return{uid:n.uid,dom:n.dom,components:t,apis:r,behaviours:n.behaviours}},Mj=JV.optional({factory:ij,name:"menubar",schema:[ye("backstage")]}),Ij=function(n){return n.type===aC.sliding?NH:n.type===aC.floating?IH:PH},Nj=JV.optional({factory:{sketch:function(n){return oU.sketch({uid:n.uid,dom:n.dom,listBehaviours:zl([fy.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return PH({type:n.type,uid:Fu("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:function(){return n.onEscape(),w.some(!0)}})},setupItem:function(n,t,e,r){vL.setGroups(t,e)},shell:!0})}},name:"multiple-toolbar",schema:[ye("dom"),ye("onEscape")]}),Pj=JV.optional({factory:{sketch:function(n){var t=Ij(n),e={type:n.type,uid:n.uid,onEscape:function(){return n.onEscape(),w.some(!0)},cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return t(e)}},name:"toolbar",schema:[ye("dom"),ye("onEscape"),ye("getSink")]}),Fj=JV.optional({factory:{sketch:rj},name:"header",schema:[ye("dom")]}),Lj=JV.optional({name:"socket",schema:[ye("dom")]}),Hj=JV.optional({factory:{sketch:kj},name:"sidebar",schema:[ye("dom")]}),zj=JV.optional({factory:{sketch:Ej},name:"throbber",schema:[ye("dom")]}),Vj=cv({name:"OuterContainer",factory:Bj,configFields:[ye("dom"),ye("behaviours")],partFields:[Fj,Mj,Pj,Nj,Lj,Hj,zj],apis:{getSocket:function(n,t){return n.getSocket(t)},setSidebar:function(n,t,e){n.setSidebar(t,e)},toggleSidebar:function(n,t,e){n.toggleSidebar(t,e)},whichSidebar:function(n,t){return n.whichSidebar(t)},getHeader:function(n,t){return n.getHeader(t)},getToolbar:function(n,t){return n.getToolbar(t)},setToolbar:function(n,t,e){var r=G(e,(function(n){return RH(n)}));n.setToolbar(t,r)},setToolbars:function(n,t,e){var r=G(e,(function(n){return G(n,RH)}));n.setToolbars(t,r)},refreshToolbar:function(n,t){return n.refreshToolbar(t)},toggleToolbarDrawer:function(n,t){n.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(n,t){return n.isToolbarDrawerToggled(t)},getThrobber:function(n,t){return n.getThrobber(t)},setMenubar:function(n,t,e){n.setMenubar(t,e)},focusMenubar:function(n,t){n.focusMenubar(t)},focusToolbar:function(n,t){n.focusToolbar(t)}}}),Uj="file edit view insert format tools table help",jj={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Wj=function(n,t,e){var r=lk(e).split(/[ ,]/);return{text:n.title,getItems:function(){return en(n.items,(function(n){var e=n.toLowerCase();return 0===e.trim().length||U(r,(function(n){return n===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:t.menuItems[e]?[t.menuItems[e]]:[]}))}}},Gj=function(n){return"string"===typeof n?n.split(" "):n},qj=function(n,t){var e=m(m({},jj),t.menus),r=An(t.menus).length>0,o=void 0===t.menubar||!0===t.menubar?Gj(Uj):Gj(!1===t.menubar?"":t.menubar),i=Y(o,(function(n){return r&&t.menus.hasOwnProperty(n)&&t.menus[n].hasOwnProperty("items")||jj.hasOwnProperty(n)})),u=G(i,(function(r){var o=e[r];return Wj({title:o.title,items:Gj(o.items)},t,n)}));return Y(u,(function(n){var t=function(n){return"separator"!==n.type};return n.getItems().length>0&&U(n.getItems(),t)}))},Xj=function(n){var t=function(){n._skinLoaded=!0,$O(n)};return function(){n.initialized?t():n.on("init",t)}},Kj=function(n,t){return function(){return JO(n,{message:t})}},Yj=function(n,t,e){return new Ow((function(r,o){e.load(t,r,o),n.on("remove",(function(){return e.unload(t)}))}))},$j=function(n,t){var e=t+"/skin.min.css";return Yj(n,e,n.ui.styleSheetLoader)},Jj=function(n,t){var e=ru(tr.fromDom(n.getElement()));if(e){var r=t+"/skin.shadowdom.min.css";return Yj(n,r,ES.DOM.styleSheetLoader)}return Ow.resolve()},Qj=function(n,t){var e=QS(t);e&&t.contentCSS.push(e+(n?"/content.inline":"/content")+".min.css"),!1===nk(t)&&T(e)?Ow.all([$j(t,e),Jj(t,e)]).then(Xj(t),Kj(t,"Skin could not be loaded")):Xj(t)()},Zj=a(Qj,!1),nW=a(Qj,!0),tW=function(n,t,e,r){var o=t.outerContainer,i=e.toolbar,u=e.buttons;if(N(i,T)){var a=i.map((function(t){var o={toolbar:t,buttons:u,allowToolbarGroups:e.allowToolbarGroups};return VV(n,o,{backstage:r},w.none())}));Vj.setToolbars(o,a)}else Vj.setToolbar(o,VV(n,e,{backstage:r},w.none()))},eW=Xr(),rW=eW.os.isiOS()&&eW.os.version.major<=12,oW=function(n,t){var e=n.dom,r=n.getWin(),o=n.getDoc().documentElement,i=Ye(Dc(r.innerWidth,r.innerHeight)),u=Ye(Dc(o.offsetWidth,o.offsetHeight)),a=function(){var t=i.get();t.left===r.innerWidth&&t.top===r.innerHeight||(i.set(Dc(r.innerWidth,r.innerHeight)),ZO(n))},c=function(){var t=n.getDoc().documentElement,e=u.get();e.left===t.offsetWidth&&e.top===t.offsetHeight||(u.set(Dc(t.offsetWidth,t.offsetHeight)),ZO(n))},s=function(t){return nT(n,t)};e.bind(r,"resize",a),e.bind(r,"scroll",s);var l=mD(tr.fromDom(n.getBody()),"load",c),f=t.uiMothership.element;n.on("hide",(function(){Ya(f,"display","none")})),n.on("show",(function(){rc(f,"display")})),n.on("NodeChange",c),n.on("remove",(function(){l.unbind(),e.unbind(r,"resize",a),e.unbind(r,"scroll",s),r=null}))},iW=function(n,t,e,r,o){var i=Ye(0),u=t.outerContainer;Zj(n);var a=tr.fromDom(o.targetNode),c=eu(tu(a));Gm(a,t.mothership),Wm(c,t.uiMothership),n.on("PostRender",(function(){tW(n,t,e,r),i.set(n.getWin().innerWidth),Vj.setMenubar(u,qj(n,e)),Vj.setSidebar(u,e.sidebar),oW(n,t)}));var s=Vj.getSocket(u).getOrDie("Could not find expected socket element");if(rW){$a(s.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var l=cw((function(){n.fire("ScrollContent")}),20),f=dD(s.element,"scroll",l.throttle);n.on("remove",f.unbind)}Uk(n,t),n.addCommand("ToggleSidebar",(function(t,e){Vj.toggleSidebar(u,e),n.fire("ToggleSidebar")})),n.addQueryValueHandler("ToggleSidebar",(function(){return Vj.whichSidebar(u)}));var d=vk(n),m=function(){Vj.refreshToolbar(t.outerContainer)};d!==aC.sliding&&d!==aC.floating||n.on("ResizeWindow ResizeEditor ResizeContent",(function(){var t=n.getWin().innerWidth;t!==i.get()&&(m(),i.set(t))}));var g={enable:function(){Vk(t,!1)},disable:function(){Vk(t,!0)},isDisabled:function(){return $S.isDisabled(u)}};return{iframeContainer:s.element.dom,editorContainer:u.element.dom,api:g}},uW=Object.freeze({__proto__:null,render:iW}),aW=function(n){var t=/^[0-9\.]+(|px)$/i;return t.test(""+n)?w.some(parseInt(""+n,10)):w.none()},cW=function(n){return I(n)?n+"px":n},sW=function(n,t,e){var r=t.filter((function(t){return n<t})),o=e.filter((function(t){return n>t}));return r.or(o).getOr(n)},lW=function(n){var t=tk(n),e=ok(n),r=uk(n);return aW(t).map((function(n){return sW(n,e,r)}))},fW=function(n){var t=lW(n);return t.getOr(tk(n))},dW=function(n){var t=ek(n),e=rk(n),r=ik(n);return aW(t).map((function(n){return sW(n,e,r)}))},mW=function(n){var t=dW(n);return t.getOr(ek(n))},gW=function(n,t,e,r,o){var i=e.uiMothership,u=e.outerContainer,a=ES.DOM,c=kk(n),s=Dk(n),l=ik(n).or(dW(n)),f=r.shared.header,d=f.isPositionedAtTop,m=vk(n),g=m===aC.sliding||m===aC.floating,p=Ye(!1),v=function(){return p.get()&&!n.removed},h=function(n){return g?n.fold((function(){return 0}),(function(n){return n.components().length>1?Sc(n.components()[1].element):0})):0},b=function(e){switch(yk(n)){case pk.auto:var r=Vj.getToolbar(u),o=h(r),i=Sc(e.element)-o,a=os(t),c=a.y>i;if(c)return"top";var s=ji(t),l=Math.max(s.dom.scrollHeight,Sc(s)),f=a.bottom<l-i;if(f)return"bottom";var d=us(),m=d.bottom<a.bottom-i;return m?"bottom":"top";case pk.bottom:return"bottom";case pk.top:default:return"top"}},y=function(n){var t=o.get();VU.setModes(t,[n]),f.setDockingMode(n);var e=d()?ws.TopToBottom:ws.BottomToTop;Su(t.element,Vf,e)},x=function(){var n=l.getOrThunk((function(){var n=aW(Qa(Ga(),"margin-left")).getOr(0);return Ic(Ga())-Ec(t).left+n}));Ya(o.get().element,"max-width",n+"px")},w=function(){var n=Vj.getToolbar(u),e=h(n),r=os(t),i=d()?Math.max(r.y-Sc(o.get().element)+e,0):r.bottom;$a(u.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(r.x)+"px"})},C=function(){i.broadcastOn([pg()],{})},S=function(n){if(void 0===n&&(n=!1),v()){if(c||x(),g&&Vj.refreshToolbar(u),c||w(),s){var t=o.get();n?VU.reset(t):VU.refresh(t)}C()}},k=function(n){if(void 0===n&&(n=!0),!c&&s&&v()){var t=f.getDockingMode(),e=b(o.get());e!==t&&(y(e),n&&S(!0))}},O=function(){p.set(!0),Ya(u.element,"display","flex"),a.addClass(n.getBody(),"mce-edit-focus"),rc(i.element,"display"),k(!1),S()},T=function(){p.set(!1),e.outerContainer&&(Ya(u.element,"display","none"),a.removeClass(n.getBody(),"mce-edit-focus")),Ya(i.element,"display","none")};return{isVisible:v,isPositionedAtTop:d,show:O,hide:T,update:S,updateMode:k,repositionPopups:C}},pW=function(n,t){var e=os(n);return{pos:t?e.y:e.bottom,bounds:e}},vW=function(n,t,e,r){var o=Ye(pW(t,e.isPositionedAtTop())),i=function(r){var i=pW(t,e.isPositionedAtTop()),u=i.pos,a=i.bounds,c=o.get(),s=c.pos,l=c.bounds,f=a.height!==l.height||a.width!==l.width;o.set({pos:u,bounds:a}),f&&ZO(n,r),e.isVisible()&&(s!==u?e.update(!0):f&&(e.updateMode(),e.repositionPopups()))};r||(n.on("activate",e.show),n.on("deactivate",e.hide)),n.on("SkinLoaded ResizeWindow",(function(){return e.update(!0)})),n.on("NodeChange keydown",(function(n){Yx.requestAnimationFrame((function(){return i(n)}))})),n.on("ScrollWindow",(function(){return e.updateMode()}));var u=xV();u.set(mD(tr.fromDom(n.getBody()),"load",i)),n.on("remove",(function(){u.clear()}))},hW=function(n,t,e,r,o){var i=t.mothership,u=t.uiMothership,a=t.outerContainer,c=Ye(null),s=tr.fromDom(o.targetNode),l=gW(n,s,t,r,c),f=Ck(n);nW(n);var d=function(){if(c.get())l.show();else{c.set(Vj.getHeader(a).getOrDie());var o=Ok(n);Wm(o,i),Wm(o,u),tW(n,t,e,r),Vj.setMenubar(a,qj(n,e)),l.show(),vW(n,s,l,f),n.nodeChanged()}};n.on("show",d),n.on("hide",l.hide),f||(n.on("focus",d),n.on("blur",l.hide)),n.on("init",(function(){(n.hasFocus()||f)&&d()})),Uk(n,t);var m={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Vk(t,!1)},disable:function(){Vk(t,!0)},isDisabled:function(){return $S.isDisabled(a)}};return{editorContainer:a.element.dom,api:m}},bW=Object.freeze({__proto__:null,render:hW}),yW=function(n){var t=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];NB.each(t,(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:CV(n,t.name)})}));var e={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-none"};n.ui.registry.addButton(e.name,{tooltip:e.text,onAction:function(){return n.execCommand(e.cmd)},icon:e.icon})},xW=function(n,t){nV(n,t),aV(n,t),EV(n,t),DV(n,t),vV(n,t)},wW=function(n,t){n.setDisabled(!t.queryCommandState("outdent"));var e=function(){n.setDisabled(!t.queryCommandState("outdent"))};return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}},CW=function(n){n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return wW(t,n)},onAction:function(){return n.execCommand("outdent")}}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return n.execCommand("indent")}})},SW=function(n){CW(n)},kW={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},OW=function(){var n="[0-9]+",t="[+-]?"+n,e="[eE]"+t,r="\\.",o=function(n){return"(?:"+n+")?"},i=["Infinity",n+r+o(n)+o(e),r+n+o(e),n+o(e)].join("|"),u="[+-]?(?:"+i+")";return new RegExp("^("+u+")(.*)$")}(),TW=function(n,t){return U(t,(function(t){return U(kW[t],(function(t){return n===t}))}))},DW=function(n,t){var e=w.from(OW.exec(n));return e.bind((function(n){var e=Number(n[1]),r=n[2];return TW(r,t)?w.some({value:e,unit:r}):w.none()}))},_W=function(n,t){return DW(n,t).map((function(n){var t=n.value,e=n.unit;return t+e}))},AW=function(n){return _W(n,["fixed","relative","empty"]).getOr(n)},EW=function(n){var t=sk(n),e=new Map,r=yV(),o=function(){var t=AW(n.queryCommandValue("LineHeight"));w.from(e.get(t)).fold((function(){return r.clear()}),(function(n){r.set({destroy:function(){n.setActive(!1)}}),n.setActive(!0)}))};return n.on("nodeChange",o),G(t,(function(i,u){return{type:"togglemenuitem",text:i,onSetup:function(a){return e.set(AW(i),a),u+1===t.length&&o(),function(){0===u&&(n.off("nodeChange",o),r.clear())}},onAction:function(){return n.execCommand("LineHeight",!1,i)}}}))},RW=function(n){n.ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return EW(n)}})},BW=function(n){n.ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(EW(n))}})},MW=function(n){RW(n),BW(n)},IW=function(n,t){return function(){n.execCommand("mceToggleFormat",!1,t)}},NW=function(n){NB.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(t,e){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:CV(n,t.name),onAction:IW(n,t.name)})}));for(var t=1;t<=6;t++){var e="h"+t;n.ui.registry.addToggleButton(e,{text:e.toUpperCase(),tooltip:"Heading "+t,onSetup:CV(n,e),onAction:IW(n,e)})}},PW=function(n){NB.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){n.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)}})}))},FW=function(n){NB.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:CV(n,t.name)})}))},LW=function(n){NW(n),PW(n),FW(n)},HW=function(n){NB.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){n.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return n.execCommand(t.action)}})})),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:IW(n,"code")})},zW=function(n){LW(n),HW(n)},VW=function(n,t,e){var r=function(){return!!t.undoManager&&t.undoManager[e]()},o=function(){n.setDisabled(t.mode.isReadOnly()||!r())};return n.setDisabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o)}},UW=function(n){n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return VW(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return VW(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},jW=function(n){n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return VW(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return VW(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},WW=function(n){UW(n),jW(n)},GW=function(n,t){n.setActive(t.hasVisual);var e=function(t){n.setActive(t.hasVisual)};return t.on("VisualAid",e),function(){return t.off("VisualAid",e)}},qW=function(n){n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return GW(t,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},XW=function(n){n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return n.execCommand("mceToggleVisualAid")}})},KW=function(n){XW(n),qW(n)},YW=function(n,t){yW(n),zW(n),xW(n,t),WW(n),ET(n),KW(n),SW(n),MW(n)},$W=function(n,t){return{anchor:"makeshift",x:n,y:t}},JW=function(n,t,e){return $W(n.x+t,n.y+e)},QW=function(n){return"longpress"===n.type||0===n.type.indexOf("touch")},ZW=function(n){if(QW(n)){var t=n.touches[0];return $W(t.pageX,t.pageY)}return $W(n.pageX,n.pageY)},nG=function(n){if(QW(n)){var t=n.touches[0];return $W(t.clientX,t.clientY)}return $W(n.clientX,n.clientY)},tG=function(n,t){var e=ES.DOM.getPos(n);return JW(t,e.x,e.y)},eG=function(n,t){return"contextmenu"===t.type||"longpress"===t.type?n.inline?ZW(t):tG(n.getContentAreaContainer(),nG(t)):rG(n)},rG=function(n){return{anchor:"selection",root:tr.fromDom(n.selection.getNode())}},oG=function(n){return{anchor:"node",node:w.some(tr.fromDom(n.selection.getNode())),root:tr.fromDom(n.getBody())}},iG=function(n,t,e,r,o,i){var u=e(),a=i?oG(n):eG(n,t);AI(u,cC.CLOSE_ON_EXECUTE,r,!1).map((function(n){t.preventDefault(),Fx.showMenuAt(o,a,{menu:{markers:MC("normal")},data:n})}))},uG={onLtr:function(){return[xl,pl,vl,hl,bl,yl,Xx,Kx,Gx,jx,qx,Wx]},onRtl:function(){return[xl,vl,pl,bl,hl,yl,Xx,Kx,qx,Wx,Gx,jx]}},aG=12,cG={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sG=function(n,t){var e=n.selection;if(e.isCollapsed()||t.touches.length<1)return!1;var r=t.touches[0],o=e.getRng(),i=om(n.getWin(),_d.domRange(o));return i.exists((function(n){return n.left<=r.clientX&&n.right>=r.clientX&&n.top<=r.clientY&&n.bottom>=r.clientY}))},lG=function(n,t){return m({bubble:Nf(0,aG,cG),layouts:uG,overrides:{maxWidthFunction:sL(),maxHeightFunction:Ef()}},eG(n,t))},fG=function(n){var t=n.selection.getRng(),e=function(){Yx.setEditorTimeout(n,(function(){n.selection.setRng(t)}),10),i()};n.once("touchend",e);var r=function(n){n.preventDefault(),n.stopImmediatePropagation()};n.on("mousedown",r,!0);var o=function(){return i()};n.once("longpresscancel",o);var i=function(){n.off("touchend",e),n.off("longpresscancel",o),n.off("mousedown",r)}},dG=function(n,t,e,r,o,i,u){var a=i?oG(n):lG(n,t);AI(e,cC.CLOSE_ON_EXECUTE,r,!0).map((function(e){t.preventDefault(),Fx.showMenuWithinBounds(o,a,{menu:{markers:MC("normal"),highlightImmediately:u},data:e,type:"horizontal"},(function(){return w.some(Ez(n,r.shared))})),n.fire(fL)}))},mG=function(n,t,e,r,o,i){var u=Xr(),a=u.os.isiOS(),c=u.os.isOSX(),s=u.os.isAndroid(),l=u.deviceType.isTouch(),f=function(){return!(s||a||c&&l)},d=function(){var u=e();dG(n,t,u,r,o,i,f())};if(!c&&!a||i)s&&!i&&n.selection.setCursorLocation(t.target,0),d();else{var m=function(){fG(n),d()};sG(n,t)?m():(n.once("selectionchange",m),n.once("touchend",(function(){return n.off("selectionchange",m)})))}},gG=function(n){return"string"===typeof n?n.split(/[ ,]/):n},pG=function(n){return n.getParam("contextmenu_never_use_native",!1,"boolean")},vG=function(n,t,e){var r=n.ui.registry.getAll().contextMenus;return w.from(n.getParam(t)).map(gG).getOrThunk((function(){return Y(gG(e),(function(n){return Vn(r,n)}))}))},hG=function(n){return!1===n.getParam("contextmenu")},bG=function(n){return vG(n,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},yG=function(n){return n.getParam("contextmenu_avoid_overlap","","string")},xG=function(n){return T(n)?"|"===n:"separator"===n.type},wG={type:"separator"},CG=function(n){if(T(n))return n;switch(n.type){case"separator":return wG;case"submenu":return{type:"nestedmenuitem",text:n.text,icon:n.icon,getSubmenuItems:function(){var t=n.getSubmenuItems();return T(t)?t:G(t,CG)}};default:return{type:"menuitem",text:n.text,icon:n.icon,onAction:e(n.onAction)}}},SG=function(n,t){if(0===t.length)return n;var e=fn(n).filter((function(n){return!xG(n)})),r=e.fold((function(){return[]}),(function(n){return[wG]}));return n.concat(r).concat(t).concat([wG])},kG=function(n,t,e){var r=J(t,(function(t,r){if(Vn(n,r)){var o=n[r].update(e);if(T(o))return SG(t,o.split(" "));if(o.length>0){var i=G(o,CG);return SG(t,i)}return t}return t.concat([r])}),[]);return r.length>0&&xG(r[r.length-1])&&r.pop(),r},OG=function(n,t){return t.ctrlKey&&!pG(n)},TG=function(n,t){return"longpress"!==t.type&&(2!==t.button||t.target===n.getBody()&&""===t.pointerType)},DG=function(n,t){return TG(n,t)?n.selection.getStart(!0):t.target},_G=function(n,t){var e=yG(n);if(TG(n,t))return!0;if(e){var r=DG(n,t);return pD(tr.fromDom(r),e)}return!1},AG=function(n,t,e){var r=Xr(),o=r.deviceType.isTouch,i=yc(Fx.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return n.focus()},onShow:function(){return e.setContextMenuState(!0)},onHide:function(){return e.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:zl([Sy("dismissContextMenu",[xi(ei(),(function(t,e){mg.close(t),n.focus()}))])])})),u=function(n){return Fx.hide(i)},a=function(t){if(pG(n)&&t.preventDefault(),!OG(n,t)&&!hG(n)){var r=_G(n,t),u=function(){var e=DG(n,t),r=n.ui.registry.getAll(),o=bG(n);return kG(r.contextMenus,o,e)},a=o()?mG:iG;a(n,t,u,e,i,r)}};n.on("init",(function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");n.on(t,u),n.on("longpress contextmenu",a)}))},EG=Wn.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),RG=function(n){return function(t){return t.translate(-n.left,-n.top)}},BG=function(n){return function(t){return t.translate(n.left,n.top)}},MG=function(n){return function(t,e){return J(n,(function(n,t){return t(n)}),Dc(t,e))}},IG=function(n,t,e){return n.fold(MG([BG(e),RG(t)]),MG([RG(t)]),MG([]))},NG=function(n,t,e){return n.fold(MG([BG(e)]),MG([]),MG([BG(t)]))},PG=function(n,t,e){return n.fold(MG([]),MG([RG(e)]),MG([BG(t),RG(e)]))},FG=function(n,t,e,r,o,i){var u=NG(n,o,i),a=NG(t,o,i);return Math.abs(u.left-a.left)<=e&&Math.abs(u.top-a.top)<=r},LG=function(n,t,e,r,o,i){var u=NG(n,o,i),a=NG(t,o,i),c=Math.abs(u.left-a.left),s=Math.abs(u.top-a.top);return Dc(c,s)},HG=function(n,t,e){var r=n.fold((function(n,t){return{position:w.some("absolute"),left:w.some(n+"px"),top:w.some(t+"px")}}),(function(n,t){return{position:w.some("absolute"),left:w.some(n-e.left+"px"),top:w.some(t-e.top+"px")}}),(function(n,t){return{position:w.some("fixed"),left:w.some(n+"px"),top:w.some(t+"px")}}));return m({right:w.none(),bottom:w.none()},r)},zG=function(n,t,e){return n.fold((function(n,r){return UG(n+t,r+e)}),(function(n,r){return jG(n+t,r+e)}),(function(n,r){return WG(n+t,r+e)}))},VG=function(n,t,e,r){var o=function(n,o){return function(i,u){var a=n(t,e,r);return o(i.getOr(a.left),u.getOr(a.top))}};return n.fold(o(PG,UG),o(NG,jG),o(IG,WG))},UG=EG.offset,jG=EG.absolute,WG=EG.fixed,GG=function(n,t){var e=Ou(n,t);return E(e)?NaN:parseInt(e,10)},qG=function(n,t){var e=n.element,r=GG(e,t.leftAttr),o=GG(e,t.topAttr);return isNaN(r)||isNaN(o)?w.none():w.some(Dc(r,o))},XG=function(n,t,e){var r=n.element;Su(r,t.leftAttr,e.left+"px"),Su(r,t.topAttr,e.top+"px")},KG=function(n,t){var e=n.element;_u(e,t.leftAttr),_u(e,t.topAttr)},YG=function(n,t,e,r){return qG(n,t).fold((function(){return e}),(function(n){return WG(n.left+r.left,n.top+r.top)}))},$G=function(n,t,e,r,o,i){var u=YG(n,t,e,r),a=t.mustSnap?ZG(n,t,u,o,i):nq(n,t,u,o,i),c=IG(u,o,i);return XG(n,t,c),a.fold((function(){return{coord:WG(c.left,c.top),extra:w.none()}}),(function(n){return{coord:n.output,extra:n.extra}}))},JG=function(n,t){KG(n,t)},QG=function(n,t,e,r){return mn(n,(function(n){var o=n.sensor,i=FG(t,o,n.range.left,n.range.top,e,r);return i?w.some({output:VG(n.output,t,e,r),extra:n.extra}):w.none()}))},ZG=function(n,t,e,r,o){var i=t.getSnapPoints(n),u=QG(i,e,r,o);return u.orThunk((function(){var n=J(i,(function(n,t){var i=t.sensor,u=LG(e,i,t.range.left,t.range.top,r,o);return n.deltas.fold((function(){return{deltas:w.some(u),snap:w.some(t)}}),(function(e){var r=(u.left+u.top)/2,o=(e.left+e.top)/2;return r<=o?{deltas:w.some(u),snap:w.some(t)}:n}))}),{deltas:w.none(),snap:w.none()});return n.snap.map((function(n){return{output:VG(n.output,e,r,o),extra:n.extra}}))}))},nq=function(n,t,e,r,o){var i=t.getSnapPoints(n);return QG(i,e,r,o)},tq=function(n,t,e){return{coord:VG(n.output,n.output,t,e),extra:n.extra}},eq=function(n,t,e,r){var o=t.getTarget(n.element);if(t.repositionTarget){var i=Vi(n.element),u=Wc(i),a=lU(o),c=tq(r,u,a),s=HG(c.coord,u,a);Ja(o,s)}},rq=Object.freeze({__proto__:null,snapTo:eq}),oq="data-initial-z-index",iq=function(n){Gi(n.element).filter(Fi).each((function(n){Tu(n,oq).fold((function(){return rc(n,"z-index")}),(function(t){return Ya(n,"z-index",t)})),_u(n,oq)}))},uq=function(n){Gi(n.element).filter(Fi).each((function(t){nc(t,"z-index").each((function(n){Su(t,oq,n)})),Ya(t,"z-index",Qa(n.element,"z-index"))}))},aq=function(n,t){n.getSystem().addToGui(t),uq(t)},cq=function(n){iq(n),n.getSystem().removeFromGui(n)},sq=function(n,t,e){return n.getSystem().build(jD.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:e}))},lq=Pe("snaps",[ye("getSnapPoints"),Ls("onSensor"),ye("leftAttr"),ye("topAttr"),Le("lazyViewport",us),Le("mustSnap",!1)]),fq=[Le("useFixed",l),ye("blockerClass"),Le("getTarget",u),Le("onDrag",t),Le("repositionTarget",!0),Le("onDrop",t),We("getBounds",us),lq],dq=function(n){return dv(nc(n,"left"),nc(n,"top"),nc(n,"position"),(function(n,t,e){var r="fixed"===e?WG:UG;return r(parseInt(n,10),parseInt(t,10))})).getOrThunk((function(){var t=Ec(n);return jG(t.left,t.top)}))},mq=function(n,t,e,r,o){var i=o.bounds,u=NG(t,e,r),a=hf(u.left,i.x,i.x+i.width-o.width),c=hf(u.top,i.y,i.y+i.height-o.height),s=jG(a,c);return t.fold((function(){var n=PG(s,e,r);return UG(n.left,n.top)}),(function(){return s}),(function(){var n=IG(s,e,r);return WG(n.left,n.top)}))},gq=function(n,t,e,r,o,i,u){var a=t.fold((function(){var n=zG(e,i.left,i.top),t=IG(n,r,o);return WG(t.left,t.top)}),(function(t){var u=$G(n,t,e,i,r,o);return u.extra.each((function(e){t.onSensor(n,e)})),u.coord}));return mq(n,a,r,o,u)},pq=function(n,t,e,r){var o=t.getTarget(n.element);if(t.repositionTarget){var i=Vi(n.element),u=Wc(i),a=lU(o),c=dq(o),s=gq(n,t.snaps,c,u,a,r,e),l=HG(s,u,a);Ja(o,l)}t.onDrag(n,o,r)},vq=function(n,t){return{bounds:n.getBounds(),height:kc(t.element),width:Nc(t.element)}},hq=function(n,t,e,r,o){var i=e.update(r,o),u=e.getStartData().getOrThunk((function(){return vq(t,n)}));i.each((function(e){pq(n,t,u,e)}))},bq=function(n,t,e,r){t.each(cq),e.snaps.each((function(t){JG(n,t)}));var o=e.getTarget(n.element);r.reset(),e.onDrop(n,o)},yq=function(n){return function(t,e){var r=function(n){e.setStartData(vq(t,n))};return vi(p([xi(Qo(),(function(n){e.getStartData().each((function(){return r(n)}))}))],n(t,e,r)))}},xq=function(n){return vi([xi(So(),n.forceDrop),xi(To(),n.drop),xi(ko(),(function(t,e){n.move(e.event)})),xi(Oo(),n.delayDrop)])},wq=function(n){return w.from(Dc(n.x,n.y))},Cq=function(n,t){return Dc(t.left-n.left,t.top-n.top)},Sq=Object.freeze({__proto__:null,getData:wq,getDelta:Cq}),kq=function(n,t,e){return[xi(So(),(function(r,o){var i=o.event.raw;if(0===i.button){o.stop();var u=function(){return bq(r,w.some(s),n,t)},a=vD(u,200),c={drop:u,delayDrop:a.schedule,forceDrop:u,move:function(e){a.cancel(),hq(r,n,t,Sq,e)}},s=sq(r,n.blockerClass,xq(c)),l=function(){e(r),aq(r,s)};l()}}))]},Oq=p(fq,[Us("dragger",{handlers:yq(kq)})]),Tq=function(n){return vi([xi(yo(),n.forceDrop),xi(wo(),n.drop),xi(Co(),n.drop),xi(xo(),(function(t,e){n.move(e.event)}))])},Dq=function(n){var t=n[0];return w.some(Dc(t.clientX,t.clientY))},_q=function(n){var t=n.raw,e=t.touches;return 1===e.length?Dq(e):w.none()},Aq=function(n,t){return Dc(t.left-n.left,t.top-n.top)},Eq=Object.freeze({__proto__:null,getData:_q,getDelta:Aq}),Rq=function(n,e,r){var o=Ye(w.none());return[xi(yo(),(function(i,u){u.stop();var a=function(){bq(i,o.get(),n,e),o.set(w.none())},c={drop:a,delayDrop:t,forceDrop:a,move:function(t){hq(i,n,e,Eq,t)}},s=sq(i,n.blockerClass,Tq(c));o.set(w.some(s));var l=function(){r(i),aq(i,s)};l()})),xi(xo(),(function(t,r){r.stop(),hq(t,n,e,Eq,r.event)})),xi(wo(),(function(t,r){r.stop(),bq(t,o.get(),n,e),o.set(w.none())})),xi(Co(),(function(t){bq(t,o.get(),n,e),o.set(w.none())}))]},Bq=p(fq,[Us("dragger",{handlers:yq(Rq)})]),Mq=function(n,t,e){return p(kq(n,t,e),Rq(n,t,e))},Iq=p(fq,[Us("dragger",{handlers:yq(Mq)})]),Nq=Oq,Pq=Bq,Fq=Iq,Lq=Object.freeze({__proto__:null,mouse:Nq,touch:Pq,mouseOrTouch:Fq}),Hq=function(){var n=w.none(),t=w.none(),e=function(){n=w.none(),t=w.none()},r=function(t,e){var r=n.map((function(n){return t.getDelta(n,e)}));return n=w.some(e),r},o=function(n,t){return n.getData(t).bind((function(t){return r(n,t)}))},u=function(n){t=w.some(n)},a=function(){return t},c=i({});return oa({readState:c,reset:e,update:o,getStartData:a,setStartData:u})},zq=Object.freeze({__proto__:null,init:Hq}),Vq=Wl({branchKey:"mode",branches:Lq,name:"dragging",active:{events:function(n,t){var e=n.dragger;return e.handlers(n,t)}},extra:{snap:function(n){return{sensor:n.sensor,range:n.range,output:n.output,extra:w.from(n.extra)}}},state:zq,apis:rq}),Uq=40,jq=Uq/2,Wq=function(n,t,e,r,o,i){return n.fold((function(){return Vq.snap({sensor:jG(e-jq,r-jq),range:Dc(o,i),output:jG(w.some(e),w.some(r)),extra:{td:t}})}),(function(n){var o=e-jq,i=r-jq,u=Uq,a=Uq,c=n.element.dom.getBoundingClientRect();return Vq.snap({sensor:jG(o,i),range:Dc(u,a),output:jG(w.some(e-c.width/2),w.some(r-c.height/2)),extra:{td:t}})}))},Gq=function(n,t,e){var r=function(n,t){return n.exists((function(n){return oo(n,t)}))};return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(n,o){var i=o.td;r(t.get(),i)||(t.set(w.some(i)),e(i))},mustSnap:!0}},qq=function(n){return Qx(Jx.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:zl([Vq.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),wA.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},Xq=function(n,t){var e=Ye([]),r=Ye([]),o=Ye(!1),i=Ye(w.none()),u=Ye(w.none()),a=function(n){var e=is(n);return Wq(m.getOpt(t),n,e.x,e.y,e.width,e.height)},c=function(){return G(e.get(),(function(n){return a(n)}))},s=function(n){var e=is(n);return Wq(g.getOpt(t),n,e.right,e.bottom,e.width,e.height)},l=function(){return G(r.get(),(function(n){return s(n)}))},f=Gq(c,i,(function(t){u.get().each((function(e){n.fire("TableSelectorChange",{start:t,finish:e})}))})),d=Gq(l,u,(function(t){i.get().each((function(e){n.fire("TableSelectorChange",{start:e,finish:t})}))})),m=qq(f),g=qq(d),p=yc(m.asSpec()),v=yc(g.asSpec()),h=function(t,e,r,o){var i=e.dom.getBoundingClientRect();rc(t.element,"display");var u=Wi(tr.fromDom(n.getBody())).dom.innerHeight,a=r(i),c=o(i,u);(a||c)&&Ya(t.element,"display","none")},b=function(n,t,e,r){var o=e(t);Vq.snapTo(n,o);var i=function(n){return n[r]<0},u=function(n,t){return n[r]>t};h(n,t,i,u)},y=function(n){return b(p,n,a,"top")},x=function(){return i.get().each(y)},C=function(n){return b(v,n,s,"bottom")},S=function(){return u.get().each(C)};Xr().deviceType.isTouch()&&(n.on("TableSelectionChange",(function(n){o.get()||(Hm(t,p),Hm(t,v),o.set(!0)),i.set(w.some(n.start)),u.set(w.some(n.finish)),n.otherCells.each((function(t){e.set(t.upOrLeftCells),r.set(t.downOrRightCells),y(n.start),C(n.finish)}))})),n.on("ResizeEditor ResizeWindow ScrollContent",(function(){x(),S()})),n.on("TableSelectionClear",(function(){o.get()&&(Um(p),Um(v),o.set(!1)),i.set(w.none()),u.set(w.none())})))};(function(n){n[n["None"]=0]="None",n[n["Both"]=1]="Both",n[n["Vertical"]=2]="Vertical"})(Kz||(Kz={}));var Kq=function(n,t,e,r,o){var i={};return i.height=sW(r+t.top,ok(n),uk(n)),e===Kz.Both&&(i.width=sW(o+t.left,rk(n),ik(n))),i},Yq=function(n,t,e){var r=tr.fromDom(n.getContainer()),o=Kq(n,t,e,Sc(r),Ic(r));Rn(o,(function(n,t){return Ya(r,t,cW(n))})),QO(n)},$q=function(n){if(1===n.nodeType){if("BR"===n.nodeName||n.getAttribute("data-mce-bogus"))return!0;if("bookmark"===n.getAttribute("data-mce-type"))return!0}return!1},Jq=function(n,t,e){t.delimiter||(t.delimiter="");var r=function(r){var o=r||[],i=G(o,(function(t,r){return Jx.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":r,"tab-index":-1,"aria-level":r+1},innerHtml:t.name},action:function(e){n.focus(),n.selection.select(t.element),n.nodeChanged()},buttonBehaviours:zl([Kk.button(e.isDisabled),jk()])})})),u={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+t.delimiter+" "}};return J(i.slice(1),(function(n,t){var e=n;return e.push(u),e.push(t),e}),[i[0]])},o=function(t){var e=[],r=t.length;while(r-- >0){var o=t[r];if(1===o.nodeType&&!$q(o)){var i=n.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(i.isDefaultPrevented()||e.push({name:i.name,element:o}),i.isPropagationStopped())break}}return e};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:zl([fy.config({mode:"flow",selector:"div[role=button]"}),$S.config({disabled:e.isDisabled}),jk(),ZD.config({}),wy.config({}),Sy("elementPathEvents",[Ei((function(t,e){n.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return fy.focusIn(t)})),n.on("NodeChange",(function(n){var e=o(n.parents);e.length>0?wy.set(t,r(e)):wy.set(t,[])}))}))])]),components:[]}},Qq=function(n,t){var e,r=function(n,e,r){return wy.set(n,[vc(t.translate(["{0} "+r,e[r]]))])};return Jx.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:zl([Kk.button(t.isDisabled),jk(),ZD.config({}),wy.config({}),Yg.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Sy("wordcount-events",[Mi((function(n){var t=Yg.getValue(n),e="words"===t.mode?"characters":"words";Yg.setValue(n,{mode:e,count:t.count}),r(n,t.count,e)})),Ei((function(t){n.on("wordCountUpdate",(function(n){var e=Yg.getValue(t).mode;Yg.setValue(t,{mode:e,count:n.wordCount}),r(t,n.wordCount,e)}))}))])]),eventOrder:(e={},e[jo()]=["disabling","alloy.base.behaviour","wordcount-events"],e)})},Zq=function(n,t){var e=function(e){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-hidden":"true"},innerHtml:nw("resize-handle",t.icons)},behaviours:zl([Vq.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,r,o){Yq(n,o,e)},blockerClass:"tox-blocker"})])}},r=function(){var n=RS.translate(["Powered by {0}","Tiny"]),t='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+n+'">'+n+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:t}}},o=function(n){var t=!n.hasPlugin("autoresize"),e=n.getParam("resize",t);return!1===e?Kz.None:"both"===e?Kz.Both:Kz.Vertical},i=function(){var e=[];return n.getParam("elementpath",!0,"boolean")&&e.push(Jq(n,{},t)),n.hasPlugin("wordcount")&&e.push(Qq(n,t)),n.getParam("branding",!0,"boolean")&&e.push(r()),e.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:e}]:[]},u=function(){var t=i(),r=o(n);return r!==Kz.None&&t.push(e(r)),t};return{dom:{tag:"div",classes:["tox-statusbar"]},components:u()}},nX=function(n){var e,r=n.inline,o=r?bW:uW,i=Dk(n)?ej:cU,u=w.none(),a=Xr(),c=a.browser.isIE(),s=c?["tox-platform-ie"]:[],l=a.deviceType.isTouch(),f="tox-platform-touch",d=l?[f]:[],g=xk(n),p=Ok(n),v=RS.isRtl()?{attributes:{dir:"rtl"}}:{},h={attributes:(e={},e[Vf]=g?ws.BottomToTop:ws.TopToBottom,e)},b=function(){return u.bind(Vj.getHeader)},y=function(){return i.isDocked(b)},x=function(){Ya(Q.element,"width",document.body.clientWidth+"px")},C=function(){var n=oo(Ga(),p)&&"grid"===Qa(p,"display"),t={dom:m({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(s).concat(d)},v),behaviours:zl([Mm.config({useFixed:function(){return y()}})])},e={dom:{styles:{width:document.body.clientWidth+"px"}},events:vi([xi(Zo(),x)])};return Yn(t,n?e:{})},S=yc(C()),k=function(){return hn.value(S)},O=Qx({dom:{tag:"div",classes:["tox-anchorbar"]}}),T=function(){return u.bind((function(n){return O.getOpt(n)})).getOrDie("Could not find a anchor bar element")},D=function(){return u.bind((function(n){return Vj.getToolbar(n)})).getOrDie("Could not find more toolbar element")},_=function(){return u.bind((function(n){return Vj.getThrobber(n)})).getOrDie("Could not find throbber element")},A=cL(S,n,T),E=Vj.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:A,onEscape:function(){n.focus()}}),R=vk(n),B=Vj.parts.toolbar(m({dom:{tag:"div",classes:["tox-toolbar"]},getSink:k,providers:A.shared.providers,onEscape:function(){n.focus()},type:R,lazyToolbar:D,lazyHeader:function(){return b().getOrDie("Could not find header element")}},h)),M=Vj.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:A.shared.providers,onEscape:function(){n.focus()},type:R}),I=Vj.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),N=Vj.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),P=Vj.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:A}),F=n.getParam("statusbar",!0,"boolean"),L=F&&!r?w.some(Zq(n,A.shared.providers)):w.none(),H={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[I,N]},z=gk(n),V=dk(n),U=fk(n),j=function(){return z?[M]:V?[B]:[]},W=Vj.parts.header({dom:m({tag:"div",classes:["tox-editor-header"]},h),components:tn([U?[E]:[],j(),kk(n)?[]:[O.asSpec()]]),sticky:Dk(n),editor:n,sharedBackstage:A.shared}),G=tn([g?[]:[W],r?[]:[H],g?[W]:[]]),q={dom:{tag:"div",classes:["tox-editor-container"]},components:G},X=tn([[q],r?[]:L.toArray(),[P]]),K=Tk(n),Y=m(m({role:"application"},RS.isRtl()?{dir:"rtl"}:{}),K?{"aria-hidden":"true"}:{}),$=yc(Vj.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(r?["tox-tinymce-inline"]:[]).concat(g?["tox-tinymce--toolbar-bottom"]:[]).concat(d).concat(s),styles:m({visibility:"hidden"},K?{opacity:"0",border:"0"}:{}),attributes:Y},components:X,behaviours:zl([jk(),$S.config({disableClass:"tox-tinymce--disabled"}),fy.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));u=w.some($),n.shortcuts.add("alt+F9","focus menubar",(function(){Vj.focusMenubar($)})),n.shortcuts.add("alt+F10","focus toolbar",(function(){Vj.focusToolbar($)})),n.addCommand("ToggleToolbarDrawer",(function(){Vj.toggleToolbarDrawer($)})),n.addQueryStateHandler("ToggleToolbarDrawer",(function(){return Vj.isToolbarDrawerToggled($)}));var J=WD($),Q=WD(S);YV(n,J,Q);var Z=function(){var n={broadcastAll:Q.broadcast,broadcastOn:Q.broadcastOn,register:t};return{channels:n}},nn=function(){var t=cW(fW(n)),e=cW(mW(n));return n.inline||(ec("div","width",e)&&Ya($.element,"width",e),ec("div","height",t)?Ya($.element,"height",t):Ya($.element,"height","200px")),t},en=function(){i.setup(n,A.shared,b),YW(n,A),AG(n,k,A),pj(n),Rj(n,_,A.shared),Bn(bk(n),(function(t,e){n.ui.registry.addGroupToolbarButton(e,t)}));var t=n.ui.registry.getAll(),e=t.buttons,r=t.menuItems,u=t.contextToolbars,a=t.sidebars,c=mk(n),s={menuItems:r,menus:Ak(n),menubar:Ek(n),toolbar:c.getOrThunk((function(){return Rk(n)})),allowToolbarGroups:R===aC.floating,buttons:e,sidebar:a};KV(n,u,S,{backstage:A}),Xq(n,S);var l=n.getElement(),f=nn(),d={mothership:J,uiMothership:Q,outerContainer:$},m={targetNode:l,height:f};return o.render(n,d,s,A,m)};return{mothership:J,uiMothership:Q,backstage:A,renderUI:en,getUi:Z}},tX=function(n,t){var e=w.from(Ou(n,"id")).fold((function(){var n=Fu("dialog-describe");return Su(t,"id",n),n}),u);Su(n,"aria-describedby",e)},eX=function(n,t){var e=Tu(n,"id").fold((function(){var n=Fu("dialog-label");return Su(t,"id",n),n}),u);Su(n,"aria-labelledby",e)},rX=i([ye("lazySink"),Ee("dragBlockClass"),We("getBounds",us),Le("useTabstopAt",f),Le("eventOrder",{}),$g("modalBehaviours",[fy]),Hs("onExecute"),Vs("onEscape")]),oX={sketch:u},iX=i([Ep({name:"draghandle",overrides:function(n,t){return{behaviours:zl([Vq.config({mode:"mouse",getTarget:function(n){return ms(n,'[role="dialog"]').getOr(n)},blockerClass:n.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:n.getDragBounds})])}}}),_p({schema:[ye("dom")],name:"title"}),_p({factory:oX,schema:[ye("dom")],name:"close"}),_p({factory:oX,schema:[ye("dom")],name:"body"}),Ep({factory:oX,schema:[ye("dom")],name:"footer"}),Ap({factory:{sketch:function(n,t){return m(m({},n),{dom:t.dom,components:t.components})}},schema:[Le("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Le("components",[])],name:"blocker"})]),uX=function(n,t,e,r){Su(n.element,"aria-busy",!0);var o=t.getRoot(n).getOr(n),i=zl([fy.config({mode:"special",onTab:function(){return w.some(!0)},onShiftTab:function(){return w.some(!0)}}),By.config({})]),u=r(o,i),a=o.getSystem().build(u);wy.append(o,xc(a)),a.hasConfigured(fy)&&fy.focusIn(a),e.isBlocked()||t.onBlock(n),e.blockWith((function(){return wy.remove(o,a)}))},aX=function(n,t,e){_u(n.element,"aria-busy"),e.isBlocked()&&t.onUnblock(n),e.clear()},cX=Object.freeze({__proto__:null,block:uX,unblock:aX}),sX=[We("getRoot",w.none),Ls("onBlock"),Ls("onUnblock")],lX=function(){var n=yV(),t=function(t){n.set({destroy:t})};return oa({readState:n.isSet,blockWith:t,clear:n.clear,isBlocked:n.isSet})},fX=Object.freeze({__proto__:null,init:lX}),dX=Ul({fields:sX,name:"blocking",apis:cX,state:fX}),mX=function(n,t,e,r){var o,i=Ye(w.none()),u=function(t){i.set(w.some(t));var e=n.lazySink(t).getOrDie(),o=r.blocker(),u=e.getSystem().build(m(m({},o),{components:o.components.concat([xc(t)]),behaviours:zl([By.config({}),Sy("dialog-blocker-events",[Ai(_o(),(function(){fy.focusIn(t)}))])])}));Hm(e,u),fy.focusIn(t)},a=function(n){i.set(w.none()),Gi(n.element).each((function(t){n.getSystem().getByDom(t).each((function(n){Um(n)}))}))},c=function(t){return Wp(t,n,"body")},s=function(t){return Wp(t,n,"footer")},l=function(n,t){dX.block(n,t)},f=function(n){dX.unblock(n)},d=Fu("modal-events"),g=m(m({},n.eventOrder),(o={},o[ni()]=[d].concat(n.eventOrder["alloy.system.attached"]||[]),o));return{uid:n.uid,dom:n.dom,components:t,apis:{show:u,hide:a,getBody:c,getFooter:s,setIdle:f,setBusy:l},eventOrder:g,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Qg(n.modalBehaviours,[wy.config({}),fy.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt}),dX.config({getRoot:i.get}),Sy(d,[Ei((function(t){eX(t.element,Wp(t,n,"title").element),tX(t.element,Wp(t,n,"body").element)}))])])}},gX=cv({name:"ModalDialog",configFields:rX(),partFields:iX(),factory:mX,apis:{show:function(n,t){n.show(t)},hide:function(n,t){n.hide(t)},getBody:function(n,t){return n.getBody(t)},getFooter:function(n,t){return n.getFooter(t)},setBusy:function(n,t,e){n.setBusy(t,e)},setIdle:function(n,t){n.setIdle(t)}}}),pX=Ht([Ce("type"),Ce("name")].concat(ZC)),vX=ge,hX=[Xt("name","name",rt((function(){return Fu("button-name")})),me),Me("icon"),Ue("align","end",["start","end"]),je("primary",!1),je("disabled",!1)],bX=p(hX,[Ce("text")]),yX=p([Se("type",["submit","cancel","custom"])],bX),xX=p([Se("type",["menu"]),Me("text"),Me("tooltip"),Me("icon"),Ae("items",pX)],hX),wX=ce("type",{submit:yX,cancel:yX,custom:yX,menu:xX}),CX=[Ce("type"),Ce("text"),Se("level",["info","warn","error","success"]),Ce("icon"),Le("url","")],SX=Ht(CX),kX=function(n){return[Ce("type"),n]},OX=[Ce("type"),Ce("text"),je("disabled",!1),je("primary",!1),Xt("name","name",rt((function(){return Fu("button-name")})),me),Me("icon"),je("borderless",!1)],TX=Ht(OX),DX=[Ce("type"),Ce("name"),Ce("label"),je("disabled",!1)],_X=Ht(DX),AX=ge,EX=[Ce("type"),Ce("name")],RX=EX.concat([Me("label")]),BX=RX.concat([Le("columns","auto")]),MX=Ht(BX),IX=Jt([Ce("value"),Ce("text"),Ce("icon")]),NX=RX,PX=Ht(NX),FX=me,LX=RX,HX=Ht(LX),zX=me,VX=EX.concat([Ve("tag","textarea"),Ce("scriptId"),Ce("scriptUrl"),Ge("settings",void 0)]),UX=EX.concat([Ve("tag","textarea"),Oe("init")]),jX=ne((function(n){return re("customeditor.old",Lt(UX),n).orThunk((function(){return re("customeditor.new",Lt(VX),n)}))})),WX=me,GX=RX,qX=Ht(GX),XX=Qt(),KX=function(n){return[Ce("type"),we("columns"),n]},YX=[Ce("type"),Ce("html"),Ue("presets","presentation",["presentation","document"])],$X=Ht(YX),JX=RX.concat([je("sandboxed",!0)]),QX=Ht(JX),ZX=me,nK=RX.concat([xe("currentState",Ht([ye("blob"),Ce("url")]))]),tK=Ht(nK),eK=RX.concat([Me("inputMode"),Me("placeholder"),je("maximized",!1),je("disabled",!1)]),rK=Ht(eK),oK=me,iK=function(n){return[Ce("type"),Ce("label"),n]},uK=[Ce("text"),Ce("value")],aK=[Ce("text"),Ae("items",se("items",(function(){return cK})))],cK=Vt([Ht(uK),Ht(aK)]),sK=RX.concat([Ae("items",cK),je("disabled",!1)]),lK=Ht(sK),fK=me,dK=RX.concat([_e("items",[Ce("text"),Ce("value")]),ze("size",1),je("disabled",!1)]),mK=Ht(dK),gK=me,pK=RX.concat([je("constrain",!0),je("disabled",!1)]),vK=Ht(pK),hK=Ht([Ce("width"),Ce("height")]),bK=[Ce("type"),Ae("header",me),Ae("cells",zt(me))],yK=Ht(bK),xK=RX.concat([Me("placeholder"),je("maximized",!1),je("disabled",!1)]),wK=Ht(xK),CK=me,SK=RX.concat([Ue("filetype","file",["image","media","file"]),Le("disabled",!1)]),kK=Ht(SK),OK=Ht([Ce("value"),Le("meta",{})]),TK=function(n){return Xt("items","items",tt(),zt(ne((function(t){return re("Checking item of "+n,DK,t).fold((function(n){return hn.error(ue(n))}),(function(n){return hn.value(n)}))}))))},DK=Zt((function(){return ae("type",{alertbanner:SX,bar:Ht(kX(TK("bar"))),button:TX,checkbox:_X,colorinput:PX,colorpicker:HX,dropzone:qX,grid:Ht(KX(TK("grid"))),iframe:QX,input:rK,listbox:lK,selectbox:mK,sizeinput:vK,textarea:wK,urlinput:kK,customeditor:jX,htmlpanel:$X,imagetools:tK,collection:MX,label:Ht(iK(TK("label"))),table:yK,panel:AK})})),_K=[Ce("type"),Le("classes",[]),Ae("items",DK)],AK=Ht(_K),EK=[Xt("name","name",rt((function(){return Fu("tab-name")})),me),Ce("title"),Ae("items",DK)],RK=[Ce("type"),_e("tabs",EK)],BK=Ht(RK),MK=bX,IK=wX,NK=Ht([Ce("title"),xe("body",ae("type",{panel:AK,tabpanel:BK})),Ve("size","normal"),Ae("buttons",IK),Le("initialData",{}),We("onAction",t),We("onChange",t),We("onSubmit",t),We("onClose",t),We("onCancel",t),Le("onTabChange",t)]),PK=function(n){return re("dialog",NK,n)},FK=Ht(p([Se("type",["cancel","custom"])],MK)),LK=Ht([Ce("title"),Ce("url"),Be("height"),Be("width"),Ne("buttons",FK),We("onAction",t),We("onCancel",t),We("onClose",t),We("onMessage",t)]),HK=function(n){return re("dialog",LK,n)},zK=function(n){return D(n)?[n].concat(en(Hn(n),zK)):_(n)?en(n,zK):[]},VK=function(n){return T(n.type)&&T(n.name)},UK={checkbox:AX,colorinput:FX,colorpicker:zX,dropzone:XX,input:oK,iframe:ZX,sizeinput:hK,selectbox:gK,listbox:fK,size:hK,textarea:CK,urlinput:OK,customeditor:WX,collection:IX,togglemenuitem:vX},jK=function(n){return w.from(UK[n.type])},WK=function(n){return Y(zK(n),VK)},GK=function(n){var t=WK(n),e=en(t,(function(n){return jK(n).fold((function(){return[]}),(function(t){return[xe(n.name,t)]}))}));return Ht(e)},qK=function(n){var t=oe(PK(n)),e=GK(n),r=n.initialData;return{internalDialog:t,dataValidator:e,initialData:r}},XK={open:function(n,t){var e=qK(t);return n(e.internalDialog,e.initialData,e.dataValidator)},openUrl:function(n,t){var e=oe(HK(t));return n(e)},redial:function(n){return qK(n)}},KK=function(n){var t=[],e={};return Rn(n,(function(n,r){n.fold((function(){t.push(r)}),(function(n){e[r]=n}))})),t.length>0?hn.error(t):hn.value(e)},YK=function(n,t){var e=Qx(vB.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:G(n.items,(function(n){return GP(e,n,t)}))}})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[e.asSpec()]}],behaviours:zl([fy.config({mode:"acyclic",useTabstopAt:c(nM)}),DB.memento(e),jB.memento(e,{postprocess:function(n){return KK(n).fold((function(n){return console.error(n),{}}),(function(n){return n}))}})])}},$K=function(n,t){return{uid:n.uid,dom:n.dom,components:n.components,events:Zy(n.action),behaviours:Qg(n.tabButtonBehaviours,[By.config({}),fy.config({mode:"execution",useSpace:!0,useEnter:!0}),Yg.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}},JK=av({name:"TabButton",configFields:[Le("uid",void 0),ye("value"),Xt("dom","dom",ot((function(){return{attributes:{role:"tab",id:Fu("aria"),"aria-selected":"false"}}})),le()),Ee("action"),Le("domModification",{}),$g("tabButtonBehaviours",[By,fy,Yg]),ye("view")],factory:$K}),QK=i([ye("tabs"),ye("dom"),Le("clickToDismiss",!1),$g("tabbarBehaviours",[Hv,fy]),Ps(["tabClass","selectedClass"])]),ZK=Rp({factory:JK,name:"tabs",unit:"tab",overrides:function(n){var e=function(n,t){Hv.dehighlight(n,t),fi(n,ai(),{tabbar:n,button:t})},r=function(n,t){Hv.highlight(n,t),fi(n,ui(),{tabbar:n,button:t})};return{action:function(o){var i=o.getSystem().getByUid(n.uid).getOrDie(),u=Hv.isHighlighted(i,o),a=function(){return u&&n.clickToDismiss?e:u?t:r}();a(i,o)},domModification:{classes:[n.markers.tabClass]}}}}),nY=i([ZK]),tY=function(n,t,e,r){return{uid:n.uid,dom:n.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Qg(n.tabbarBehaviours,[Hv.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:function(n,t){Su(t.element,"aria-selected","true")},onDehighlight:function(n,t){Su(t.element,"aria-selected","false")}}),fy.config({mode:"flow",getInitial:function(n){return Hv.getHighlighted(n).map((function(n){return n.element}))},selector:"."+n.markers.tabClass,executeOnMove:!0})])}},eY=cv({name:"Tabbar",configFields:QK(),partFields:nY(),factory:tY}),rY=function(n,t){return{uid:n.uid,dom:n.dom,behaviours:Qg(n.tabviewBehaviours,[wy.config({})]),domModification:{attributes:{role:"tabpanel"}}}},oY=av({name:"Tabview",configFields:[$g("tabviewBehaviours",[wy])],factory:rY}),iY=i([Le("selectFirst",!0),Ls("onChangeTab"),Ls("onDismissTab"),Le("tabs",[]),$g("tabSectionBehaviours",[])]),uY=_p({factory:eY,schema:[ye("dom"),De("markers",[ye("tabClass"),ye("selectedClass")])],name:"tabbar",defaults:function(n){return{tabs:n.tabs}}}),aY=_p({factory:oY,name:"tabview"}),cY=i([uY,aY]),sY=function(n,t,e,r){var o=function(t){var e=Yg.getValue(t);jp(t,n,"tabview").each((function(r){var o=Z(n.tabs,(function(n){return n.value===e}));o.each((function(e){var o=e.view();Tu(t.element,"id").each((function(n){Su(r.element,"aria-labelledby",n)})),wy.set(r,o),n.onChangeTab(r,t,o)}))}))},i=function(t,e){jp(t,n,"tabbar").each((function(n){e(n).each(di)}))};return{uid:n.uid,dom:n.dom,components:t,behaviours:Jg(n.tabSectionBehaviours),events:vi(tn([n.selectFirst?[Ei((function(n,t){i(n,Hv.getFirst)}))]:[],[xi(ui(),(function(n,t){var e=t.event.button;o(e)})),xi(ai(),(function(t,e){var r=e.event.button;n.onDismissTab(t,r)}))]])),apis:{getViewItems:function(t){return jp(t,n,"tabview").map((function(n){return wy.contents(n)})).getOr([])},showTab:function(n,t){var e=function(n){var e=Hv.getCandidates(n),r=Z(e,(function(n){return Yg.getValue(n)===t}));return r.filter((function(t){return!Hv.isHighlighted(n,t)}))};i(n,e)}}}},lY=cv({name:"TabSection",configFields:iY(),partFields:cY(),factory:sY,apis:{getViewItems:function(n,t){return n.getViewItems(t)},showTab:function(n,t,e){n.showTab(t,e)}}}),fY=function(n,t,e){return G(n,(function(r,o){wy.set(e,n[o].view());var i=t.dom.getBoundingClientRect();return wy.set(e,[]),i.height}))},dY=function(n){return ln(cn(n,(function(n,t){return n>t?-1:n<t?1:0})))},mY=function(n,t,e){var r,o=ji(n).dom,i=ms(n,".tox-dialog-wrap").getOr(n),u="fixed"===Qa(i,"position");r=u?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);var a=Sc(t),c=t.dom.offsetLeft>=e.dom.offsetLeft+Ic(e),s=c?Math.max(Sc(e),a):a,l=parseInt(Qa(n,"margin-top"),10)||0,f=parseInt(Qa(n,"margin-bottom"),10)||0,d=Sc(n)+l+f,m=d-s;return r-m},gY=function(n,t){ln(n).each((function(n){return lY.showTab(t,n.value)}))},pY=function(n,t){Ya(n,"height",t+"px"),Xr().browser.isIE()?rc(n,"flex-basis"):Ya(n,"flex-basis",t+"px")},vY=function(n,t,e){ms(n,'[role="dialog"]').each((function(n){gs(n,'[role="tablist"]').each((function(r){e.get().map((function(e){return Ya(t,"height","0"),Ya(t,"flex-basis","0"),Math.min(e,mY(n,t,r))})).each((function(n){pY(t,n)}))}))}))},hY=function(n){return gs(n,'[role="tabpanel"]')},bY=function(n){var t=function(){var t=Ye(w.none()),e=[Ei((function(e){var r=e.element;hY(r).each((function(o){Ya(o,"visibility","hidden"),e.getSystem().getByDom(o).toOptional().each((function(e){var r=fY(n,o,e),i=dY(r);t.set(i)})),vY(r,o,t),rc(o,"visibility"),gY(n,e),Yx.requestAnimationFrame((function(){vY(r,o,t)}))}))})),xi(Zo(),(function(n){var e=n.element;hY(e).each((function(n){vY(e,n,t)}))})),xi(p_,(function(n,e){var r=n.element;hY(r).each((function(n){var e=Zl(tu(n));Ya(n,"visibility","hidden");var o=nc(n,"height").map((function(n){return parseInt(n,10)}));rc(n,"height"),rc(n,"flex-basis");var i=n.dom.getBoundingClientRect().height,u=o.forall((function(n){return i>n}));u?(t.set(w.from(i)),vY(r,n,t)):o.each((function(t){pY(n,t)})),rc(n,"visibility"),e.each($l)}))}))],r=!1;return{extraEvents:e,selectFirst:r}}(),e=function(){var n=[],t=!0;return{extraEvents:n,selectFirst:t}}();return{smartTabHeight:t,naiveTabHeight:e}},yY="send-data-to-section",xY="send-data-to-view",wY=function(n,t){var e=Ye({}),r=function(n){var t=Yg.getValue(n),r=KK(t).getOr({}),o=e.get(),i=Yn(o,r);e.set(i)},o=function(n){var t=e.get();Yg.setValue(n,t)},i=Ye(null),u=G(n.tabs,(function(n){return{value:n.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(n.title)},view:function(){return[vB.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"]},components:G(n.items,(function(n){return GP(e,n,t)})),formBehaviours:zl([fy.config({mode:"acyclic",useTabstopAt:c(nM)}),Sy("TabView.form.events",[Ei(o),Ri(r)]),ql.config({channels:ft([{key:yY,value:{onReceive:r}},{key:xY,value:{onReceive:o}}])})])}}))]}}})),a=bY(u).smartTabHeight;return lY.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(n,t,e){var r=Yg.getValue(t);fi(n,g_,{name:r,oldName:i.get()}),i.set(r)},tabs:u,components:[lY.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[eY.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:zl([ZD.config({})])}),lY.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:a.selectFirst,tabSectionBehaviours:zl([Sy("tabpanel",a.extraEvents),fy.config({mode:"acyclic"}),yv.config({find:function(n){return ln(lY.getViewItems(n))}}),Yg.config({store:{mode:"manual",getValue:function(n){return n.getSystem().broadcastOn([yY],{}),e.get()},setValue:function(n,t){e.set(t),n.getSystem().broadcastOn([xY],{})}}})])})},CY=Fu("update-dialog"),SY=Fu("update-title"),kY=Fu("update-body"),OY=Fu("update-footer"),TY=Fu("body-send-message"),DY=function(n,t,e,r){var o=function(n){switch(n.body.type){case"tabpanel":return[wY(n.body,e)];default:return[YK(n.body,e)]}},i=function(n,t){return w.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},u={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:m(m({},t.map((function(n){return{id:n}})).getOr({})),r?u:{})},components:[],behaviours:zl([DB.childAt(0),JH.config({channel:kY,updateState:i,renderComponents:o,initialData:n})])}},_Y=function(n,t,e,r){return DY(n,w.some(t),e,r)},AY=function(n,t){var e=DY(n,w.none(),t,!1);return gX.parts.body(e)},EY=function(n){var t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[JB({dom:{tag:"iframe",attributes:{src:n.url}},behaviours:zl([ZD.config({}),By.config({})])})]}],behaviours:zl([fy.config({mode:"acyclic",useTabstopAt:c(nM)})])};return gX.parts.body(t)},RY=rO.deviceType.isTouch(),BY=function(n,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,t]}},MY=function(n,t){return gX.parts.close(Jx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:n,buttonBehaviours:zl([ZD.config({})])}))},IY=function(){return gX.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},NY=function(n,t){return gX.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Dj("<p>"+t.translate(n)+"</p>")}]}]})},PY=function(n){return gX.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n})},FY=function(n,t){return[jD.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),jD.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},LY=function(n){var t,e="tox-dialog",r=e+"-wrap",o=r+"__backdrop",i=e+"__disable-scroll";return gX.sketch({lazySink:n.lazySink,onEscape:function(t){return n.onEscape(t),w.some(!0)},useTabstopAt:function(n){return!nM(n)},dom:{tag:"div",classes:[e].concat(n.extraClasses),styles:m({position:"relative"},n.extraStyles)},components:p([n.header,n.body],n.footer.toArray()),parts:{blocker:{dom:Dj('<div class="'+r+'"></div>'),components:[{dom:{tag:"div",classes:RY?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:r,modalBehaviours:zl(p([By.config({}),Sy("dialog-events",n.dialogEvents.concat([Ai(_o(),(function(n,t){fy.focusIn(n)}))])),Sy("scroll-lock",[Ei((function(){Fa(Ga(),i)})),Ri((function(){Ha(Ga(),i)}))])],n.extraBehaviours)),eventOrder:m((t={},t[jo()]=["dialog-events"],t[ni()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[ti()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),n.eventOrder)})},HY=function(n){return Jx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),title:n.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:nw("close",n.icons)}}],action:function(n){li(n,s_)}})},zY=function(n,t,e){var r=function(n){return[vc(e.translate(n.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:m({},t.map((function(n){return{id:n}})).getOr({}))},components:r(n),behaviours:zl([JH.config({channel:SY,renderComponents:r})])}},VY=function(){return{dom:Dj('<div class="tox-dialog__draghandle"></div>')}},UY=function(n,t,e){return jD.sketch({dom:Dj('<div class="tox-dialog__header"></div>'),components:[zY(n,w.some(t),e),VY(),HY(e)],containerBehaviours:zl([Vq.config({mode:"mouse",blockerClass:"blocker",getTarget:function(n){return ps(n,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},jY=function(n,t){var e=gX.parts.title(zY(n,w.none(),t)),r=gX.parts.draghandle(VY()),o=gX.parts.close(HY(t)),i=[e].concat(n.draggable?[r]:[]).concat([o]);return jD.sketch({dom:Dj('<div class="tox-dialog__header"></div>'),components:i})},WY=function(n,t){return jY({title:t.shared.providers.translate(n),draggable:t.dialog.isDraggableModal()},t.shared.providers)},GY=function(n,t,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:Dj('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},qY=function(n,t,e){return{onClose:function(){return e.closeWindow()},onBlock:function(e){gX.setBusy(n(),(function(n,r){return GY(e.message,r,t)}))},onUnblock:function(){gX.setIdle(n())}}},XY=function(n,t,e,r){var o,i=function(n,t){return w.some(t)};return yc(LY(m(m({},n),{lazySink:r.shared.getSink,extraBehaviours:p([JH.config({channel:CY,updateState:i,initialData:t}),jB.memory({})],n.extraBehaviours),onEscape:function(n){li(n,s_)},dialogEvents:e,eventOrder:(o={},o[Uo()]=[JH.name(),ql.name()],o[ni()]=["scroll-lock",JH.name(),"messages","dialog-events","alloy.base.behaviour"],o[ti()]=["alloy.base.behaviour","dialog-events","messages",JH.name(),"scroll-lock"],o)})))},KY=function(n){var t=function(n){var t=G(n.items,(function(n){var t=Ye(!1);return m(m({},n),{storage:t})}));return m(m({},n),{items:t})};return G(n,(function(n){return"menu"===n.type?t(n):n}))},YY=function(n){return J(n,(function(n,t){if("menu"===t.type){var e=t;return J(e.items,(function(n,t){return n[t.name]=t.storage,n}),n)}return n}),{})},$Y=function(n,t){return[Ti(_o(),ZB),n(c_,(function(n,e){t.onClose(),e.onClose()})),n(s_,(function(n,t,e,r){t.onCancel(n),li(r,c_)})),xi(m_,(function(n,e){return t.onUnblock()})),xi(d_,(function(n,e){return t.onBlock(e.event)}))]},JY=function(n,t){var e=function(t,e){return xi(t,(function(t,o){r(t,(function(r,i){e(n(),r,o.event,t)}))}))},r=function(n,t){JH.getState(n).get().each((function(e){t(e,n)}))};return p($Y(e,t),[e(l_,(function(n,t,e){t.onAction(n,{name:e.name})}))])},QY=function(n,t,e){var r=function(t,e){return xi(t,(function(t,r){o(t,(function(o,i){e(n(),o,r.event,t)}))}))},o=function(n,t){JH.getState(n).get().each((function(e){t(e.internalDialog,n)}))};return p($Y(r,t),[r(f_,(function(n,t){return t.onSubmit(n)})),r(a_,(function(n,t,e){t.onChange(n,{name:e.name})})),r(l_,(function(n,t,r,o){var i=function(){return fy.focusIn(o)},u=function(n){return Du(n,"disabled")||Tu(n,"aria-disabled").exists((function(n){return"true"===n}))},a=tu(o.element),c=Zl(a);t.onAction(n,{name:r.name,value:r.value}),Zl(a).fold(i,(function(n){u(n)||c.exists((function(t){return ao(n,t)&&u(t)}))?i():e().toOptional().filter((function(t){return!ao(t.element,n)})).each(i)}))})),r(g_,(function(n,t,e){t.onTabChange(n,{newTabName:e.name,oldTabName:e.oldName})})),Ri((function(t){var e=n();Yg.setValue(t,e.getData())}))])},ZY={initUrlDialog:JY,initDialog:QY},n$=function(n,t){return VI(n,n.type,t)},t$=function(n,t,e){return Z(t,(function(n){return n.name===e})).bind((function(t){return t.memento.getOpt(n)}))},e$=function(n,t){var e=t.map((function(n){return n.footerButtons})).getOr([]),r=K(e,(function(n){return"start"===n.align})),o=function(n,t){return jD.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+n]},components:G(t,(function(n){return n.memento.asSpec()}))})},i=o("start",r.pass),u=o("end",r.fail);return[i,u]},r$=function(n,t){var e=function(n,e){var r=G(e.buttons,(function(n){var e=Qx(n$(n,t));return{name:n.name,align:n.align,memento:e}})),o=function(n,t){return t$(n,r,t)};return w.some({lookupByName:o,footerButtons:r})};return{dom:Dj('<div class="tox-dialog__footer"></div>'),components:[],behaviours:zl([JH.config({channel:OY,initialData:n,updateState:e,renderComponents:e$})])}},o$=function(n,t){return r$(n,t)},i$=function(n,t){return gX.parts.footer(r$(n,t))},u$=function(n,t){var e=n.getRoot();if(e.getSystem().isConnected()){var r=yv.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return vB.getField(r,t).fold((function(){var e=n.getFooter(),o=JH.getState(e);return o.get().bind((function(n){return n.lookupByName(r,t)}))}),(function(n){return w.some(n)}))}return w.none()},a$=function(n,t){var e=n.getRoot();return JH.getState(e).get().map((function(n){return oe(re("data",n.dataValidator,t))})).getOr(t)},c$=function(n,t,e){var r=function(t){var e=n.getRoot();e.getSystem().isConnected()&&t(e)},o=function(){var t=n.getRoot(),r=t.getSystem().isConnected()?n.getFormWrapper():t,o=Yg.getValue(r),i=Bn(e,(function(n){return n.get()}));return m(m({},o),i)},i=function(t){r((function(r){var o=p.getData(),i=m(m({},o),t),u=a$(n,i),a=n.getFormWrapper();Yg.setValue(a,u),Rn(e,(function(n,t){Vn(i,t)&&n.set(i[t])}))}))},u=function(t){u$(n,t).each($S.disable)},a=function(t){u$(n,t).each($S.enable)},c=function(t){u$(n,t).each(By.focus)},s=function(n){if(!T(n))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r((function(t){fi(t,d_,{message:n})}))},l=function(){r((function(n){li(n,m_)}))},f=function(t){r((function(e){var r=n.getBody(),o=JH.getState(r);o.get().exists((function(n){return n.isTabPanel()}))&&yv.getCurrent(r).each((function(n){lY.showTab(n,t)}))}))},d=function(n){r((function(e){var r=t(n);e.getSystem().broadcastOn([CY],r),e.getSystem().broadcastOn([SY],r.internalDialog),e.getSystem().broadcastOn([kY],r.internalDialog),e.getSystem().broadcastOn([OY],r.internalDialog),p.setData(r.initialData)}))},g=function(){r((function(n){li(n,c_)}))},p={getData:o,setData:i,disable:u,enable:a,focus:c,block:s,unblock:l,showTab:f,redial:d,close:g};return p},s$=function(n){switch(n){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},l$=function(n,t,e){var r=WY(n.internalDialog.title,e),o=AY({body:n.internalDialog.body},e),i=KY(n.internalDialog.buttons),u=YY(i),a=i$({buttons:i},e),c=ZY.initDialog((function(){return m}),qY((function(){return f}),e.shared.providers,t),e.shared.getSink),s=s$(n.internalDialog.size),l={header:r,body:o,footer:w.some(a),extraClasses:s,extraBehaviours:[],extraStyles:{}},f=XY(l,n,c,e),d=function(){var n=function(){var n=gX.getBody(f);return yv.getCurrent(n).getOr(n)};return{getRoot:function(){return f},getBody:function(){return gX.getBody(f)},getFooter:function(){return gX.getFooter(f)},getFormWrapper:n}}(),m=c$(d,t.redial,u);return{dialog:f,instanceApi:m}},f$=function(n,t,e,r){var o,i,u=Fu("dialog-label"),a=Fu("dialog-content"),c=function(n,t){return w.some(t)},s=Qx(UY({title:n.internalDialog.title,draggable:!0},u,e.shared.providers)),l=Qx(_Y({body:n.internalDialog.body},a,e,r)),f=KY(n.internalDialog.buttons),d=YY(f),m=Qx(o$({buttons:f},e)),g=ZY.initDialog((function(){return v}),{onBlock:function(n){dX.block(p,(function(t,r){return GY(n.message,r,e.shared.providers)}))},onUnblock:function(){dX.unblock(p)},onClose:function(){return t.closeWindow()}},e.shared.getSink),p=yc({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(o={role:"dialog"},o["aria-labelledby"]=u,o["aria-describedby"]=""+a,o)},eventOrder:(i={},i[Uo()]=[JH.name(),ql.name()],i[jo()]=["execute-on-form"],i[ni()]=["reflecting","execute-on-form"],i),behaviours:zl([fy.config({mode:"cyclic",onEscape:function(n){return li(n,c_),w.some(!0)},useTabstopAt:function(n){return!nM(n)&&("button"!==Ii(n)||"disabled"!==Ou(n,"disabled"))}}),JH.config({channel:CY,updateState:c,initialData:n}),By.config({}),Sy("execute-on-form",g.concat([Ai(_o(),(function(n,t){fy.focusIn(n)}))])),dX.config({getRoot:function(){return w.some(p)}}),wy.config({}),jB.memory({})]),components:[s.asSpec(),l.asSpec(),m.asSpec()]}),v=c$({getRoot:function(){return p},getFooter:function(){return m.get(p)},getBody:function(){return l.get(p)},getFormWrapper:function(){var n=l.get(p);return yv.getCurrent(n).getOr(n)}},t.redial,d);return{dialog:p,instanceApi:v}},d$=tinymce.util.Tools.resolve("tinymce.util.URI"),m$=function(n){var t=function(t){n.getSystem().isConnected()&&t(n)},e=function(n){if(!T(n))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((function(t){fi(t,d_,{message:n})}))},r=function(){t((function(n){li(n,m_)}))},o=function(){t((function(n){li(n,c_)}))},i=function(n){t((function(t){t.getSystem().broadcastOn([TY],n)}))};return{block:e,unblock:r,close:o,sendMessage:i}},g$=["insertContent","setContent","execCommand","close","block","unblock"],p$=function(n){return D(n)&&-1!==g$.indexOf(n.mceAction)},v$=function(n){return!p$(n)&&D(n)&&Vn(n,"mceAction")},h$=function(n,t,e){switch(e.mceAction){case"insertContent":n.insertContent(e.content);break;case"setContent":n.setContent(e.content);break;case"execCommand":var r=!!A(e.ui)&&e.ui;n.execCommand(e.cmd,r,e.value);break;case"close":t.close();break;case"block":t.block(e.message);break;case"unblock":t.unblock();break}},b$=function(n,t,e,r){var o,i=WY(n.title,r),u=EY(n),a=n.buttons.bind((function(n){return 0===n.length?w.none():w.some(i$({buttons:n},r))})),c=ZY.initUrlDialog((function(){return b}),qY((function(){return h}),r.shared.providers,t)),s=m(m({},n.height.fold((function(){return{}}),(function(n){return{height:n+"px","max-height":n+"px"}}))),n.width.fold((function(){return{}}),(function(n){return{width:n+"px","max-width":n+"px"}}))),l=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],f=new d$(n.url,{base_uri:new d$(window.location.href)}),d=f.protocol+"://"+f.host+(f.port?":"+f.port:""),g=Ye(w.none()),p=[Sy("messages",[Ei((function(){var t=dD(tr.fromDom(window),"message",(function(t){if(f.isSameOrigin(new d$(t.raw.origin))){var r=t.raw.data;p$(r)?h$(e,b,r):v$(r)&&n.onMessage(b,r)}}));g.set(w.some(t))})),Ri((function(){g.get().each((function(n){return n.unbind()}))}))]),ql.config({channels:(o={},o[TY]={onReceive:function(n,t){gs(n.element,"iframe").each((function(n){var e=n.dom.contentWindow;e.postMessage(t,d)}))}},o)})],v={header:i,body:u,footer:a,extraClasses:l,extraBehaviours:p,extraStyles:s},h=XY(v,n,c,r),b=m$(h);return{dialog:h,instanceApi:b}},y$=function(n){var t=n.backstage.shared,e=function(e,r){var o=function(){gX.hide(c),r()},i=Qx(VI({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:w.none()},"cancel",n.backstage)),u=IY(),a=MY(o,t.providers),c=yc(LY({lazySink:function(){return t.getSink()},header:BY(u,a),body:NY(e,t.providers),footer:w.some(PY(FY([],[i.asSpec()]))),onEscape:o,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xi(s_,o)],eventOrder:{}}));gX.show(c);var s=i.get(c);By.focus(s)};return{open:e}},x$=function(n){var t=n.backstage.shared,e=function(e,r){var o=function(n){gX.hide(s),r(n)},i=Qx(VI({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:w.none()},"submit",n.backstage)),u=VI({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:w.none()},"cancel",n.backstage),a=IY(),c=MY((function(){return o(!1)}),t.providers),s=yc(LY({lazySink:function(){return t.getSink()},header:BY(a,c),body:NY(e,t.providers),footer:w.some(PY(FY([],[u,i.asSpec()]))),onEscape:function(){return o(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xi(s_,(function(){return o(!1)})),xi(f_,(function(){return o(!0)}))],eventOrder:{}}));gX.show(s);var l=i.get(s);By.focus(l)};return{open:e}},w$=function(n,t){return oe(re("data",t,n))},C$=function(n){return pD(n,".tox-alert-dialog")||pD(n,".tox-confirm-dialog")},S$=function(n,t,e){return t&&e?[]:[VU.config({contextual:{lazyContext:function(){return w.some(os(tr.fromDom(n.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},k$=function(n){var t=n.backstage,e=n.editor,r=Dk(e),o=y$(n),i=x$(n),u=function(n,e,r){return void 0!==e&&"toolbar"===e.inline?l(n,t.shared.anchors.inlineDialog(),r,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?l(n,t.shared.anchors.cursor(),r,e.ariaAttrs):s(n,r)},a=function(n,t){return c(n,t)},c=function(n,r){var o=function(n){var o=b$(n,{closeWindow:function(){gX.hide(o.dialog),r(o.instanceApi)}},e,t);return gX.show(o.dialog),o.instanceApi};return XK.openUrl(o,n)},s=function(n,e){var r=function(n,r,o){var i=r,u={dataValidator:o,initialData:i,internalDialog:n},a=l$(u,{redial:XK.redial,closeWindow:function(){gX.hide(a.dialog),e(a.instanceApi)}},t);return gX.show(a.dialog),a.instanceApi.setData(i),a.instanceApi};return XK.open(r,n)},l=function(n,o,i,u){var a=function(n,a,c){var s=w$(a,c),l=wV(),f=t.shared.header.isPositionedAtTop(),d={dataValidator:c,initialData:s,internalDialog:n},g=function(){return l.on((function(n){Fx.reposition(n),VU.refresh(n)}))},v=f$(d,{redial:XK.redial,closeWindow:function(){l.on(Fx.hide),e.off("ResizeEditor",g),l.clear(),i(v.instanceApi)}},t,u),h=yc(Fx.sketch(m(m({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},f?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:zl(p([Sy("window-manager-inline-events",[xi(ei(),(function(n,t){li(v.dialog,s_)}))])],S$(e,r,f))),isExtraPart:function(n,t){return C$(t)}})));return l.set(h),Fx.showWithin(h,o,xc(v.dialog),w.some(Ga())),r&&f||(VU.refresh(h),e.on("ResizeEditor",g)),v.instanceApi.setData(s),fy.focusIn(v.dialog),v.instanceApi};return XK.open(a,n)},f=function(n,t){i.open(n,(function(n){t(n)}))},d=function(n,t){o.open(n,(function(){t()}))},g=function(n){n.close()};return{open:u,openUrl:a,alert:d,close:g,confirm:f}};function O$(){d.add("silver",(function(n){var t=nX(n),e=t.uiMothership,r=t.backstage,o=t.renderUI,u=t.getUi;lD.register(n,r.shared);var a=k$({editor:n,backstage:r});return{renderUI:o,getWindowManagerImpl:i(a),getNotificationManagerImpl:function(){return uw(n,{backstage:r},e)},ui:u()}}))}O$()})()}).call(this,e("c8ba"))},"07d1":function(n,t,e){e("94ce")},"09cf":function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");function t(){n.add("textcolor",(function(){console.warn("Text color plugin is now built in to the core editor, please remove it from your editor configuration")}))}t()})()},"230c":function(n,t,e){"use strict";e.r(t);var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("tinymce-text",{attrs:{id:"tinymce"},model:{value:n.describe,callback:function(t){n.describe=t},expression:"describe"}}),e("el-button",{staticClass:"mt10",on:{click:n.release}},[n._v("")])],1)},o=[],i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"value"}],attrs:{id:n.id},domProps:{value:n.value},on:{input:function(t){t.target.composing||(n.value=t.target.value)}}})])},u=[],a=(e("b0c0"),e("e562")),c=e.n(a),s=(e("030f"),e("4ea8"),e("4237"),e("64d8"),e("07d1"),e("84ec8"),e("f557"),e("9434"),e("2d33"),e("34de"),e("31bb"),{name:"",props:{id:String,value:String},data:function(){return{flag:!0,hasInit:!1,hasChange:!1}},watch:{value:function(n){!this.hasChange&&this.hasInit&&this.setContent(n)}},methods:{release:function(){var n=c.a.get(this.id).getContent();this.$emit("release",n)},setContent:function(n){window.tinymce.get(this.id).setContent(n)},getContent:function(){window.tinymce.get(this.id).getContent()},destroyTinymce:function(){var n=window.tinymce.get(this.id);this.fullscreen&&n.execCommand("mceFullScreen"),n&&n.destroy()}},mounted:function(){var n=this,t=this;c.a.init({selector:"#"+t.id,language:"zh_CN",hasChange:!1,hasInit:!1,menubar:!1,height:"600px",body_class:"panel-body ",object_resizing:!1,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,media_live_embeds:!0,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,relative_urls:!1,remove_script_host:!1,table_default_styles:{width:"100%",borderCollapse:"collapse"},image_title:!1,automatic_uploads:!0,nonbreaking_force_tab:!0,plugins:["advlist autolink link axupimgs lists charmap print preview hr anchor pagebreak spellchecker ","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste imagetools textcolor"],toolbar:["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample ","hr bullist numlist link axupimgs charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen fontsizeselect"],file_picker_types:"media",file_picker_callback:function(n,t,e){if("media"==e.filetype){var r=document.createElement("input");r.setAttribute("type","file"),r.onchange=function(){var t,e,r=this.files[0];t=new XMLHttpRequest,t.open("POST",YiMengYun.BASEURL+"zxymobi-api/api/common/uploadImagePc"),t.withCredentials=self.credentials,t.upload.onprogress=function(n){},t.onerror=function(){},t.onload=function(){var e;if(!(t.status<200||t.status>=300)&&(e=JSON.parse(t.responseText),1==e.header.returnCode)){var r=e.data.url;n(r,{title:e.data.url})}},e=new FormData,e.append("file",r),t.send(e)},r.click()}},init_instance_callback:function(t){n.value&&t.setContent(n.value),n.hasInit=!0,t.on("NodeChange Change KeyUp SetContent",(function(){n.hasChange=!0,n.$emit("input",t.getContent())}))},setup:function(n){n.on("input undo redo execCommand",(function(e){t.flag=!1,t.$emit("input",n.getContent())}))},images_upload_handler:function(n,t,e){var r,o,i=n.blob();r=new XMLHttpRequest,r.withCredentials=!1,r.open("POST",YiMengYun.BASEURL+"zxymobi-api/api/common/uploadImagePc"),r.onload=function(){var n;if(200!==r.status)return 413===r.status?void e("3M"):void e("HTTP Error: "+r.status);n=JSON.parse(r.responseText),n&&"string"===typeof n.data.url?t(n.data.url):e("Invalid JSON: "+r.responseText)},o=new FormData,o.append("file",i,i.name),r.send(o)}})},beforeDestroy:function(){c.a.get(this.id).destroy()}}),l=s,f=e("2877"),d=Object(f["a"])(l,i,u,!1,null,null,null),m=d.exports,g={name:"",data:function(){return{describe:""}},methods:{release:function(){}},components:{"tinymce-text":m}},p=g,v=(e("fef7"),Object(f["a"])(p,r,o,!1,null,"48ac5e33",null));t["default"]=v.exports},2401:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){},e=function(n){return function(){return n}},r=function(n){return function(t){return!n(t)}},o=e(!1),i=e(!0),u=function(){return a},a=function(){var n=function(n){return n.isNone()},r=function(n){return n()},a=function(n){return n},c={fold:function(n,t){return n()},is:o,isSome:o,isNone:i,getOr:a,getOrThunk:r,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:e(null),getOrUndefined:e(void 0),or:a,orThunk:r,map:u,each:t,bind:u,exists:o,forall:i,filter:u,equals:n,equals_:n,toArray:function(){return[]},toString:e("none()")};return c}(),c=function(n){var t=e(n),r=function(){return s},u=function(t){return t(n)},s={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:i,isNone:o,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:r,orThunk:r,map:function(t){return c(t(n))},each:function(t){t(n)},bind:u,exists:u,forall:u,filter:function(t){return t(n)?s:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(o,(function(t){return e(n,t)}))}};return s},s=function(n){return null===n||void 0===n?a:c(n)},l={some:c,none:u,from:s},f=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},d=function(n){return function(t){return f(t)===n}},m=function(n){return function(t){return typeof t===n}},g=d("string"),p=d("array"),v=m("boolean"),h=m("function"),b=m("number"),y=Array.prototype.slice,x=Array.prototype.push,w=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},C=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},S=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r)&&e.push(i)}return e},k=function(n,t){if(0===n.length)return[];for(var e=t(n[0]),r=[],o=[],i=0,u=n.length;i<u;i++){var a=n[i],c=t(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r},O=function(n,t,e){return C(n,(function(n){e=t(e,n)})),e},T=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var i=n[r];if(t(i,r))return l.some(i);if(e(i,r))break}return l.none()},D=function(n,t){return T(n,t,o)},_=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!p(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);x.apply(t,n[e])}return t},A=function(n,t){return _(w(n,t))},E=function(n){var t=y.call(n,0);return t.reverse(),t},R=function(n,t){return t>=0&&t<n.length?l.some(n[t]):l.none()},B=function(n){return R(n,0)},M=function(n){return R(n,n.length-1)},I=function(){return I=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},I.apply(this,arguments)};function N(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var i=arguments[t],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r}var P=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},F=function(n,t,r,o){var i=n.isiOS()&&!0===/ipad/i.test(r),u=n.isiOS()&&!i,a=n.isiOS()||n.isAndroid(),c=a||o("(pointer:coarse)"),s=i||!u&&a&&o("(min-device-width:768px)"),l=u||a&&!s,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(r),d=!l&&!s&&!f;return{isiPad:e(i),isiPhone:e(u),isTablet:e(s),isPhone:e(l),isTouch:e(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:e(f),isDesktop:e(d)}},L=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},H=function(n,t){var e=L(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return U(r(1),r(2))},z=function(n,t){var e=String(t).toLowerCase();return 0===n.length?V():H(n,e)},V=function(){return U(0,0)},U=function(n,t){return{major:n,minor:t}},j={nu:U,detect:z,unknown:V},W=function(n,t){var e=String(t).toLowerCase();return D(n,(function(n){return n.search(e)}))},G=function(n,t){return W(n,t).map((function(n){var e=j.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},q=function(n,t){return W(n,t).map((function(n){var e=j.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},X={detectBrowser:G,detectOs:q},K=function(n,t){return-1!==n.indexOf(t)},Y=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$=function(n){return function(t){return K(t,n)}},J=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return K(n,"edge/")&&K(n,"chrome")&&K(n,"safari")&&K(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Y],search:function(n){return K(n,"chrome")&&!K(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return K(n,"msie")||K(n,"trident")}},{name:"Opera",versionRegexes:[Y,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$("firefox")},{name:"Safari",versionRegexes:[Y,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(K(n,"safari")||K(n,"mobile/"))&&K(n,"applewebkit")}}],Q=[{name:"Windows",search:$("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return K(n,"iphone")||K(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$("linux"),versionRegexes:[]},{name:"Solaris",search:$("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Z={browsers:e(J),oses:e(Q)},nn="Edge",tn="Chrome",en="IE",rn="Opera",on="Firefox",un="Safari",an=function(){return cn({current:void 0,version:j.unknown()})},cn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(nn),isChrome:r(tn),isIE:r(en),isOpera:r(rn),isFirefox:r(on),isSafari:r(un)}},sn={unknown:an,nu:cn,edge:e(nn),chrome:e(tn),ie:e(en),opera:e(rn),firefox:e(on),safari:e(un)},ln="Windows",fn="iOS",dn="Android",mn="Linux",gn="OSX",pn="Solaris",vn="FreeBSD",hn="ChromeOS",bn=function(){return yn({current:void 0,version:j.unknown()})},yn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(ln),isiOS:r(fn),isAndroid:r(dn),isOSX:r(gn),isLinux:r(mn),isSolaris:r(pn),isFreeBSD:r(vn),isChromeOS:r(hn)}},xn={unknown:bn,nu:yn,windows:e(ln),ios:e(fn),android:e(dn),linux:e(mn),osx:e(gn),solaris:e(pn),freebsd:e(vn),chromeos:e(hn)},wn=function(n,t){var e=Z.browsers(),r=Z.oses(),o=X.detectBrowser(e,n).fold(sn.unknown,sn.nu),i=X.detectOs(r,n).fold(xn.unknown,xn.nu),u=F(i,o,n,t);return{browser:o,os:i,deviceType:u}},Cn={detect:wn},Sn=function(n){return window.matchMedia(n).matches},kn=P((function(){return Cn.detect(navigator.userAgent,Sn)})),On=function(){return kn()},Tn=function(n,t,e){return 0!==(n.compareDocumentPosition(t)&e)},Dn=function(n,t){return Tn(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},_n=1,An=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Bn(r.childNodes[0])},En=function(n,t){var e=t||document,r=e.createElement(n);return Bn(r)},Rn=function(n,t){var e=t||document,r=e.createTextNode(n);return Bn(r)},Bn=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},Mn=function(n,t,e){return l.from(n.dom.elementFromPoint(t,e)).map(Bn)},In={fromHtml:An,fromTag:En,fromText:Rn,fromDom:Bn,fromPoint:Mn},Nn=function(n,t){var e=n.dom;if(e.nodeType!==_n)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Pn=function(n,t){return n.dom===t.dom},Fn=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},Ln=function(n,t){return Dn(n.dom,t.dom)},Hn=function(n,t){return On().browser.isIE()?Ln(n,t):Fn(n,t)},zn=Nn,Vn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Un=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),jn=tinymce.util.Tools.resolve("tinymce.util.VK"),Wn=Object.keys,Gn=function(n,t){for(var e=Wn(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];t(u,i)}},qn=function(n){return function(t,e){n[e]=t}},Xn=function(n,t,e,r){var o={};return Gn(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},Kn=function(n,e){var r={};return Xn(n,e,qn(r),t),r},Yn=("undefined"!==typeof window?window:Function("return this;")(),function(n){var t=n.dom.nodeName;return t.toLowerCase()}),$n=function(n){return n.dom.nodeType},Jn=function(n){return function(t){return $n(t)===n}},Qn=Jn(_n),Zn=function(n,t,e){if(!(g(e)||v(e)||b(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},nt=function(n,t){var e=n.dom;Gn(t,(function(n,t){Zn(e,t,n)}))},tt=function(n){return O(n.dom.attributes,(function(n,t){return n[t.name]=t.value,n}),{})},et=function(n){return l.from(n.dom.parentNode).map(In.fromDom)},rt=function(n){return w(n.dom.childNodes,In.fromDom)},ot=function(n,t){var e=n.dom.childNodes;return l.from(e[t]).map(In.fromDom)},it=function(n){return ot(n,0)},ut=function(n){return ot(n,n.dom.childNodes.length-1)},at=function(n,t){var e=et(n);e.each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},ct=function(n,t){n.dom.appendChild(t.dom)},st=function(n,t){C(t,(function(t){at(n,t)}))},lt=function(n,t){C(t,(function(t){ct(n,t)}))},ft=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},dt=function(n,t){return In.fromDom(n.dom.cloneNode(t))},mt=function(n){return dt(n,!0)},gt=function(n,t){var e=In.fromTag(t),r=tt(n);return nt(e,r),e},pt=function(n,t){var e=gt(n,t);at(n,e);var r=rt(n);return lt(e,r),ft(n),e},vt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ht=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=function(n){return function(t){return t&&t.nodeName.toLowerCase()===n}},yt=function(n){return function(t){return t&&n.test(t.nodeName)}},xt=function(n){return n&&3===n.nodeType},wt=yt(/^(OL|UL|DL)$/),Ct=yt(/^(OL|UL)$/),St=bt("ol"),kt=yt(/^(LI|DT|DD)$/),Ot=yt(/^(DT|DD)$/),Tt=yt(/^(TH|TD)$/),Dt=bt("br"),_t=function(n){return n.parentNode.firstChild===n},At=function(n,t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]},Et=function(n,t){return n&&n.nodeName in t},Rt=function(n,t){return!!Dt(t)&&(n.isBlock(t.nextSibling)&&!Dt(t.previousSibling))},Bt=function(n,t,e){var r=n.isEmpty(t);return!(e&&n.select("span[data-mce-type=bookmark]",t).length>0)&&r},Mt=function(n,t){return n.isChildOf(t,n.getRoot())},It=function(n){return n.getParam("lists_indent_on_tab",!0)},Nt=function(n){var t=n.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},Pt=function(n){return n.getParam("forced_root_block_attrs",{})},Ft=function(n,t){var e,r,o,i=n.dom,u=n.schema.getBlockElements(),a=i.createFragment(),c=Nt(n);if(c&&(r=i.create(c),r.tagName===c.toUpperCase()&&i.setAttribs(r,Pt(n)),Et(t.firstChild,u)||a.appendChild(r)),t)while(e=t.firstChild){var s=e.nodeName;o||"SPAN"===s&&"bookmark"===e.getAttribute("data-mce-type")||(o=!0),Et(e,u)?(a.appendChild(e),r=null):c?(r||(r=i.create(c),a.appendChild(r)),r.appendChild(e)):a.appendChild(e)}return c?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a},Lt=vt.DOM,Ht=function(n,t,e){var r=function(n){ht.each(o,(function(t){n.parentNode.insertBefore(t,e.parentNode)})),Lt.remove(n)},o=Lt.select('span[data-mce-type="bookmark"]',t),i=Ft(n,e),u=Lt.createRng();u.setStartAfter(e),u.setEndAfter(t);for(var a=u.extractContents(),c=a.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&n.dom.isEmpty(c)){Lt.remove(c);break}n.dom.isEmpty(a)||Lt.insertAfter(a,t),Lt.insertAfter(i,t),Bt(n.dom,e.parentNode)&&r(e.parentNode),Lt.remove(e),Bt(n.dom,t)&&Lt.remove(t)},zt=function(n,t){zn(t,"dd")?pt(t,"dt"):zn(t,"dt")&&et(t).each((function(e){return Ht(n,e.dom,t.dom)}))},Vt=function(n){zn(n,"dt")&&pt(n,"dd")},Ut=function(n,t,e){C(e,"Indent"===t?Vt:function(t){return zt(n,t)})},jt=function(n,t){if(xt(n))return{container:n,offset:t};var e=Vn.getNode(n,t);return xt(e)?{container:e,offset:t>=n.childNodes.length?e.data.length:0}:e.previousSibling&&xt(e.previousSibling)?{container:e.previousSibling,offset:e.previousSibling.data.length}:e.nextSibling&&xt(e.nextSibling)?{container:e.nextSibling,offset:0}:{container:n,offset:t}},Wt=function(n){var t=n.cloneRange(),e=jt(n.startContainer,n.startOffset);t.setStart(e.container,e.offset);var r=jt(n.endContainer,n.endOffset);return t.setEnd(r.container,r.offset),t},Gt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),qt=function(n,t){var e=t||n.selection.getStart(!0);return n.dom.getParent(e,"OL,UL,DL",Zt(n,e))},Xt=function(n,t){return n&&1===t.length&&t[0]===n},Kt=function(n){return ht.grep(n.querySelectorAll("ol,ul,dl"),(function(n){return wt(n)}))},Yt=function(n){var t=qt(n),e=n.selection.getSelectedBlocks();return Xt(t,e)?Kt(t):ht.grep(e,(function(n){return wt(n)&&t!==n}))},$t=function(n,t){var e=ht.map(t,(function(t){var e=n.dom.getParent(t,"li,dd,dt",Zt(n,t));return e||t}));return Gt.unique(e)},Jt=function(n){var t=n.selection.getSelectedBlocks();return ht.grep($t(n,t),(function(n){return kt(n)}))},Qt=function(n){return S(Jt(n),Ot)},Zt=function(n,t){var e=n.dom.getParents(t,"TD,TH"),r=e.length>0?e[0]:n.getBody();return r},ne=function(n,t){var e=n.dom.getParents(t,"ol,ul",Zt(n,t));return M(e)},te=function(n){var t=ne(n,n.selection.getStart()),e=S(n.selection.getSelectedBlocks(),Ct);return t.toArray().concat(e)},ee=function(n){var t=te(n);return re(n,t)},re=function(n,t){var e=w(t,(function(t){return ne(n,t).getOr(t)}));return Gt.unique(e)},oe=function(n,t,e){return n.isSome()&&t.isSome()?l.some(e(n.getOrDie(),t.getOrDie())):l.none()},ie=function(n,t){var e=t||document,r=e.createDocumentFragment();return C(n,(function(n){r.appendChild(n.dom)})),In.fromDom(r)},ue=function(n,t,e){return n.fire("ListMutation",{action:t,element:e})},ae=function(n){return void 0!==n.style&&h(n.style.getPropertyValue)},ce=function(n,t,e){if(!g(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);ae(n)&&n.style.setProperty(t,e)},se=function(n,t,e){var r=n.dom;ce(r,t,e)},le=function(n,t){ct(n.item,t.list)},fe=function(n){for(var t=1;t<n.length;t++)le(n[t-1],n[t])},de=function(n,t){oe(M(n),B(t),le)},me=function(n,t){var e={list:In.fromTag(t,n),item:In.fromTag("li",n)};return ct(e.list,e.item),e},ge=function(n,t,e){for(var r=[],o=0;o<e;o++)r.push(me(n,t.listType));return r},pe=function(n,t){for(var e=0;e<n.length-1;e++)se(n[e].item,"list-style-type","none");M(n).each((function(n){nt(n.list,t.listAttributes),nt(n.item,t.itemAttributes),lt(n.item,t.content)}))},ve=function(n,t){Yn(n.list)!==t.listType&&(n.list=pt(n.list,t.listType)),nt(n.list,t.listAttributes)},he=function(n,t,e){var r=In.fromTag("li",n);return nt(r,t),lt(r,e),r},be=function(n,t){ct(n.list,t),n.item=t},ye=function(n,t,e){var r=t.slice(0,e.depth);return M(r).each((function(t){var r=he(n,e.itemAttributes,e.content);be(t,r),ve(t,e)})),r},xe=function(n,t,e){var r=ge(n,e,e.depth-t.length);return fe(r),pe(r,e),de(t,r),t.concat(r)},we=function(n,t){var e=O(t,(function(t,e){return e.depth>t.length?xe(n,t,e):ye(n,t,e)}),[]);return B(e).map((function(n){return n.list}))},Ce=function(n){return zn(n,"OL,UL")},Se=function(n){return it(n).map(Ce).getOr(!1)},ke=function(n){return ut(n).map(Ce).getOr(!1)},Oe=function(n){return n.depth>0},Te=function(n){return n.isSelected},De=function(n){var t=rt(n),e=ke(n)?t.slice(0,-1):t;return w(e,mt)},_e=function(n,t,e){return et(n).filter(Qn).map((function(r){return{depth:t,dirty:!1,isSelected:e,content:De(n),itemAttributes:tt(n),listAttributes:tt(r),listType:Yn(r)}}))},Ae=function(n,t){switch(n){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},Ee=function(n,t){n.listType=t.listType,n.listAttributes=I({},t.listAttributes)},Re=function(n){n.listAttributes=Kn(n.listAttributes,(function(n,t){return"start"!==t}))},Be=function(n,t){var e=n[t].depth,r=function(n){return n.depth===e&&!n.dirty},o=function(n){return n.depth<e};return T(E(n.slice(0,t)),r,o).orThunk((function(){return T(n.slice(t+1),r,o)}))},Me=function(n){return C(n,(function(t,e){Be(n,e).fold((function(){t.dirty&&Re(t)}),(function(n){return Ee(t,n)}))})),n},Ie=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},Ne=function(n,t,e,r){return it(r).filter(Ce).fold((function(){t.each((function(n){Pn(n.start,r)&&e.set(!0)}));var o=_e(r,n,e.get());t.each((function(n){Pn(n.end,r)&&e.set(!1)}));var i=ut(r).filter(Ce).map((function(r){return Pe(n,t,e,r)})).getOr([]);return o.toArray().concat(i)}),(function(r){return Pe(n,t,e,r)}))},Pe=function(n,t,e,r){return A(rt(r),(function(r){var o=Ce(r)?Pe:Ne,i=n+1;return o(i,t,e,r)}))},Fe=function(n,t){var e=Ie(!1),r=0;return w(n,(function(n){return{sourceList:n,entries:Pe(r,t,e,n)}}))},Le=function(n,t){var e=Me(t);return w(e,(function(t){var e=ie(t.content);return In.fromDom(Ft(n,e.dom))}))},He=function(n,t){var e=Me(t);return we(n.contentDocument,e).toArray()},ze=function(n,t){return A(k(t,Oe),(function(t){var e=B(t).map(Oe).getOr(!1);return e?He(n,t):Le(n,t)}))},Ve=function(n,t){C(S(n,Te),(function(n){return Ae(t,n)}))},Ue=function(n){var t=w(Jt(n),In.fromDom);return oe(D(t,r(Se)),D(E(t),r(Se)),(function(n,t){return{start:n,end:t}}))},je=function(n,t,e){var r=Fe(t,Ue(n));C(r,(function(t){Ve(t.entries,e);var r=ze(n,t.entries);C(r,(function(t){ue(n,"Indent"===e?"IndentList":"OutdentList",t.dom)})),st(t.sourceList,r),ft(t.sourceList)}))},We=function(n,t){var e=w(ee(n),In.fromDom),r=w(Qt(n),In.fromDom),o=!1;if(e.length||r.length){var i=n.selection.getBookmark();je(n,e,t),Ut(n,t,r),n.selection.moveToBookmark(i),n.selection.setRng(Wt(n.selection.getRng())),n.nodeChanged(),o=!0}return o},Ge=function(n){return We(n,"Indent")},qe=function(n){return We(n,"Outdent")},Xe=function(n){return We(n,"Flatten")},Ke=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Ye=vt.DOM,$e=function(n){var t={},e=function(e){var r,o,i;o=n[e?"startContainer":"endContainer"],i=n[e?"startOffset":"endOffset"],1===o.nodeType&&(r=Ye.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),e?o.insertBefore(r,o.childNodes[i]):Ye.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),t[e?"startContainer":"endContainer"]=o,t[e?"startOffset":"endOffset"]=i};return e(!0),n.collapsed||e(),t},Je=function(n){var t=function(t){var e,r,o,i=function(n){var t=n.parentNode.firstChild,e=0;while(t){if(t===n)return e;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||e++,t=t.nextSibling}return-1};e=o=n[t?"startContainer":"endContainer"],r=n[t?"startOffset":"endOffset"],e&&(1===e.nodeType&&(r=i(e),e=e.parentNode,Ye.remove(o),!e.hasChildNodes()&&Ye.isBlock(e)&&e.appendChild(Ye.create("br"))),n[t?"startContainer":"endContainer"]=e,n[t?"startOffset":"endOffset"]=r)};t(!0),t();var e=Ye.createRng();return e.setStart(n.startContainer,n.startOffset),n.endContainer&&e.setEnd(n.endContainer,n.endOffset),Wt(e)},Qe=function(n){switch(n){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ze=function(n){return/\btox\-/.test(n.className)},nr=function(n,t,e){var r=function(n){var r=T(n.parents,wt,Tt).filter((function(n){return n.nodeName===t&&!Ze(n)})).isSome();e(r)},o=n.dom.getParents(n.selection.getNode());return r({parents:o}),n.on("NodeChange",r),function(){return n.off("NodeChange",r)}},tr=function(n,t,e){var r=e["list-style-type"]?e["list-style-type"]:null;n.setStyle(t,"list-style-type",r)},er=function(n,t){ht.each(t,(function(t,e){n.setAttribute(e,t)}))},rr=function(n,t,e){er(t,e["list-attributes"]),ht.each(n.select("li",t),(function(n){er(n,e["list-item-attributes"])}))},or=function(n,t,e){tr(n,t,e),rr(n,t,e)},ir=function(n,t,e){ht.each(e,(function(e){var r;return n.setStyle(t,(r={},r[e]="",r))}))},ur=function(n,t,e,r){var o=t[e?"startContainer":"endContainer"],i=t[e?"startOffset":"endOffset"];1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!e&&Dt(o.nextSibling)&&(o=o.nextSibling);while(o.parentNode!==r){if(At(n,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},ar=function(n,t,e){for(var r,o=[],i=n.dom,u=ur(n,t,!0,e),a=ur(n,t,!1,e),c=[],s=u;s;s=s.nextSibling)if(c.push(s),s===a)break;return ht.each(c,(function(t){if(At(n,t))return o.push(t),void(r=null);if(i.isBlock(t)||Dt(t))return Dt(t)&&i.remove(t),void(r=null);var u=t.nextSibling;Ke.isBookmarkNode(t)&&(wt(u)||At(n,u)||!u&&t.parentNode===e)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))})),o},cr=function(n,t,e){var r=n.getStyle(t,"list-style-type"),o=e?e["list-style-type"]:"";return o=null===o?"":o,r===o},sr=function(n,t,e){void 0===e&&(e={});var r=n.selection.getRng(),o="LI",i=Zt(n,n.selection.getStart(!0)),u=n.dom;if("false"!==u.getContentEditable(n.selection.getNode())){t=t.toUpperCase(),"DL"===t&&(o="DT");var a=$e(r),c=ar(n,r,i);ht.each(c,(function(r){var i,a=r.previousSibling,c=r.parentNode;kt(c)||(a&&wt(a)&&a.nodeName===t&&cr(u,a,e)?(i=a,r=u.rename(r,o),a.appendChild(r)):(i=u.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=u.rename(r,o)),ir(u,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),or(u,i,e),gr(n.dom,i))})),n.selection.setRng(Je(a))}},lr=function(n,t){return n&&t&&wt(n)&&n.nodeName===t.nodeName},fr=function(n,t,e){var r=n.getStyle(t,"list-style-type",!0),o=n.getStyle(e,"list-style-type",!0);return r===o},dr=function(n,t){return n.className===t.className},mr=function(n,t,e){return lr(t,e)&&fr(n,t,e)&&dr(t,e)},gr=function(n,t){var e,r;if(e=t.nextSibling,mr(n,t,e)){while(r=e.firstChild)t.appendChild(r);n.remove(e)}if(e=t.previousSibling,mr(n,t,e)){while(r=e.lastChild)t.insertBefore(r,t.firstChild);n.remove(e)}},pr=function(n,t,e,r){if(t.nodeName!==e){var o=n.dom.rename(t,e);or(n.dom,o,r),ue(n,Qe(e),o)}else or(n.dom,t,r),ue(n,Qe(e),t)},vr=function(n,t,e,r,o){var i=wt(t);if(i&&t.nodeName===r&&!hr(o))Xe(n);else{sr(n,r,o);var u=$e(n.selection.getRng(!0)),a=i?N([t],e):e;ht.each(a,(function(t){pr(n,t,r,o)})),n.selection.setRng(Je(u))}},hr=function(n){return"list-style-type"in n},br=function(n,t,e,r){if(t!==n.getBody())if(t)if(t.nodeName!==e||hr(r)||Ze(t)){var o=$e(n.selection.getRng(!0));or(n.dom,t,r);var i=n.dom.rename(t,e);gr(n.dom,i),n.selection.setRng(Je(o)),sr(n,e,r),ue(n,Qe(e),i)}else Xe(n);else sr(n,e,r),ue(n,Qe(e),t)},yr=function(n,t,e){var r=qt(n),o=Yt(n);e=e||{},o.length>0?vr(n,r,o,t,e):br(n,r,t,e)},xr=vt.DOM,wr=function(n,t){var e,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&(e=r.previousSibling,e&&"LI"===e.nodeName?(e.appendChild(t),Bt(n,r)&&xr.remove(r)):xr.setStyle(r,"listStyleType","none")),wt(r)&&(e=r.previousSibling,e&&"LI"===e.nodeName&&e.appendChild(t))},Cr=function(n,t){ht.each(ht.grep(n.select("ol,ul",t)),(function(t){wr(n,t)}))},Sr=function(n,t,e,r){var o=t.startContainer,i=t.startOffset;if(xt(o)&&(e?i<o.data.length:i>0))return o;var u=n.schema.getNonEmptyElements();1===o.nodeType&&(o=Vn.getNode(o,i));var a=new Un(o,r);e&&Rt(n.dom,o)&&a.next();while(o=a[e?"next":"prev2"]()){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(xt(o)&&o.data.length>0)return o}},kr=function(n,t){var e=t.childNodes;return 1===e.length&&!wt(e[0])&&n.isBlock(e[0])},Or=function(n,t){kr(n,t)&&n.remove(t.firstChild,!0)},Tr=function(n,t,e){var r,o=kr(n,e)?e.firstChild:e;if(Or(n,t),!Bt(n,t,!0))while(r=t.firstChild)o.appendChild(r)},Dr=function(n,t,e){var r,o=t.parentNode;if(Mt(n,t)&&Mt(n,e)){wt(e.lastChild)&&(r=e.lastChild),o===e.lastChild&&Dt(o.previousSibling)&&n.remove(o.previousSibling);var i=e.lastChild;i&&Dt(i)&&t.hasChildNodes()&&n.remove(i),Bt(n,e,!0)&&n.$(e).empty(),Tr(n,t,e),r&&e.appendChild(r);var u=Hn(In.fromDom(e),In.fromDom(t)),a=u?n.getParents(t,wt,e):[];n.remove(t),C(a,(function(t){Bt(n,t)&&t!==n.getRoot()&&n.remove(t)}))}},_r=function(n,t,e){n.dom.$(e).empty(),Dr(n.dom,t,e),n.selection.setCursorLocation(e,0)},Ar=function(n,t,e,r){var o=n.dom;if(o.isEmpty(r))_r(n,e,r);else{var i=$e(t);Dr(o,e,r),n.selection.setRng(Je(i))}},Er=function(n,t,e,r){var o=$e(t);Dr(n.dom,e,r);var i=Je(o);n.selection.setRng(i)},Rr=function(n,t){var e=n.dom,r=n.selection,o=r.getStart(),i=Zt(n,o),u=e.getParent(r.getStart(),"LI",i);if(u){var a=u.parentNode;if(a===n.getBody()&&Bt(e,a))return!0;var c=Wt(r.getRng()),s=e.getParent(Sr(n,c,t,i),"LI",i);if(s&&s!==u)return n.undoManager.transact((function(){t?Ar(n,c,s,u):_t(u)?qe(n):Er(n,c,u,s)})),!0;if(!s&&!t&&0===c.startOffset&&0===c.endOffset)return n.undoManager.transact((function(){Xe(n)})),!0}return!1},Br=function(n,t,e){var r=n.getParent(t.parentNode,n.isBlock,e);n.remove(t),r&&n.isEmpty(r)&&n.remove(r)},Mr=function(n,t){var e=n.dom,r=n.selection.getStart(),o=Zt(n,r),i=e.getParent(r,e.isBlock,o);if(i&&e.isEmpty(i)){var u=Wt(n.selection.getRng()),a=e.getParent(Sr(n,u,t,o),"LI",o);if(a)return n.undoManager.transact((function(){Br(e,i,o),gr(e,a.parentNode),n.selection.select(a,!0),n.selection.collapse(t)})),!0}return!1},Ir=function(n,t){return Rr(n,t)||Mr(n,t)},Nr=function(n){var t=n.selection.getStart(),e=Zt(n,t),r=n.dom.getParent(t,"LI,DT,DD",e);return!!(r||Jt(n).length>0)&&(n.undoManager.transact((function(){n.execCommand("Delete"),Cr(n.dom,n.getBody())})),!0)},Pr=function(n,t){return n.selection.isCollapsed()?Ir(n,t):Nr(n)},Fr=function(n){n.on("keydown",(function(t){t.keyCode===jn.BACKSPACE?Pr(n,!1)&&t.preventDefault():t.keyCode===jn.DELETE&&Pr(n,!0)&&t.preventDefault()}))},Lr=function(n){return{backspaceDelete:function(t){Pr(n,t)}}},Hr=function(n){var t=n.dom,e=qt(n);St(e)&&n.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:t.getAttrib(e,"start")||"1"},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var r=e.getData();n.undoManager.transact((function(){t.setAttrib(qt(n),"start","1"===r.start?"":r.start)})),e.close()}})},zr=function(n,t){return function(){var e=n.dom.getParent(n.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===t}},Vr=function(n){n.on("BeforeExecCommand",(function(t){var e=t.command.toLowerCase();"indent"===e?Ge(n):"outdent"===e&&qe(n)})),n.addCommand("InsertUnorderedList",(function(t,e){yr(n,"UL",e)})),n.addCommand("InsertOrderedList",(function(t,e){yr(n,"OL",e)})),n.addCommand("InsertDefinitionList",(function(t,e){yr(n,"DL",e)})),n.addCommand("RemoveList",(function(){Xe(n)})),n.addCommand("mceListProps",(function(){Hr(n)})),n.addQueryStateHandler("InsertUnorderedList",zr(n,"UL")),n.addQueryStateHandler("InsertOrderedList",zr(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",zr(n,"DL"))},Ur=function(n){n.on("keydown",(function(t){t.keyCode!==jn.TAB||jn.metaKeyPressed(t)||n.undoManager.transact((function(){(t.shiftKey?qe(n):Ge(n))&&t.preventDefault()}))}))},jr=function(n){It(n)&&Ur(n),Fr(n)},Wr=function(n){var t=function(t){return function(){return n.execCommand(t)}};n.hasPlugin("advlist")||(n.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:function(t){return nr(n,"OL",t.setActive)}}),n.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:function(t){return nr(n,"UL",t.setActive)}}))},Gr=function(n){var t={text:"List properties...",icon:"ordered-list",onAction:function(){return Hr(n)},onSetup:function(t){return nr(n,"OL",(function(n){return t.setDisabled(!n)}))}};n.ui.registry.addMenuItem("listprops",t),n.ui.registry.addContextMenu("lists",{update:function(t){var e=qt(n,t);return St(e)?["listprops"]:[]}})};function qr(){n.add("lists",(function(n){return!1===n.hasPlugin("rtc",!0)&&(jr(n),Vr(n)),Wr(n),Gr(n),Lr(n)}))}qr()})()},"2d33":function(n,t,e){e("303c")},"303c":function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");function t(){n.add("colorpicker",(function(){console.warn("Color picker plugin is now built in to the core editor, please remove it from your editor configuration")}))}t()})()},"31bb":function(n,t,e){var r,o=e("9523");tinymce.addI18n("zh_CN",(r={Redo:"",Undo:"",Cut:"",Copy:"",Paste:"","Select all":"","New document":"",Ok:"",Cancel:"","Visual aids":"",Bold:"",Italic:"",Underline:"",Strikethrough:"",Superscript:"",Subscript:"","Clear formatting":"","Align left":"","Align center":"","Align right":"",Justify:"","Bullet list":"","Numbered list":"","Decrease indent":"","Increase indent":"",Close:"",Formats:"","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Ctrl+X/C/V",Headers:"","Header 1":"1","Header 2":"2","Header 3":"3","Header 4":"4","Header 5":"5","Header 6":"6",Headings:"","Heading 1":"1","Heading 2":"2","Heading 3":"3","Heading 4":"4","Heading 5":"5","Heading 6":"6",Preformatted:"",Div:"Div",Pre:"",Code:"",Paragraph:"",Blockquote:"",Inline:"",Blocks:"","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"",Fonts:"","Font Sizes":"",Class:"Class","Browse for an image":"",OR:"","Drop an image here":"",Upload:"",Block:"",Align:"",Default:"",Circle:"",Disc:"",Square:"","Lower Alpha":"","Lower Greek":"","Lower Roman":"","Upper Alpha":"","Upper Roman":"","Anchor...":"...",Name:"",Id:"id","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"id","You have unsaved changes are you sure you want to navigate away?":"","Restore last draft":"","Special characters...":"...","Source code":"HTML","Insert/Edit code sample":"/",Language:"","Code sample...":"...","Color Picker":"",R:"R",G:"G",B:"B","Left to right":"","Right to left":"","Emoticons...":"...","Metadata and Document Properties":"",Title:"",Keywords:"",Description:"",Robots:"",Author:"",Encoding:"",Fullscreen:"",Action:"",Shortcut:"",Help:"",Address:"","Focus to menubar":"","Focus to toolbar":"","Focus to element path":"","Focus to contextual toolbar":"","Insert link (if link plugin activated)":" ()","Save (if save plugin activated)":"()","Find (if searchreplace plugin activated)":"()","Plugins installed ({0}):":" ({0})","Premium plugins:":"","Learn more...":"...","You are using {0}":" {0}",Plugins:"","Handy Shortcuts":"","Horizontal line":"","Insert/edit image":"/","Image description":"",Source:"",Dimensions:"","Constrain proportions":"",General:"",Advanced:"",Style:"","Vertical space":"","Horizontal space":"",Border:"","Insert image":"","Image...":"...","Image list":"","Rotate counterclockwise":"","Rotate clockwise":"","Flip vertically":"","Flip horizontally":"","Edit image":"","Image options":"","Zoom in":"","Zoom out":"",Crop:"",Resize:"",Orientation:"",Brightness:"",Sharpen:"",Contrast:"","Color levels":"",Gamma:"",Invert:"",Apply:"",Back:"","Insert date/time":"/","Date/time":"/","Insert/Edit Link":"/","Insert/edit link":"/","Text to display":"",Url:"","Open link in...":"...","Current window":"",None:"/","New window":"","Remove link":"",Anchors:"","Link...":"...","Paste or type a link":"","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"URLmailto:","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"URLhttp://:","Link list":"","Insert video":"","Insert/edit video":"/","Insert/edit media":"/","Alternative source":"","Alternative image URL":"","Media poster (Image URL)":"()","Paste your embed code below:":":",Embed:"","Media...":"...","Nonbreaking space":"","Page break":"","Paste as text":"",Preview:"","Print...":"...",Save:"",Find:"","Replace with":"",Replace:"","Replace all":"",Previous:"",Next:"","Find and replace...":"...","Could not find the specified string.":"","Match case":"","Find whole words only":"","Spell check":"",Ignore:"","Ignore all":"",Finish:"","Add to Dictionary":"","Insert table":"","Table properties":"","Delete table":"",Cell:"",Row:"",Column:"","Cell properties":"","Merge cells":"","Split cell":"","Insert row before":"","Insert row after":"","Delete row":"","Row properties":"","Cut row":"","Copy row":"","Paste row before":"","Paste row after":"","Insert column before":"","Insert column after":"","Delete column":"",Cols:"",Rows:"",Width:"",Height:"","Cell spacing":"","Cell padding":"","Show caption":"",Left:"",Center:"",Right:"","Cell type":"",Scope:"",Alignment:"","H Align":"","V Align":"",Top:"",Middle:"",Bottom:"","Header cell":"","Row group":"","Column group":"","Row type":"",Header:"",Body:"",Footer:"","Border color":"","Insert template...":"...",Templates:"",Template:"","Text color":"","Background color":"","Custom...":"...","Custom color":"","No color":"","Remove color":"","Table of Contents":"","Show blocks":"","Show invisible characters":"","Word count":"","Words: {0}":"{0}","{0} words":"{0} ",File:"",Edit:"",Insert:"",View:"",Format:"",Table:"",Tools:"","Powered by {0}":"Powered by {0}","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"ALT+F9ALT+F10ALT+0","Image title":"","Border width":"","Border style":"",Error:"",Warn:"",Valid:"","To open the popup, press Shift+Enter":"<br>","Rich Text Area. Press ALT-0 for help.":". Alt+0","System Font":"","Failed to upload image: {0}":": {0}","Failed to load plugin: {0} from url {1}":": {0} - {1}","Failed to load plugin url: {0}":": {0}","Failed to initialize plugin: {0}":": {0}",example:"",Search:"",All:"",Currency:"",Text:"",Quotations:"",Mathematical:"","Extended Latin":"",Symbols:"",Arrows:"","User Defined":"","dollar sign":"","currency sign":"","euro-currency sign":"","colon sign":"","cruzeiro sign":"","french franc sign":"","lira sign":"","mill sign":"","naira sign":"","peseta sign":"","rupee sign":"","won sign":"","new sheqel sign":"","dong sign":"","kip sign":"","tugrik sign":"","drachma sign":"","german penny symbol":"","peso sign":"","guarani sign":"","austral sign":"","hryvnia sign":"","cedi sign":"","livre tournois sign":"","spesmilo sign":"spesoj","tenge sign":"","indian rupee sign":"","turkish lira sign":"","nordic mark sign":"","manat sign":"","ruble sign":"","yen character":"","yuan character":"","yuan character, in hong kong and taiwan":"","yen/yuan character variant one":"","Loading emoticons...":"...","Could not load emoticons":"",People:"","Animals and Nature":"","Food and Drink":"",Activity:"","Travel and Places":"",Objects:"",Flags:"",Characters:"","Characters (no spaces)":"","Error: Form submit field collision.":": .","Error: No form element found.":": form.",Update:"","Color swatch":"",Turquoise:"",Green:"",Blue:"",Purple:"","Navy Blue":"","Dark Turquoise":"","Dark Green":"","Medium Blue":"","Medium Purple":"","Midnight Blue":"",Yellow:"",Orange:"",Red:"","Light Gray":"",Gray:"","Dark Yellow":"","Dark Orange":"","Dark Red":"","Medium Gray":"","Dark Gray":"",Black:"",White:"","Switch to or from fullscreen mode":"","Open help dialog":"",history:"",styles:"",formatting:"",alignment:"",indentation:"","permanent pen":"",comments:"",Anchor:"","Special character":"","Code sample":"",Color:"",Emoticons:"","Document properties":"",Image:"","Insert link":"",Target:"",Link:"",Poster:"",Media:"",Print:"",Prev:"","Find and replace":"","Whole words":"",Spellcheck:"",Caption:"","Insert template":"","Code view":"","Select...":"...","Format Painter":"","No templates defined.":"","Special character...":"...","Open link":""},o(r,"None",""),o(r,"Count",""),o(r,"Document",""),o(r,"Selection",""),o(r,"Words",""),o(r,"{0} characters","{0} "),o(r,"Alternative source URL",""),o(r,"Alternative description",""),o(r,"Accessibility",""),o(r,"Image is decorative",""),o(r,"Line height",""),o(r,"Cut column",""),o(r,"Copy column",""),o(r,"Paste column before",""),o(r,"Paste column after",""),o(r,"Copy column",""),o(r,"Version",""),o(r,"Keyboard Navigation",""),o(r,"Open popup menu for split buttons","br"),r))},3351:function(n,t,e){},"34de":function(n,t,e){e("09cf")},4237:function(n,t,e){e("be7f")},"4ea8":function(n,t,e){e("cdd9")},"5e4c":function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");function t(){n.add("contextmenu",(function(){console.warn("Context menu plugin is now built in to the core editor, please remove it from your editor configuration")}))}t()})()},"64d8":function(n,t,e){e("ef1f")},"84ec8":function(n,t,e){e("2401")},9434:function(n,t,e){e("e8b0")},"94ce":function(n,t){(function(){"use strict";var n=function(){},t=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},e=function(n,t){return function(e){return n(t(e))}},r=function(n){return function(){return n}},o=function(n){return n};function i(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var u=function(n){return function(t){return!n(t)}},a=function(n){return function(){throw new Error(n)}},c=r(!1),s=r(!0),l=function(){return f},f=function(){var t=function(n){return n.isNone()},e=function(n){return n()},o=function(n){return n},i={fold:function(n,t){return n()},is:c,isSome:c,isNone:s,getOr:o,getOrThunk:e,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:o,orThunk:e,map:l,each:n,bind:l,exists:c,forall:s,filter:l,equals:t,equals_:t,toArray:function(){return[]},toString:r("none()")};return i}(),d=function(n){var t=r(n),e=function(){return i},o=function(t){return t(n)},i={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:s,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return d(t(n))},each:function(t){t(n)},bind:o,exists:o,forall:o,filter:function(t){return t(n)?i:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(c,(function(t){return e(n,t)}))}};return i},m=function(n){return null===n||void 0===n?f:d(n)},g={some:d,none:l,from:m},p=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},v=function(n){return function(t){return p(t)===n}},h=function(n){return function(t){return typeof t===n}},b=function(n){return function(t){return n===t}},y=v("string"),x=v("object"),w=v("array"),C=h("boolean"),S=b(void 0),k=function(n){return null===n||void 0===n},O=function(n){return!k(n)},T=h("function"),D=h("number"),_=Array.prototype.slice,A=Array.prototype.indexOf,E=Array.prototype.push,R=function(n,t){return A.call(n,t)},B=function(n,t){return R(n,t)>-1},M=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return!0}return!1},I=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},N=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},P=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},F=function(n,t){for(var e=n.length-1;e>=0;e--){var r=n[e];t(r,e)}},L=function(n,t){for(var e=[],r=[],o=0,i=n.length;o<i;o++){var u=n[o],a=t(u,o)?e:r;a.push(u)}return{pass:e,fail:r}},H=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r)&&e.push(i)}return e},z=function(n,t,e){return F(n,(function(n){e=t(e,n)})),e},V=function(n,t,e){return P(n,(function(n){e=t(e,n)})),e},U=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var i=n[r];if(t(i,r))return g.some(i);if(e(i,r))break}return g.none()},j=function(n,t){return U(n,t,c)},W=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return g.some(e)}return g.none()},G=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!w(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);E.apply(t,n[e])}return t},q=function(n,t){return G(N(n,t))},X=function(n,t){for(var e=0,r=n.length;e<r;++e){var o=n[e];if(!0!==t(o,e))return!1}return!0},K=function(n){var t=_.call(n,0);return t.reverse(),t},Y=function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var i=n[r];e[String(i)]=t(i,r)}return e},$=function(n){return[n]},J=function(n,t){var e=_.call(n,0);return e.sort(t),e},Q=function(n,t){return t>=0&&t<n.length?g.some(n[t]):g.none()},Z=function(n){return Q(n,0)},nn=function(n){return Q(n,n.length-1)},tn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return g.none()},en=function(){return en=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},en.apply(this,arguments)};function rn(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var i=arguments[t],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r}var on=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},un=function(n,t,e,o){var i=n.isiOS()&&!0===/ipad/i.test(e),u=n.isiOS()&&!i,a=n.isiOS()||n.isAndroid(),c=a||o("(pointer:coarse)"),s=i||!u&&a&&o("(min-device-width:768px)"),l=u||a&&!s,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),d=!l&&!s&&!f;return{isiPad:r(i),isiPhone:r(u),isTablet:r(s),isPhone:r(l),isTouch:r(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(f),isDesktop:r(d)}},an=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},cn=function(n,t){var e=an(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return fn(r(1),r(2))},sn=function(n,t){var e=String(t).toLowerCase();return 0===n.length?ln():cn(n,e)},ln=function(){return fn(0,0)},fn=function(n,t){return{major:n,minor:t}},dn={nu:fn,detect:sn,unknown:ln},mn=function(n,t){var e=String(t).toLowerCase();return j(n,(function(n){return n.search(e)}))},gn=function(n,t){return mn(n,t).map((function(n){var e=dn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},pn=function(n,t){return mn(n,t).map((function(n){var e=dn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},vn={detectBrowser:gn,detectOs:pn},hn=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},bn=function(n,t){return-1!==n.indexOf(t)},yn=function(n,t){return hn(n,t,0)},xn=function(n,t){return hn(n,t,n.length-t.length)},wn=function(n){return function(t){return t.replace(n,"")}},Cn=wn(/^\s+|\s+$/g),Sn=function(n){return n.length>0},kn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,On=function(n){return function(t){return bn(t,n)}},Tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return bn(n,"edge/")&&bn(n,"chrome")&&bn(n,"safari")&&bn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kn],search:function(n){return bn(n,"chrome")&&!bn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return bn(n,"msie")||bn(n,"trident")}},{name:"Opera",versionRegexes:[kn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:On("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:On("firefox")},{name:"Safari",versionRegexes:[kn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(bn(n,"safari")||bn(n,"mobile/"))&&bn(n,"applewebkit")}}],Dn=[{name:"Windows",search:On("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return bn(n,"iphone")||bn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:On("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:On("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:On("linux"),versionRegexes:[]},{name:"Solaris",search:On("sunos"),versionRegexes:[]},{name:"FreeBSD",search:On("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:On("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_n={browsers:r(Tn),oses:r(Dn)},An="Edge",En="Chrome",Rn="IE",Bn="Opera",Mn="Firefox",In="Safari",Nn=function(){return Pn({current:void 0,version:dn.unknown()})},Pn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(An),isChrome:r(En),isIE:r(Rn),isOpera:r(Bn),isFirefox:r(Mn),isSafari:r(In)}},Fn={unknown:Nn,nu:Pn,edge:r(An),chrome:r(En),ie:r(Rn),opera:r(Bn),firefox:r(Mn),safari:r(In)},Ln="Windows",Hn="iOS",zn="Android",Vn="Linux",Un="OSX",jn="Solaris",Wn="FreeBSD",Gn="ChromeOS",qn=function(){return Xn({current:void 0,version:dn.unknown()})},Xn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(Ln),isiOS:r(Hn),isAndroid:r(zn),isOSX:r(Un),isLinux:r(Vn),isSolaris:r(jn),isFreeBSD:r(Wn),isChromeOS:r(Gn)}},Kn={unknown:qn,nu:Xn,windows:r(Ln),ios:r(Hn),android:r(zn),linux:r(Vn),osx:r(Un),solaris:r(jn),freebsd:r(Wn),chromeos:r(Gn)},Yn=function(n,t){var e=_n.browsers(),r=_n.oses(),o=vn.detectBrowser(e,n).fold(Fn.unknown,Fn.nu),i=vn.detectOs(r,n).fold(Kn.unknown,Kn.nu),u=un(i,o,n,t);return{browser:o,os:i,deviceType:u}},$n={detect:Yn},Jn=function(n){return window.matchMedia(n).matches},Qn=on((function(){return $n.detect(navigator.userAgent,Jn)})),Zn=function(){return Qn()},nt=function(n,t,e){return 0!==(n.compareDocumentPosition(t)&e)},tt=function(n,t){return nt(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},et=8,rt=9,ot=11,it=1,ut=3,at=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return lt(r.childNodes[0])},ct=function(n,t){var e=t||document,r=e.createElement(n);return lt(r)},st=function(n,t){var e=t||document,r=e.createTextNode(n);return lt(r)},lt=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},ft=function(n,t,e){return g.from(n.dom.elementFromPoint(t,e)).map(lt)},dt={fromHtml:at,fromTag:ct,fromText:st,fromDom:lt,fromPoint:ft},mt=function(n,t){var e=n.dom;if(e.nodeType!==it)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},gt=function(n){return n.nodeType!==it&&n.nodeType!==rt&&n.nodeType!==ot||0===n.childElementCount},pt=function(n,t){var e=void 0===t?document:t.dom;return gt(e)?[]:N(e.querySelectorAll(n),dt.fromDom)},vt=function(n,t){var e=void 0===t?document:t.dom;return gt(e)?g.none():g.from(e.querySelector(n)).map(dt.fromDom)},ht=function(n,t){return n.dom===t.dom},bt=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},yt=function(n,t){return tt(n.dom,t.dom)},xt=function(n,t){return Zn().browser.isIE()?yt(n,t):bt(n,t)},wt=mt,Ct=Object.keys,St=Object.hasOwnProperty,kt=function(n,t){for(var e=Ct(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];t(u,i)}},Ot=function(n,t){return Tt(n,(function(n,e){return{k:e,v:t(n,e)}}))},Tt=function(n,t){var e={};return kt(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},Dt=function(n){return function(t,e){n[e]=t}},_t=function(n,t,e,r){var o={};return kt(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},At=function(t,e){var r={};return _t(t,e,Dt(r),n),r},Et=function(n,t){var e=[];return kt(n,(function(n,r){e.push(t(n,r))})),e},Rt=function(n){return Et(n,(function(n){return n}))},Bt=function(n){return Ct(n).length},Mt=function(n,t){return It(n,t)?g.from(n[t]):g.none()},It=function(n,t){return St.call(n,t)},Nt=function(n,t){return It(n,t)&&void 0!==n[t]&&null!==n[t]},Pt=function(n){for(var t in n)if(St.call(n,t))return!1;return!0},Ft=["tfoot","thead","tbody","colgroup"],Lt=function(n){return B(Ft,n)},Ht=function(n,t){return{rows:n,columns:t}},zt=function(n,t){return{row:n,column:t}},Vt=function(n,t,e){return{element:n,rowspan:t,colspan:e}},Ut=function(n,t,e,r){return{element:n,rowspan:t,colspan:e,isNew:r}},jt=function(n,t,e,r,o,i){return{element:n,rowspan:t,colspan:e,row:r,column:o,isLocked:i}},Wt=function(n,t,e){return{element:n,cells:t,section:e}},Gt=function(n,t,e){return{element:n,isNew:t,isLocked:e}},qt=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},Xt=function(n,t){return{cells:n,section:t}},Kt=function(n,t){return{details:n,section:t}},Yt=function(n,t,e,r){return{startRow:n,startCol:t,finishRow:e,finishCol:r}},$t=function(n,t,e){return{element:n,colspan:t,column:e}},Jt=("undefined"!==typeof window?window:Function("return this;")(),function(n){var t=n.dom.nodeName;return t.toLowerCase()}),Qt=function(n){return n.dom.nodeType},Zt=function(n){return function(t){return Qt(t)===n}},ne=function(n){return Qt(n)===et||"#comment"===Jt(n)},te=Zt(it),ee=Zt(ut),re=Zt(rt),oe=Zt(ot),ie=function(n){return function(t){return te(t)&&Jt(t)===n}},ue=function(n){return dt.fromDom(n.dom.ownerDocument)},ae=function(n){return re(n)?n:ue(n)},ce=function(n){return dt.fromDom(ae(n).dom.defaultView)},se=function(n){return g.from(n.dom.parentNode).map(dt.fromDom)},le=function(n,t){var e=T(t)?t:c,r=n.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var i=r.parentNode,u=dt.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o},fe=function(n){return g.from(n.dom.offsetParent).map(dt.fromDom)},de=function(n){return g.from(n.dom.previousSibling).map(dt.fromDom)},me=function(n){return g.from(n.dom.nextSibling).map(dt.fromDom)},ge=function(n){return N(n.dom.childNodes,dt.fromDom)},pe=function(n,t){var e=n.dom.childNodes;return g.from(e[t]).map(dt.fromDom)},ve=function(n){return pe(n,0)},he=function(n){return oe(n)&&O(n.dom.host)},be=T(Element.prototype.attachShadow)&&T(Node.prototype.getRootNode),ye=r(be),xe=be?function(n){return dt.fromDom(n.dom.getRootNode())}:ae,we=function(n){var t=xe(n);return he(t)?g.some(t):g.none()},Ce=function(n){return dt.fromDom(n.dom.host)},Se=function(n){if(ye()&&O(n.target)){var t=dt.fromDom(n.target);if(te(t)&&ke(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return Z(e)}}return g.from(n.target)},ke=function(n){return O(n.dom.shadowRoot)},Oe=function(n){var t=ee(n)?n.dom.parentNode:n.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var r=t.ownerDocument;return we(dt.fromDom(t)).fold((function(){return r.body.contains(t)}),e(Oe,Ce))},Te=function(){return De(dt.fromDom(document))},De=function(n){var t=n.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return dt.fromDom(t)},_e=function(n,t,e){return H(le(n,e),t)},Ae=function(n,t){return H(ge(n),t)},Ee=function(n,t){var e=[];return P(ge(n),(function(n){t(n)&&(e=e.concat([n])),e=e.concat(Ee(n,t))})),e},Re=function(n,t,e){return _e(n,(function(n){return mt(n,t)}),e)},Be=function(n,t){return Ae(n,(function(n){return mt(n,t)}))},Me=function(n,t){return pt(t,n)};function Ie(n,t,e,r,o){return n(e,r)?g.some(e):T(o)&&o(e)?g.none():t(e,r,o)}var Ne=function(n,t,e){var r=n.dom,o=T(e)?e:c;while(r.parentNode){r=r.parentNode;var i=dt.fromDom(r);if(t(i))return g.some(i);if(o(i))break}return g.none()},Pe=function(n,t,e){var r=function(n,t){return t(n)};return Ie(r,Ne,n,t,e)},Fe=function(n,t){var e=function(n){return t(dt.fromDom(n))},r=j(n.dom.childNodes,e);return r.map(dt.fromDom)},Le=function(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=dt.fromDom(n.childNodes[r]);if(t(o))return g.some(o);var i=e(n.childNodes[r]);if(i.isSome())return i}return g.none()};return e(n.dom)},He=function(n,t,e){return Ne(n,(function(n){return mt(n,t)}),e)},ze=function(n,t){return Fe(n,(function(n){return mt(n,t)}))},Ve=function(n,t){return vt(t,n)},Ue=function(n,t,e){var r=function(n,t){return mt(n,t)};return Ie(r,He,n,t,e)},je=function(n,t,e){if(!(y(e)||C(e)||D(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},We=function(n,t,e){je(n.dom,t,e)},Ge=function(n,t){var e=n.dom;kt(t,(function(n,t){je(e,t,n)}))},qe=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},Xe=function(n,t){return g.from(qe(n,t))},Ke=function(n,t){n.dom.removeAttribute(t)},Ye=function(n){return V(n.dom.attributes,(function(n,t){return n[t.name]=t.value,n}),{})},$e=function(n){return void 0!==n.style&&T(n.style.getPropertyValue)},Je=function(n,t,e){if(!y(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);$e(n)&&n.style.setProperty(t,e)},Qe=function(n,t){$e(n)&&n.style.removeProperty(t)},Ze=function(n,t,e){var r=n.dom;Je(r,t,e)},nr=function(n,t){var e=n.dom;kt(t,(function(n,t){Je(e,t,n)}))},tr=function(n,t){var e=n.dom,r=window.getComputedStyle(e),o=r.getPropertyValue(t);return""!==o||Oe(n)?o:er(e,t)},er=function(n,t){return $e(n)?n.style.getPropertyValue(t):""},rr=function(n,t){var e=n.dom,r=er(e,t);return g.from(r).filter((function(n){return n.length>0}))},or=function(n,t){var e=n.dom;Qe(e,t),Xe(n,"style").map(Cn).is("")&&Ke(n,"style")},ir=function(n,t){var e=n.dom,r=t.dom;$e(e)&&$e(r)&&(r.style.cssText=e.style.cssText)},ur=function(n,t,e){return void 0===e&&(e=0),Xe(n,t).map((function(n){return parseInt(n,10)})).getOr(e)},ar=function(n,t){return ur(n,t,1)},cr=function(n){return ar(n,"colspan")>1},sr=function(n){return ar(n,"rowspan")>1},lr=function(n,t){return parseInt(tr(n,t),10)},fr=r(10),dr=r(10),mr=function(n,t){return gr(n,t,s)},gr=function(n,t,e){return q(ge(n),(function(n){return mt(n,t)?e(n)?[n]:[]:gr(n,t,e)}))},pr=function(n,t,e){if(void 0===e&&(e=c),e(t))return g.none();if(B(n,Jt(t)))return g.some(t);var r=function(n){return mt(n,"table")||e(n)};return He(t,n.join(","),r)},vr=function(n,t){return pr(["td","th"],n,t)},hr=function(n){return mr(n,"th,td")},br=function(n){return mt(n,"colgroup")?Be(n,"col"):q(wr(n),(function(n){return Be(n,"col")}))},yr=function(n,t){return Ue(n,"table",t)},xr=function(n){return mr(n,"tr")},wr=function(n){return yr(n).fold(r([]),(function(n){return Be(n,"colgroup")}))},Cr=function(n,t){return N(n,(function(n){if("colgroup"===Jt(n)){var e=N(br(n),(function(n){var t=ur(n,"span",1);return Vt(n,1,t)}));return Wt(n,e,"colgroup")}e=N(hr(n),(function(n){var t=ur(n,"rowspan",1),e=ur(n,"colspan",1);return Vt(n,t,e)}));return Wt(n,e,t(n))}))},Sr=function(n){return se(n).map((function(n){var t=Jt(n);return Lt(t)?t:"tbody"})).getOr("tbody")},kr=function(n){var t=xr(n),e=wr(n),r=rn(e,t);return Cr(r,Sr)},Or=function(n,t){return Cr(n,(function(){return t}))},Tr=function(n,t,e){var r=n.cells,o=r.slice(0,t),i=r.slice(t),u=o.concat(e).concat(i);return Ar(n,u)},Dr=function(n,t,e){return Tr(n,t,[e])},_r=function(n,t,e){var r=n.cells;r[t]=e},Ar=function(n,t){return Xt(t,n.section)},Er=function(n,t){var e=n.cells,r=N(e,t);return Xt(r,n.section)},Rr=function(n,t){return n.cells[t]},Br=function(n,t){return Rr(n,t).element},Mr=function(n){return n.cells.length},Ir=function(n){var t=L(n,(function(n){return"colgroup"===n.section}));return{rows:t.fail,cols:t.pass}},Nr="data-snooker-locked-cols",Pr=function(n){return Xe(n,Nr).bind((function(n){return g.from(n.match(/\d+/g))})).map((function(n){return Y(n,s)}))},Fr=function(n){var t=V(Ir(n).rows,(function(n,t){return P(t.cells,(function(t,e){t.isLocked&&(n[e]=!0)})),n}),{}),e=Et(t,(function(n,t){return parseInt(t,10)}));return J(e)},Lr=function(n,t){return n+","+t},Hr=function(n,t,e){var r=n.access[Lr(t,e)];return void 0!==r?g.some(r):g.none()},zr=function(n,t,e){var r=Vr(n,(function(n){return e(t,n.element)}));return r.length>0?g.some(r[0]):g.none()},Vr=function(n,t){var e=q(n.all,(function(n){return n.cells}));return H(e,t)},Ur=function(n){var t={},e=0;return P(n.cells,(function(n){var r=n.colspan;I(r,(function(o){var i=e+o;t[i]=$t(n.element,r,i)})),e+=r})),t},jr=function(n){var t={},e=[],r={},o=Z(n).map((function(n){return n.element})).bind(yr),i=o.bind(Pr).getOr({}),u=0,a=0,c=0;P(n,(function(n){if("colgroup"===n.section)r=Ur(n);else{var o=[];P(n.cells,(function(n){var e=0;while(void 0!==t[Lr(c,e)])e++;for(var r=Nt(i,e.toString()),u=jt(n.element,n.rowspan,n.colspan,c,e,r),s=0;s<n.colspan;s++)for(var l=0;l<n.rowspan;l++){var f=c+l,d=e+s,m=Lr(f,d);t[m]=u,a=Math.max(a,d+1)}o.push(u)})),u++,e.push(Wt(n.element,o,n.section)),c++}}));var s=Ht(u,a);return{grid:s,access:t,all:e,columns:r}},Wr=function(n){var t=kr(n);return jr(t)},Gr=function(n){return q(n.all,(function(n){return n.cells}))},qr=function(n){return Rt(n.columns)},Xr=function(n){return Ct(n.columns).length>0},Kr=function(n,t){return g.from(n.columns[t])},Yr={fromTable:Wr,generate:jr,getAt:Hr,findItem:zr,filterItems:Vr,justCells:Gr,justColumns:qr,hasColumns:Xr,getColumnAt:Kr},$r=function(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,i=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&i>=n.startRow},Jr=function(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow},Qr=function(n,t){for(var e=!0,r=i(Jr,t),o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)e=e&&Yr.getAt(n,o,u).exists(r);return e?g.some(t):g.none()},Zr=function(n,t){return Yt(Math.min(n.row,t.row),Math.min(n.column,t.column),Math.max(n.row+n.rowspan-1,t.row+t.rowspan-1),Math.max(n.column+n.colspan-1,t.column+t.colspan-1))},no=function(n,t,e){var r=Yr.findItem(n,t,ht),o=Yr.findItem(n,e,ht);return r.bind((function(n){return o.map((function(t){return Zr(n,t)}))}))},to=function(n,t,e){return no(n,t,e).bind((function(t){return Qr(n,t)}))},eo=function(n,t,e,r){return Yr.findItem(n,t,ht).bind((function(t){var o=e>0?t.row+t.rowspan-1:t.row,i=r>0?t.column+t.colspan-1:t.column,u=Yr.getAt(n,o+e,i+r);return u.map((function(n){return n.element}))}))},ro=function(n,t,e){return no(n,t,e).map((function(t){var e=Yr.filterItems(n,i($r,t));return N(e,(function(n){return n.element}))}))},oo=function(n,t){var e=function(n,t){return xt(t,n)};return Yr.findItem(n,t,e).map((function(n){return n.element}))},io=function(n,t,e){return yr(n).bind((function(r){var o=so(r);return eo(o,n,t,e)}))},uo=function(n,t,e){var r=so(n);return ro(r,t,e)},ao=function(n,t,e,r,o){var i=so(n),u=ht(n,e)?g.some(t):oo(i,t),a=ht(n,o)?g.some(r):oo(i,r);return u.bind((function(n){return a.bind((function(t){return ro(i,n,t)}))}))},co=function(n,t,e){var r=so(n);return to(r,t,e)},so=Yr.fromTable,lo=function(n,t){var e=se(n);e.each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},fo=function(n,t){var e=me(n);e.fold((function(){var e=se(n);e.each((function(n){go(n,t)}))}),(function(n){lo(n,t)}))},mo=function(n,t){var e=ve(n);e.fold((function(){go(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},go=function(n,t){n.dom.appendChild(t.dom)},po=function(n,t){lo(n,t),go(t,n)},vo=function(n,t){P(t,(function(t){lo(n,t)}))},ho=function(n,t){P(t,(function(e,r){var o=0===r?n:t[r-1];fo(o,e)}))},bo=function(n,t){P(t,(function(t){go(n,t)}))},yo=function(n){n.dom.textContent="",P(ge(n),(function(n){xo(n)}))},xo=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},wo=function(n){var t=ge(n);t.length>0&&vo(n,t),xo(n)},Co=function(n,t){var e=function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return r(e).getOr("")},r=function(t){return n(t)?g.from(t.dom.nodeValue):g.none()},o=function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r};return{get:e,getOption:r,set:o}},So=Co(ee,"text"),ko=function(n){return So.get(n)},Oo=function(n){return So.getOption(n)},To=function(n,t){return So.set(n,t)},Do=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function _o(){var n=function(n){return dt.fromDom(n.dom.cloneNode(!1))},t=function(n){return ae(n).dom},e=function(n){return!!te(n)&&("body"===Jt(n)||B(Do,Jt(n)))},o=function(n){return!!te(n)&&B(["br","img","hr","input"],Jt(n))},i=function(n){return te(n)&&"false"===qe(n,"contenteditable")},u=function(n,t){return n.dom.compareDocumentPosition(t.dom)},a=function(n,t){var e=Ye(n);Ge(t,e)},c=function(n){var t=Jt(n);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)};return{up:r({selector:He,closest:Ue,predicate:Ne,all:le}),down:r({selector:Me,predicate:Ee}),styles:r({get:tr,getRaw:rr,set:Ze,remove:or}),attrs:r({get:qe,set:We,remove:Ke,copyTo:a}),insert:r({before:lo,after:fo,afterAll:ho,append:go,appendAll:bo,prepend:mo,wrap:po}),remove:r({unwrap:wo,remove:xo}),create:r({nu:dt.fromTag,clone:n,text:dt.fromText}),query:r({comparePosition:u,prevSibling:de,nextSibling:me}),property:r({children:ge,name:Jt,parent:se,document:t,isText:ee,isComment:ne,isElement:te,isSpecial:c,getText:ko,setText:To,isBoundary:e,isEmptyTag:o,isNonEditable:i}),eq:ht,is:wt}}var Ao=function(n,t,e,r){var o=e[0],i=e.slice(1);return r(n,t,o,i)},Eo=function(n,t,e){return e.length>0?Ao(n,t,e,Ro):g.none()},Ro=function(n,t,e,r){var o=t(n,e);return z(r,(function(e,r){var o=t(n,r);return Bo(n,e,o)}),o)},Bo=function(n,t,e){return t.bind((function(t){return e.filter(i(n.eq,t))}))},Mo=function(n,t){return i(n.eq,t)},Io=function(n,t,e,r){void 0===r&&(r=c);var o=[t].concat(n.up().all(t)),i=[e].concat(n.up().all(e)),u=function(n){var t=W(n,r);return t.fold((function(){return n}),(function(t){return n.slice(0,t+1)}))},a=u(o),s=u(i),l=j(a,(function(t){return M(s,Mo(n,t))}));return{firstpath:a,secondpath:s,shared:l}},No=Eo,Po=Io,Fo=_o(),Lo=function(n,t){return No(Fo,(function(t,e){return n(e)}),t)},Ho=function(n,t,e){return Po(Fo,n,t,e)},zo=function(n){return He(n,"table")},Vo=function(n,t,e){var r=function(n){return function(t){return void 0!==e&&e(t)||ht(t,n)}};return ht(n,t)?g.some({boxes:g.some([n]),start:n,finish:t}):zo(n).bind((function(o){return zo(t).bind((function(i){if(ht(o,i))return g.some({boxes:uo(o,n,t),start:n,finish:t});if(xt(o,i)){var u=Re(t,"td,th",r(o)),a=u.length>0?u[u.length-1]:t;return g.some({boxes:ao(o,n,o,t,i),start:n,finish:a})}if(xt(i,o)){u=Re(n,"td,th",r(i));var c=u.length>0?u[u.length-1]:n;return g.some({boxes:ao(i,n,o,t,i),start:n,finish:c})}return Ho(n,t).shared.bind((function(u){return Ue(u,"table",e).bind((function(e){var u=Re(t,"td,th",r(e)),a=u.length>0?u[u.length-1]:t,c=Re(n,"td,th",r(e)),s=c.length>0?c[c.length-1]:n;return g.some({boxes:ao(e,n,o,t,i),start:s,finish:a})}))}))}))}))},Uo=function(n,t){var e=Me(n,t);return e.length>0?g.some(e):g.none()},jo=function(n,t){return j(n,(function(n){return mt(n,t)}))},Wo=function(n,t,e){return Ve(n,t).bind((function(t){return Ve(n,e).bind((function(n){return Lo(zo,[t,n]).map((function(e){return{first:t,last:n,table:e}}))}))}))},Go=function(n,t){return He(n,"table").bind((function(e){return Ve(e,t).bind((function(t){return Vo(t,n).bind((function(n){return n.boxes.map((function(t){return{boxes:t,start:n.start,finish:n.finish}}))}))}))}))},qo=function(n,t,e,r,o){return jo(n,o).bind((function(n){return io(n,t,e).bind((function(n){return Go(n,r)}))}))},Xo=function(n,t){return Uo(n,t)},Ko=function(n,t,e){return Wo(n,t,e).bind((function(t){var e=function(t){return ht(n,t)},r="thead,tfoot,tbody,table",o=He(t.first,r,e),i=He(t.last,r,e);return o.bind((function(n){return i.bind((function(e){return ht(n,e)?co(t.table,t.first,t.last):g.none()}))}))}))},Yo=function(n){if(!w(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return P(n,(function(r,o){var i=Ct(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=r[u];if(void 0!==e[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!w(a))throw new Error("case arguments must be an array");t.push(u),e[u]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i);var c=function(n){var r=Ct(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));var o=X(t,(function(n){return B(r,n)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[u].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var i=t[o];return i.apply(null,e)},match:c,log:function(n){console.log(n,{constructors:t,constructor:u,params:e})}}}})),e},$o={generate:Yo},Jo=$o.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),Qo=function(n,t,e,r){return n.fold(t,e,r)},Zo=Jo.none,ni=Jo.multiple,ti=Jo.single,ei=function(n,t,e){var r=function(){return Xo(n(),e).fold((function(){return t().map(ti).getOrThunk(Zo)}),(function(n){return ni(n)}))};return{get:r}},ri=tinymce.util.Tools.resolve("tinymce.PluginManager"),oi=function(n,t){return dt.fromDom(n.dom.cloneNode(t))},ii=function(n){return oi(n,!1)},ui=function(n){return oi(n,!0)},ai=function(n,t){var e=dt.fromTag(t),r=Ye(n);return Ge(e,r),e},ci=function(n,t){var e=ai(n,t),r=ge(ui(n));return bo(e,r),e},si=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},li=function(n,t,e){return n.isSome()&&t.isSome()?g.some(e(n.getOrDie(),t.getOrDie())):g.none()},fi=function(n,t){return void 0!==n&&null!==n?t(n):g.none()},di=function(n,t){return n?g.some(t):g.none()},mi=function(n,t){var e=function(t,e){if(!D(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;$e(r)&&(r.style[n]=e+"px")},r=function(e){var r=t(e);if(r<=0||null===r){var o=tr(e,n);return parseFloat(o)||0}return r},o=r,i=function(n,t){return V(t,(function(t,e){var r=tr(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)},u=function(n,t,e){var r=i(n,e),o=t>r?t-r:0;return o};return{set:e,get:r,getOuter:o,aggregate:i,max:u}},gi=mi("width",(function(n){return n.dom.offsetWidth})),pi=function(n){return gi.get(n)},vi=function(n){return gi.getOuter(n)},hi=function(n,t){void 0===t&&(t=s);var e=n.grid,r=I(e.columns,o),i=I(e.rows,o);return N(r,(function(e){var r=function(){return q(i,(function(t){return Yr.getAt(n,t,e).filter((function(n){return n.column===e})).toArray()}))},o=function(n){return 1===n.colspan&&t(n.element)},u=function(){return Yr.getAt(n,0,e)};return bi(r,o,u)}))},bi=function(n,t,e){var r=n(),o=j(r,t),i=o.orThunk((function(){return g.from(r[0]).orThunk(e)}));return i.map((function(n){return n.element}))},yi=function(n){var t=n.grid,e=I(t.rows,o),i=I(t.columns,o);return N(e,(function(t){var e=function(){return q(i,(function(e){return Yr.getAt(n,t,e).filter((function(n){return n.row===t})).fold(r([]),(function(n){return[n]}))}))},o=function(n){return 1===n.rowspan},u=function(){return Yr.getAt(n,t,0)};return bi(e,o,u)}))},xi=function(n,t){if(t<0||t>=n.length-1)return g.none();var e=n[t].fold((function(){var e=K(n.slice(0,t));return tn(e,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return g.some({value:n,delta:0})})),r=n[t+1].fold((function(){var e=n.slice(t+1);return tn(e,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return g.some({value:n,delta:1})}));return e.bind((function(n){return r.map((function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e}))}))},wi=function(n,t){return function(e){return"rtl"===Ci(e)?t:n}},Ci=function(n){return"rtl"===tr(n,"direction")?"rtl":"ltr"},Si=mi("height",(function(n){var t=n.dom;return Oe(n)?t.getBoundingClientRect().height:t.offsetHeight})),ki=function(n){return Si.get(n)},Oi=function(n){return Si.getOuter(n)},Ti=function(n,t){var e=function(e,r){return Ti(n+e,t+r)};return{left:n,top:t,translate:e}},Di=Ti,_i=function(n){var t=n.getBoundingClientRect();return Di(t.left,t.top)},Ai=function(n,t){return void 0!==n?n:void 0!==t?t:0},Ei=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return Di(e.offsetLeft,e.offsetTop);var i=Ai(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),u=Ai(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),a=Ai(o.clientTop,e.clientTop),c=Ai(o.clientLeft,e.clientLeft);return Ri(n).translate(u-c,i-a)},Ri=function(n){var t=n.dom,e=t.ownerDocument,r=e.body;return r===t?Di(r.offsetLeft,r.offsetTop):Oe(n)?_i(t):Di(0,0)},Bi=function(n,t){return{row:n,y:t}},Mi=function(n,t){return{col:n,x:t}},Ii=function(n){var t=Ei(n);return t.left+vi(n)},Ni=function(n){return Ei(n).left},Pi=function(n,t){return Mi(n,Ni(t))},Fi=function(n,t){return Mi(n,Ii(t))},Li=function(n){return Ei(n).top},Hi=function(n,t){return Bi(n,Li(t))},zi=function(n,t){return Bi(n,Li(t)+Oi(t))},Vi=function(n,t,e){if(0===e.length)return[];var r=N(e.slice(1),(function(t,e){return t.map((function(t){return n(e,t)}))})),o=e[e.length-1].map((function(n){return t(e.length-1,n)}));return r.concat([o])},Ui=function(n){return-n},ji={delta:o,positions:function(n){return Vi(Hi,zi,n)},edge:Li},Wi={delta:o,edge:Ni,positions:function(n){return Vi(Pi,Fi,n)}},Gi={delta:Ui,edge:Ii,positions:function(n){return Vi(Fi,Pi,n)}},qi=wi(Wi,Gi),Xi={delta:function(n,t){return qi(t).delta(n,t)},positions:function(n,t){return qi(t).positions(n,t)},edge:function(n){return qi(n).edge(n)}},Ki={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Yi=function(){var n="[0-9]+",t="[+-]?"+n,e="[eE]"+t,r="\\.",o=function(n){return"(?:"+n+")?"},i=["Infinity",n+r+o(n)+o(e),r+n+o(e),n+o(e)].join("|"),u="[+-]?(?:"+i+")";return new RegExp("^("+u+")(.*)$")}(),$i=function(n,t){return M(t,(function(t){return M(Ki[t],(function(t){return n===t}))}))},Ji=function(n,t){var e=g.from(Yi.exec(n));return e.bind((function(n){var e=Number(n[1]),r=n[2];return $i(r,t)?g.some({value:e,unit:r}):g.none()}))},Qi=function(){var n=Zn().browser;return n.isIE()||n.isEdge()},Zi=function(n,t){var e=parseFloat(n);return isNaN(e)?t:e},nu=function(n,t,e){return Zi(tr(n,t),e)},tu=function(n){var t=n.dom.getBoundingClientRect().height,e=tr(n,"box-sizing");if("border-box"===e)return t;var r=nu(n,"padding-top",0),o=nu(n,"padding-bottom",0),i=nu(n,"border-top-width",0),u=nu(n,"border-bottom-width",0),a=i+u;return t-r-o-a},eu=function(n){var t=n.dom.getBoundingClientRect().width,e=tr(n,"box-sizing");if("border-box"===e)return t;var r=nu(n,"padding-left",0),o=nu(n,"padding-right",0),i=nu(n,"border-left-width",0),u=nu(n,"border-right-width",0),a=i+u;return t-r-o-a},ru=function(n){return Qi()?tu(n):nu(n,"height",ki(n))},ou=function(n){return Qi()?eu(n):nu(n,"width",pi(n))},iu=/(\d+(\.\d+)?)%/,uu=/(\d+(\.\d+)?)px|em/,au=function(n,t){var e=fe(n).getOr(De(ue(n)));return t(n)/t(e)*100},cu=function(n,t){Ze(n,"width",t+"px")},su=function(n,t){Ze(n,"width",t+"%")},lu=function(n,t){Ze(n,"height",t+"px")},fu=function(n){return rr(n,"height").getOrThunk((function(){return ru(n)+"px"}))},du=function(n,t,e,r){var o=yr(n).map((function(n){var r=e(n);return Math.floor(t/100*r)})).getOr(t);return r(n,o),o},mu=function(n,t,e,r){var o=parseInt(n,10);return xn(n,"%")&&"table"!==Jt(t)?du(t,o,e,r):o},gu=function(n){var t=fu(n);return t?mu(t,n,ki,lu):ki(n)},pu=function(n,t,e){var r=e(n),o=ar(n,t);return r/o},vu=function(n){var t=rr(n,"width");return t.fold((function(){return g.from(qe(n,"width"))}),(function(n){return g.some(n)}))},hu=function(n,t){return n/t.pixelWidth()*100},bu=function(n,t,e){var r=iu.exec(t);if(null!==r)return parseFloat(r[1]);var o=ou(n);return hu(o,e)},yu=function(n,t){var e=vu(n);return e.fold((function(){var e=pi(n);return hu(e,t)}),(function(e){return bu(n,e,t)}))},xu=function(n,t){return n/100*t.pixelWidth()},wu=function(n,t,e){var r=uu.exec(t);if(null!==r)return parseInt(r[1],10);var o=iu.exec(t);if(null!==o){var i=parseFloat(o[1]);return xu(i,e)}return ou(n)},Cu=function(n,t){var e=vu(n);return e.fold((function(){return ou(n)}),(function(e){return wu(n,e,t)}))},Su=function(n){return pu(n,"rowspan",gu)},ku=function(n){var t=vu(n);return t.bind((function(n){return Ji(n,["fixed","relative","empty"])}))},Ou=function(n,t,e){Ze(n,"width",t+e)},Tu=function(n){return pi(n)+"px"},Du=function(n){return au(n,pi)+"%"},_u=function(n){return vu(n).exists((function(n){return iu.test(n)}))},Au=function(n){return vu(n).exists((function(n){return uu.test(n)}))},Eu=function(n){return vu(n).isNone()},Ru=r(iu),Bu=r(uu),Mu=ie("col"),Iu=function(n,t,e){return rr(n,t).fold((function(){return e(n)+"px"}),(function(n){return n}))},Nu=function(n,t){var e=function(n){return Mu(n)?pi(n):Cu(n,t)};return Iu(n,"width",e)},Pu=function(n){return Iu(n,"height",Su)},Fu=function(n){return N(Yr.justColumns(n),(function(n){return g.from(n.element)}))},Lu=function(n,t){return rr(n,t).isSome()},Hu=function(n){return!Mu(n)||Lu(n,"width")},zu=function(n,t,e,r,o,i){return n.filter(r).fold((function(){return i(xi(e,t))}),(function(n){return o(n)}))},Vu=function(n,t,e,r,i){var a=hi(n,(function(n){return Lu(n,"width")})),c=Yr.hasColumns(n)?Fu(n):a,s=[g.some(Xi.edge(t))].concat(N(Xi.positions(a,t),(function(n){return n.map((function(n){return n.x}))}))),l=u(cr);return N(c,(function(n,t){return zu(n,t,s,l,(function(n){if(Hu(n))return e(n,i);var u=fi(a[t],o);return zu(u,t,s,l,(function(n){return r(g.some(pi(n)))}),r)}),r)}))},Uu=function(n){return n.map((function(n){return n+"px"})).getOr("")},ju=function(n,t,e){return Vu(n,t,Nu,Uu,e)},Wu=function(n,t,e){return Vu(n,t,yu,(function(n){return n.fold((function(){return e.minCellWidth()}),(function(n){return n/e.pixelWidth()*100}))}),e)},Gu=function(n,t,e){return Vu(n,t,Cu,(function(n){return n.getOrThunk(e.minCellWidth)}),e)},qu=function(n,t,e,r,o){var i=yi(n),a=[g.some(e.edge(t))].concat(N(e.positions(i,t),(function(n){return n.map((function(n){return n.y}))})));return N(i,(function(n,t){return zu(n,t,a,u(sr),r,o)}))},Xu=function(n,t,e){return qu(n,t,e,Su,(function(n){return n.getOrThunk(dr)}))},Ku=function(n,t,e){return qu(n,t,e,Pu,Uu)},Yu=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},$u=function(t){var e=function(){return pi(t)},o=r(0),i=function(n,e){return Gu(n,t,e)};return{width:e,pixelWidth:e,getWidths:i,getCellDelta:o,singleColumnWidth:r([0]),minCellWidth:o,setElementWidth:n,adjustTableWidth:n,isRelative:!0,label:"none"}},Ju=function(n,t){var e=Yu(parseFloat(n)),r=Yu(pi(t)),o=function(n){return n/r.get()*100},i=function(n,t){return[100-n]},u=function(){return fr()/r.get()*100},a=function(n){var o=e.get(),i=n/100*o,u=o+i;su(t,u),e.set(u),r.set(pi(t))},c=function(n,e){return Wu(n,t,e)};return{width:e.get,pixelWidth:r.get,getWidths:c,getCellDelta:o,singleColumnWidth:i,minCellWidth:u,setElementWidth:su,adjustTableWidth:a,isRelative:!0,label:"percent"}},Qu=function(n,t){var e=Yu(n),r=e.get,i=o,u=function(n,t){var e=Math.max(fr(),n+t);return[e-n]},a=function(n){var o=r()+n;cu(t,o),e.set(o)},c=function(n,e){return Gu(n,t,e)};return{width:r,pixelWidth:r,getWidths:c,getCellDelta:i,singleColumnWidth:u,minCellWidth:fr,setElementWidth:cu,adjustTableWidth:a,isRelative:!1,label:"pixel"}},Zu=function(n,t){var e=Ru().exec(t);if(null!==e)return Ju(e[1],n);var r=Bu().exec(t);if(null!==r){var o=parseInt(r[1],10);return Qu(o,n)}var i=pi(n);return Qu(i,n)},na=function(n){var t=vu(n);return t.fold((function(){return $u(n)}),(function(t){return Zu(n,t)}))},ta={getTableSize:na,pixelSize:Qu,percentageSize:Ju,noneSize:$u},ea=function(n,t,e,r,o,i){return{minRow:n,minCol:t,maxRow:e,maxCol:r,allCells:o,selectedCells:i}},ra=function(n,t){var e=n.grid.columns,r=n.grid.rows,o=r,i=e,u=0,a=0,c=[],s=[];return kt(n.access,(function(n){if(c.push(n),t(n)){s.push(n);var e=n.row,r=e+n.rowspan-1,l=n.column,f=l+n.colspan-1;e<o?o=e:r>u&&(u=r),l<i?i=l:f>a&&(a=f)}})),ea(o,i,u,a,c,s)},oa=function(n,t,e){var r=n[e].element,o=dt.fromTag("td");go(o,dt.fromTag("br"));var i=t?go:mo;i(r,o)},ia=function(n,t,e,r){for(var o=t.grid.columns,i=t.grid.rows,u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)if(!(u<e.minRow||u>e.maxRow||c<e.minCol||c>e.maxCol)){var s=Yr.getAt(t,u,c).filter(r).isNone();s?oa(n,a,u):a=!0}},ua=function(n,t,e,r){kt(e.columns,(function(n){(n.column<t.minCol||n.column>t.maxCol)&&xo(n.element)}));var o=H(mr(n,"tr"),(function(n){return 0===n.dom.childElementCount}));P(o,xo),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||P(mr(n,"th,td"),(function(n){Ke(n,"rowspan"),Ke(n,"colspan")})),Ke(n,Nr),Ke(n,"data-snooker-col-series");var i=ta.getTableSize(n);i.adjustTableWidth(r)},aa=function(n,t,e,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;var o=Gu(t,n,e),i=V(o,(function(n,t){return n+t}),0),u=V(o.slice(r.minCol,r.maxCol+1),(function(n,t){return n+t}),0),a=u/i*e.pixelWidth(),c=a-e.pixelWidth();return e.getCellDelta(c)},ca=function(n,t){var e=function(n){return mt(n.element,t)},r=ui(n),o=kr(r),i=ta.getTableSize(n),u=Yr.generate(o),a=ra(u,e),c="th:not("+t+"),td:not("+t+")",s=gr(r,"th,td",(function(n){return mt(n,c)}));P(s,xo),ia(o,u,a,e);var l=Yr.fromTable(n),f=aa(n,l,i,a);return ua(r,a,u,f),r},sa="",la=function(n){return"img"===Jt(n)?1:Oo(n).fold((function(){return ge(n).length}),(function(n){return n.length}))},fa=function(n){return Oo(n).filter((function(n){return 0!==n.trim().length||n.indexOf(sa)>-1})).isSome()},da=["img","br"],ma=function(n){var t=fa(n);return t||B(da,Jt(n))},ga=function(n){return Le(n,ma)},pa=function(n){return va(n,ma)},va=function(n,t){var e=function(n){for(var r=ge(n),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return g.some(i);var u=e(i);if(u.isSome())return u}return g.none()};return e(n)},ha={scope:["row","col"]},ba=function(){var n=dt.fromTag("td");return go(n,dt.fromTag("br")),n},ya=function(){return dt.fromTag("col")},xa=function(){return dt.fromTag("colgroup")},wa=function(n,t,e){var r=ci(n,t);return kt(e,(function(n,t){null===n?Ke(r,t):We(r,t,n)})),r},Ca=function(n){return n},Sa=function(n){return function(){return dt.fromTag("tr",n.dom)}},ka=function(n,t,e){var r=ga(n);return r.map((function(r){var o=e.join(","),i=Re(r,o,(function(t){return ht(t,n)}));return z(i,(function(n,t){var e=ii(t);return Ke(e,"contenteditable"),go(n,e),e}),t)})).getOr(t)},Oa=function(n,t){kt(ha,(function(e,r){return Xe(n,r).filter((function(n){return B(e,n)})).each((function(n){return We(t,r,n)}))}))},Ta=function(n,t,e){var r=function(n,t){ir(n.element,t),or(t,"height"),1!==n.colspan&&or(t,"width")},o=function(t){var o=ue(t.element),i=dt.fromTag(Jt(t.element),o.dom),u=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=u.length>0?ka(t.element,i,u):i;return go(a,dt.fromTag("br")),r(t,i),Oa(t.element,i),n(t.element,i),i},i=function(t){var e=ue(t.element),o=dt.fromTag(Jt(t.element),e.dom);return r(t,o),n(t.element,o),o};return{col:i,colgroup:xa,row:Sa(t),cell:o,replace:wa,gap:ba}},Da=function(n){return{col:ya,colgroup:xa,row:Sa(n),cell:ba,replace:Ca,gap:ba}},_a=function(n,t){var e=t||document,r=e.createElement("div");return r.innerHTML=n,ge(dt.fromDom(r))},Aa=function(n){return N(n,dt.fromDom)},Ea=function(n){return n.nodeName.toLowerCase()},Ra=function(n){return dt.fromDom(n.getBody())},Ba=function(n){return n.getBoundingClientRect().width},Ma=function(n){return n.getBoundingClientRect().height},Ia=function(n){return function(t){return ht(t,Ra(n))}},Na=function(n){return n?n.replace(/px$/,""):""},Pa=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Fa=function(n){Ke(n,"data-mce-style");var t=function(n){return Ke(n,"data-mce-style")};P(hr(n),t),P(br(n),t)},La=function(n,t){var e=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width");return g.from(e).filter(Sn)},Ha=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},za=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},Va=function(n){return dt.fromDom(n.selection.getStart())},Ua=function(n){return Qo(n.get(),r([]),o,$)},ja=function(n){var t=function(n,t){return Xe(n,t).exists((function(n){return parseInt(n,10)>1}))},e=function(n){return t(n,"rowspan")||t(n,"colspan")},r=Ua(n);return r.length>0&&X(r,e)?g.some(r):g.none()},Wa=function(n,t,e){return Qo(t.get(),g.none,(function(t){return t.length<=1?g.none():Ko(n,e.firstSelectedSelector,e.lastSelectedSelector).map((function(n){return{bounds:n,cells:t}}))}),g.none)},Ga="data-mce-selected",qa="td["+Ga+"],th["+Ga+"]",Xa="["+Ga+"]",Ka="data-mce-first-selected",Ya="td["+Ka+"],th["+Ka+"]",$a="data-mce-last-selected",Ja="td["+$a+"],th["+$a+"]",Qa=Xa,Za={selected:Ga,selectedSelector:qa,firstSelected:Ka,firstSelectedSelector:Ya,lastSelected:$a,lastSelectedSelector:Ja},nc=function(n){return{element:n,mergable:g.none(),unmergable:g.none(),selection:[n]}},tc=function(n,t,e){return{element:e,mergable:Wa(t,n,Za),unmergable:ja(n),selection:Ua(n)}},ec=function(n,t,e){return{element:n,clipboard:t,generators:e}},rc=function(n,t,e,r){return{selection:Ua(n),clipboard:e,generators:r}},oc=function(n){return yr(n[0]).map((function(n){var t=ca(n,Qa);return Fa(t),[t]}))},ic=function(n,t){return N(t,(function(t){return n.selection.serializer.serialize(t.dom,{})})).join("")},uc=function(n){return N(n,(function(n){return n.dom.innerText})).join("")},ac=function(t,e,r,o){t.on("BeforeGetContent",(function(r){var o=function(n){r.preventDefault(),oc(n).each((function(n){r.content="text"===r.format?uc(n):ic(t,n)}))};!0===r.selection&&Qo(e.get(),n,o,n)})),t.on("BeforeSetContent",(function(n){if(!0===n.selection&&!0===n.paste){var e=g.from(t.dom.getParent(t.selection.getStart(),"th,td"));e.each((function(e){var i=dt.fromDom(e);yr(i).each((function(e){var u=H(_a(n.content),(function(n){return"meta"!==Jt(n)})),a=function(n){return"table"===Jt(n)};if(1===u.length&&a(u[0])){n.preventDefault();var c=dt.fromDom(t.getDoc()),s=Da(c),l=ec(i,u[0],s);r.pasteCells(e,l).each((function(n){t.selection.setRng(n.rng),t.focus(),o.clear(e)}))}}))}))}}))},cc=$o.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),sc=en({},cc),lc=function(n,t){return 0===n.length?sc.none():1===n.length?sc.only(0):0===t?sc.left(0,1):t===n.length-1?sc.right(t-1,t):t>0&&t<n.length-1?sc.middle(t-1,t,t+1):sc.none()},fc=function(n,t,e,o,i){var u=n.slice(0),a=lc(n,t),c=r(N(u,r(0))),s=function(n){return o.singleColumnWidth(u[n],e)},l=function(n,t){return i.calcLeftEdgeDeltas(u,n,t,e,o.minCellWidth(),o.isRelative)},f=function(n,t,r){return i.calcMiddleDeltas(u,n,t,r,e,o.minCellWidth(),o.isRelative)},d=function(n,t){return i.calcRightEdgeDeltas(u,n,t,e,o.minCellWidth(),o.isRelative)};return a.fold(c,s,l,f,d)},dc=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},mc=function(n,t){var e=Yr.justCells(n);return N(e,(function(n){var e=dc(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}}))},gc=function(n,t){var e=Yr.justColumns(n);return N(e,(function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}}))},pc=function(n,t){var e=Yr.justCells(n);return N(e,(function(n){var e=dc(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}}))},vc=function(n,t){return N(n.all,(function(n,e){return{element:n.element,height:t[e]}}))},hc=function(n){return z(n,(function(n,t){return n+t}),0)},bc=function(n,t){return Yr.hasColumns(n)?gc(n,t):mc(n,t)},yc=function(n,t,e){var r=bc(n,t);P(r,(function(n){e.setElementWidth(n.element,n.width)}))},xc=function(n,t,e,r,o){var i=Yr.fromTable(n),u=o.getCellDelta(t),a=o.getWidths(i,o),c=e===i.grid.columns-1,s=r.clampTableDelta(a,e,u,o.minCellWidth(),c),l=fc(a,e,s,o,r),f=N(l,(function(n,t){return n+a[t]}));yc(i,f,o),r.resizeTable(o.adjustTableWidth,s,c)},wc=function(n,t,e,r){var o=Yr.fromTable(n),i=Xu(o,n,r),u=N(i,(function(n,r){return e===r?Math.max(t+n,dr()):n})),a=pc(o,u),c=vc(o,u);P(c,(function(n){lu(n.element,n.height)})),P(a,(function(n){lu(n.element,n.height)}));var s=hc(u);lu(n,s)},Cc=function(n,t,e,r,o){var i=Yr.generate(t),u=r.getWidths(i,r),a=r.pixelWidth(),c=o.calcRedestributedWidths(u,a,e.pixelDelta,r.isRelative),s=c.newSizes,l=c.delta;yc(i,s,r),r.adjustTableWidth(l)},Sc=function(n,t,e,r){var o=Yr.generate(t),i=r.getWidths(o,r);yc(o,i,r)},kc=function(n){return N(n,r(0))},Oc=function(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))},Tc=function(n){return function(t,e,r,o){if(n(r)){var i=Math.max(o,t[e]-Math.abs(r)),u=Math.abs(i-t[e]);return r>=0?u:-u}return r}},Dc=Tc((function(n){return n<0})),_c=Tc(s),Ac=function(){var n=function(n,t,e,r,o){var i=Dc(n,t,r,o);return Oc(n,t,e+1,[i,0],kc)},t=function(n,t,e,r){var o=(100+e)/100,i=Math.max(r,(n[t]+e)/o);return N(n,(function(n,e){var r=e===t?i:n/o;return r-n}))},e=function(e,r,o,i,u,a){return a?t(e,r,i,u):n(e,r,o,i,u)},r=function(n,t,r,o,i,u,a){return e(n,r,o,i,u,a)},o=function(n,t){return n(t)},i=function(n,e,r,o,i,u){if(u)return t(n,r,o,i);var a=Dc(n,r,o,i);return kc(n.slice(0,r)).concat([a])},u=function(n,t,e,r){if(r){var o=t+e,i=o/t,u=N(n,(function(n){return n/i}));return{delta:100*i-100,newSizes:u}}return{delta:e,newSizes:n}};return{resizeTable:o,clampTableDelta:Dc,calcLeftEdgeDeltas:e,calcMiddleDeltas:r,calcRightEdgeDeltas:i,calcRedestributedWidths:u}},Ec=function(){var n=function(n,t,e,r,o){var i=r>=0?e:t,u=_c(n,i,r,o);return Oc(n,t,e+1,[u,-u],kc)},t=function(t,e,r,o,i,u){return n(t,r,o,i,u)},e=function(n,t,e){e&&n(t)},o=function(n,t,e,o,i,u){if(u)return kc(n);var a=o/n.length;return N(n,r(a))},i=function(n,t,e,r,o){if(o){if(e>=0)return e;var i=V(n,(function(n,t){return n+t-r}),0);return Math.max(-i,e)}return Dc(n,t,e,r)},u=function(n,t,e,r){return{delta:0,newSizes:n}};return{resizeTable:e,clampTableDelta:i,calcLeftEdgeDeltas:n,calcMiddleDeltas:t,calcRightEdgeDeltas:o,calcRedestributedWidths:u}},Rc=function(n,t){var e=g.from(n.dom.documentElement).map(dt.fromDom).getOr(n);return{parent:r(e),view:r(n),origin:r(Di(0,0)),isResizable:t}},Bc=function(n,t,e){var o=function(){return Ei(t)};return{parent:r(t),view:r(n),origin:o,isResizable:e}},Mc=function(n,t,e){return{parent:r(t),view:r(n),origin:r(Di(0,0)),isResizable:e}},Ic={only:Rc,detached:Bc,body:Mc},Nc=$o.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Pc=function(n,t,e){var r=e.substring(0,e.length-n.length),o=parseFloat(r);return r===o.toString()?t(o):Nc.invalid(e)},Fc=function(n){return xn(n,"%")?Pc("%",Nc.percent,n):xn(n,"px")?Pc("px",Nc.pixels,n):Nc.invalid(n)},Lc=en(en({},Nc),{from:Fc}),Hc=function(n,t){return N(n,(function(n){var e=Lc.from(n);return e.fold((function(){return n}),(function(n){var e=n/t*100;return e+"%"}),(function(n){return n+"%"}))}))},zc=function(n,t,e){var r=e/t;return N(n,(function(n){var t=Lc.from(n);return t.fold((function(){return n}),(function(n){return n*r+"px"}),(function(n){return n/100*e+"px"}))}))},Vc=function(n,t){var e=n.fold((function(){return r("")}),(function(n){var e=n/t;return r(e+"px")}),(function(){var n=100/t;return r(n+"%")}));return I(t,e)},Uc=function(n,t,e){return n.fold((function(){return t}),(function(n){return zc(t,e,n)}),(function(n){return Hc(t,e)}))},jc=function(n,t,e){var r=Lc.from(e),o=X(n,(function(n){return"0px"===n}))?Vc(r,n.length):Uc(r,n,t);return Xc(o)},Wc=function(n,t){return 0===n.length?t:z(n,(function(n,t){return Lc.from(t).fold(r(0),o,o)+n}),0)},Gc=function(n,t){var e=Math.floor(n);return{value:e+t,remainder:n-e}},qc=function(n,t){return Lc.from(n).fold(r(n),(function(n){return n+t+"px"}),(function(n){return n+t+"%"}))},Xc=function(n){if(0===n.length)return n;var t=z(n,(function(n,t){var e=Lc.from(t).fold((function(){return{value:t,remainder:0}}),(function(n){return Gc(n,"px")}),(function(n){return{value:n+"%",remainder:0}}));return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}}),{output:[],remainder:0}),e=t.output;return e.slice(0,e.length-1).concat([qc(e[e.length-1],Math.round(t.remainder))])},Kc=Lc.from,Yc=function(n,t,e){P(t,(function(t){var r=n.slice(t.column,t.colspan+t.column),o=Wc(r,fr());Ze(t.element,"width",o+e)}))},$c=function(n,t,e){P(t,(function(t,r){var o=Wc([n[r]],fr());Ze(t.element,"width",o+e)}))},Jc=function(n,t,e,r){P(e,(function(t){var e=n.slice(t.row,t.rowspan+t.row),o=Wc(e,dr());Ze(t.element,"height",o+r)})),P(t,(function(t,e){Ze(t.element,"height",n[e])}))},Qc=function(n){return Kc(n).fold(r("px"),r("px"),r("%"))},Zc=function(n,t,e,r){var o=Yr.fromTable(n),i=o.all,u=Yr.justCells(o),a=Yr.justColumns(o);t.each((function(t){var e=Qc(t),i=pi(n),c=ju(o,n,r),s=jc(c,i,t);Yr.hasColumns(o)?$c(s,a,e):Yc(s,u,e),Ze(n,"width",t)})),e.each((function(t){var e=Qc(t),r=ki(n),a=Ku(o,n,ji),c=jc(a,r,t);Jc(c,i,u,e),Ze(n,"height",t)}))},ns=_u,ts=Au,es=Eu,rs=Du,os=function(n){var t=Yr.fromTable(n);return t.grid},is=function(n){var t=[],e=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");t.push(n)},r=function(n){t=H(t,(function(t){return t!==n}))},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};P(n,(function(n,t){o[n]=e[t]})),P(t,(function(n){n(o)}))};return{bind:e,unbind:r,trigger:o}},us=function(n){var t=Ot(n,(function(n){return{bind:n.bind,unbind:n.unbind}})),e=Ot(n,(function(n){return n.trigger}));return{registry:t,trigger:e}},as=function(n,t){var e=null,r=function(){null!==e&&(clearTimeout(e),e=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==e&&clearTimeout(e),e=setTimeout((function(){n.apply(null,r),e=null}),t)};return{cancel:r,throttle:o}},cs=function(n){return n.slice(0).sort()},ss=function(n,t){throw new Error("All required keys ("+cs(n).join(", ")+") were not specified. Specified keys were: "+cs(t).join(", ")+".")},ls=function(n){throw new Error("Unsupported keys for object: "+cs(n).join(", "))},fs=function(n,t){if(!w(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");P(t,(function(t){if(!y(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")}))},ds=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+cs(n).join(", ")+") were not.")},ms=function(n){var t=cs(n),e=j(t,(function(n,e){return e<t.length-1&&n===t[e+1]}));e.each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},gs=function(n,t){return ps(n,t,{validate:T,label:"function"})},ps=function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");return fs("required",t),ms(t),function(r){var o=Ct(r),i=X(t,(function(n){return B(o,n)}));i||ss(t,o),n(t,o);var u=H(t,(function(n){return!e.validate(r[n],n)}));return u.length>0&&ds(u,e.label),r}},vs=function(n,t){var e=H(t,(function(t){return!B(n,t)}));e.length>0&&ls(e)},hs=function(n){return gs(vs,n)},bs=hs(["compare","extract","mutate","sink"]),ys=hs(["element","start","stop","destroy"]),xs=hs(["forceDrop","drop","move","delayDrop"]),ws=function(){var n=g.none(),t=function(){n=g.none()},e=function(t,e){var r=n.map((function(n){return t.compare(n,e)}));return n=g.some(e),r},r=function(n,t){var r=t.extract(n);r.each((function(n){var r=e(t,n);r.each((function(n){o.trigger.move(n)}))}))},o=us({move:is(["info"])});return{onEvent:r,reset:t,events:o.registry}},Cs=function(){var t=us({move:is(["info"])});return{onEvent:n,reset:n,events:t.registry}},Ss=function(){var n=Cs(),t=ws(),e=n,r=function(){e.reset(),e=t},o=function(){e.reset(),e=n},i=function(n,t){e.onEvent(n,t)},u=function(){return e===t};return{on:r,off:o,isOn:u,onEvent:i,events:t.events}},ks=function(n,t,e){var r=!1,o=us({start:is([]),stop:is([])}),i=Ss(),u=function(){m.stop(),i.isOn()&&(i.off(),o.trigger.stop())},a=as(u,200),c=function(n){m.start(n),i.on(),o.trigger.start()},s=function(n){a.cancel(),i.onEvent(n,t)};i.events.move.bind((function(e){t.mutate(n,e.info)}));var l=function(){r=!0},f=function(){r=!1},d=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r&&n.apply(null,t)}},m=t.sink(xs({forceDrop:u,drop:d(u),move:d(s),delayDrop:d(a.throttle)}),e),g=function(){m.destroy()};return{element:m.element,go:c,on:l,off:f,destroy:g,events:o.registry}},Os=function(n,t,e,r,o,i,u){return{target:n,x:t,y:e,stop:r,prevent:o,kill:i,raw:u}},Ts=function(n){var e=dt.fromDom(Se(n).getOr(n.target)),r=function(){return n.stopPropagation()},o=function(){return n.preventDefault()},i=t(o,r);return Os(e,n.clientX,n.clientY,r,o,i,n)},Ds=function(n,t){return function(e){n(e)&&t(Ts(e))}},_s=function(n,t,e,r,o){var u=Ds(e,r);return n.dom.addEventListener(t,u,o),{unbind:i(Es,n,t,u,o)}},As=function(n,t,e,r){return _s(n,t,e,r,!1)},Es=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Rs=s,Bs=function(n,t,e){return As(n,t,Rs,e)},Ms=Ts,Is=function(n,t){var e=qe(n,t);return void 0===e||""===e?[]:e.split(" ")},Ns=function(n,t,e){var r=Is(n,t),o=r.concat([e]);return We(n,t,o.join(" ")),!0},Ps=function(n,t,e){var r=H(Is(n,t),(function(n){return n!==e}));return r.length>0?We(n,t,r.join(" ")):Ke(n,t),!1},Fs=function(n){return void 0!==n.dom.classList},Ls=function(n){return Is(n,"class")},Hs=function(n,t){return Ns(n,"class",t)},zs=function(n,t){return Ps(n,"class",t)},Vs=function(n,t){Fs(n)?n.dom.classList.add(t):Hs(n,t)},Us=function(n){var t=Fs(n)?n.dom.classList:Ls(n);0===t.length&&Ke(n,"class")},js=function(n,t){if(Fs(n)){var e=n.dom.classList;e.remove(t)}else zs(n,t);Us(n)},Ws=function(n,t){return Fs(n)&&n.dom.classList.contains(t)},Gs=function(n){var t=n.replace(/\./g,"-"),e=function(n){return t+"-"+n};return{resolve:e}},qs=Gs("ephox-dragster"),Xs=qs.resolve,Ks=function(n){var t=en({layerClass:Xs("blocker")},n),e=dt.fromTag("div");We(e,"role","presentation"),nr(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vs(e,Xs("blocker")),Vs(e,t.layerClass);var r=function(){return e},o=function(){xo(e)};return{element:r,destroy:o}},Ys=function(n,t){return Di(t.left-n.left,t.top-n.top)},$s=function(n){return g.some(Di(n.x,n.y))},Js=function(n,t){n.mutate(t.left,t.top)},Qs=function(n,t){var e=Ks(t),r=Bs(e.element(),"mousedown",n.forceDrop),o=Bs(e.element(),"mouseup",n.drop),i=Bs(e.element(),"mousemove",n.move),u=Bs(e.element(),"mouseout",n.delayDrop),a=function(){e.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()},c=function(n){go(n,e.element())},s=function(){xo(e.element())};return ys({element:e.element,start:c,stop:s,destroy:a})},Zs=bs({compare:Ys,extract:$s,sink:Qs,mutate:Js}),nl=function(n,t){void 0===t&&(t={});var e=void 0!==t.mode?t.mode:Zs;return ks(n,e,t)},tl=function(n){return"true"===qe(n,"contenteditable")},el=function(n,t){return Ue(n,"[contenteditable]",t)},rl=Gs("ephox-snooker"),ol=rl.resolve,il=function(){var n=us({drag:is(["xDelta","yDelta"])}),t=function(t,e){n.trigger.drag(t,e)};return{mutate:t,events:n.registry}},ul=function(){var n=us({drag:is(["xDelta","yDelta","target"])}),t=g.none(),e=il();e.events.drag.bind((function(e){t.each((function(t){n.trigger.drag(e.xDelta,e.yDelta,t)}))}));var r=function(n){t=g.some(n)},o=function(){return t};return{assign:r,get:o,mutate:e.mutate,events:n.registry}},al=function(n,t,e,r,o){var i=dt.fromTag("div");return nr(i,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),Ge(i,{"data-column":n,role:"presentation"}),i},cl=function(n,t,e,r,o){var i=dt.fromTag("div");return nr(i,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),Ge(i,{"data-row":n,role:"presentation"}),i},sl=ol("resizer-bar"),ll=ol("resizer-rows"),fl=ol("resizer-cols"),dl=7,ml=function(n,t){return q(n.all,(function(n,e){return t(n.element)?[e]:[]}))},gl=function(n,t){var e=[];return I(n.grid.columns,(function(r){var o=Yr.getColumnAt(n,r).map((function(n){return n.element}));o.forall(t)&&e.push(r)})),H(e,(function(e){var r=Yr.filterItems(n,(function(n){return n.column===e}));return X(r,(function(n){return t(n.element)}))}))},pl=function(n){var t=Me(n.parent(),"."+sl);P(t,xo)},vl=function(n,t,e){var r=n.origin();P(t,(function(t){t.each((function(t){var o=e(r,t);Vs(o,sl),go(n.parent(),o)}))}))},hl=function(n,t,e,r){vl(n,t,(function(n,t){var o=al(t.col,t.x-n.left,e.top-n.top,dl,r);return Vs(o,fl),o}))},bl=function(n,t,e,r){vl(n,t,(function(n,t){var o=cl(t.row,e.left-n.left,t.y-n.top,r,dl);return Vs(o,ll),o}))},yl=function(n,t,e,r,o){var i=Ei(e),u=t.isResizable,a=r.length>0?ji.positions(r,e):[],c=a.length>0?ml(n,u):[],s=H(a,(function(n,t){return M(c,(function(n){return t===n}))}));bl(t,s,i,vi(e));var l=o.length>0?Xi.positions(o,e):[],f=l.length>0?gl(n,u):[],d=H(l,(function(n,t){return M(f,(function(n){return t===n}))}));hl(t,d,i,Oi(e))},xl=function(n,t){if(pl(n),n.isResizable(t)){var e=Yr.fromTable(t),r=yi(e),o=hi(e);yl(e,n,t,r,o)}},wl=function(n,t){var e=Me(n.parent(),"."+sl);P(e,t)},Cl=function(n){wl(n,(function(n){Ze(n,"display","none")}))},Sl=function(n){wl(n,(function(n){Ze(n,"display","block")}))},kl=function(n){return Ws(n,ll)},Ol=function(n){return Ws(n,fl)},Tl=ol("resizer-bar-dragging"),Dl=function(n){var t=ul(),e=nl(t,{}),r=g.none(),o=function(n,t){return g.from(qe(n,t))};t.events.drag.bind((function(n){o(n.target,"data-row").each((function(t){var e=lr(n.target,"top");Ze(n.target,"top",e+n.yDelta+"px")})),o(n.target,"data-column").each((function(t){var e=lr(n.target,"left");Ze(n.target,"left",e+n.xDelta+"px")}))}));var u=function(n,t){var e=lr(n,t),r=ur(n,"data-initial-"+t,0);return e-r};e.events.stop.bind((function(){t.get().each((function(t){r.each((function(e){o(t,"data-row").each((function(n){var r=u(t,"top");Ke(t,"data-initial-top"),p.trigger.adjustHeight(e,r,parseInt(n,10))})),o(t,"data-column").each((function(n){var r=u(t,"left");Ke(t,"data-initial-left"),p.trigger.adjustWidth(e,r,parseInt(n,10))})),xl(n,e)}))}))}));var a=function(r,o){p.trigger.startAdjust(),t.assign(r),We(r,"data-initial-"+o,lr(r,o)),Vs(r,Tl),Ze(r,"opacity","0.2"),e.go(n.parent())},c=Bs(n.parent(),"mousedown",(function(n){kl(n.target)&&a(n.target,"top"),Ol(n.target)&&a(n.target,"left")})),s=function(t){return ht(t,n.view())},l=function(n){return Ue(n,"table",s).filter((function(n){return el(n,s).exists(tl)}))},f=Bs(n.view(),"mouseover",(function(t){l(t.target).fold((function(){Oe(t.target)&&pl(n)}),(function(t){r=g.some(t),xl(n,t)}))})),d=function(){c.unbind(),f.unbind(),e.destroy(),pl(n)},m=function(t){xl(n,t)},p=us({adjustHeight:is(["table","delta","row"]),adjustWidth:is(["table","delta","column"]),startAdjust:is([])});return{destroy:d,refresh:m,on:e.on,off:e.off,hideBars:i(Cl,n),showBars:i(Sl,n),events:p.registry}},_l=function(n,t,e){var r=ji,o=Xi,i=Dl(n),u=us({beforeResize:is(["table","type"]),afterResize:is(["table","type"]),startDrag:is([])});return i.events.adjustHeight.bind((function(n){var t=n.table;u.trigger.beforeResize(t,"row");var e=r.delta(n.delta,t);wc(t,e,n.row,r),u.trigger.afterResize(t,"row")})),i.events.startAdjust.bind((function(n){u.trigger.startDrag()})),i.events.adjustWidth.bind((function(n){var r=n.table;u.trigger.beforeResize(r,"col");var i=o.delta(n.delta,r),a=e(r);xc(r,i,n.column,t,a),u.trigger.afterResize(r,"col")})),{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:u.registry}},Al={create:_l},El=function(n,t){return n.fire("newrow",{node:t})},Rl=function(n,t){return n.fire("newcell",{node:t})},Bl=function(n,t,e,r,o){n.fire("ObjectResizeStart",{target:t,width:e,height:r,origin:o})},Ml=function(n,t,e,r,o){n.fire("ObjectResized",{target:t,width:e,height:r,origin:o})},Il=function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})},Nl=function(n){n.fire("TableSelectionClear")},Pl=function(n,t,e){n.fire("TableModified",en(en({},e),{table:t}))},Fl={structure:!1,style:!0},Ll={structure:!0,style:!1},Hl="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",zl={"border-collapse":"collapse",width:"100%"},Vl=function(n){if(af(n)){var t=n.getBody().offsetWidth;return en(en({},zl),{width:t+"px"})}return cf(n)?At(zl,(function(n,t){return"width"!==t})):zl},Ul={border:"1"},jl="preservetable",Wl=function(n){return n.getParam("table_sizing_mode","auto")},Gl=function(n){return n.getParam("table_responsive_width")},ql=function(n){return n.getParam("table_default_attributes",Ul,"object")},Xl=function(n){return n.getParam("table_default_styles",Vl(n),"object")},Kl=function(n){return n.getParam("table_resize_bars",!0,"boolean")},Yl=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},$l=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Jl=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Ql=function(n){return n.getParam("table_advtab",!0,"boolean")},Zl=function(n){return n.getParam("table_appearance_options",!0,"boolean")},nf=function(n){return n.getParam("table_grid",!0,"boolean")},tf=function(n){return n.getParam("table_style_by_css",!1,"boolean")},ef=function(n){return n.getParam("table_cell_class_list",[],"array")},rf=function(n){return n.getParam("table_row_class_list",[],"array")},of=function(n){return n.getParam("table_class_list",[],"array")},uf=function(n){return"relative"===Wl(n)||!0===Gl(n)},af=function(n){return"fixed"===Wl(n)||!1===Gl(n)},cf=function(n){return"responsive"===Wl(n)},sf=function(n){return n.getParam("table_toolbar",Hl)},lf=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},ff=function(n){var t="section",e=n.getParam("table_header_type",t,"string"),r=["section","cells","sectionCells","auto"];return B(r,e)?e:t},df=function(n){var t=["preservetable","resizetable"],e=n.getParam("table_column_resizing",jl,"string");return j(t,(function(n){return n===e})).getOr(jl)},mf=function(n){return"preservetable"===df(n)},gf=function(n){return"resizetable"===df(n)},pf=function(n){var t=n.getParam("table_clone_elements");return y(t)?g.some(t.split(/[ ,]/)):Array.isArray(t)?g.some(t):g.none()},vf=function(n){var t=n.getParam("object_resizing",!0);return y(t)?"table"===t:t},hf=function(n,t){if(uf(n)){var e=La(n,t.dom).filter(Ha).getOrThunk((function(){return rs(t)}));return ta.percentageSize(e,t)}return af(n)?ta.pixelSize(pi(t),t):ta.getTableSize(t)},bf=function(n){Ke(n,"width")},yf=function(n,t){var e=Du(n);Zc(n,g.some(e),g.none(),t),bf(n)},xf=function(n,t){var e=Tu(n);Zc(n,g.some(e),g.none(),t),bf(n)},wf=function(n){or(n,"width");var t=br(n),e=t.length>0?t:hr(n);P(e,(function(n){or(n,"width"),bf(n)})),bf(n)},Cf=function(n,t){var e=hf(n,t);yf(t,e)},Sf=function(n,t){var e=hf(n,t);xf(t,e)},kf=wf,Of=function(n){var t=Yr.fromTable(n);Yr.hasColumns(t)||P(hr(n),(function(n){var t=tr(n,"width");Ze(n,"width",t),Ke(n,"width")}))},Tf=function(){var n=dt.fromTag("div");return nr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),go(Te(),n),n},Df=function(n,t){return n.inline?Ic.body(Ra(n),Tf(),t):Ic.only(dt.fromDom(n.getDoc()),t)},_f=function(n,t){n.inline&&xo(t.parent())},Af="bar-",Ef=function(n){return"false"!==qe(n,"data-mce-resize")},Rf=function(n){var t,e,r=g.none(),o=g.none(),i=g.none(),u=function(n){return"TABLE"===n.nodeName},a=function(){return o},c=function(){return i.getOr(Ic.only(dt.fromDom(n.getBody()),Ef))},s=function(t){return hf(n,t)},l=function(){return mf(n)?Ec():Ac()},f=function(n){return os(n).columns},d=function(r,o,i){var u=xn(o,"e");if(""===e&&Cf(n,r),i!==t&&""!==e){Ze(r,"width",e);var a=l(),c=s(r),d=mf(n)||u?f(r)-1:0;xc(r,i-t,d,a,c)}else if(Ha(e)){var m=parseFloat(e.replace("%","")),g=i*m/t;Ze(r,"width",g+"%")}za(e)&&Of(r)},m=function(){o.each((function(n){n.destroy()})),i.each((function(t){_f(n,t)}))};return n.on("init",(function(){var t=Df(n,Ef);if(i=g.some(t),vf(n)&&Kl(n)){var e=l(),u=Al.create(t,e,s);u.on(),u.events.startDrag.bind((function(t){r=g.some(n.selection.getRng())})),u.events.beforeResize.bind((function(t){var e=t.table.dom;Bl(n,e,Ba(e),Ma(e),Af+t.type)})),u.events.afterResize.bind((function(t){var e=t.table,o=e.dom;Fa(e),r.each((function(t){n.selection.setRng(t),n.focus()})),Ml(n,o,Ba(o),Ma(o),Af+t.type),n.undoManager.add()})),o=g.some(u)}})),n.on("ObjectResizeStart",(function(r){var o=r.target;if(u(o)){var i=dt.fromDom(o);P(n.dom.select(".mce-clonedresizable"),(function(t){n.dom.addClass(t,"mce-"+df(n)+"-columns")})),!ts(i)&&af(n)?Sf(n,i):!ns(i)&&uf(n)&&Cf(n,i),es(i)&&yn(r.origin,Af)&&Cf(n,i),t=r.width,e=cf(n)?"":La(n,o).getOr("")}})),n.on("ObjectResized",(function(t){var e=t.target;if(u(e)){var r=dt.fromDom(e),o=t.origin;yn(o,"corner-")&&d(r,o,t.width),Fa(r),Pl(n,r.dom,Fl)}})),n.on("SwitchMode",(function(){a().each((function(t){n.mode.isReadOnly()?t.hideBars():t.showBars()}))})),{lazyResize:a,lazyWire:c,destroy:m}},Bf=function(n,t){return{element:n,offset:t}},Mf=function(n,t,e){return n.property().isText(t)&&0===n.property().getText(t).trim().length||n.property().isComment(t)?e(t).bind((function(t){return Mf(n,t,e).orThunk((function(){return g.some(t)}))})):g.none()},If=function(n,t){if(n.property().isText(t))return n.property().getText(t).length;var e=n.property().children(t);return e.length},Nf=function(n,t){var e=Mf(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return Bf(e,If(n,e));var r=n.property().children(e);return r.length>0?Nf(n,r[r.length-1]):Bf(e,If(n,e))},Pf=Nf,Ff=_o(),Lf=function(n){return Pf(Ff,n)},Hf=function(n,t){var e=ar(n,"colspan");if(1===e){var r=ku(n);r.each((function(e){var r=e.value/2;Ou(n,r,e.unit),Ou(t,r,e.unit)}))}},zf=function(n,t,e,r){e===r?Ke(n,t):We(n,t,e)},Vf=function(n,t,e){nn(Be(n,t)).fold((function(){return mo(n,e)}),(function(n){return fo(n,e)}))},Uf=function(n,t){var e=ze(n,t).getOrThunk((function(){var e=dt.fromTag(t,ue(n).dom);return"thead"===t?Vf(n,"caption,colgroup",e):"colgroup"===t?Vf(n,"caption",e):go(n,e),e}));return yo(e),e},jf=function(n,t){var e=[],r=[],o=function(n){return N(n,(function(n){n.isNew&&e.push(n.element);var t=n.element;return yo(t),P(n.cells,(function(n){n.isNew&&r.push(n.element),zf(n.element,"colspan",n.colspan,1),zf(n.element,"rowspan",n.rowspan,1),go(t,n.element)})),t}))},i=function(n){return q(n,(function(n){return N(n.cells,(function(n){return zf(n.element,"span",n.colspan,1),n.element}))}))},u=function(t,e){var r=Uf(n,e),u="colgroup"===e?i:o,a=u(t);bo(r,a)},a=function(t){ze(n,t).each(xo)},c=function(n,t){n.length>0?u(n,t):a(t)},s=[],l=[],f=[],d=[];return P(t,(function(n){switch(n.section){case"thead":s.push(n);break;case"tbody":l.push(n);break;case"tfoot":f.push(n);break;case"colgroup":d.push(n);break}})),c(d,"colgroup"),c(s,"thead"),c(l,"tbody"),c(f,"tfoot"),{newRows:e,newCells:r}},Wf=function(n){return N(n,(function(n){var t=ii(n.element);return P(n.cells,(function(n){var e=ui(n.element);zf(e,"colspan",n.colspan,1),zf(e,"rowspan",n.rowspan,1),go(t,e)})),t}))},Gf=function(n,t){return N(n,(function(n){return Rr(n,t)}))},qf=function(n,t){return n[t]},Xf=function(n,t){if(0===n.length)return 0;var e=n[0],r=W(n,(function(n){return!t(e.element,n.element)}));return r.fold((function(){return n.length}),(function(n){return n}))},Kf=function(n,t,e,r){var o=qf(n,t).cells.slice(e),i=Xf(o,r),u=Gf(n,e).slice(t),a=Xf(u,r);return{colspan:i,rowspan:a}},Yf=function(n,t){var e=N(n,(function(n){return N(n.cells,c)})),r=function(n,t,r,o){for(var i=n;i<n+r;i++)for(var u=t;u<t+o;u++)e[i][u]=!0};return N(n,(function(o,i){var u=q(o.cells,(function(o,u){if(!1===e[i][u]){var a=Kf(n,i,u,t);return r(i,u,a.rowspan,a.colspan),[Ut(o.element,a.rowspan,a.colspan,o.isNew)]}return[]}));return Kt(u,o.section)}))},$f=function(n,t,e){var r=[];if(Yr.hasColumns(n)){var o=N(Yr.justColumns(n),(function(n){return Gt(n.element,e,!1)}));r.push(Xt(o,"colgroup"))}for(var i=0;i<n.grid.rows;i++){for(var u=[],a=0;a<n.grid.columns;a++){var c=Yr.getAt(n,i,a).map((function(n){return Gt(n.element,e,n.isLocked)})).getOrThunk((function(){return Gt(t.gap(),!0,!1)}));u.push(c)}var s=Xt(u,n.all[i].section);r.push(s)}return r},Jf=function(n,t){return $f(n,t,!1)},Qf=function(n,t){var e=function(n){var e=tn(n,(function(n){return se(n.element).map((function(n){var t=se(n).isNone();return Gt(n,t,!1)}))}));return e.getOrThunk((function(){return Gt(t.row(),!0,!1)}))};return N(n,(function(n){var t=e(n.details);return qt(t.element,n.details,n.section,t.isNew)}))},Zf=function(n,t){var e=Yf(n,ht);return Qf(e,t)},nd=function(n,t){return tn(n.all,(function(n){return j(n.cells,(function(n){return ht(t,n.element)}))}))},td=function(n,t,e){var r=N(t.selection,(function(t){return vr(t).bind((function(t){return nd(n,t)})).filter(e)})),o=si(r);return di(o.length>0,o)},ed=function(n,t,e,r,o){return function(i,u,a,c,s,l){var f=Yr.fromTable(u),d=t(f,a).map((function(t){var e=Jf(f,c),r=n(e,t,ht,o(c)),i=Fr(r.grid),u=Zf(r.grid,c);return{info:t,grid:u,cursor:r.cursor,lockedColumns:i}}));return d.bind((function(n){var t=jf(u,n.grid),o=g.from(s).getOrThunk((function(){return ta.getTableSize(u)})),a=g.from(l).getOrThunk(Ec);return e(u,n.grid,n.info,o,a),r(u),xl(i,u),Ke(u,Nr),n.lockedColumns.length>0&&We(u,Nr,n.lockedColumns.join(",")),g.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})}))}},rd=function(n,t){return vr(t.element).bind((function(t){return nd(n,t)}))},od=function(n,t){return vr(t.element).bind((function(e){return nd(n,e).map((function(n){var e=en(en({},n),{generators:t.generators,clipboard:t.clipboard});return e}))}))},id=function(n,t){return td(n,t,s).map((function(n){return{cells:n,generators:t.generators,clipboard:t.clipboard}}))},ud=function(n,t){return t.mergable},ad=function(n,t){return t.unmergable},cd=function(n,t){return td(n,t,s)},sd=function(n,t){return rd(n,t).filter((function(n){return!n.isLocked}))},ld=function(n,t){return td(n,t,(function(n){return!n.isLocked}))},fd=function(n,t){return nd(n,t).exists((function(n){return!n.isLocked}))},dd=function(n,t){return X(t,(function(t){return fd(n,t)}))},md=function(n,t){return ud(n,t).filter((function(t){return dd(n,t.cells)}))},gd=function(n,t){return ad(n,t).filter((function(t){return dd(n,t)}))},pd=function(n,t,e,r){var o=Ir(n).rows;if(0===o.length)return n;for(var i=t.startRow;i<=t.finishRow;i++)for(var u=t.startCol;u<=t.finishCol;u++){var a=o[i],c=Rr(a,u).isLocked;_r(a,u,Gt(r(),!1,c))}return n},vd=function(n,t,e,r){for(var o=Ir(n).rows,i=!0,u=0;u<o.length;u++)for(var a=0;a<Mr(o[0]);a++){var c=o[u],s=Rr(c,a),l=s.element,f=e(l,t);!0===f&&!1===i?_r(c,a,Gt(r(),!0,s.isLocked)):!0===f&&(i=!1)}return n},hd=function(n,t){return V(n,(function(n,e){return M(n,(function(n){return t(n.element,e.element)}))?n:n.concat([e])}),[])},bd=function(n,t,e,r){return t>0&&t<n[0].cells.length&&P(n,(function(n){var o=n.cells[t-1],i=n.cells[t],u=e(i.element,o.element);u&&_r(n,t,Gt(r(),!0,i.isLocked))})),n},yd=function(n,t,e,r){var o=Ir(n).rows;if(t>0&&t<o.length){var i=o[t-1].cells,u=hd(i,e);P(u,(function(n){for(var i=g.none(),u=t;u<o.length;u++)for(var a=function(t){var a=o[u],c=Rr(a,t),s=e(c.element,n.element);s&&(i.isNone()&&(i=g.some(r())),i.each((function(n){_r(a,t,Gt(n,!0,c.isLocked))})))},c=0;c<Mr(o[0]);c++)a(c)}))}return n},xd=function(n){var t=function(t){return n===t},e=function(t){return xd(n)},o=function(t){return xd(n)},i=function(t){return xd(t(n))},u=function(t){return xd(n)},a=function(t){t(n)},l=function(t){return t(n)},f=function(t,e){return e(n)},d=function(t){return t(n)},m=function(t){return t(n)},p=function(){return g.some(n)};return{is:t,isValue:s,isError:c,getOr:r(n),getOrThunk:r(n),getOrDie:r(n),or:e,orThunk:o,fold:f,map:i,mapError:u,each:a,bind:l,exists:d,forall:m,toOptional:p}},wd=function(t){var e=function(n){return n()},r=function(){return a(String(t))()},i=function(n){return n},u=function(n){return n()},l=function(n){return wd(t)},f=function(n){return wd(n(t))},d=function(n){return wd(t)},m=function(n,e){return n(t)};return{is:c,isValue:c,isError:s,getOr:o,getOrThunk:e,getOrDie:r,or:i,orThunk:u,fold:m,map:l,mapError:f,each:n,bind:d,exists:c,forall:s,toOptional:g.none}},Cd=function(n,t){return n.fold((function(){return wd(t)}),xd)},Sd={value:xd,error:wd,fromOption:Cd},kd=function(n,t,e){if(n.row>=t.length||n.column>Mr(t[0]))return Sd.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),o=r[0].cells.slice(n.column),i=Mr(e[0]),u=e.length;return Sd.value({rowDelta:r.length-u,colDelta:o.length-i})},Od=function(n,t){var e=Mr(n[0]),r=Mr(t[0]);return{rowDelta:0,colDelta:e-r}},Td=function(n,t){var e=n.length,r=t.length;return{rowDelta:e-r,colDelta:0}},Dd=function(n,t,e,r){var o="colgroup"===t.section?e.col:e.cell;return I(n,(function(n){return Gt(o(),!0,r(n))}))},_d=function(n,t,e,r){return n.concat(I(t,(function(){var t=n[n.length-1],o=Dd(t.cells.length,t,e,(function(n){return It(r,n.toString())}));return Ar(t,o)})))},Ad=function(n,t,e,r){return N(n,(function(n){var o=Dd(t,n,e,c);return Tr(n,r,o)}))},Ed=function(n,t,e){return N(n,(function(n){return V(e,(function(e,r){var o=Dd(1,n,t,s)[0];return Dr(e,r,o)}),n)}))},Rd=function(n,t,e){var r=t.colDelta<0?Ad:o,i=t.rowDelta<0?_d:o,u=Fr(n),a=Mr(n[0]),c=M(u,(function(n){return n===a-1})),l=r(n,Math.abs(t.colDelta),e,c?a-1:a),f=Fr(l);return i(l,Math.abs(t.rowDelta),e,Y(f,s))},Bd=function(n,t,e,r){var o=Rr(n[t],e),u=i(r,o.element),a=n[t];return n.length>1&&Mr(a)>1&&(e>0&&u(Br(a,e-1))||e<a.cells.length-1&&u(Br(a,e+1))||t>0&&u(Br(n[t-1],e))||t<n.length-1&&u(Br(n[t+1],e)))},Md=function(n,t,e,r,o,i){for(var u=n.row,a=n.column,c=e.length,l=Mr(e[0]),f=u+c,d=a+l+i.length,m=Y(i,s),g=u;g<f;g++)for(var p=0,v=a;v<d;v++)if(m[v])p++;else{Bd(t,g,v,o)&&vd(t,Br(t[g],v),o,r.cell);var h=v-a-p,b=Rr(e[g-u],h),y=b.element,x=r.replace(y);_r(t[g],v,Gt(x,!0,b.isLocked))}return t},Id=function(n,t,e){var r=Mr(t[0]),o=I(r-n.column,(function(t){return t+n.column})),i=j(o,(function(n){return X(e,(function(t){return t!==n}))})).getOr(r-1);return en(en({},n),{column:i})},Nd=function(n,t,e){return H(e,(function(e){return e>=n.column&&e<=Mr(t[0])+n.column}))},Pd=function(n,t,e,r,o){var i=Fr(t),u=Id(n,t,i),a=Nd(u,e,i),c=kd(u,t,e);return c.map((function(n){var i=en(en({},n),{colDelta:n.colDelta-a.length}),c=Rd(t,i,r),s=Fr(c),l=Nd(u,e,s);return Md(u,c,e,r,o,l)}))},Fd=function(n,t,e,r,o){bd(t,n,o,r.cell);var i=Td(e,t),u=Rd(e,i,r),a=Td(t,u),c=Rd(t,a,r);return N(c,(function(t,e){return Tr(t,n,u[e].cells)}))},Ld=function(n,t,e,r,o){yd(t,n,o,r.cell);var i=Fr(t),u=Od(t,e),a=en(en({},u),{colDelta:u.colDelta-i.length}),c=Rd(t,a,r),s=Ir(c),l=s.cols,f=s.rows,d=Fr(c),m=Od(e,t),g=en(en({},m),{colDelta:m.colDelta+d.length}),p=Ed(e,r,d),v=Rd(p,g,r);return l.concat(f.slice(0,n)).concat(v).concat(f.slice(n,f.length))},Hd=function(n,t,e,r,o){var i=Ir(n),u=i.rows,a=i.cols,c=u.slice(0,t),s=u.slice(t),l=Er(u[e],(function(n,e){var i=t>0&&t<u.length&&r(Br(u[t-1],e),Br(u[t],e)),a=i?Rr(u[t],e):Gt(o(n.element,r),!0,n.isLocked);return a}));return a.concat(c).concat([l]).concat(s)},zd=function(n,t,e,r,o,i,u){if("colgroup"!==e&&r)return Rr(n,t);var a=Rr(n,o);return Gt(u(a.element,i),!0,!1)},Vd=function(n,t,e,r,o){return N(n,(function(n){var i=t>0&&t<Mr(n)&&r(Br(n,t-1),Br(n,t)),u=zd(n,t,n.section,i,e,r,o);return Dr(n,t,u)}))},Ud=function(n,t){return q(n,(function(n){var e=n.cells,r=z(t,(function(n,t){return t>=0&&t<n.length?n.slice(0,t).concat(n.slice(t+1)):n}),e);return r.length>0?[Xt(r,n.section)]:[]}))},jd=function(n,t,e){var r=Ir(n),o=r.rows,i=r.cols;return i.concat(o.slice(0,t)).concat(o.slice(e+1))},Wd=function(n,t,e,r){var o=function(n){return M(t,(function(t){return e(n.element,t.element)}))};return N(n,(function(n){return Er(n,(function(n){return o(n)?Gt(r(n.element,e),!0,n.isLocked):n}))}))},Gd=function(n,t,e,r){return void 0!==Br(n[t],e)&&t>0&&r(Br(n[t-1],e),Br(n[t],e))},qd=function(n,t,e){return t>0&&e(Br(n,t-1),Br(n,t))},Xd=function(n,t,e,r){var o=Ir(n).rows,i=q(o,(function(r,o){var i=Gd(n,o,t,e)||qd(r,t,e);return i?[]:[Rr(r,t)]}));return Wd(n,i,e,r)},Kd=function(n,t,e,r){var o=Ir(n).rows,i=o[t],u=q(i.cells,(function(n,r){var u=Gd(o,t,r,e)||qd(i,r,e);return u?[]:[n]}));return Wd(n,u,e,r)},Yd=function(n){var t=function(n,t){var e=M(n,(function(n){return n.column===t.column}));return e?n:n.concat([t])};return V(n,t,[]).sort((function(n,t){return n.column-t.column}))},$d=function(n){var t=ur(n,"colspan",1),e=ur(n,"rowspan",1);return{element:n,colspan:t,rowspan:e}},Jd=function(n,t){void 0===t&&(t=$d);var e=Yu(g.none()),r=function(t){switch(Jt(t.element)){case"col":return n.col(t);default:return n.cell(t)}},o=function(n){var e=t(n);return r(e)},i=function(n){var t=o(n);return e.get().isNone()&&e.set(g.some(t)),u=g.some({item:n,replacement:t}),t},u=g.none(),a=function(n,t){return u.fold((function(){return i(n)}),(function(e){return t(n,e.item)?e.replacement:i(n)}))};return{getOrInit:a,cursor:e.get}},Qd=function(n,t){return function(e){var r=Yu(g.none()),o=[],i=function(n,t){return j(o,(function(e){return t(e.item,n)}))},u=function(i){var u={scope:n},a=e.replace(i,t,u);return o.push({item:i,sub:a}),r.get().isNone()&&r.set(g.some(a)),a},a=function(n,t){return"col"===Jt(n)?n:i(n,t).fold((function(){return u(n)}),(function(e){return t(n,e.item)?e.sub:u(n)}))};return{replaceOrInit:a,cursor:r.get}}},Zd=function(n){return Xe(n,"scope").map((function(n){return n.substr(0,3)}))},nm=function(n){var t=Yu(g.none()),e=function(e){t.get().isNone()&&t.set(g.some(e));var r=Zd(e);return r.each((function(n){return We(e,"scope",n)})),function(){var t=n.cell({element:e,colspan:1,rowspan:1});return or(t,"width"),or(e,"width"),r.each((function(n){return We(t,"scope",n)})),t}},o=function(n){var t=function(){var t=si(N(n,Zd));if(0===t.length)return g.none();var e=t[0],r=["row","col"],o=M(t,(function(n){return n!==e&&B(r,n)}));return o?g.none():g.from(e)};return or(n[0],"width"),t().fold((function(){return Ke(n[0],"scope")}),(function(t){return We(n[0],"scope",t+"group")})),r(n[0])};return{unmerge:e,merge:o,cursor:t.get}},tm={modification:Jd,transform:Qd,merging:nm},em=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rm=function(n,t){var e=n.property().name(t);return B(["ol","ul"],e)},om=function(n,t){var e=n.property().name(t);return B(em,e)},im=function(n,t){return B(["br","img","hr","input"],n.property().name(t))},um=_o(),am=function(n){return om(um,n)},cm=function(n){return rm(um,n)},sm=function(n){return im(um,n)},lm=function(n){var t=function(n){return"br"===Jt(n)},e=function(n){return X(n,(function(n){return t(n)||ee(n)&&0===ko(n).trim().length}))},r=function(n){return"li"===Jt(n)||Ne(n,cm).isSome()},o=function(n){return me(n).map((function(n){return!!am(n)||!!sm(n)&&"img"!==Jt(n)})).getOr(!1)},i=function(n){return pa(n).bind((function(e){var i=o(e);return se(e).map((function(o){return!0===i||r(o)||t(e)||am(o)&&!ht(n,o)?[]:[dt.fromTag("br")]}))})).getOr([])},u=function(){var t=q(n,(function(n){var t=ge(n);return e(t)?[]:t.concat(i(n))}));return 0===t.length?[dt.fromTag("br")]:t},a=u();yo(n[0]),bo(n[0],a)},fm=function(n){var t=hr(n);0===t.length&&xo(n)},dm=function(n,t){return{grid:n,cursor:t}},mm=function(n,t,e){var r=Ir(n).rows;return gm(r,t,e).orThunk((function(){return gm(r,0,0)}))},gm=function(n,t,e){return g.from(n[t]).bind((function(n){return g.from(n.cells[e]).bind((function(n){return g.from(n.element)}))}))},pm=function(n,t,e){var r=Ir(n).rows;return dm(n,gm(r,t,e))},vm=function(n){var t=function(n,t){var e=M(n,(function(n){return n.row===t.row}));return e?n:n.concat([t])};return V(n,t,[]).sort((function(n,t){return n.row-t.row}))},hm=function(n,t,e,r){var o=t[0].row,i=vm(t),u=z(i,(function(n,t){var i=Hd(n.grid,o,t.row+n.delta,e,r.getOrInit);return{grid:i,delta:n.delta+1}}),{grid:n,delta:0}).grid;return pm(u,o,t[0].column)},bm=function(n,t,e,r){var o=vm(t),i=o[o.length-1],u=i.row+i.rowspan,a=z(o,(function(n,t){return Hd(n,u,t.row,e,r.getOrInit)}),n);return pm(a,u,t[0].column)},ym=function(n,t,e,r){var o=t.details,i=Yd(o),u=i[0].column,a=z(i,(function(n,t){var o=Vd(n.grid,u,t.column+n.delta,e,r.getOrInit);return{grid:o,delta:n.delta+1}}),{grid:n,delta:0}).grid;return pm(a,o[0].row,u)},xm=function(n,t,e,r){var o=t.details,i=o[o.length-1],u=i.column+i.colspan,a=Yd(o),c=z(a,(function(n,t){return Vd(n,u,t.column,e,r.getOrInit)}),n);return pm(c,o[0].row,u)},wm=function(n,t,e,r){var o=Kd(n,t.row,e,r.replaceOrInit);return pm(o,t.row,t.column)},Cm=function(n,t,e,r){var o=vm(t),i=function(n,t){return Kd(n,t.row,e,r.replaceOrInit)},u=V(o,i,n);return pm(u,t[0].row,t[0].column)},Sm=function(n,t,e,r){var o=Xd(n,t.column,e,r.replaceOrInit);return pm(o,t.row,t.column)},km=function(n,t,e,r){var o=Yd(t),i=function(n,t){return Xd(n,t.column,e,r.replaceOrInit)},u=V(o,i,n);return pm(u,t[0].row,t[0].column)},Om=function(n,t,e,r){var o=Kd(n,t.row,e,r.replaceOrInit);return pm(o,t.row,t.column)},Tm=function(n,t,e,r){var o=vm(t),i=function(n,t){return Kd(n,t.row,e,r.replaceOrInit)},u=V(o,i,n);return pm(u,t[0].row,t[0].column)},Dm=function(n,t,e,r){var o=Xd(n,t.column,e,r.replaceOrInit);return pm(o,t.row,t.column)},_m=function(n,t,e,r){var o=Yd(t),i=function(n,t){return Xd(n,t.column,e,r.replaceOrInit)},u=V(o,i,n);return pm(u,t[0].row,t[0].column)},Am=function(n,t,e,r){var o=Yd(t.details),i=Ud(n,N(o,(function(n){return n.column}))),u=mm(i,o[0].row,o[0].column);return dm(i,u)},Em=function(n,t,e,r){var o=vm(t),i=jd(n,o[0].row,o[o.length-1].row),u=mm(i,t[0].row,t[0].column);return dm(i,u)},Rm=function(n,t,e,r){var o=t.cells;lm(o);var i=pd(n,t.bounds,e,r.merge(o));return dm(i,g.from(o[0]))},Bm=function(n,t,e,r){var o=function(n,t){return vd(n,t,e,r.unmerge(t))},i=z(t,o,n);return dm(i,g.from(t[0]))},Mm=function(n,t,e,r){var o=function(n,t){var e=Yr.fromTable(n);return $f(e,t,!0)},i=o(t.clipboard,t.generators),u=zt(t.row,t.column),a=Pd(u,n,i,t.generators,e);return a.fold((function(){return dm(n,g.some(t.element))}),(function(n){var e=mm(n,t.row,t.column);return dm(n,e)}))},Im=function(n,t,e){var r=Or(n,e.section),o=Yr.generate(r);return $f(o,t,!0)},Nm=function(n,t,e,r){var o=Ir(n).rows,i=t.cells[0].column,u=o[t.cells[0].row],a=Im(t.clipboard,t.generators,u),c=Fd(i,n,a,t.generators,e),s=mm(c,t.cells[0].row,t.cells[0].column);return dm(c,s)},Pm=function(n,t,e,r){var o=Ir(n).rows,i=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,u=o[t.cells[0].row],a=Im(t.clipboard,t.generators,u),c=Fd(i,n,a,t.generators,e),s=mm(c,t.cells[0].row,t.cells[0].column);return dm(c,s)},Fm=function(n,t,e,r){var o=Ir(n).rows,i=t.cells[0].row,u=o[i],a=Im(t.clipboard,t.generators,u),c=Ld(i,n,a,t.generators,e),s=mm(c,t.cells[0].row,t.cells[0].column);return dm(c,s)},Lm=function(n,t,e,r){var o=Ir(n).rows,i=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,u=o[t.cells[0].row],a=Im(t.clipboard,t.generators,u),c=Ld(i,n,a,t.generators,e),s=mm(c,t.cells[0].row,t.cells[0].column);return dm(c,s)},Hm=function(n,t){var e=Yr.fromTable(n),r=cd(e,t);return r.bind((function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,i=G(N(e.all,(function(n){return H(n.cells,(function(n){return n.column>=r&&n.column<o}))})));return zm(i,(function(n){return"th"===Jt(n.element)}))})).getOr("")},zm=function(n,t){var e=H(n,t);return 0===e.length?g.some("td"):e.length===n.length?g.some("th"):g.none()},Vm=Sc,Um=Cc,jm=function(n,t){return M(t,(function(n){return 0===n.column&&n.isLocked}))},Wm=function(n,t){return M(t,(function(t){return t.column+t.colspan>=n.grid.columns&&t.isLocked}))},Gm=function(n,t){var e=hi(n),r=Yd(t);return V(r,(function(n,t){var r=e[t.column],o=r.map(vi).getOr(0);return n+o}),0)},qm=function(n){return function(t,e){return cd(t,e).filter((function(e){var r=n?jm:Wm;return!r(t,e)})).map((function(n){return{details:n,pixelDelta:Gm(t,n)}}))}},Xm=function(n,t){return ld(n,t).map((function(t){return{details:t,pixelDelta:-Gm(n,t)}}))},Km=function(n){return function(t,e){return id(t,e).filter((function(e){var r=n?jm:Wm;return!r(t,e.cells)}))}},Ym=ed(hm,cd,n,n,tm.modification),$m=ed(bm,cd,n,n,tm.modification),Jm=ed(ym,qm(!0),Um,n,tm.modification),Qm=ed(xm,qm(!1),Um,n,tm.modification),Zm=ed(Am,Xm,Um,fm,tm.modification),ng=ed(Em,cd,n,fm,tm.modification),tg=(ed(Sm,sd,n,n,tm.transform("row","th")),ed(km,ld,n,n,tm.transform("row","th"))),eg=(ed(Dm,sd,n,n,tm.transform(null,"td")),ed(_m,ld,n,n,tm.transform(null,"td"))),rg=(ed(wm,rd,n,n,tm.transform("col","th")),ed(Cm,cd,n,n,tm.transform("col","th")),ed(Om,rd,n,n,tm.transform(null,"td")),ed(Tm,cd,n,n,tm.transform(null,"td")),ed(Rm,md,Vm,n,tm.merging)),og=ed(Bm,gd,Vm,n,tm.merging),ig=ed(Mm,od,Vm,n,tm.modification),ug=ed(Nm,Km(!0),n,n,tm.modification),ag=ed(Pm,Km(!1),n,n,tm.modification),cg=ed(Fm,id,n,n,tm.modification),sg=ed(Lm,id,n,n,tm.modification),lg=Hm,fg=function(n){return Ea(n.parentNode)},dg=function(n){return"thead"===n?"header":"tfoot"===n?"footer":"body"},mg=function(n,t){var e="thead"===fg(t),r=!M(t.cells,(function(n){return"th"!==Ea(n)}));return e||r?g.some({thead:e,ths:r}):g.none()},gg=function(n,t){return dg(mg(n,t).fold((function(){return fg(t)}),(function(n){return"thead"})))},pg=function(n,t,e){var r=n.getParent(t,"table"),o=t.parentNode,i=Ea(o);if(e!==i){var u=n.select(e,r)[0];if(!u){u=n.create(e);var a=r.firstChild;"thead"===e?nn(Be(dt.fromDom(r),"caption,colgroup")).fold((function(){return r.insertBefore(u,a)}),(function(t){return n.insertAfter(u,t.dom)})):r.appendChild(u)}"tbody"===e&&"thead"===i&&u.firstChild?u.insertBefore(t,u.firstChild):u.appendChild(t),o.hasChildNodes()||n.remove(o)}},vg=function(n,t,e){if(O(e)&&Ea(t)!==e){var r=n.dom.rename(t,e);return Rl(n,r),r}return t},hg=function(n,t,e,r){var o=n.dom,i=vg(n,t,e);return S(r)||o.setAttrib(i,"scope",r),i},bg=function(n,t,e,r){return P(t,(function(t){return hg(n,t,e,r)}))},yg=function(n,t,e){var r=function(){var e=yr(dt.fromDom(t.cells[0])).map((function(n){return xr(n)})).getOr([]);return tn(e,(function(t){return mg(n,t.dom)})).map((function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"})).getOr("section")},o=n.dom;if("header"===e){var i=ff(n),u="auto"===i?r():i;bg(n,t.cells,"section"===u?"td":"th","col"),pg(o,t,"cells"===u?"tbody":"thead")}else bg(n,t.cells,"td",null),pg(o,t,"footer"===e?"tfoot":"tbody")},xg=function(n){return yr(n).bind((function(n){return Xo(n,Za.firstSelectedSelector)})).fold((function(){return n}),(function(n){return n[0]}))},wg=function(n){return function(t){var e=Jt(t),r="col"===e||"colgroup"===e?xg(t):t;return Ue(r,n)}},Cg=wg("th,td"),Sg=wg("th,td,caption"),kg=function(n,t){return Cg(n).map((function(n){return Ua(t)})).getOr([])},Og=function(n,t){var e=Cg(n),r=e.bind((function(n){return yr(n)})).map((function(n){return xr(n)}));return li(e,r,(function(n,e){return H(e,(function(e){return M(Aa(e.dom.cells),(function(e){return"1"===qe(e,t)||ht(e,n)}))}))})).getOr([])},Tg=function(t,e,r){var o=function(n){return"table"===Jt(Ra(n))},i=function(n){return!1===o(t)||os(n).rows>1},u=function(n){return!1===o(t)||os(n).columns>1},a=pf(t),c=gf(t)?n:Hf,l=function(n,e,r,o,i){return function(u,c){Fa(u);var s=o(),l=dt.fromDom(t.getDoc()),f=Ta(r,l,a),d=hf(t,u),m=gf(t)?Ac():Ec();return e(u)?n(s,u,c,f,d,m).bind((function(n){return P(n.newRows,(function(n){El(t,n.dom)})),P(n.newCells,(function(n){Rl(t,n.dom)})),n.cursor.map((function(n){var e=Lf(n),r=t.dom.createRng();return r.setStart(e.element.dom,e.offset),r.setEnd(e.element.dom,e.offset),{rng:r,effect:i}}))})):g.none()}},f=l(ng,i,n,e,Ll),d=l(Zm,u,n,e,Ll),m=l(Ym,s,n,e,Ll),p=l($m,s,n,e,Ll),v=l(Jm,s,c,e,Ll),h=l(Qm,s,c,e,Ll),b=l(rg,s,n,e,Ll),y=l(og,s,n,e,Ll),x=l(ug,s,n,e,Ll),w=l(ag,s,n,e,Ll),C=l(cg,s,n,e,Ll),S=l(sg,s,n,e,Ll),k=l(ig,s,n,e,Ll),O=function(n,t){return Mt(n,"type").filter((function(n){return B(t,n)}))},T=function(n,t){return O(t,["td","th"]).each((function(t){var e=N(kg(Va(n),r),(function(n){return n.dom}));bg(n,e,t,null)}))},D=function(n,t){return O(t,["header","body","footer"]).each((function(t){N(Og(Va(n),Za.selected),(function(e){return yg(n,e.dom,t)}))}))},_=l(tg,s,n,e,Ll),A=l(eg,s,n,e,Ll),E=function(n){var t=Og(Va(n),Za.selected);if(t.length>0){var e=N(t,(function(t){return gg(n,t.dom)})),r=B(e,"header"),o=B(e,"footer");if(r||o){var i=B(e,"body");return!r||i||o?r||i||!o?"":"footer":"header"}return"body"}},R=function(n){return zm(kg(Va(n),r),(function(n){return"th"===Jt(n)})).getOr("")},M=lg;return{deleteRow:f,deleteColumn:d,insertRowsBefore:m,insertRowsAfter:p,insertColumnsBefore:v,insertColumnsAfter:h,mergeCells:b,unmergeCells:y,pasteColsBefore:x,pasteColsAfter:w,pasteRowsBefore:C,pasteRowsAfter:S,pasteCells:k,setTableCellType:T,setTableRowType:D,makeColumnsHeader:_,unmakeColumnsHeader:A,getTableRowType:E,getTableCellType:R,getTableColType:M}},Dg={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},_g=function(){return dt.fromTag("th")},Ag=function(){return dt.fromTag("td")},Eg=function(){return dt.fromTag("col")},Rg=function(n,t,e,r){for(var o=dt.fromTag("tr"),i=0;i<n;i++){var u=r<t||i<e?_g():Ag();i<e&&We(u,"scope","row"),r<t&&We(u,"scope","col"),go(u,dt.fromTag("br")),go(o,u)}return o},Bg=function(n){var t=dt.fromTag("colgroup");return I(n,(function(){return go(t,Eg())})),t},Mg=function(n,t,e,r){return I(n,(function(n){return Rg(t,e,r,n)}))},Ig=function(n,t,e,r,o,i){void 0===i&&(i=Dg);var u=dt.fromTag("table"),a="cells"!==o;nr(u,i.styles),Ge(u,i.attributes),i.colGroups&&go(u,Bg(t));var c=Math.min(n,e);if(a&&e>0){var s=dt.fromTag("thead");go(u,s);var l="sectionCells"===o?c:0,f=Mg(e,t,l,r);bo(s,f)}var d=dt.fromTag("tbody");go(u,d);var m=a?n-c:n,g=a?0:e,p=Mg(m,t,g,r);return bo(d,p),u},Ng=function(n){return n.dom.innerHTML},Pg=function(n){var t=dt.fromTag("div"),e=dt.fromDom(n.dom.cloneNode(!0));return go(t,e),Ng(t)},Fg=function(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)},Lg=function(n,t){Ve(t,"td,th").each(i(Fg,n))},Hg=function(n,t){P(Me(t,"tr"),(function(t){El(n,t.dom),P(Me(t,"th,td"),(function(t){Rl(n,t.dom)}))}))},zg=function(n){return y(n)&&-1!==n.indexOf("%")},Vg=function(n,t,e,r,o){var i=Xl(n),u={styles:i,attributes:ql(n),colGroups:lf(n)};return n.undoManager.ignore((function(){var i=Ig(e,t,o,r,ff(n),u);We(i,"data-mce-id","__mce");var a=Pg(i);n.insertContent(a),n.addVisual()})),Ve(Ra(n),'table[data-mce-id="__mce"]').map((function(t){return af(n)?Sf(n,t):cf(n)?kf(t):(uf(n)||zg(i.width))&&Cf(n,t),Fa(t),Ke(t,"data-mce-id"),Hg(n,t),Lg(n,t),t.dom})).getOr(null)},Ug=function(n,t,e,r,o){void 0===r&&(r={});var i=function(n){return D(n)&&n>0};if(i(t)&&i(e)){var u=r.headerRows||0,a=r.headerColumns||0;return Vg(n,e,t,a,u)}return console.error(o),null},jg=function(n){return function(){return n().fold((function(){return[]}),(function(n){return N(n,(function(n){return n.dom}))}))}},Wg=function(n){return function(t){var e=t.length>0?g.some(Aa(t)):g.none();n(e)}},Gg=function(n){return function(t,e,r){void 0===r&&(r={});var o=Ug(n,e,t,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoManager.add(),o}},qg=function(n,t,e,r){return{insertTable:Gg(n),setClipboardRows:Wg(t.setRows),getClipboardRows:jg(t.getRows),setClipboardCols:Wg(t.setColumns),getClipboardCols:jg(t.getColumns),resizeHandler:e,selectionTargets:r}},Xg=function(n,t,e){var r=ur(n,t,1);1===e||r<=1?Ke(n,t):We(n,t,Math.min(e,r))},Kg=function(n,t,e){if(Yr.hasColumns(n)){var r=H(Yr.justColumns(n),(function(n){return n.column>=t&&n.column<e})),o=N(r,(function(n){var r=ui(n.element);return Xg(r,"span",e-t),r})),i=dt.fromTag("colgroup");return bo(i,o),[i]}return[]},Yg=function(n,t,e){return N(n.all,(function(n){var r=H(n.cells,(function(n){return n.column>=t&&n.column<e})),o=N(r,(function(n){var r=ui(n.element);return Xg(r,"colspan",e-t),r})),i=dt.fromTag("tr");return bo(i,o),i}))},$g=function(n,t){var e=Yr.fromTable(n),r=ld(e,t);return r.map((function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,i=Kg(e,r,o),u=Yg(e,r,o);return rn(i,u)}))},Jg=function(n,t,e){var r=Yr.fromTable(n),o=cd(r,t);return o.bind((function(n){var t=$f(r,e,!1),o=Ir(t).rows,i=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),u=q(i,(function(n){var t=H(n.cells,(function(n){return!n.isLocked}));return t.length>0?[en(en({},n),{cells:t})]:[]})),a=Zf(u,e);return di(a.length>0,a)})).map((function(n){return Wf(n)}))},Qg=tinymce.util.Tools.resolve("tinymce.util.Tools"),Zg=function(n,t,e){var r,o=n.select("td,th",t),i=function(t,r){for(var o=0;o<r.length;o++){var i=n.getStyle(r[o],e);if("undefined"===typeof t&&(t=i),t!==i)return""}return t};return i(r,o)},np=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},tp=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},ep=function(n,t){Qg.each("left center right".split(" "),(function(e){n.formatter.remove("align"+e,{},t)}))},rp=function(n,t){Qg.each("top middle bottom".split(" "),(function(e){n.formatter.remove("valign"+e,{},t)}))},op=function(n){return Nt(n,"menu")},ip=function(n,t){var e=function(n,t){return t.concat(N(n,(function(n){var t=n.text||n.title;return op(n)?{text:t,items:ip(n.menu)}:{text:t,value:n.value}})))};return e(n,t||[])},up=function(n){return function(t){return yn(t,"rgb")?n.toHex(t):t}},ap=function(n,t){var e=dt.fromDom(t);return{borderwidth:rr(e,"border-width").getOr(""),borderstyle:rr(e,"border-style").getOr(""),bordercolor:rr(e,"border-color").map(up(n)).getOr(""),backgroundcolor:rr(e,"background-color").map(up(n)).getOr("")}},cp=function(n){var t=n[0],e=n.slice(1);return P(e,(function(n){P(Ct(t),(function(e){kt(n,(function(n,r){var o=t[e];""!==o&&e===r&&o!==n&&(t[e]="")}))}))})),t},sp=function(n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],e={name:"borderwidth",type:"input",label:"Border width"},r="cell"===n?[e].concat(t):t;return{title:"Advanced",name:"advanced",items:r}},lp=function(n,t,e,r){return j(n,(function(n){return e.formatter.matchNode(r,t+n)})).getOr("")},fp=i(lp,["left","center","right"],"align"),dp=i(lp,["top","middle","bottom"],"valign"),mp=function(n,t){var e=Xl(n),r=ql(n),o=function(n){return{borderstyle:Mt(e,"border-style").getOr(""),bordercolor:up(n)(Mt(e,"border-color").getOr("")),backgroundcolor:up(n)(Mt(e,"background-color").getOr(""))}},i={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},u=function(){var t=e["border-width"];return tf(n)&&t?{border:t}:Mt(r,"border").fold((function(){return{}}),(function(n){return{border:n}}))},a=t?o(n.dom):{},c=function(){var n=Mt(e,"border-spacing").or(Mt(r,"cellspacing")).fold((function(){return{}}),(function(n){return{cellspacing:n}})),t=Mt(e,"border-padding").or(Mt(r,"cellpadding")).fold((function(){return{}}),(function(n){return{cellpadding:n}}));return en(en({},n),t)},s=en(en(en(en(en(en({},i),e),r),a),u()),c());return s},gp=function(n,t,e){var r=function(t,e){var r=rr(dt.fromDom(e),"border-width");return tf(n)&&r.isSome()?r.getOr(""):t.getAttrib(e,"border")||Zg(n.dom,e,"border-width")||Zg(n.dom,e,"border")},o=n.dom;return en({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"),cellpadding:o.getAttrib(t,"cellpadding")||Zg(n.dom,t,"padding"),border:r(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:fp(n,t)},e?ap(o,t):{})},pp=function(n,t,e){var r=n.dom;return en({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:gg(n,t),align:fp(n,t)},e?ap(r,t):{})},vp=function(n,t,e,r){var o=n.dom,i=r.getOr(t),u=function(n,t){return o.getStyle(n,t)||o.getAttrib(n,t)};return en({width:u(i,"width"),height:u(t,"height"),scope:o.getAttrib(t,"scope"),celltype:Ea(t),class:o.getAttrib(t,"class",""),halign:fp(n,t),valign:dp(n,t)},e?ap(o,t):{})},hp=function(n){var t=ip(ef(n));return t.length>0?g.some({name:"class",type:"listbox",label:"Class",items:t}):g.none()},bp=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],yp=function(n){return bp.concat(hp(n).toArray())},xp=function(n){return function(t,e){var r=t.dom,o=function(t,o){n&&!o||r.setAttrib(e,t,o)},i=function(t,o){n&&!o||r.setStyle(e,t,o)},u=function(r,o){n&&!o||(""===o?t.formatter.remove(r,{value:null},e,!0):t.formatter.apply(r,{value:o},e))};return{setAttrib:o,setStyle:i,setFormat:u}}},wp={normal:xp(!1),ifTruthy:xp(!0)},Cp=function(n){return yr(n[0]).map((function(t){var e=Yr.fromTable(t),r=Yr.justCells(e),o=H(r,(function(t){return M(n,(function(n){return ht(t.element,n)}))}));return N(o,(function(n){return{element:n.element.dom,column:Yr.getColumnAt(e,n.column).map((function(n){return n.element.dom}))}}))}))},Sp=function(n,t,e){n.setAttrib("scope",e.scope),n.setAttrib("class",e.class),n.setStyle("height",Pa(e.height)),t.setStyle("width",Pa(e.width))},kp=function(n,t){n.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n.setFormat("tablecellbordercolor",t.bordercolor),n.setFormat("tablecellborderstyle",t.borderstyle),n.setFormat("tablecellborderwidth",Pa(t.borderwidth))},Op=function(n,t,e,r){var o=1===t.length,i=At(r,(function(n,t){return e[t]!==n}));if(Bt(i)>0&&t.length>=1){var u=yr(t[0]);Cp(t).each((function(t){P(t,(function(t){var e=hg(n,t.element,r.celltype),i=o?wp.normal(n,e):wp.ifTruthy(n,e),u=t.column.map((function(t){return o?wp.normal(n,t):wp.ifTruthy(n,t)})).getOr(i);Sp(i,u,r),$l(n)&&kp(i,r),o&&(ep(n,e),rp(n,e)),r.halign&&np(n,e,r.halign),r.valign&&tp(n,e,r.valign)}))}));var a=Bt(At(i,(function(n,t){return"scope"!==t&&"celltype"!==t})))>0;u.each((function(t){return Pl(n,t.dom,{structure:It(i,"celltype"),style:a})}))}},Tp=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact((function(){Op(n,t,e,o),n.focus()}))},Dp=function(n,t){var e=Cp(t).map((function(t){return N(t,(function(t){return vp(n,t.element,$l(n),t.column)}))}));return cp(e.getOrDie())},_p=function(n,t){var e=kg(Va(n),t);if(0!==e.length){var r=Dp(n,e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:yp(n)},sp("cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:yp(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:$l(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:i(Tp,n,e,r)})}},Ap=function(n){var t=ip(rf(n));return t.length>0?g.some({name:"class",type:"listbox",label:"Class",items:t}):g.none()},Ep=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Rp=function(n){return Ep.concat(Ap(n).toArray())},Bp=function(n,t){n.setAttrib("class",t.class),n.setStyle("height",Pa(t.height))},Mp=function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)},Ip=function(n,t,e,r){var o=1===t.length,i=At(r,(function(n,t){return e[t]!==n}));if(Bt(i)>0){P(t,(function(t){r.type!==Ea(t.parentNode)&&yg(n,t,r.type);var i=o?wp.normal(n,t):wp.ifTruthy(n,t);Bp(i,r),Jl(n)&&Mp(i,r),r.align!==e.align&&(ep(n,t),np(n,t,r.align))}));var u=It(i,"type"),a=!u||Bt(i)>1;yr(dt.fromDom(t[0])).each((function(t){return Pl(n,t.dom,{structure:u,style:a})}))}},Np=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact((function(){Ip(n,t,e,o),n.focus()}))},Pp=function(n){var t=Og(Va(n),Za.selected);if(0!==t.length){var e=N(t,(function(t){return pp(n,t.dom,Jl(n))})),r=cp(e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Rp(n)},sp("row")]},u={type:"panel",items:[{type:"grid",columns:2,items:Rp(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:Jl(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:i(Np,n,N(t,(function(n){return n.dom})),r)})}},Fp=tinymce.util.Tools.resolve("tinymce.Env"),Lp=function(n,t,e){var r=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],i=Zl(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],u=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],a=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat(o).concat(i).concat(u).concat(a)},Hp=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)y(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var o=0;o<t.children.length;o++)Hp(n,t.children[o],e,r)},zp=function(n,t,e){var r=n.dom,o={},i={};if(o.class=e.class,i.height=Pa(e.height),r.getAttrib(t,"width")&&!tf(n)?o.width=Na(e.width):i.width=Pa(e.width),tf(n)?(i["border-width"]=Pa(e.border),i["border-spacing"]=Pa(e.cellspacing)):(o.border=e.border,o.cellpadding=e.cellpadding,o.cellspacing=e.cellspacing),tf(n)&&t.children)for(var u=0;u<t.children.length;u++)Hp(r,t.children[u],{"border-width":Pa(e.border),padding:Pa(e.cellpadding)}),Ql(n)&&Hp(r,t.children[u],{"border-color":e.bordercolor});Ql(n)&&(i["background-color"]=e.backgroundcolor,i["border-color"]=e.bordercolor,i["border-style"]=e.borderstyle),o.style=r.serializeStyle(en(en({},Xl(n)),i)),r.setAttribs(t,en(en({},ql(n)),o))},Vp=function(n,t,e,r){var o,i=n.dom,u=r.getData(),a=At(u,(function(n,t){return e[t]!==n}));r.close(),""===u.class&&delete u.class,n.undoManager.transact((function(){if(!t){var e=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;t=Vg(n,e,r,0,0)}if(Bt(a)>0&&(zp(n,t,u),o=i.select("caption",t)[0],o&&!u.caption&&i.remove(o),!o&&u.caption&&(o=i.create("caption"),o.innerHTML=Fp.ie?sa:'<br data-mce-bogus="1"/>',t.insertBefore(o,t.firstChild)),""===u.align?ep(n,t):np(n,t,u.align)),n.focus(),n.addVisual(),Bt(a)>0){var c=It(a,"caption"),s=!c||Bt(a)>1;Pl(n,t,{structure:c,style:s})}}))},Up=function(n,t){var e,r=n.dom,o=mp(n,Ql(n));!1===t?(e=r.getParent(n.selection.getStart(),"table"),e?o=gp(n,e,Ql(n)):Ql(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",Ql(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=ip(of(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:Lp(n,u,t)},c=function(){return{type:"panel",items:[a]}},s=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},sp("table")]}},l=Ql(n)?s():c();n.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:i(Vp,n,e,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},jp=function(n){return Sg(Va(n))},Wp=function(n){return Cg(Va(n))},Gp=function(t,e,r,o,a){var c=Ia(t),s=function(){return jp(t).each((function(n){yr(n,c).filter(u(c)).each((function(n){var e=dt.fromText("");if(fo(n,e),xo(n),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(e.dom,0),r.setEnd(e.dom,0),t.selection.setRng(r),t.nodeChanged()}}))}))},l=function(n){return jp(t).each((function(e){var r=cf(t)||af(t)||uf(t);r||yr(e,c).each((function(e){"relative"!==n||ns(e)?"fixed"!==n||ts(e)?"responsive"!==n||es(e)||kf(e):Sf(t,e):Cf(t,e),Fa(e),Pl(t,e.dom,Ll)}))}))},f=function(n){return yr(n,c)},d=function(n){return function(e){t.selection.setRng(e.rng),t.focus(),r.clear(n),Fa(n),Pl(t,n.dom,e.effect)}},m=function(n){return Wp(t).each((function(t){f(t).each((function(e){var r=tc(o,e,t);n(e,r).each(d(e))}))}))},p=function(){return Wp(t).map((function(e){return f(e).bind((function(r){var i=tc(o,r,e),u=Ta(n,dt.fromDom(t.getDoc()),g.none());return Jg(r,i,u)}))}))},v=function(){return Wp(t).map((function(n){return f(n).bind((function(t){var e=tc(o,t,n);return $g(t,e)}))}))},h=function(n,e){return e().each((function(e){var r=N(e,(function(n){return ui(n)}));Wp(t).each((function(e){return f(e).each((function(i){var u=Da(dt.fromDom(t.getDoc())),a=rc(o,e,r,u);n(i,a).each(d(i))}))}))}))};kt({mceTableSplitCells:function(){return m(e.unmergeCells)},mceTableMergeCells:function(){return m(e.mergeCells)},mceTableInsertRowBefore:function(){return m(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return m(e.insertRowsAfter)},mceTableInsertColBefore:function(){return m(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return m(e.insertColumnsAfter)},mceTableDeleteCol:function(){return m(e.deleteColumn)},mceTableDeleteRow:function(){return m(e.deleteRow)},mceTableCutCol:function(n){return v().each((function(n){a.setColumns(n),m(e.deleteColumn)}))},mceTableCutRow:function(n){return p().each((function(n){a.setRows(n),m(e.deleteRow)}))},mceTableCopyCol:function(n){return v().each((function(n){return a.setColumns(n)}))},mceTableCopyRow:function(n){return p().each((function(n){return a.setRows(n)}))},mceTablePasteColBefore:function(n){return h(e.pasteColsBefore,a.getColumns)},mceTablePasteColAfter:function(n){return h(e.pasteColsAfter,a.getColumns)},mceTablePasteRowBefore:function(n){return h(e.pasteRowsBefore,a.getRows)},mceTablePasteRowAfter:function(n){return h(e.pasteRowsAfter,a.getRows)},mceTableDelete:s,mceTableSizingMode:function(n,t){return l(t)}},(function(n,e){return t.addCommand(e,n)}));var b=function(n,t){t.each((function(t){Pl(n,t.dom,Ll)}))};kt({mceTableCellType:function(n,r){var o=yr(Va(t),c);e.setTableCellType(t,r),b(t,o)},mceTableRowType:function(n,r){var o=yr(Va(t),c);e.setTableRowType(t,r),b(t,o)}},(function(n,e){return t.addCommand(e,n)})),t.addCommand("mceTableColType",(function(n,t){return Mt(t,"type").each((function(n){return m("th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader)}))})),kt({mceTableProps:i(Up,t,!1),mceTableRowProps:i(Pp,t),mceTableCellProps:i(_p,t,o)},(function(n,e){return t.addCommand(e,(function(){return n()}))})),t.addCommand("mceInsertTable",(function(n,e){x(e)&&Ct(e).length>0?Ug(t,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Up(t,!0)})),t.addCommand("mceTableApplyCellStyle",(function(n,e){var r=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(x(e)){var i=kg(Va(t),o);if(0!==i.length){var u=At(e,(function(n,e){return t.formatter.has(r(e))&&y(n)}));Pt(u)||(kt(u,(function(n,e){P(i,(function(o){wp.normal(t,o.dom).setFormat(r(e),n)}))})),f(i[0]).each((function(n){return Pl(t,n.dom,Fl)})))}}}))},qp=function(n,t,e){var r=Ia(n),o=function(n){return yr(n,r)};kt({mceTableRowType:function(){return t.getTableRowType(n)},mceTableCellType:function(){return t.getTableCellType(n)},mceTableColType:function(){return Cg(Va(n)).bind((function(n){return o(n).map((function(r){var o=tc(e,r,n);return t.getTableColType(r,o)}))})).getOr("")}},(function(t,e){return n.addQueryValueHandler(e,t)}))},Xp=function(){var n=Yu(g.none()),t=Yu(g.none()),e=function(n){n.set(g.none())};return{getRows:n.get,setRows:function(r){n.set(r),e(t)},clearRows:function(){return e(n)},getColumns:t.get,setColumns:function(r){t.set(r),e(n)},clearColumns:function(){return e(t)}}},Kp={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Yp=function(n){n.formatter.register(Kp)},$p=$o.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Jp=function(n){return void 0===n&&(n=void 0),$p.none(n)},Qp=en(en({},$p),{none:Jp}),Zp=function(n,t){return yr(n,t).bind((function(t){var e=hr(t),r=W(e,(function(t){return ht(n,t)}));return r.map((function(n){return{index:n,all:e}}))}))},nv=function(n,t){var e=Zp(n,t);return e.fold((function(){return Qp.none(n)}),(function(t){return t.index+1<t.all.length?Qp.middle(n,t.all[t.index+1]):Qp.last(n)}))},tv=function(n,t){var e=Zp(n,t);return e.fold((function(){return Qp.none()}),(function(t){return t.index-1>=0?Qp.middle(n,t.all[t.index-1]):Qp.first(n)}))},ev=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},rv={create:ev},ov=$o.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),iv=function(n,t,e,r){return n.fold(t,e,r)},uv=function(n){return n.fold(o,o,o)},av=ov.before,cv=ov.on,sv=ov.after,lv={before:av,on:cv,after:sv,cata:iv,getStart:uv},fv=$o.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),dv=function(n){return fv.exact(n.start,n.soffset,n.finish,n.foffset)},mv=function(n){return n.match({domRange:function(n){return dt.fromDom(n.startContainer)},relative:function(n,t){return lv.getStart(n)},exact:function(n,t,e,r){return n}})},gv=fv.domRange,pv=fv.relative,vv=fv.exact,hv=function(n){var t=mv(n);return ce(t)},bv=rv.create,yv={domRange:gv,relative:pv,exact:vv,exactFromRange:dv,getWin:hv,range:bv},xv=function(n,t){var e=n.document.createRange();return wv(e,t),e},wv=function(n,t){return n.selectNodeContents(t.dom)},Cv=function(n,t){t.fold((function(t){n.setStartBefore(t.dom)}),(function(t,e){n.setStart(t.dom,e)}),(function(t){n.setStartAfter(t.dom)}))},Sv=function(n,t){t.fold((function(t){n.setEndBefore(t.dom)}),(function(t,e){n.setEnd(t.dom,e)}),(function(t){n.setEndAfter(t.dom)}))},kv=function(n,t,e){var r=n.document.createRange();return Cv(r,t),Sv(r,e),r},Ov=function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},Tv=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},Dv=function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?g.some(e).map(Tv):g.none()},_v=$o.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Av=function(n,t,e){return t(dt.fromDom(e.startContainer),e.startOffset,dt.fromDom(e.endContainer),e.endOffset)},Ev=function(n,t){return t.match({domRange:function(n){return{ltr:r(n),rtl:g.none}},relative:function(t,e){return{ltr:on((function(){return kv(n,t,e)})),rtl:on((function(){return g.some(kv(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:on((function(){return Ov(n,t,e,r,o)})),rtl:on((function(){return g.some(Ov(n,r,o,t,e))}))}}})},Rv=function(n,t){var e=t.ltr();if(e.collapsed){var r=t.rtl().filter((function(n){return!1===n.collapsed}));return r.map((function(n){return _v.rtl(dt.fromDom(n.endContainer),n.endOffset,dt.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return Av(n,_v.ltr,e)}))}return Av(n,_v.ltr,e)},Bv=function(n,t){var e=Ev(n,t);return Rv(n,e)},Mv=function(n,t){var e=Bv(n,t);return e.match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom,o),i.setEnd(t.dom,e),i}})},Iv=(_v.ltr,_v.rtl,function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,u=1;u<o;u++){var a=n(u),c=Math.abs(t-a.left);if(e<=a.bottom){if(e<a.top||c>i)return u-1;i=c}}return 0}),Nv=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},Pv=function(n,t,e,r,o){var i=function(e){var r=n.dom.createRange();return r.setStart(t.dom,e),r.collapse(!0),r},u=function(n){var t=i(n);return t.getBoundingClientRect()},a=ko(t).length,c=Iv(u,e,r,o.right,a);return i(c)},Fv=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var i=o.getClientRects(),u=tn(i,(function(n){return Nv(n,e,r)?g.some(n):g.none()}));return u.map((function(o){return Pv(n,t,e,r,o)}))},Lv=function(n,t,e,r){var o=n.dom.createRange(),i=ge(t);return tn(i,(function(t){return o.selectNode(t.dom),Nv(o.getBoundingClientRect(),e,r)?Hv(n,t,e,r):g.none()}))},Hv=function(n,t,e,r){return ee(t)?Fv(n,t,e,r):Lv(n,t,e,r)},zv=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return Hv(n,t,u,a)},Vv=!0,Uv=!1,jv=function(n,t){return t-n.left<n.right-t?Vv:Uv},Wv=function(n,t,e){var r=n.dom.createRange();return r.selectNode(t.dom),r.collapse(e),r},Gv=function(n,t,e){var r=n.dom.createRange();r.selectNode(t.dom);var o=r.getBoundingClientRect(),i=jv(o,e),u=i===Vv?ga:pa;return u(t).map((function(t){return Wv(n,t,i)}))},qv=function(n,t,e){var r=t.dom.getBoundingClientRect(),o=jv(r,e);return g.some(Wv(n,t,o))},Xv=function(n,t,e){var r=0===ge(t).length?qv:Gv;return r(n,t,e)},Kv=function(n,t,e){return g.from(n.dom.caretPositionFromPoint(t,e)).bind((function(t){if(null===t.offsetNode)return g.none();var e=n.dom.createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),g.some(e)}))},Yv=function(n,t,e){return g.from(n.dom.caretRangeFromPoint(t,e))},$v=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return zv(n,t,u,a)},Jv=function(n,t,e){return dt.fromPoint(n,t,e).bind((function(r){var o=function(){return Xv(n,r,t)};return 0===ge(r).length?o():$v(n,r,t,e).orThunk(o)}))},Qv=function(){return document.caretPositionFromPoint?Kv:document.caretRangeFromPoint?Yv:Jv}(),Zv=function(n,t,e){var r=dt.fromDom(n.document);return Qv(r,t,e).map((function(n){return rv.create(dt.fromDom(n.startContainer),n.startOffset,dt.fromDom(n.endContainer),n.endOffset)}))},nh=function(n,t){var e=Jt(n);return"input"===e?lv.after(n):B(["br","img"],e)?0===t?lv.before(n):lv.after(n):lv.on(n,t)},th=function(n,t){var e=n.fold(lv.before,nh,lv.after),r=t.fold(lv.before,nh,lv.after);return yv.relative(e,r)},eh=function(n,t,e,r){var o=nh(n,t),i=nh(e,r);return yv.relative(o,i)},rh=function(n){return n.match({domRange:function(n){var t=dt.fromDom(n.startContainer),e=dt.fromDom(n.endContainer);return eh(t,n.startOffset,e,n.endOffset)},relative:th,exact:eh})},oh=function(n,t,e,r){var o=ue(n),i=o.dom.createRange();return i.setStart(n.dom,t),i.setEnd(e.dom,r),i},ih=function(n,t,e,r){var o=oh(n,t,e,r),i=ht(n,e)&&t===r;return o.collapsed&&!i},uh=function(n){return g.from(n.getSelection())},ah=function(n,t){uh(n).each((function(n){n.removeAllRanges(),n.addRange(t)}))},ch=function(n,t,e,r,o){var i=Ov(n,t,e,r,o);ah(n,i)},sh=function(n,t,e,r,o,i){t.collapse(e.dom,r),t.extend(o.dom,i)},lh=function(n,t){return Bv(n,t).match({ltr:function(t,e,r,o){ch(n,t,e,r,o)},rtl:function(t,e,r,o){uh(n).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom,e,r.dom,o);else if(i.extend)try{sh(n,i,t,e,r,o)}catch(u){ch(n,r,o,t,e)}else ch(n,r,o,t,e)}))}})},fh=function(n,t,e,r,o){var i=eh(t,e,r,o);lh(n,i)},dh=function(n,t,e){var r=th(t,e);lh(n,r)},mh=function(n){var t=yv.getWin(n).dom,e=function(n,e,r,o){return Ov(t,n,e,r,o)},r=rh(n);return Bv(t,r).match({ltr:e,rtl:e})},gh=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return g.some(rv.create(dt.fromDom(t.startContainer),t.startOffset,dt.fromDom(e.endContainer),e.endOffset))}return g.none()},ph=function(n){if(null===n.anchorNode||null===n.focusNode)return gh(n);var t=dt.fromDom(n.anchorNode),e=dt.fromDom(n.focusNode);return ih(t,n.anchorOffset,e,n.focusOffset)?g.some(rv.create(t,n.anchorOffset,e,n.focusOffset)):gh(n)},vh=function(n,t){var e=xv(n,t);ah(n,e)},hh=function(n){return uh(n).filter((function(n){return n.rangeCount>0})).bind(ph)},bh=function(n){return hh(n).map((function(n){return yv.exact(n.start,n.soffset,n.finish,n.foffset)}))},yh=function(n,t){var e=Mv(n,t);return Dv(e)},xh=function(n,t,e){return Zv(n,t,e)},wh=function(n){uh(n).each((function(n){return n.removeAllRanges()}))},Ch=tinymce.util.Tools.resolve("tinymce.util.VK"),Sh=function(n,t,e,r){return Dh(n,t,nv(e),r)},kh=function(n,t,e,r){return Dh(n,t,tv(e),r)},Oh=function(n,t){var e=yv.exact(t,0,t,0);return mh(e)},Th=function(n,t){var e=Me(t,"tr");return nn(e).bind((function(t){return Ve(t,"td,th").map((function(t){return Oh(n,t)}))}))},Dh=function(n,t,e,r){return e.fold(g.none,g.none,(function(t,e){return ga(e).map((function(t){return Oh(n,t)}))}),(function(e){return yr(e,t).bind((function(t){var o=nc(e);return n.undoManager.transact((function(){r.insertRowsAfter(t,o)})),Th(n,t)}))}))},_h=["table","li","dl"],Ah=function(n,t,e){if(n.keyCode===Ch.TAB){var r=Ra(t),o=function(n){var t=Jt(n);return ht(n,r)||B(_h,t)},i=t.selection.getRng();if(i.collapsed){var u=dt.fromDom(i.startContainer);vr(u,o).each((function(r){n.preventDefault();var i=n.shiftKey?kh:Sh,u=i(t,o,r,e);u.each((function(n){t.selection.setRng(n)}))}))}}},Eh=function(n,t){return{selection:n,kill:t}},Rh={create:Eh},Bh=function(n,t,e,r){return{start:lv.on(n,t),finish:lv.on(e,r)}},Mh={create:Bh},Ih=function(n,t){var e=Mv(n,t);return rv.create(dt.fromDom(e.startContainer),e.startOffset,dt.fromDom(e.endContainer),e.endOffset)},Nh=Mh.create,Ph=function(n,t,e,r,o,i,u){return ht(e,o)&&r===i?g.none():Ue(e,"td,th",t).bind((function(e){return Ue(o,"td,th",t).bind((function(r){return Fh(n,t,e,r,u)}))}))},Fh=function(n,t,e,r,o){return ht(e,r)?g.none():Vo(e,r,t).bind((function(t){var r=t.boxes.getOr([]);return r.length>0?(o(n,r,t.start,t.finish),g.some(Rh.create(g.some(Nh(e,0,e,la(e))),!0))):g.none()}))},Lh=function(n,t,e,r,o){var i=function(n){return o.clearBeforeUpdate(e),o.selectRange(e,n.boxes,n.start,n.finish),n.boxes};return qo(r,n,t,o.firstSelectedSelector,o.lastSelectedSelector).map(i)},Hh=function(n,t){return{item:n,mode:t}},zh=function(n,t,e,r){return void 0===r&&(r=Vh),n.property().parent(t).map((function(n){return Hh(n,r)}))},Vh=function(n,t,e,r){return void 0===r&&(r=Uh),e.sibling(n,t).map((function(n){return Hh(n,r)}))},Uh=function(n,t,e,r){void 0===r&&(r=Uh);var o=n.property().children(t),i=e.first(o);return i.map((function(n){return Hh(n,r)}))},jh=[{current:zh,next:Vh,fallback:g.none()},{current:Vh,next:Uh,fallback:g.some(zh)},{current:Uh,next:Uh,fallback:g.some(Vh)}],Wh=function(n,t,e,r,o){void 0===o&&(o=jh);var i=j(o,(function(n){return n.current===e}));return i.bind((function(e){return e.current(n,t,r,e.next).orThunk((function(){return e.fallback.bind((function(e){return Wh(n,t,e,r)}))}))}))},Gh=function(){var n=function(n,t){return n.query().prevSibling(t)},t=function(n){return n.length>0?g.some(n[n.length-1]):g.none()};return{sibling:n,first:t}},qh=function(){var n=function(n,t){return n.query().nextSibling(t)},t=function(n){return n.length>0?g.some(n[0]):g.none()};return{sibling:n,first:t}},Xh={left:Gh,right:qh},Kh=function(n,t,e,r,o,i){var u=Wh(n,t,r,o);return u.bind((function(t){return i(t.item)?g.none():e(t.item)?g.some(t.item):Kh(n,t.item,e,t.mode,o,i)}))},Yh=function(n,t,e,r){return Kh(n,t,e,Vh,Xh.left(),r)},$h=function(n,t,e,r){return Kh(n,t,e,Vh,Xh.right(),r)},Jh=function(n){return function(t){return 0===n.property().children(t).length}},Qh=function(n,t,e){return nb(n,t,Jh(n),e)},Zh=function(n,t,e){return tb(n,t,Jh(n),e)},nb=Yh,tb=$h,eb=_o(),rb=function(n,t){return Qh(eb,n,t)},ob=function(n,t){return Zh(eb,n,t)},ib=function(n,t,e){return nb(eb,n,t,e)},ub=function(n,t,e){return tb(eb,n,t,e)},ab=function(n,t,e){return Ne(n,t,e).isSome()},cb=$o.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),sb=function(n,t,e){var r=n.getRect(t),o=n.getRect(e);return o.right>r.left&&o.left<r.right},lb=function(n){return Ue(n,"tr")},fb=function(n,t,e,r,o,i,u){return Ue(r,"td,th",u).bind((function(e){return Ue(t,"td,th",u).map((function(t){return ht(e,t)?ht(r,e)&&la(e)===o?i(t):cb.none("in same cell"):Lo(lb,[e,t]).fold((function(){return sb(n,t,e)?cb.success():i(t)}),(function(n){return i(t)}))}))})).getOr(cb.none("default"))},db=function(n,t,e,r,o){return n.fold(t,e,r,o)},mb=en(en({},cb),{verify:fb,cata:db}),gb=function(n,t,e,r){return{parent:n,children:t,element:e,index:r}},pb=function(n){return se(n).bind((function(t){var e=ge(t);return vb(e,n).map((function(r){return gb(t,e,n,r)}))}))},vb=function(n,t){return W(n,i(ht,t))},hb=function(n){return"br"===Jt(n)},bb=function(n,t,e){return t(n,e).bind((function(n){return ee(n)&&0===ko(n).trim().length?bb(n,t,e):g.some(n)}))},yb=function(n,t,e){return e.traverse(t).orThunk((function(){return bb(t,e.gather,n)})).map(e.relative)},xb=function(n,t){return pe(n,t).filter(hb).orThunk((function(){return pe(n,t-1).filter(hb)}))},wb=function(n,t,e,r){return xb(t,e).bind((function(t){return r.traverse(t).fold((function(){return bb(t,r.gather,n).map(r.relative)}),(function(n){return pb(n).map((function(n){return lv.on(n.parent,n.index)}))}))}))},Cb=function(n,t,e,r){var o=hb(t)?yb(n,t,r):wb(n,t,e,r);return o.map((function(n){return{start:n,finish:n}}))},Sb=function(n){return mb.cata(n,(function(n){return g.none()}),(function(){return g.none()}),(function(n){return g.some(Bf(n,0))}),(function(n){return g.some(Bf(n,la(n)))}))},kb=function(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}},Ob=function(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}},Tb=function(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}},Db=function(n){return n.top},_b=function(n){return n.bottom},Ab=function(n,t,e){return e>=0&&e<la(t)?n.getRangedRect(t,e,t,e+1):e>0?n.getRangedRect(t,e-1,t,e):g.none()},Eb=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},Rb=function(n,t){return g.some(n.getRect(t))},Bb=function(n,t,e){return te(t)?Rb(n,t).map(Eb):ee(t)?Ab(n,t,e).map(Eb):g.none()},Mb=function(n,t){return te(t)?Rb(n,t).map(Eb):ee(t)?n.getRangedRect(t,0,t,la(t)).map(Eb):g.none()},Ib=5,Nb=100,Pb=$o.generate([{none:[]},{retry:["caret"]}]),Fb=function(n,t){return n.left<t.left||Math.abs(t.right-n.left)<1||n.left>t.right},Lb=function(n,t,e){return Pe(t,am).fold(c,(function(t){return Mb(n,t).exists((function(n){return Fb(e,n)}))}))},Hb=function(n,t,e,r,o){var i=kb(o,Ib);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?Pb.retry(i):e.top===o.bottom?Pb.retry(kb(o,1)):Lb(n,t,o)?Pb.retry(Tb(i,Ib,0)):Pb.none()},zb=function(n,t,e,r,o){var i=Ob(o,Ib);return Math.abs(e.top-r.top)<1||e.bottom<o.top?Pb.retry(i):e.bottom===o.top?Pb.retry(Ob(o,1)):Lb(n,t,o)?Pb.retry(Tb(i,Ib,0)):Pb.none()},Vb={point:Db,adjuster:zb,move:Ob,gather:rb},Ub={point:_b,adjuster:Hb,move:kb,gather:ob},jb=function(n,t,e){return n.elementFromPoint(t,e).filter((function(n){return"table"===Jt(n)})).isSome()},Wb=function(n,t,e,r,o){return Gb(n,t,e,t.move(r,Ib),o)},Gb=function(n,t,e,r,o){return 0===o?g.some(r):jb(n,r.left,t.point(r))?Wb(n,t,e,r,o-1):n.situsFromPoint(r.left,t.point(r)).bind((function(i){return i.start.fold(g.none,(function(i){return Mb(n,i).bind((function(u){return t.adjuster(n,i,u,e,r).fold(g.none,(function(r){return Gb(n,t,e,r,o-1)}))})).orThunk((function(){return g.some(r)}))}),g.none)}))},qb=function(n,t){return n.situsFromPoint(t.left,t.bottom+Ib)},Xb=function(n,t){return n.situsFromPoint(t.left,t.top-Ib)},Kb=function(n,t,e){return n.point(t)>e.getInnerHeight()?g.some(n.point(t)-e.getInnerHeight()):n.point(t)<0?g.some(-n.point(t)):g.none()},Yb=function(n,t,e){var r=n.move(e,Ib),o=Gb(t,n,e,r,Nb).getOr(r);return Kb(n,o,t).fold((function(){return t.situsFromPoint(o.left,n.point(o))}),(function(e){return t.scrollBy(0,e),t.situsFromPoint(o.left,n.point(o)-e)}))},$b={tryUp:i(Yb,Vb),tryDown:i(Yb,Ub),ieTryUp:Xb,ieTryDown:qb,getJumpSize:r(Ib)},Jb=20,Qb=function(n,t,e){return n.getSelection().bind((function(r){return Cb(t,r.finish,r.foffset,e).fold((function(){return g.some(Bf(r.finish,r.foffset))}),(function(o){var i=n.fromSitus(o),u=mb.verify(n,r.finish,r.foffset,i.finish,i.foffset,e.failure,t);return Sb(u)}))}))},Zb=function(n,t,e,r,o,i){return 0===i?g.none():ey(n,t,e,r,o).bind((function(u){var a=n.fromSitus(u),c=mb.verify(n,e,r,a.finish,a.foffset,o.failure,t);return mb.cata(c,(function(){return g.none()}),(function(){return g.some(u)}),(function(u){return ht(e,u)&&0===r?ny(n,e,r,Ob,o):Zb(n,t,u,0,o,i-1)}),(function(u){return ht(e,u)&&r===la(u)?ny(n,e,r,kb,o):Zb(n,t,u,la(u),o,i-1)}))}))},ny=function(n,t,e,r,o){return Bb(n,t,e).bind((function(t){return ty(n,o,r(t,$b.getJumpSize()))}))},ty=function(n,t,e){var r=Zn().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):g.none()},ey=function(n,t,e,r,o){return Bb(n,e,r).bind((function(t){return ty(n,o,t)}))},ry=function(n,t,e){return Qb(n,t,e).bind((function(r){return Zb(n,t,r.element,r.offset,e,Jb).map(n.fromSitus)}))},oy=function(n,t){return ab(n,(function(n){return se(n).exists((function(n){return ht(n,t)}))}))},iy=function(n,t,e,r,o){return Ue(r,"td,th",t).bind((function(r){return Ue(r,"table",t).bind((function(i){return oy(o,i)?ry(n,t,e).bind((function(n){return Ue(n.finish,"td,th",t).map((function(t){return{start:r,finish:t,range:n}}))})):g.none()}))}))},uy=function(n,t,e,r,o,i){return Zn().browser.isIE()?g.none():i(r,t).orThunk((function(){return iy(n,t,e,r,o).map((function(n){var t=n.range;return Rh.create(g.some(Nh(t.start,t.soffset,t.finish,t.foffset)),!0)}))}))},ay=function(n,t){return Ue(n,"tr",t).bind((function(n){return Ue(n,"table",t).bind((function(e){var r=Me(e,"tr");return ht(n,r[0])?ib(e,(function(n){return pa(n).isSome()}),t).map((function(n){var t=la(n);return Rh.create(g.some(Nh(n,t,n,t)),!0)})):g.none()}))}))},cy=function(n,t){return Ue(n,"tr",t).bind((function(n){return Ue(n,"table",t).bind((function(e){var r=Me(e,"tr");return ht(n,r[r.length-1])?ub(e,(function(n){return ga(n).isSome()}),t).map((function(n){return Rh.create(g.some(Nh(n,0,n,0)),!0)})):g.none()}))}))},sy=function(n,t,e,r,o,i,u){return iy(n,e,r,o,i).bind((function(n){return Fh(t,e,n.start,n.finish,u)}))},ly=function(){var n=Yu(g.none()),t=function(){return n.set(g.none())},e=function(t){return n.set(g.some(t))},r=function(){return n.get().isSome()},o=function(t){return n.get().each(t)};return{clear:t,set:e,isSet:r,on:o}},fy=function(n,t){return Ue(n,"td,th",t)},dy=function(n,t,e,r){var o=ly(),i=o.clear,u=function(i){o.on((function(o){r.clearBeforeUpdate(t),fy(i.target,e).each((function(i){Vo(o,i,e).each((function(e){var u=e.boxes.getOr([]);(u.length>1||1===u.length&&!ht(o,i))&&(r.selectRange(t,u,e.start,e.finish),n.selectContents(i))}))}))}))},a=function(n){r.clear(t),fy(n.target,e).each(o.set)},c=function(n){u(n)},s=function(n){u(n),i()};return{clearstate:i,mousedown:a,mouseover:c,mouseup:s}},my={traverse:me,gather:ob,relative:lv.before,otherRetry:$b.tryDown,ieRetry:$b.ieTryDown,failure:mb.failedDown},gy={traverse:de,gather:rb,relative:lv.before,otherRetry:$b.tryUp,ieRetry:$b.ieTryUp,failure:mb.failedUp},py=function(n){return function(t){return t===n}},vy=py(38),hy=py(40),by=function(n){return n>=37&&n<=40},yy={isBackward:py(37),isForward:py(39)},xy={isBackward:py(39),isForward:py(37)},wy=function(n){var t=void 0!==n?n.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Di(e,r)},Cy=function(n,t,e){var r=void 0!==e?e.dom:document,o=r.defaultView;o&&o.scrollBy(n,t)},Sy=function(n){var t=function(t,e){return dt.fromPoint(dt.fromDom(n.document),t,e)},e=function(n){return n.dom.getBoundingClientRect()},r=function(t,e,r,o){var i=yv.exact(t,e,r,o);return yh(n,i)},o=function(){return bh(n).map((function(t){return Ih(n,t)}))},i=function(t){var e=yv.relative(t.start,t.finish);return Ih(n,e)},u=function(t,e){return xh(n,t,e).map((function(n){return Mh.create(n.start,n.soffset,n.finish,n.foffset)}))},a=function(){wh(n)},c=function(t){void 0===t&&(t=!1),bh(n).each((function(e){return e.fold((function(n){return n.collapse(t)}),(function(e,r){var o=t?e:r;dh(n,o,o)}),(function(e,r,o,i){var u=t?e:o,a=t?r:i;fh(n,u,a,u,a)}))}))},s=function(t){vh(n,t)},l=function(t){fh(n,t.start,t.soffset,t.finish,t.foffset)},f=function(t,e){dh(n,t,e)},d=function(){return n.innerHeight},m=function(){var t=wy(dt.fromDom(n.document));return t.top},g=function(t,e){Cy(t,e,dt.fromDom(n.document))};return{elementFromPoint:t,getRect:e,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:u,clearSelection:a,collapseSelection:c,setSelection:l,setRelativeSelection:f,selectContents:s,getInnerHeight:d,getScrollY:m,scrollBy:g}},ky=function(n,t){return{rows:n,cols:t}},Oy=function(n,t,e,r){var o=Sy(n),i=dy(o,t,e,r);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},Ty=function(n,t,e,r){var o=Sy(n),u=function(){return r.clear(t),g.none()},a=function(n,a,c,s,l,f){var d=n.raw,m=d.which,p=!0===d.shiftKey,v=Uo(t,r.selectedSelector).fold((function(){return hy(m)&&p?i(sy,o,t,e,my,s,a,r.selectRange):vy(m)&&p?i(sy,o,t,e,gy,s,a,r.selectRange):hy(m)?i(uy,o,e,my,s,a,cy):vy(m)?i(uy,o,e,gy,s,a,ay):g.none}),(function(n){var e=function(e){return function(){var i=tn(e,(function(e){return Lh(e.rows,e.cols,t,n,r)}));return i.fold((function(){return Wo(t,r.firstSelectedSelector,r.lastSelectedSelector).map((function(n){var e=hy(m)||f.isForward(m)?lv.after:lv.before;return o.setRelativeSelection(lv.on(n.first,0),e(n.table)),r.clear(t),Rh.create(g.none(),!0)}))}),(function(n){return g.some(Rh.create(g.none(),!0))}))}};return hy(m)&&p?e([ky(1,0)]):vy(m)&&p?e([ky(-1,0)]):f.isBackward(m)&&p?e([ky(0,-1),ky(-1,0)]):f.isForward(m)&&p?e([ky(0,1),ky(1,0)]):by(m)&&!1===p?u:g.none}));return v()},c=function(n,o,i,u,a){return Uo(t,r.selectedSelector).fold((function(){var c=n.raw,s=c.which,l=!0===c.shiftKey;return!1===l?g.none():by(s)?Ph(t,e,o,i,u,a,r.selectRange):g.none()}),g.none)};return{keydown:a,keyup:c}},Dy=function(n,t,e,r){var o=Sy(n);return function(n,i){r.clearBeforeUpdate(t),Vo(n,i,e).each((function(n){var e=n.boxes.getOr([]);r.selectRange(t,e,n.start,n.finish),o.selectContents(i),o.collapseSelection()}))}},_y=function(n,t){P(t,(function(t){js(n,t)}))},Ay=function(n){return function(t){Vs(t,n)}},Ey=function(n){return function(t){_y(t,n)}},Ry=function(n){var t=Ay(n.selected),e=Ey([n.selected,n.lastSelected,n.firstSelected]),r=function(t){var r=Me(t,n.selectedSelector);P(r,e)},o=function(e,o,i,u){r(e),P(o,t),Vs(i,n.firstSelected),Vs(u,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},By=function(n,t,e){var r=function(t){Ke(t,n.selected),Ke(t,n.firstSelected),Ke(t,n.lastSelected)},o=function(t){We(t,n.selected,"1")},i=function(n){u(n),e()},u=function(t){var e=Me(t,n.selectedSelector);P(e,r)},a=function(e,r,u,a){i(e),P(r,o),We(u,n.firstSelected,"1"),We(a,n.lastSelected,"1"),t(r,u,a)};return{clearBeforeUpdate:u,clear:i,selectRange:a,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},My={byClass:Ry,byAttr:By},Iy=function(n,t,e){var r=n.slice(0,t[t.length-1].row+1),o=Zf(r,e);return q(o,(function(n){var e=n.cells.slice(0,t[t.length-1].column+1);return N(e,(function(n){return n.element}))}))},Ny=function(n,t,e){var r=n.slice(t[0].row+t[0].rowspan-1,n.length),o=Zf(r,e);return q(o,(function(n){var e=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return N(e,(function(n){return n.element}))}))},Py=function(n,t,e){var r=Yr.fromTable(n),o=cd(r,t);return o.map((function(n){var t=$f(r,e,!1),o=Iy(t,n,e),i=Ny(t,n,e);return{upOrLeftCells:o,downOrRightCells:i}}))},Fy=function(n){return!1===Ws(dt.fromDom(n.target),"ephox-snooker-resizer-bar")};function Ly(t,e,r){var o=function(e,o,i){r.targets().each((function(r){var u=yr(o);u.each((function(u){var a=pf(t),c=Ta(n,dt.fromDom(t.getDoc()),a),s=Py(u,r,c);Il(t,e,o,i,s)}))}))},i=function(){return Nl(t)},u=My.byAttr(Za,o,i);return t.on("init",(function(r){var o=t.getWin(),i=Ra(t),a=Ia(t),c=function(){var e=t.selection,r=dt.fromDom(e.getStart()),o=dt.fromDom(e.getEnd()),a=Lo(yr,[r,o]);a.fold((function(){return u.clear(i)}),n)},s=Oy(o,i,a,u),l=Ty(o,i,a,u),f=Dy(o,i,a,u),d=function(n){return!0===n.raw.shiftKey};t.on("TableSelectorChange",(function(n){return f(n.start,n.finish)}));var m=function(n,e){d(n)&&(e.kill&&n.kill(),e.selection.each((function(n){var e=yv.relative(n.start,n.finish),r=Mv(o,e);t.selection.setRng(r)})))},g=function(n){var e=Ms(n);if(e.raw.shiftKey&&by(e.raw.which)){var r=t.selection.getRng(),o=dt.fromDom(r.startContainer),i=dt.fromDom(r.endContainer);l.keyup(e,o,r.startOffset,i,r.endOffset).each((function(n){m(e,n)}))}},p=function(n){var r=Ms(n);e().each((function(n){return n.hideBars()}));var o=t.selection.getRng(),i=dt.fromDom(o.startContainer),u=dt.fromDom(o.endContainer),a=wi(yy,xy)(dt.fromDom(t.selection.getStart()));l.keydown(r,i,o.startOffset,u,o.endOffset,a).each((function(n){m(r,n)})),e().each((function(n){return n.showBars()}))},v=function(n){return 0===n.button},h=function(n){return void 0===n.buttons||(!(!Fp.browser.isEdge()||0!==n.buttons)||0!==(1&n.buttons))},b=function(n){s.clearstate()},y=function(n){v(n)&&Fy(n)&&s.mousedown(Ms(n))},x=function(n){h(n)&&Fy(n)&&s.mouseover(Ms(n))},w=function(n){v(n)&&Fy(n)&&s.mouseup(Ms(n))},C=function(){var n=Yu(dt.fromDom(i)),t=Yu(0),e=function(e){var r=dt.fromDom(e.target);if("td"===Jt(r)||"th"===Jt(r)){var o=n.get(),i=t.get();ht(o,r)&&e.timeStamp-i<300&&(e.preventDefault(),f(r,r))}n.set(r),t.set(e.timeStamp)};return{touchEnd:e}},S=C();t.on("dragstart",b),t.on("mousedown",y),t.on("mouseover",x),t.on("mouseup",w),t.on("touchend",S.touchEnd),t.on("keyup",g),t.on("keydown",p),t.on("NodeChange",c)})),{clear:u.clear}}var Hy=function(n,t){var e=Yu(g.none()),r=Yu([]),o=g.none(),i=ie("caption"),u=function(n){return o.forall((function(t){return!t[n]}))},a=function(){return Sg(Va(n)).bind((function(n){var e=yr(n);return e.map((function(e){return i(n)?nc(n):tc(t,e,n)}))}))},c=function(n){var t=yr(n.element);return t.map((function(t){var e=Yr.fromTable(t),r=cd(e,n).getOr([]),o=V(r,(function(n,t){return t.isLocked&&(n.onAny=!0,0===t.column?n.onFirst=!0:t.column+t.colspan>=e.grid.columns&&(n.onLast=!0)),n}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:md(e,n).isSome(),unmergeable:gd(e,n).isSome(),locked:o}}))},s=function(){e.set(on(a)()),o=e.get().bind(c),P(r.get(),(function(n){return n()}))},l=function(n,t){var o=function(){return e.get().fold((function(){n.setDisabled(!0)}),(function(e){n.setDisabled(t(e))}))};return o(),r.set(r.get().concat([o])),function(){r.set(H(r.get(),(function(n){return n!==o})))}},f=function(n){return o.exists((function(t){return t.locked[n]}))},d=function(n){return l(n,(function(n){return!1}))},m=function(n){return l(n,(function(n){return i(n.element)}))},p=function(n){return function(t){return l(t,(function(t){return i(t.element)||f(n)}))}},v=function(n){return function(t){return l(t,(function(t){return i(t.element)||n().isNone()}))}},h=function(n,t){return function(e){return l(e,(function(e){return i(e.element)||n().isNone()||f(t)}))}},b=function(n){return l(n,(function(n){return u("mergeable")}))},y=function(n){return l(n,(function(n){return u("unmergeable")}))};return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:d,onSetupCellOrRow:m,onSetupColumn:p,onSetupPasteable:v,onSetupPasteableColumn:h,onSetupMergeable:b,onSetupUnmergeable:y,resetTargets:s,targets:function(){return e.get()}}},zy=function(n,t,e){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(e.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(e.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})},Vy=function(n){var t=function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},e=sf(n);e.length>0&&n.ui.registry.addContextToolbar("table",{predicate:t,items:e,scope:"node",position:"node"})},Uy=function(n,t,e){var r=function(t){return function(){return n.execCommand(t)}},o=function(t){n.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},i={text:"Table properties",onSetup:t.onSetupTable,onAction:r("mceTableProps")},u={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:r("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(e.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(e.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(e.getColumns,"onLast")});var c={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}};!1===nf(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",u),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",c),n.ui.registry.addNestedMenuItem("cell",s),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold((function(){return""}),(function(n){return"caption"===Jt(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})},jy=function(n){var t=ei((function(){return Ra(n)}),(function(){return Sg(Va(n))}),Za.selectedSelector),e=Hy(n,t),r=Rf(n),o=Ly(n,r.lazyResize,e),i=Tg(n,r.lazyWire,t),u=Xp();return Gp(n,i,o,t,u),qp(n,i,t),ac(n,t,i,o),Uy(n,e,u),zy(n,e,u),Vy(n),n.on("PreInit",(function(){n.serializer.addTempAttr(Za.firstSelected),n.serializer.addTempAttr(Za.lastSelected),Yp(n)})),Yl(n)&&n.on("keydown",(function(t){Ah(t,n,i)})),n.on("remove",(function(){r.destroy()})),qg(n,u,r,e)};function Wy(){ri.add("table",jy)}Wy()})()},9523:function(n,t){function e(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}n.exports=e},be7f:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.VK"),e=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},r=function(n){return function(t){return e(t)===n}},o=function(n){return function(t){return typeof t===n}},i=function(n){return function(t){return n===t}},u=r("string"),a=r("array"),c=i(null),s=o("boolean"),l=o("function"),f=function(n){var t=n.getParam("link_assume_external_targets",!1);return s(t)&&t?1:!u(t)||"http"!==t&&"https"!==t?0:t},d=function(n){return n.getParam("link_context_toolbar",!1,"boolean")},m=function(n){return n.getParam("link_list")},g=function(n){return n.getParam("default_link_target")},p=function(n){return n.getParam("target_list",!0)},v=function(n){return n.getParam("rel_list",[],"array")},h=function(n){return n.getParam("link_class_list",[],"array")},b=function(n){return n.getParam("link_title",!0,"boolean")},y=function(n){return n.getParam("allow_unsafe_link_target",!1,"boolean")},x=function(n){return n.getParam("link_quicklink",!1,"boolean")},w=function(n){return n.getParam("link_default_protocol","http","string")},C=function(){},S=function(n){return function(){return n}},k=S(!1),O=S(!0),T=function(){return D},D=function(){var n=function(n){return n.isNone()},t=function(n){return n()},e=function(n){return n},r={fold:function(n,t){return n()},is:k,isSome:k,isNone:O,getOr:e,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:S(null),getOrUndefined:S(void 0),or:e,orThunk:t,map:T,each:C,bind:T,exists:k,forall:O,filter:T,equals:n,equals_:n,toArray:function(){return[]},toString:S("none()")};return r}(),_=function(n){var t=S(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:O,isNone:k,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return _(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:D},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(k,(function(t){return e(n,t)}))}};return o},A=function(n){return null===n||void 0===n?D:_(n)},E={some:_,none:T,from:A},R=Array.prototype.indexOf,B=Array.prototype.push,M=function(n,t){return R.call(n,t)},I=function(n,t){return M(n,t)>-1},N=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},P=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},F=function(n,t,e){return P(n,(function(n){e=t(e,n)})),e},L=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!a(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);B.apply(t,n[e])}return t},H=function(n,t){return L(N(n,t))},z=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return E.none()},V=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},U=function(n,t){return n?E.some(t):E.none()},j=tinymce.util.Tools.resolve("tinymce.util.Tools"),W=function(n){return u(n.value)?n.value:""},G=function(n){return u(n.text)?n.text:u(n.title)?n.title:""},q=function(n,t){var e=[];return j.each(n,(function(n){var r=G(n);if(void 0!==n.menu){var o=q(n.menu,t);e.push({text:r,items:o})}else{var i=t(n);e.push({text:r,value:i})}})),e},X=function(n){return void 0===n&&(n=W),function(t){return E.from(t).map((function(t){return q(t,n)}))}},K=function(n){return X(W)(n)},Y=function(n,t){return function(e){return{name:n,type:"listbox",label:t,items:e}}},$={sanitize:K,sanitizeWith:X,createUi:Y,getValue:W},J=function(){return J=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},J.apply(this,arguments)},Q=Object.keys,Z=Object.hasOwnProperty,nn=function(n,t){for(var e=Q(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];t(u,i)}},tn=function(n){return function(t,e){n[e]=t}},en=function(n,t,e,r){var o={};return nn(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},rn=function(n,t){var e={};return en(n,t,tn(e),C),e},on=function(n,t){return Z.call(n,t)},un=function(n,t){return on(n,t)&&void 0!==n[t]&&null!==n[t]},an=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),cn=function(n){return n&&"a"===n.nodeName.toLowerCase()},sn=function(n){return cn(n)&&!!dn(n)},ln=function(n,t){if(n.collapsed)return[];var e=n.cloneContents(),r=new an(e.firstChild,e),o=[],i=e.firstChild;do{t(i)&&o.push(i)}while(i=r.next());return o},fn=function(n){return/^\w+:/i.test(n)},dn=function(n){var t=n.getAttribute("data-mce-href");return t||n.getAttribute("href")},mn=function(n,t){var e=["noopener"],r=n?n.split(/\s+/):[],o=function(n){return j.trim(n.sort().join(" "))},i=function(n){return n=u(n),n.length>0?n.concat(e):e},u=function(n){return n.filter((function(n){return-1===j.inArray(e,n)}))},a=t?i(r):u(r);return a.length>0?o(a):""},gn=function(n){return n.replace(/\uFEFF/g,"")},pn=function(n,t){return t=t||n.selection.getNode(),xn(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")},vn=function(n,t){var e=t?t.innerText||t.textContent:n.getContent({format:"text"});return gn(e)},hn=function(n){return j.grep(n,sn).length>0},bn=function(n){return ln(n,sn).length>0},yn=function(n){var t=n.schema.getTextInlineElements(),e=function(n){return 1===n.nodeType&&!cn(n)&&!on(t,n.nodeName.toLowerCase())},r=ln(n.selection.getRng(),e);return 0===r.length},xn=function(n){return n&&"FIGURE"===n.nodeName&&/\bimage\b/i.test(n.className)},wn=function(n){return F(["title","rel","class","target"],(function(t,e){return n[e].each((function(n){t[e]=n.length>0?n:null})),t}),{href:n.href})},Cn=function(n,t){return"http"!==t&&"https"!==t||fn(n)?n:t+"://"+n},Sn=function(n,t){var e=J({},t);if(!(v(n).length>0)&&!1===y(n)){var r=mn(e.rel,"_blank"===e.target);e.rel=r||null}return E.from(e.target).isNone()&&!1===p(n)&&(e.target=g(n)),e.href=Cn(e.href,f(n)),e},kn=function(n,t,e,r){e.each((function(n){t.hasOwnProperty("innerText")?t.innerText=n:t.textContent=n})),n.dom.setAttribs(t,r),n.selection.select(t)},On=function(n,t,e,r){xn(t)?Mn(n,t,r):e.fold((function(){n.execCommand("mceInsertLink",!1,r)}),(function(t){n.insertContent(n.dom.createHTML("a",r,n.dom.encode(t)))}))},Tn=function(n,t,e){var r=n.selection.getNode(),o=pn(n,r),i=Sn(n,wn(e));n.undoManager.transact((function(){e.href===t.href&&t.attach(),o?(n.focus(),kn(n,o,e.text,i)):On(n,r,e.text,i)}))},Dn=function(n){var t=n.dom,e=n.selection,r=e.getBookmark(),o=e.getRng().cloneRange(),i=t.getParent(o.startContainer,"a[href]",n.getBody()),u=t.getParent(o.endContainer,"a[href]",n.getBody());i&&o.setStartBefore(i),u&&o.setEndAfter(u),e.setRng(o),n.execCommand("unlink"),e.moveToBookmark(r)},_n=function(n){n.undoManager.transact((function(){var t=n.selection.getNode();xn(t)?Bn(n,t):Dn(n),n.focus()}))},An=function(n){var t=n.class,e=n.href,r=n.rel,o=n.target,i=n.text,u=n.title;return rn({class:t.getOrNull(),href:e,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:u.getOrNull()},(function(n,t){return!1===c(n)}))},En=function(n,t,e){n.hasPlugin("rtc",!0)?n.execCommand("createlink",!1,An(e)):Tn(n,t,e)},Rn=function(n){n.hasPlugin("rtc",!0)?n.execCommand("unlink"):_n(n)},Bn=function(n,t){var e=n.dom.select("img",t)[0];if(e){var r=n.dom.getParents(e,"a[href]",t)[0];r&&(r.parentNode.insertBefore(e,r),n.dom.remove(r))}},Mn=function(n,t,e){var r=n.dom.select("img",t)[0];if(r){var o=n.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},In=function(n){return un(n,"items")},Nn=function(n,t){return z(t,(function(t){return In(t)?Nn(n,t.items):U(t.value===n,t)}))},Pn=function(n,t,e,r){var o=r[t],i=n.length>0;return void 0!==o?Nn(o,e).map((function(t){return{url:{value:t.value,meta:{text:i?n:t.text,attach:C}},text:i?n:t.text}})):E.none()},Fn=function(n,t){return"link"===t?n.link:"anchor"===t?n.anchor:E.none()},Ln=function(n,t){var e={text:n.text,title:n.title},r=function(n){return U(e.title.length<=0,E.from(n.meta.title).getOr(""))},o=function(n){return U(e.text.length<=0,E.from(n.meta.text).getOr(n.value))},i=function(n){var t=o(n.url),e=r(n.url);return t.isSome()||e.isSome()?E.some(J(J({},t.map((function(n){return{text:n}})).getOr({})),e.map((function(n){return{title:n}})).getOr({}))):E.none()},u=function(n,r){var o=Fn(t,r.name).getOr([]);return Pn(e.text,r.name,o,n)},a=function(n,t){var r=t.name;return"url"===r?i(n()):I(["anchor","link"],r)?u(n(),t):"text"===r||"title"===r?(e[r]=n()[r],E.none()):E.none()};return{onChange:a}},Hn={init:Ln,getDelta:Pn},zn=tinymce.util.Tools.resolve("tinymce.util.Delay"),Vn=tinymce.util.Tools.resolve("tinymce.util.Promise"),Un=function(n,t,e){var r=n.selection.getRng();zn.setEditorTimeout(n,(function(){n.windowManager.confirm(t,(function(t){n.selection.setRng(r),e(t)}))}))},jn=function(n){var t=n.href,e=t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:");return e?E.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(n){return J(J({},n),{href:"mailto:"+t})}}):E.none()},Wn=function(n,t){return function(e){var r=e.href,o=1===n&&!fn(r)||0===n&&/^\s*www(\.|\d\.)/i.test(r);return o?E.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+t+":// prefix?",preprocess:function(n){return J(J({},n),{href:t+"://"+r})}}):E.none()}},Gn=function(n,t){return z([jn,Wn(f(n),w(n))],(function(n){return n(t)})).fold((function(){return Vn.resolve(t)}),(function(e){return new Vn((function(r){Un(n,e.message,(function(n){r(n?e.preprocess(t):t)}))}))}))},qn={preprocess:Gn},Xn=function(n){var t=n.dom.select("a:not([href])"),e=H(t,(function(n){var t=n.name||n.id;return t?[{text:t,value:"#"+t}]:[]}));return e.length>0?E.some([{text:"None",value:""}].concat(e)):E.none()},Kn={getAnchors:Xn},Yn=function(n){var t=h(n);return t.length>0?$.sanitize(t):E.none()},$n={getClasses:Yn},Jn=tinymce.util.Tools.resolve("tinymce.util.XHR"),Qn=function(n){try{return E.some(JSON.parse(n))}catch(t){return E.none()}},Zn=function(n){var t=function(t){return n.convertURL(t.value||t.url,"href")},e=m(n);return new Vn((function(n){u(e)?Jn.send({url:e,success:function(t){return n(Qn(t))},error:function(t){return n(E.none())}}):l(e)?e((function(t){return n(E.some(t))})):n(E.from(e))})).then((function(n){return n.bind($.sanitizeWith(t)).map((function(n){if(n.length>0){var t=[{text:"None",value:""}];return t.concat(n)}return n}))}))},nt={getLinks:Zn},tt=function(n,t){var e=v(n);if(e.length>0){var r=t.is("_blank"),o=!1===y(n),i=function(n){return mn($.getValue(n),r)},u=o?$.sanitizeWith(i):$.sanitize;return u(e)}return E.none()},et={getRels:tt},rt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ot=function(n){var t=p(n);return a(t)?$.sanitize(t).orThunk((function(){return E.some(rt)})):!1===t?E.none():E.some(rt)},it={getTargets:ot},ut=function(n,t,e){var r=n.getAttrib(t,e);return null!==r&&r.length>0?E.some(r):E.none()},at=function(n,t){var e=n.dom,r=yn(n),o=r?E.some(vn(n.selection,t)):E.none(),i=t?E.some(e.getAttrib(t,"href")):E.none(),u=t?E.from(e.getAttrib(t,"target")):E.none(),a=ut(e,t,"rel"),c=ut(e,t,"class"),s=ut(e,t,"title");return{url:i,text:o,title:s,target:u,rel:a,linkClass:c}},ct=function(n,t){return nt.getLinks(n).then((function(e){var r=at(n,t);return{anchor:r,catalogs:{targets:it.getTargets(n),rels:et.getRels(n,r.target),classes:$n.getClasses(n),anchor:Kn.getAnchors(n),link:e},optNode:E.from(t),flags:{titleEnabled:b(n)}}}))},st={collect:ct},lt=function(n,t){return function(e){var r=e.getData();if(!r.url.value)return Rn(n),void e.close();var o=function(n){return E.from(r[n]).filter((function(e){return!t.anchor[n].is(e)}))},i={href:r.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},u={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:C};qn.preprocess(n,i).then((function(t){En(n,u,t)})),e.close()}},ft=function(n){var t=pn(n);return st.collect(n,t)},dt=function(n,t){var e=n.anchor,r=e.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:e.text.getOr(""),title:e.title.getOr(""),anchor:r,link:r,rel:e.rel.getOr(""),target:e.target.or(t).getOr(""),linkClass:e.linkClass.getOr("")}},mt=function(n,t,e){var r=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],o=n.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),i=n.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],u=E.from(g(e)),a=dt(n,u),c=n.catalogs,s=Hn.init(a,c),l={type:"panel",items:L([r,o,i,V([c.anchor.map($.createUi("anchor","Anchors")),c.rels.map($.createUi("rel","Rel")),c.targets.map($.createUi("target","Open link in...")),c.link.map($.createUi("link","Link list")),c.classes.map($.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onChange:function(n,t){var e=t.name;s.onChange(n.getData,{name:e}).each((function(t){n.setData(t)}))},onSubmit:t}},gt=function(n){var t=ft(n);t.then((function(t){var e=lt(n,t);return mt(t,e,n)})).then((function(t){n.windowManager.open(t)}))},pt=function(n,t){document.body.appendChild(n),n.dispatchEvent(t),document.body.removeChild(n)},vt=function(n){var t=document.createElement("a");t.target="_blank",t.href=n,t.rel="noreferrer noopener";var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),pt(t,e)},ht=function(n,t){return n.dom.getParent(t,"a[href]")},bt=function(n){return ht(n,n.selection.getStart())},yt=function(n){return!0===n.altKey&&!1===n.shiftKey&&!1===n.ctrlKey&&!1===n.metaKey},xt=function(n,t){if(t){var e=dn(t);if(/^#/.test(e)){var r=n.$(e);r.length&&n.selection.scrollIntoView(r[0],!0)}else vt(t.href)}},wt=function(n){return function(){gt(n)}},Ct=function(n){return function(){xt(n,bt(n))}},St=function(n){n.on("click",(function(e){var r=ht(n,e.target);r&&t.metaKeyPressed(e)&&(e.preventDefault(),xt(n,r))})),n.on("keydown",(function(t){var e=bt(n);e&&13===t.keyCode&&yt(t)&&(t.preventDefault(),xt(n,e))}))},kt=function(n,t){return n.on("NodeChange",t),function(){return n.off("NodeChange",t)}},Ot=function(n){return function(t){return kt(n,(function(){t.setActive(!n.mode.isReadOnly()&&null!==pn(n,n.selection.getNode()))}))}},Tt=function(n){return function(t){var e=function(){return t.setDisabled(null===pn(n,n.selection.getNode()))};return e(),kt(n,e)}},Dt=function(n){return function(t){var e=function(t){return hn(t)||bn(n.selection.getRng())},r=n.dom.getParents(n.selection.getStart());return t.setDisabled(!e(r)),kt(n,(function(n){return t.setDisabled(!e(n.parents))}))}},_t=function(n){n.addCommand("mceLink",(function(){x(n)?n.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):wt(n)()}))},At=function(n){n.addShortcut("Meta+K","",(function(){n.execCommand("mceLink")}))},Et=function(n){n.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:wt(n),onSetup:Ot(n)}),n.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ct(n),onSetup:Tt(n)}),n.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Rn(n)},onSetup:Dt(n)})},Rt=function(n){n.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ct(n),onSetup:Tt(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:wt(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Rn(n)},onSetup:Dt(n)})},Bt=function(n){var t="link unlink openlink",e="link";n.ui.registry.addContextMenu("link",{update:function(r){return hn(n.dom.getParents(r,"a"))?t:e}})},Mt=function(n){var t=function(n){n.selection.collapse(!1)},e=function(t){var e=n.selection.getNode();return t.setDisabled(!pn(n,e)),C};n.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ot(n)},label:"Link",predicate:function(t){return!!pn(n,t)&&d(n)},initValue:function(){var t=pn(n);return t?dn(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var e=n.selection.getNode();return t.setActive(!!pn(n,e)),Ot(n)(t)},onAction:function(e){var r=pn(n),o=e.getValue();if(r)n.undoManager.transact((function(){n.dom.setAttrib(r,"href",o),t(n),e.hide()}));else{var i={href:o,attach:C},u=yn(n),a=u?E.some(vn(n.selection,r)).filter((function(n){return n.length>0})).or(E.from(o)):E.none();En(n,i,{href:o,text:a,title:E.none(),rel:E.none(),target:E.none(),class:E.none()}),e.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:e,onAction:function(t){Rn(n),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:e,onAction:function(t){Ct(n)(),t.hide()}}]})};function It(){n.add("link",(function(n){Et(n),Rt(n),Bt(n),Mt(n),St(n),_t(n),At(n)}))}It()})()},cdd9:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return t=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},t.apply(this,arguments)},e=function(){},r=function(n){return function(){return n}},o=r(!1),i=r(!0),u=function(){return a},a=function(){var n=function(n){return n.isNone()},t=function(n){return n()},a=function(n){return n},c={fold:function(n,t){return n()},is:o,isSome:o,isNone:i,getOr:a,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:a,orThunk:t,map:u,each:e,bind:u,exists:o,forall:i,filter:u,equals:n,equals_:n,toArray:function(){return[]},toString:r("none()")};return c}(),c=function(n){var t=r(n),e=function(){return s},u=function(t){return t(n)},s={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:i,isNone:o,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return c(t(n))},each:function(t){t(n)},bind:u,exists:u,forall:u,filter:function(t){return t(n)?s:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(o,(function(t){return e(n,t)}))}};return s},s=function(n){return null===n||void 0===n?a:c(n)},l={some:c,none:u,from:s},f=Object.keys,d=Object.hasOwnProperty,m=function(n,t){for(var e=f(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];t(u,i)}},g=function(n){return function(t,e){n[e]=t}},p=function(n,t,e,r){var o={};return m(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},v=function(n,t){var r={};return p(n,t,g(r),e),r},h=function(n,t){return d.call(n,t)},b=function(n,t){return h(n,t)&&void 0!==n[t]&&null!==n[t]},y=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},x=function(n){return function(t){return y(t)===n}},w=function(n){return function(t){return typeof t===n}},C=function(n){return function(t){return n===t}},S=x("string"),k=x("object"),O=x("array"),T=C(null),D=w("boolean"),_=function(n){return null===n||void 0===n},A=function(n){return!_(n)},E=w("number"),R=Array.prototype.push,B=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!O(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);R.apply(t,n[e])}return t},M=function(n,t){return t>=0&&t<n.length?l.some(n[t]):l.none()},I=function(n){return M(n,0)},N=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return l.none()},P=("undefined"!==typeof window?window:Function("return this;")(),function(n,t,e){if(!(S(e)||D(e)||E(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")}),F=function(n,t,e){P(n.dom,t,e)},L=function(n,t){n.dom.removeAttribute(t)},H=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return U(r.childNodes[0])},z=function(n,t){var e=t||document,r=e.createElement(n);return U(r)},V=function(n,t){var e=t||document,r=e.createTextNode(n);return U(r)},U=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},j=function(n,t,e){return l.from(n.dom.elementFromPoint(t,e)).map(U)},W={fromHtml:H,fromTag:z,fromText:V,fromDom:U,fromPoint:j},G=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q=tinymce.util.Tools.resolve("tinymce.util.Promise"),X=tinymce.util.Tools.resolve("tinymce.util.XHR"),K=function(n){return n.getParam("image_dimensions",!0,"boolean")},Y=function(n){return n.getParam("image_advtab",!1,"boolean")},$=function(n){return n.getParam("image_uploadtab",!0,"boolean")},J=function(n){return n.getParam("image_prepend_url","","string")},Q=function(n){return n.getParam("image_class_list")},Z=function(n){return n.getParam("image_description",!0,"boolean")},nn=function(n){return n.getParam("image_title",!1,"boolean")},tn=function(n){return n.getParam("image_caption",!1,"boolean")},en=function(n){return n.getParam("image_list",!1)},rn=function(n){return A(n.getParam("images_upload_url"))},on=function(n){return A(n.getParam("images_upload_handler"))},un=function(n){return n.getParam("a11y_advanced_options",!1,"boolean")},an=function(n){return n.getParam("automatic_uploads",!0,"boolean")},cn=function(n,t){return Math.max(parseInt(n,10),parseInt(t,10))},sn=function(n){return new q((function(t){var e=document.createElement("img"),r=function(n){e.parentNode&&e.parentNode.removeChild(e),t(n)};e.onload=function(){var n=cn(e.width,e.clientWidth),t=cn(e.height,e.clientHeight),o={width:n,height:t};r(q.resolve(o))},e.onerror=function(){r(q.reject("Failed to get image dimensions for: "+n))};var o=e.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(e),e.src=n}))},ln=function(n){return n&&(n=n.replace(/px$/,"")),n},fn=function(n){return n.length>0&&/^[0-9]+$/.test(n)&&(n+="px"),n},dn=function(n){if(n.margin){var t=String(n.margin).split(" ");switch(t.length){case 1:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[0],n["margin-bottom"]=n["margin-bottom"]||t[0],n["margin-left"]=n["margin-left"]||t[0];break;case 2:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[0],n["margin-left"]=n["margin-left"]||t[1];break;case 3:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[2],n["margin-left"]=n["margin-left"]||t[1];break;case 4:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[2],n["margin-left"]=n["margin-left"]||t[3]}delete n.margin}return n},mn=function(n,t){var e=en(n);"string"===typeof e?X.send({url:e,success:function(n){t(JSON.parse(n))}}):"function"===typeof e?e(t):t(e)},gn=function(n,t,e){var r=function(){e.onload=e.onerror=null,n.selection&&(n.selection.select(e),n.nodeChanged())};e.onload=function(){t.width||t.height||!K(n)||n.dom.setAttribs(e,{width:String(e.clientWidth),height:String(e.clientHeight)}),r()},e.onerror=r},pn=function(n){return new q((function(t,e){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(){e(r.error.message)},r.readAsDataURL(n)}))},vn=function(n){return"IMG"===n.nodeName&&(n.hasAttribute("data-mce-object")||n.hasAttribute("data-mce-placeholder"))},hn=G.DOM,bn=function(n){return n.style.marginLeft&&n.style.marginRight&&n.style.marginLeft===n.style.marginRight?ln(n.style.marginLeft):""},yn=function(n){return n.style.marginTop&&n.style.marginBottom&&n.style.marginTop===n.style.marginBottom?ln(n.style.marginTop):""},xn=function(n){return n.style.borderWidth?ln(n.style.borderWidth):""},wn=function(n,t){return n.hasAttribute(t)?n.getAttribute(t):""},Cn=function(n,t){return n.style[t]?n.style[t]:""},Sn=function(n){return null!==n.parentNode&&"FIGURE"===n.parentNode.nodeName},kn=function(n,t,e){""===e?n.removeAttribute(t):n.setAttribute(t,e)},On=function(n){var t=hn.create("figure",{class:"image"});hn.insertAfter(t,n),t.appendChild(n),t.appendChild(hn.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"},Tn=function(n){var t=n.parentNode;hn.insertAfter(n,t),hn.remove(t)},Dn=function(n){Sn(n)?Tn(n):On(n)},_n=function(n,t){var e=n.getAttribute("style"),r=t(null!==e?e:"");r.length>0?(n.setAttribute("style",r),n.setAttribute("data-mce-style",r)):n.removeAttribute("style")},An=function(n,t){return function(n,e,r){n.style[e]?(n.style[e]=fn(r),_n(n,t)):kn(n,e,r)}},En=function(n,t){return n.style[t]?ln(n.style[t]):wn(n,t)},Rn=function(n,t){var e=fn(t);n.style.marginLeft=e,n.style.marginRight=e},Bn=function(n,t){var e=fn(t);n.style.marginTop=e,n.style.marginBottom=e},Mn=function(n,t){var e=fn(t);n.style.borderWidth=e},In=function(n,t){n.style.borderStyle=t},Nn=function(n){return Cn(n,"borderStyle")},Pn=function(n){return"FIGURE"===n.nodeName},Fn=function(n){return"IMG"===n.nodeName},Ln=function(n){return 0===hn.getAttrib(n,"alt").length&&"presentation"===hn.getAttrib(n,"role")},Hn=function(n){return Ln(n)?"":wn(n,"alt")},zn=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Vn=function(n,t){var e=document.createElement("img");return kn(e,"style",t.style),(bn(e)||""!==t.hspace)&&Rn(e,t.hspace),(yn(e)||""!==t.vspace)&&Bn(e,t.vspace),(xn(e)||""!==t.border)&&Mn(e,t.border),(Nn(e)||""!==t.borderStyle)&&In(e,t.borderStyle),n(e.getAttribute("style"))},Un=function(n,e){var r=document.createElement("img");if(Kn(n,t(t({},e),{caption:!1}),r),Gn(r,e.alt,e.isDecorative),e.caption){var o=hn.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(hn.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return r},jn=function(n,t){return{src:wn(t,"src"),alt:Hn(t),title:wn(t,"title"),width:En(t,"width"),height:En(t,"height"),class:wn(t,"class"),style:n(wn(t,"style")),caption:Sn(t),hspace:bn(t),vspace:yn(t),border:xn(t),borderStyle:Cn(t,"borderStyle"),isDecorative:Ln(t)}},Wn=function(n,t,e,r,o){e[r]!==t[r]&&o(n,r,e[r])},Gn=function(n,t,e){if(e){hn.setAttrib(n,"role","presentation");var r=W.fromDom(n);F(r,"alt","")}else{if(T(t)){r=W.fromDom(n);L(r,"alt")}else{r=W.fromDom(n);F(r,"alt",t)}"presentation"===hn.getAttrib(n,"role")&&hn.setAttrib(n,"role","")}},qn=function(n,t,e){e.alt===t.alt&&e.isDecorative===t.isDecorative||Gn(n,e.alt,e.isDecorative)},Xn=function(n,t){return function(e,r,o){n(e,o),_n(e,t)}},Kn=function(n,t,e){var r=jn(n,e);Wn(e,r,t,"caption",(function(n,t,e){return Dn(n)})),Wn(e,r,t,"src",kn),Wn(e,r,t,"title",kn),Wn(e,r,t,"width",An("width",n)),Wn(e,r,t,"height",An("height",n)),Wn(e,r,t,"class",kn),Wn(e,r,t,"style",Xn((function(n,t){return kn(n,"style",t)}),n)),Wn(e,r,t,"hspace",Xn(Rn,n)),Wn(e,r,t,"vspace",Xn(Bn,n)),Wn(e,r,t,"border",Xn(Mn,n)),Wn(e,r,t,"borderStyle",Xn(In,n)),qn(e,r,t)},Yn=function(n,t){var e=n.dom.styles.parse(t),r=dn(e),o=n.dom.styles.parse(n.dom.styles.serialize(r));return n.dom.styles.serialize(o)},$n=function(n){var t=n.selection.getNode(),e=n.dom.getParent(t,"figure.image");return e?n.dom.select("img",e)[0]:t&&("IMG"!==t.nodeName||vn(t))?null:t},Jn=function(n,t){var e=n.dom,r=v(n.schema.getTextBlockElements(),(function(t,e){return!n.schema.isValidChild(e,"figure")})),o=e.getParent(t.parentNode,(function(n){return b(r,n.nodeName)}),n.getBody());return o?e.split(o,t):t},Qn=function(n){var t=$n(n);return t?jn((function(t){return Yn(n,t)}),t):zn()},Zn=function(n,t){var e=Un((function(t){return Yn(n,t)}),t);n.dom.setAttrib(e,"data-mce-id","__mcenew"),n.focus(),n.selection.setContent(e.outerHTML);var r=n.dom.select('*[data-mce-id="__mcenew"]')[0];if(n.dom.setAttrib(r,"data-mce-id",null),Pn(r)){var o=Jn(n,r);n.selection.select(o)}else n.selection.select(r)},nt=function(n,t){n.dom.setAttrib(t,"src",t.getAttribute("src"))},tt=function(n,t){if(t){var e=n.dom.is(t.parentNode,"figure.image")?t.parentNode:t;n.dom.remove(e),n.focus(),n.nodeChanged(),n.dom.isEmpty(n.getBody())&&(n.setContent(""),n.selection.setCursorLocation())}},et=function(n,t){var e=$n(n);if(Kn((function(t){return Yn(n,t)}),t,e),nt(n,e),Pn(e.parentNode)){var r=e.parentNode;Jn(n,r),n.selection.select(e.parentNode)}else n.selection.select(e),gn(n,t,e)},rt=function(n,e){var r=$n(n);if(r){var o=jn((function(t){return Yn(n,t)}),r),i=t(t({},o),e);i.src?et(n,i):tt(n,r)}else e.src&&Zn(n,t(t({},zn()),e))},ot=Object.prototype.hasOwnProperty,it=function(n,t){var e=k(n)&&k(t);return e?at(n,t):t},ut=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var u in i)ot.call(i,u)&&(r[u]=n(r[u],i[u]))}return r}},at=ut(it),ct=function(n){return n.length>0},st=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),lt=tinymce.util.Tools.resolve("tinymce.util.Tools"),ft=function(n){return S(n.value)?n.value:""},dt=function(n){return S(n.text)?n.text:S(n.title)?n.title:""},mt=function(n,t){var e=[];return lt.each(n,(function(n){var r=dt(n);if(void 0!==n.menu){var o=mt(n.menu,t);e.push({text:r,items:o})}else{var i=t(n);e.push({text:r,value:i})}})),e},gt=function(n){return void 0===n&&(n=ft),function(t){return t?l.from(t).map((function(t){return mt(t,n)})):l.none()}},pt=function(n){return gt(ft)(n)},vt=function(n){return Object.prototype.hasOwnProperty.call(n,"items")},ht=function(n,t){return N(n,(function(n){return vt(n)?ht(n.items,t):n.value===t?l.some(n):l.none()}))},bt=function(n,t){return n.bind((function(n){return ht(n,t)}))},yt={sanitizer:gt,sanitize:pt,findEntry:bt},xt=function(n){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},wt={makeTab:xt},Ct=function(n){var t=yt.sanitizer((function(t){return n.convertURL(t.value||t.url,"src")})),e=new q((function(e){mn(n,(function(n){e(t(n).map((function(n){return B([[{text:"None",value:""}],n])})))}))})),r=yt.sanitize(Q(n)),o=Y(n),i=$(n),u=rn(n),a=on(n),c=Qn(n),s=Z(n),f=nn(n),d=K(n),m=tn(n),g=un(n),p=an(n),v=l.some(J(n)).filter((function(n){return S(n)&&n.length>0}));return e.then((function(n){return{image:c,imageList:n,classList:r,hasAdvTab:o,hasUploadTab:i,hasUploadUrl:u,hasUploadHandler:a,hasDescription:s,hasImageTitle:f,hasDimensions:d,hasImageCaption:m,prependURL:v,hasAccessibilityOptions:g,automaticUploads:p}}))},St=function(n){var t={name:"src",type:"urlinput",filetype:"image",label:"Source"},e=n.imageList.map((function(n){return{name:"images",type:"listbox",label:"Image list",items:n}})),r={name:"alt",type:"input",label:"Alternative description",disabled:n.hasAccessibilityOptions&&n.image.isDecorative},o={name:"title",type:"input",label:"Image title"},i={name:"dimensions",type:"sizeinput"},u={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},a=n.classList.map((function(n){return{name:"classes",type:"listbox",label:"Class",items:n}})),c={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]};return B([[t],e.toArray(),n.hasAccessibilityOptions&&n.hasDescription?[u]:[],n.hasDescription?[r]:[],n.hasImageTitle?[o]:[],n.hasDimensions?[i]:[],[{type:"grid",columns:2,items:B([a.toArray(),n.hasImageCaption?[c]:[]])}]])},kt=function(n){return{title:"General",name:"general",items:St(n)}},Ot={makeTab:kt,makeItems:St},Tt=function(n){var t=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:t}},Dt={makeTab:Tt},_t=function(n){return{prevImage:yt.findEntry(n.imageList,n.image.src),prevAlt:n.image.alt,open:!0}},At=function(n){return{src:{value:n.src,meta:{}},images:n.src,alt:n.alt,title:n.title,dimensions:{width:n.width,height:n.height},classes:n.class,caption:n.caption,style:n.style,vspace:n.vspace,border:n.border,hspace:n.hspace,borderstyle:n.borderStyle,fileinput:[],isDecorative:n.isDecorative}},Et=function(n,t){return{src:n.src.value,alt:0===n.alt.length&&t?null:n.alt,title:n.title,width:n.dimensions.width,height:n.dimensions.height,class:n.classes,style:n.style,caption:n.caption,hspace:n.hspace,vspace:n.vspace,border:n.border,borderStyle:n.borderstyle,isDecorative:n.isDecorative}},Rt=function(n,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?l.none():n.prependURL.bind((function(n){return t.substring(0,n.length)!==n?l.some(n+t):l.none()}))},Bt=function(n,t){var e=t.getData();Rt(n,e.src.value).each((function(n){t.setData({src:{value:n,meta:e.src.meta}})}))},Mt=function(n,t,e){n.hasDescription&&S(e.alt)&&(t.alt=e.alt),n.hasAccessibilityOptions&&(t.isDecorative=e.isDecorative||t.isDecorative||!1),n.hasImageTitle&&S(e.title)&&(t.title=e.title),n.hasDimensions&&(S(e.width)&&(t.dimensions.width=e.width),S(e.height)&&(t.dimensions.height=e.height)),S(e.class)&&yt.findEntry(n.classList,e.class).each((function(n){t.classes=n.value})),n.hasImageCaption&&D(e.caption)&&(t.caption=e.caption),n.hasAdvTab&&(S(e.style)&&(t.style=e.style),S(e.vspace)&&(t.vspace=e.vspace),S(e.border)&&(t.border=e.border),S(e.hspace)&&(t.hspace=e.hspace),S(e.borderstyle)&&(t.borderstyle=e.borderstyle))},It=function(n,t){var e=t.getData(),r=e.src.meta;if(void 0!==r){var o=at({},e);Mt(n,o,r),t.setData(o)}},Nt=function(n,t,e,r){var o=r.getData(),i=o.src.value,u=o.src.meta||{};u.width||u.height||!t.hasDimensions||(ct(i)?n.imageSize(i).then((function(n){e.open&&r.setData({dimensions:n})})).catch((function(n){return console.error(n)})):r.setData({dimensions:{width:"",height:""}}))},Pt=function(n,t,e){var r=e.getData(),o=yt.findEntry(n.imageList,r.src.value);t.prevImage=o,e.setData({images:o.map((function(n){return n.value})).getOr("")})},Ft=function(n,t,e,r){Bt(t,r),It(t,r),Nt(n,t,e,r),Pt(t,e,r)},Lt=function(n,t,e,r){var o=r.getData(),i=yt.findEntry(t.imageList,o.images);i.each((function(n){var t=""===o.alt||e.prevImage.map((function(n){return n.text===o.alt})).getOr(!1);t?""===n.value?r.setData({src:n,alt:e.prevAlt}):r.setData({src:n,alt:n.text}):r.setData({src:n})})),e.prevImage=i,Ft(n,t,e,r)},Ht=function(n){var t=n["margin-top"]&&n["margin-bottom"]&&n["margin-top"]===n["margin-bottom"];return t?ln(String(n["margin-top"])):""},zt=function(n){var t=n["margin-right"]&&n["margin-left"]&&n["margin-right"]===n["margin-left"];return t?ln(String(n["margin-right"])):""},Vt=function(n){return n["border-width"]?ln(String(n["border-width"])):""},Ut=function(n){return n["border-style"]?String(n["border-style"]):""},jt=function(n,t,e){return t(n(t(e)))},Wt=function(n,t,e){var r=dn(n(e.style)),o=at({},e);return o.vspace=Ht(r),o.hspace=zt(r),o.border=Vt(r),o.borderstyle=Ut(r),o.style=jt(n,t,r),o},Gt=function(n,t){var e=t.getData(),r=Wt(n.parseStyle,n.serializeStyle,e);t.setData(r)},qt=function(n,t,e){var r=at(At(t.image),e.getData()),o=Vn(n.normalizeCss,Et(r,!1));e.setData({style:o})},Xt=function(n,t,e,r){var o=r.getData();r.block("Uploading image"),I(o.fileinput).fold((function(){r.unblock()}),(function(o){var i=URL.createObjectURL(o),u=function(){r.unblock(),URL.revokeObjectURL(i)},a=function(o){r.setData({src:{value:o,meta:{}}}),r.showTab("general"),Ft(n,t,e,r)};pn(o).then((function(e){var c=n.createBlobCache(o,i,e);t.automaticUploads?n.uploadImage(c).then((function(n){a(n.url),u()})).catch((function(t){u(),n.alertErr(t)})):(n.addToBlobCache(c),a(c.blobUri()),r.unblock())}))}))},Kt=function(n,t,e){return function(r,o){"src"===o.name?Ft(n,t,e,r):"images"===o.name?Lt(n,t,e,r):"alt"===o.name?e.prevAlt=r.getData().alt:"style"===o.name?Gt(n,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?qt(n,t,r):"fileinput"===o.name?Xt(n,t,e,r):"isDecorative"===o.name&&(r.getData().isDecorative?r.disable("alt"):r.enable("alt"))}},Yt=function(n){return function(){n.open=!1}},$t=function(n){if(n.hasAdvTab||n.hasUploadUrl||n.hasUploadHandler){var t={type:"tabpanel",tabs:B([[Ot.makeTab(n)],n.hasAdvTab?[wt.makeTab(n)]:[],n.hasUploadTab&&(n.hasUploadUrl||n.hasUploadHandler)?[Dt.makeTab(n)]:[]])};return t}var e={type:"panel",items:Ot.makeItems(n)};return e},Jt=function(n){return function(t){var e=_t(t);return{title:"Insert/Edit Image",size:"normal",body:$t(t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:At(t.image),onSubmit:n.onSubmit(t),onChange:Kt(n,t,e),onClose:Yt(e)}}},Qt=function(n){return function(t){return function(e){var r=at(At(t.image),e.getData());n.execCommand("mceUpdateImage",!1,Et(r,t.hasAccessibilityOptions)),n.editorUpload.uploadImagesAuto(),e.close()}}},Zt=function(n){return function(t){return sn(n.documentBaseURI.toAbsolute(t)).then((function(n){return{width:String(n.width),height:String(n.height)}}))}},ne=function(n){return function(t,e,r){return n.editorUpload.blobCache.create({blob:t,blobUri:e,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,filename:t.name,base64:r.split(",")[1]})}},te=function(n){return function(t){n.editorUpload.blobCache.add(t)}},ee=function(n){return function(t){n.windowManager.alert(t)}},re=function(n){return function(t){return Yn(n,t)}},oe=function(n){return function(t){return n.dom.parseStyle(t)}},ie=function(n){return function(t,e){return n.dom.serializeStyle(t,e)}},ue=function(n){return function(t){return st(n).upload([t],!1).then((function(n){return 0===n.length?q.reject("Failed to upload image"):!1===n[0].status?q.reject(n[0].error):n[0]}))}},ae=function(n){var t={onSubmit:Qt(n),imageSize:Zt(n),addToBlobCache:te(n),createBlobCache:ne(n),alertErr:ee(n),normalizeCss:re(n),parseStyle:oe(n),serializeStyle:ie(n),uploadImage:ue(n)},e=function(){Ct(n).then(Jt(t)).then(n.windowManager.open)};return{open:e}},ce=function(n){n.addCommand("mceImage",ae(n).open),n.addCommand("mceUpdateImage",(function(t,e){n.undoManager.transact((function(){return rt(n,e)}))}))},se=function(n){var t=n.attr("class");return t&&/\bimage\b/.test(t)},le=function(n){return function(t){var e=t.length,r=function(t){t.attr("contenteditable",n?"true":null)};while(e--){var o=t[e];se(o)&&(o.attr("contenteditable",n?"false":null),lt.each(o.getAll("figcaption"),r))}}},fe=function(n){n.on("PreInit",(function(){n.parser.addNodeFilter("figure",le(!0)),n.serializer.addNodeFilter("figure",le(!1))}))},de=function(n){n.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ae(n).open,onSetup:function(t){return n.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",t.setActive).unbind}}),n.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ae(n).open}),n.ui.registry.addContextMenu("image",{update:function(n){return Pn(n)||Fn(n)&&!vn(n)?["image"]:[]}})};function me(){n.add("image",(function(n){fe(n),de(n),ce(n)}))}me()})()},e8b0:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){return n},e=function(){return e=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},e.apply(this,arguments)},r="\ufeff",o=function(n){return n.replace(/\uFEFF/g,"")},i=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},u="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",a={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\ufeff-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:u},c={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},s=[new RegExp(a.aletter),new RegExp(a.midnumlet),new RegExp(a.midletter),new RegExp(a.midnum),new RegExp(a.numeric),new RegExp(a.cr),new RegExp(a.lf),new RegExp(a.newline),new RegExp(a.extend),new RegExp(a.format),new RegExp(a.katakana),new RegExp(a.extendnumlet),new RegExp("@")],l="",f=new RegExp("^"+a.punctuation+"$"),d=/^\s+$/,m=s,g=c.OTHER,p=function(n){for(var t=g,e=m.length,r=0;r<e;++r){var o=m[r];if(o&&o.test(n)){t=r;break}}return t},v=function(n){var t={};return function(e){if(t[e])return t[e];var r=n(e);return t[e]=r,r}},h=function(n){var t=v(p);return i(n,t)},b=function(n,t){var e=n[t],r=n[t+1];if(t<0||t>n.length-1&&0!==t)return!1;if(e===c.ALETTER&&r===c.ALETTER)return!1;var o=n[t+2];if(e===c.ALETTER&&(r===c.MIDLETTER||r===c.MIDNUMLET||r===c.AT)&&o===c.ALETTER)return!1;var i=n[t-1];return(e!==c.MIDLETTER&&e!==c.MIDNUMLET&&r!==c.AT||r!==c.ALETTER||i!==c.ALETTER)&&((e!==c.NUMERIC&&e!==c.ALETTER||r!==c.NUMERIC&&r!==c.ALETTER)&&((e!==c.MIDNUM&&e!==c.MIDNUMLET||r!==c.NUMERIC||i!==c.NUMERIC)&&((e!==c.NUMERIC||r!==c.MIDNUM&&r!==c.MIDNUMLET||o!==c.NUMERIC)&&(e!==c.EXTEND&&e!==c.FORMAT&&i!==c.EXTEND&&i!==c.FORMAT&&r!==c.EXTEND&&r!==c.FORMAT&&((e!==c.CR||r!==c.LF)&&(e===c.NEWLINE||e===c.CR||e===c.LF||(r===c.NEWLINE||r===c.CR||r===c.LF||(e!==c.KATAKANA||r!==c.KATAKANA)&&((r!==c.EXTENDNUMLET||e!==c.ALETTER&&e!==c.NUMERIC&&e!==c.KATAKANA&&e!==c.EXTENDNUMLET)&&((e!==c.EXTENDNUMLET||r!==c.ALETTER&&r!==c.NUMERIC&&r!==c.KATAKANA)&&e!==c.AT)))))))))},y=l,x=d,w=f,C=function(n){return"http"===n||"https"===n},S=function(n,t){var e;for(e=t;e<n.length;e++)if(x.test(n[e]))break;return e},k=function(n,t){var e=S(n,t+1),r=n.slice(t+1,e).join(y);return"://"===r.substr(0,3)?e:t},O=function(n,t,e,r){for(var o=[],i=[],u=0;u<e.length;++u)if(i.push(n[u]),b(e,u)){var a=t[u];if((r.includeWhitespace||!x.test(a))&&(r.includePunctuation||!w.test(a))){var c=u-i.length+1,s=u+1,l=t.slice(c,s).join(y);if(C(l)){var f=k(t,u),d=n.slice(s,f);Array.prototype.push.apply(i,d),u=f}o.push(i)}i=[]}return o},T=function(){return{includeWhitespace:!1,includePunctuation:!1}},D=function(n,t,o){o=e(e({},T()),o);for(var i=[],u=[],a=0;a<n.length;a++){var c=t(n[a]);c!==r&&(i.push(n[a]),u.push(c))}var s=h(u);return O(i,u,s,o)},_=D,A=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),E=function(n,t){var e=t.getBlockElements(),r=t.getShortEndedElements(),i=function(n){return e[n.nodeName]||r[n.nodeName]},u=[],a="",c=new A(n,n);while(n=c.next())3===n.nodeType?a+=o(n.data):i(n)&&a.length&&(u.push(a),a="");return a.length&&u.push(a),u},R=function(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},B=function(n,e){var r=E(n,e).join("\n");return _(r.split(""),t).length},M=function(n,t){var e=E(n,t).join("");return R(e)},I=function(n,t){var e=E(n,t).join("").replace(/\s/g,"");return R(e)},N=function(n,t){return function(){return t(n.getBody(),n.schema)}},P=function(n,t){return function(){return t(n.selection.getRng().cloneContents(),n.schema)}},F=function(n){return N(n,B)},L=function(n){return{body:{getWordCount:F(n),getCharacterCount:N(n,M),getCharacterCountWithoutSpaces:N(n,I)},selection:{getWordCount:P(n,B),getCharacterCount:P(n,M),getCharacterCountWithoutSpaces:P(n,I)},getCount:F(n)}},H=tinymce.util.Tools.resolve("tinymce.util.Delay"),z=function(n,t){n.fire("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})},V=function(n,t){z(n,t)},U=function(n,t,e){var r=H.debounce((function(){return V(n,t)}),e);n.on("init",(function(){V(n,t),H.setEditorTimeout(n,(function(){n.on("SetContent BeforeAddUndo Undo Redo keyup",r)}),0)}))},j=function(n,t){n.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},W=function(n,t){n.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return j(n,t)}}),n.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return j(n,t)}})};function G(t){void 0===t&&(t=300),n.add("wordcount",(function(n){var e=L(n);return W(n,e),U(n,e,t),e}))}G()})()},ef1f:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n,t){n.focus(),n.undoManager.transact((function(){n.setContent(t)})),n.selection.setCursorLocation(),n.nodeChanged()},e=function(n){return n.getContent({source_view:!0})},r=function(n){var r=e(n);n.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:r},onSubmit:function(e){t(n,e.getData().code),e.close()}})},o=function(n){n.addCommand("mceCodeEditor",(function(){r(n)}))},i=function(n){n.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(n)}}),n.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(n)}})};function u(){n.add("code",(function(n){return o(n),i(n),{}}))}u()})()},f557:function(n,t,e){e("5e4c")},fef7:function(n,t,e){"use strict";var r=e("3351"),o=e.n(r);o.a}}]);
//# sourceMappingURL=chunk-3555581c.b3565ea7.js.map